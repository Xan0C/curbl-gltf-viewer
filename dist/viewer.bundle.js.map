{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/curbl-ecs/lib/index.js","webpack:///../node_modules/eventemitter3/index.js","webpack:///../node_modules/curbl-ecs/lib/Events.js","webpack:///../node_modules/curbl-ecs/lib/ECS.js","webpack:///../node_modules/curbl-ecs/lib/Component.js","webpack:///../node_modules/curbl-ecs/lib/Entity.js","webpack:///../node_modules/curbl-ecs/lib/System.js","webpack:///../node_modules/curbl-ecs/lib/EntityComponentManager.js","webpack:///../node_modules/curbl-ecs/lib/UUIDGenerator.js","webpack:///../node_modules/curbl-ecs/lib/EntitySystemManager.js","webpack:///../node_modules/curbl-ecs/lib/InjectorService.js","webpack:///../../src/viewer/constants.ts","webpack:///../../../src/gl/gl_util/defaultValue.ts","webpack:///../../../src/gl/gl_util/glGet.ts","webpack:///../../../src/gl/gl_util/mapSize.ts","webpack:///../../../src/gl/gl_util/mapType.ts","webpack:///../../../src/gl/gl_util/webglUtil.ts","webpack:///../../../src/gl/gl_util/index.ts","webpack:///../../src/canvas/Canvas.ts","webpack:///../node_modules/curbl-loader/lib/EmitSignal.js","webpack:///../node_modules/curbl-loader/lib/Resource.js","webpack:///../node_modules/curbl-loader/lib/Middleware.js","webpack:///../node_modules/curbl-loader/lib/AsyncWorkerQueue.js","webpack:///../node_modules/curbl-loader/lib/ResourceLoader.js","webpack:///../node_modules/curbl-loader/lib/index.js","webpack:///../../../src/gl/constants/GLConstants.ts","webpack:///../../src/gl/GLTexture.ts","webpack:///../../src/gl/GLCubemap.ts","webpack:///../../../src/gl/constants/index.ts","webpack:///../../src/gl/GLBuffer.ts","webpack:///../../src/gl/GLVertexArrayObject.ts","webpack:///../node_modules/gl-matrix/esm/common.js","webpack:///../node_modules/gl-matrix/esm/mat4.js","webpack:///../node_modules/gl-matrix/esm/mat3.js","webpack:///../node_modules/gl-matrix/esm/vec3.js","webpack:///../node_modules/gl-matrix/esm/vec4.js","webpack:///../node_modules/gl-matrix/esm/quat.js","webpack:///../node_modules/gl-matrix/esm/index.js","webpack:///../../src/gl/GLCube.ts","webpack:///../../src/gl/GLFramebuffer.ts","webpack:///../../src/gl/GLQuad.ts","webpack:///../../src/gl/GLSphere.ts","webpack:///../../src/gl/GLUniformBufferObject.ts","webpack:///../../../src/gl/shader/GLAttribute.ts","webpack:///../../../src/gl/shader/programCompiler.ts","webpack:///../../../src/gl/shader/uniform.ts","webpack:///../../../src/gl/shader/GLShader.ts","webpack:///../../../src/gl/shader/index.ts","webpack:///../../src/gl/index.ts","webpack:///../../src/cache/cache.ts","webpack:///../../src/events/EmitSignal.ts","webpack:///../../../src/cache/caches/baseCache.ts","webpack:///../../../src/cache/caches/index.ts","webpack:///../../src/cache/index.ts","webpack:///../../src/loader/CubemapLoader.ts","webpack:///../../src/loader/TextureLoader.ts","webpack:///../../src/material/material.ts","webpack:///../../src/material/materialmap.ts","webpack:///../../src/material/metallicRoughness.ts","webpack:///../../src/material/index.ts","webpack:///../../src/gltf/GLTFMaterialProcessor.ts","webpack:///../../src/scene/mesh.ts","webpack:///../../src/scene/scene.ts","webpack:///../../src/scene/sceneNode.ts","webpack:///../../src/scene/shader.ts","webpack:///../../src/scene/transform.ts","webpack:///../../../src/scene/animation/animation.ts","webpack:///../../../src/scene/animation/animationChannel.ts","webpack:///../../../src/scene/animation/animationSampler.ts","webpack:///../../../src/scene/animation/index.ts","webpack:///../../../src/scene/data/accessor.ts","webpack:///../../../src/scene/data/bufferView.ts","webpack:///../../../src/scene/data/index.ts","webpack:///../../../src/scene/primitive/primitive.ts","webpack:///../../../src/scene/primitive/index.ts","webpack:///../../../src/scene/skin/skin.ts","webpack:///../../../src/scene/skin/index.ts","webpack:///../../src/scene/index.ts","webpack:///../../src/gltf/GLTFMeshProcessor.ts","webpack:///../../src/gltf/GLTFNodeProcessor.ts","webpack:///../../src/gltf/GLTFAccessorProcessor.ts","webpack:///../../src/gltf/GLTFSkinProcessor.ts","webpack:///../../src/gltf/GLTFAnimationProcessor.ts","webpack:///../../src/gltf/GLTFSceneProcessor.ts","webpack:///../../src/gltf/GLTFModel.ts","webpack:///../../src/gltf/Base64Binary.ts","webpack:///../../src/gltf/GLTFParser.ts","webpack:///../../src/loader/GLTFLoader.ts","webpack:///../../src/loader/GLSLLoader.ts","webpack:///../../src/shader/khronosPbrShader.ts","webpack:///../../src/shader/SkyboxShader.ts","webpack:///../../../src/systems/rendering/SkyboxPass.ts","webpack:///../../../src/components/camera/cameraComponent.ts","webpack:///../../../src/components/camera/lookAtCameraComponent.ts","webpack:///../../../src/components/camera/index.ts","webpack:///../../../src/components/gui/GUIComponent.ts","webpack:///../../../src/components/gui/index.ts","webpack:///../../src/math/color.ts","webpack:///../../src/math/math.ts","webpack:///../../src/math/index.ts","webpack:///../../../src/components/light/lightComponent.ts","webpack:///../../../src/components/light/index.ts","webpack:///../../../src/components/renderer/skyboxComponent.ts","webpack:///../../../src/components/renderer/index.ts","webpack:///../../../src/components/scene/animationComponent.ts","webpack:///../../../src/components/scene/sceneComponent.ts","webpack:///../../../src/components/scene/index.ts","webpack:///../../../src/components/transform/transformComponent.ts","webpack:///../../../src/components/transform/index.ts","webpack:///../../src/components/index.ts","webpack:///../../../src/systems/rendering/ForwardScenePass.ts","webpack:///../../../src/systems/rendering/ForwardLightPass.ts","webpack:///../../../src/systems/rendering/ForwardShadingSystem.ts","webpack:///../../../src/systems/rendering/PrePass.ts","webpack:///../src/dat/color/toString.js","webpack:///../src/dat/utils/common.js","webpack:///../src/dat/color/interpret.js","webpack:///../src/dat/color/math.js","webpack:///../src/dat/color/Color.js","webpack:///../src/dat/controllers/Controller.js","webpack:///../src/dat/dom/dom.js","webpack:///../src/dat/controllers/BooleanController.js","webpack:///../src/dat/controllers/OptionController.js","webpack:///../src/dat/controllers/StringController.js","webpack:///../src/dat/controllers/NumberController.js","webpack:///../src/dat/controllers/NumberControllerBox.js","webpack:///../src/dat/controllers/NumberControllerSlider.js","webpack:///../src/dat/controllers/FunctionController.js","webpack:///../src/dat/controllers/ColorController.js","webpack:///../src/dat/utils/css.js","webpack:///../src/dat/gui/saveDialogue.html.js","webpack:///../src/dat/controllers/ControllerFactory.js","webpack:///../src/dat/utils/requestAnimationFrame.js","webpack:///../src/dat/dom/CenteredDiv.js","webpack:///../src/dat/gui/GUI.js","webpack:///../src/dat/index.js","webpack:///../../../src/systems/gui/GUISystem.ts","webpack:///../../src/events/DomEvents.ts","webpack:///../../../src/systems/camera/LookAtCameraControlSystem.ts","webpack:///../../../src/systems/camera/CameraSystem.ts","webpack:///../../../src/systems/animation/AnimationSystem.ts","webpack:///../../../src/systems/world/worldScene.ts","webpack:///../../../src/systems/world/worldSystem.ts","webpack:///../../src/viewer/Viewer.ts","webpack:///../../src/viewer/index.ts","webpack:///../../src/canvas/index.ts","webpack:///../../src/events/index.ts","webpack:///../../../src/gltf/model/GLTF_Material.ts","webpack:///../../../src/gltf/model/index.ts","webpack:///../../src/gltf/index.ts","webpack:///../../src/loader/index.ts","webpack:///../../src/shader/index.ts","webpack:///../../../src/systems/animation/index.ts","webpack:///../../../src/systems/camera/index.ts","webpack:///../../../src/systems/gui/index.ts","webpack:///../../../src/systems/rendering/index.ts","webpack:///../../../src/systems/world/index.ts","webpack:///../../src/systems/index.ts","webpack:///../src/index.ts","webpack:///./src/scenes/EnvironmentScene.ts","webpack:///./src/scenes/ModelScene.ts","webpack:///./src/example.ts","webpack:///./src/index.ts"],"names":["__export","m","p","exports","hasOwnProperty","Object","defineProperty","value","require","has","prototype","prefix","Events","create","__proto__","EE","fn","context","once","addListener","emitter","event","TypeError","listener","evt","_events","_eventsCount","push","clearEvent","EventEmitter","eventNames","names","events","name","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","len","arguments","args","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","module","ESM_EVENTS","SYSTEM_EVENTS","ECM_EVENTS","Entity_1","EntityComponentManager_1","Component_1","System_1","EntitySystemManager_1","InjectorService_1","Events_1","ECS","componentBitmaskMap","ComponentBitmaskMap","ecm","EntityComponentManager","scm","EntitySystemManager","registerEvents","ENTITY_ADDED","onEntityAdded","ENTITY_REMOVED","onEntityRemoved","ENTITY_DESTROYED","onEntityDestroyed","COMPONENT_ADDED","onComponentAdded","COMPONENT_REMOVED","onComponentRemoved","SYSTEM_ADDED","onSystemAdded","entity","instance","updateEntity","removeEntity","system","id","entities","get","_instance","enumerable","configurable","setPrototypeOf","obj","proto","InjectorService","noop","createEntity","components","addEntity","getEntities","_i","_a","removeAllEntities","destroyEntity","pool","destroyAllEntities","hasEntity","removeComponent","component","addComponent","addSystem","componentMask","add","hasSystem","hasSystemOf","constructor","hasOf","removeSystem","remove","removeSystemOf","removeOf","getSystemComponentMaskOf","getComponentMaskOf","removeEntityFromSystem","getSystem","update","a6","a7","a8","a9","callSystemMethod","functionName","createComponentsFromDecorator","comps","components_1","dec","config","Component","DecoratorComponent","bind","getPrototypeOf","injectComponent","System","DecoratorSystem","injectSystem","systemUpdateMethods","updateBitmask","Entity","DecoratorEntity","injectEntity","uuid","set","methods","ECS_1","bitmaskMap","size","keys","COMPONENT_PROPERTIES","COMPONENT_PROTOTYPE","init","COMPONENT_PROPERTY_DECORATOR","propKey","protoKey","ENTITY_PROPERTIES","bitmask","ENTITY_PROTOTYPE","getAll","dispose","destroy","ENTITY_PROPERTY_DECORATOR","SYSTEM_PROTOTYPE","setUp","tearDown","SYSTEM_PROPERTIES","SYSTEM_PROPERTY_DECORATOR","updateMethods","indexOf","fromECS","UUIDGenerator_1","UUIDGenerator","_uuid","componentBitmask","_entities","updateComponentBitmask","key","silent","comp","replace","Math","random","toString","_systemUpdateMethods","systems","ids","console","warn","SYSTEM_REMOVED","splice","getEntitiesOf","system_1","ENTITY_ADDED_TO_SYSTEM","idx","system_2","ENTITY_REMOVED_FROM_SYSTEM","addEntityToSystem","system_3","method","updateSystemMethods","wrapper","DecoratorInjector","object","EmitSignal","type","_type","_emitter","dispatch","addOnce","__assign","assign","t","s","n","RESOURCE_EVENT","LOAD_TYPE","Resource","options","url","loadType","XHR","responseType","onProgress","PROGRESS","onLoadStart","LOAD_START","onLoadFinished","LOAD_COMPLETE","onError","ERROR","onAbort","ABORT","onTimeout","TIMEOUT","loadXhr","_this","request","XMLHttpRequest","timeout","open","async","addEventListener","send","loadImage","image","Image","width","height","error","crossOrigin","_determineCrossOrigin","src","window","origin","location","loc","tempAnchor","document","createElement","href","samePort","port","protocol","host","hostname","load","IMAGE","abort","HTMLImageElement","RESOURCE_LOADER_EVENTS","RESOURCE_LOADER_PROPERTIES","onLoad","RESOURCE_LOADER_PROTOTYPE","transform","Middleware","addResourceToQueue","_queueCallback","inject","middleware","resources","resource","_loader","_addResourceToQueue","onResourcesLoaded","onResourcesLoadedContext","data","map","_noop","AsyncWorkerQueue","concurrency","paused","processes","workers","tasks","process","finishCb","_loop_1","task","this_1","shift","listenerContext","next","processContext","enqueue","worker","count","onWorkFinished","completed","dequeue","index","k","taskIndex","idle","workerFinished","onQueueFinished","onWorkFinishedContext","stop","pause","resume","LOADER_EVENTS","ResourceLoader","resourceQueue","_preSignal","PRE","_afterSignal","AFTER","onLoadComplete","onComplete","LOADER_FINISHED","_callAfter","addMiddleware","removeMiddleware","_onResourceLoadStart","forEach","pre","cb","after","_onLoadComplete","EPSILON","ARRAY_TYPE","Float32Array","RANDOM","setMatrixArrayType","degree","PI","toRadian","a","equals","b","abs","max","out","glMatrix","clone","copy","fromValues","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","adjoint","determinant","multiply","b0","b1","b2","b3","translate","v","x","y","z","scale","rotate","rad","axis","sqrt","c","b12","b20","b21","b22","sin","cos","rotateX","rotateY","rotateZ","fromTranslation","fromScaling","fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","q","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","fromQuat","yx","zx","zy","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspective","fovy","aspect","f","tan","Infinity","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","target","str","frob","pow","subtract","multiplyScalar","multiplyScalarAndAdd","exactEquals","a0","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","mul","sub","fromMat4","fromMat2d","normalFromMat4","projection","divide","ceil","floor","min","round","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","normalize","dot","cross","lerp","hermite","d","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","r","zScale","transformMat4","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","angle","tempA","tempB","cosine","acos","zero","div","dist","sqrDist","sqrLen","vec","stride","offset","arg","u","A","B","C","D","E","F","G","H","I","J","v1","v2","v3","v4","s1","s2","ix","iy","iz","iw","setAxisAngle","getAxisAngle","out_axis","calculateW","slerp","omega","cosom","sinom","scale0","scale1","u1","u2","u3","sqrt1MinusU1","sqrtU1","invDot","conjugate","fromMat3","fTrace","fRoot","fromEuler","halfToRad","cx","cy","cz","vec4","rotationTo","tmpvec3","vec3","xUnitVec3","yUnitVec3","sqlerp","temp1","temp2","setAxes","matr","mat3","view","colorFormat","color","g","h","forceCSSHex","ARR_EACH","ARR_SLICE","Common","toCall","itr","func","callNow","callImmediately","setTimeout","isNaN","INTERPRETATIONS","common","test","original","parseInt","parseFloat","result","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hi","delta","hex","componentIndex","Color","colorToString","math","defineRGBComponent","defineHSVComponent","Controller","fnc","newValue","EVENT_MAP","EVENT_MAP_INV","CSS_VALUE_PIXELS","val","match","dom","elem","selectable","vertical","horizontal","params","pars","className","clientX","clientY","bool","newBool","classes","style","getComputedStyle","cssValueToPixels","BooleanController","OptionController","opt","desiredValue","StringController","e","_x","NumberController","_params","numDecimals","_v","minValue","maxValue","stepValue","tenTo","NumberControllerBox","prevY","attempted","diff","roundToDecimal","o1","o2","i2","NumberControllerSlider","step","bgRect","pct","FunctionController","text","ColorController","valueField","fieldRect","mismatch","flip","_flip","vendors","css","doc","indoc","link","injected","head","saveDialogContents","ControllerFactory","initialValue","CenteredDiv","hide","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","DEFAULT_WIDTH","autoPlace","preset","useLocalStorage","localStorage","getLocalStorageHash","saveToLocalStorage","titleRow","savedGui","JSON","titleRowName","addRow","onClickTitle","root","controller","newGuiParams","parent","gui","li","folder","node","getCurrentPreset","element","nextSibling","box","pc","pb","oldName","wasListening","newController","matchedIndex","controllerMap","presetMap","factoryArgs","container","gears","button","button2","button3","select","explain","localStorageCheckBox","saveLocally","newConstructorTextArea","presetName","prompt","pmouseX","savedValues","useInitialValues","controllerArray","controllers","EnvironmentScene","preload","loader","CubemapLoader","GLOBAL_TEXTURES","SKYBOX","front","back","DIFFUSE_ENVIRONMENT","premultiplyAlpha","internalFormat","GL_INTERNALFORMAT","SRGB8_ALPHA8","format","RGBA","GL_TYPES","UNSIGNED_BYTE","specular_map","SPECULAR_ENVIRONMENT","TextureLoader","BRDF_LUT","sampler","magFilter","MAG_FILTER","LINEAR","minFilter","MIN_FILTER","wrapS","TEXTURE_WRAP","CLAMP_TO_EDGE","wrapT","lightComponent","LightComponent","lightColor","lightScale","lightRotation","lightPitch","GUIComponent","properties","prop","propName","isColor","onChange","updateLight","shutdown","WorldScene","ModelScene","gltfJson","gltfBin","shader","GLTFLoader","sceneObj","cache","CACHE_TYPE","SCENE","unload","initializeDefines","meshes","upload","scene","SceneComponent","TransformComponent","position","rotation","animations","animationKey","AnimationComponent","sampleModels","Example","camera","viewer","Viewer","innerWidth","innerHeight","createSceneSelector","createCamera","world","addScene","start","reloadModelScene","removeScene","CameraComponent","LookAtCameraComponent","onResize","mat4","projMatrix","items","onload"],"mappings":"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","file":"viewer.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./Component\"));\r\n__export(require(\"./ECS\"));\r\n__export(require(\"./Entity\"));\r\n__export(require(\"./EntityComponentManager\"));\r\n__export(require(\"./EntitySystemManager\"));\r\n__export(require(\"./InjectorService\"));\r\n__export(require(\"./System\"));\r\n__export(require(\"./UUIDGenerator\"));\r\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ESM_EVENTS;\r\n(function (ESM_EVENTS) {\r\n    ESM_EVENTS[\"SYSTEM_ADDED\"] = \"entitySystemManager.systemAdded\";\r\n    ESM_EVENTS[\"SYSTEM_REMOVED\"] = \"entitySystemManager.systemRemoved\";\r\n    ESM_EVENTS[\"ENTITY_ADDED_TO_SYSTEM\"] = \"entitySystemManager.entityAddedToSystem\";\r\n    ESM_EVENTS[\"ENTITY_REMOVED_FROM_SYSTEM\"] = \"entitySystemManager.entityRemovedFromSystem\";\r\n})(ESM_EVENTS = exports.ESM_EVENTS || (exports.ESM_EVENTS = {}));\r\nvar SYSTEM_EVENTS;\r\n(function (SYSTEM_EVENTS) {\r\n    SYSTEM_EVENTS[\"ENTITY_ADDED\"] = \"system.entityAdded\";\r\n    SYSTEM_EVENTS[\"ENTITY_REMOVED\"] = \"system.entityRemoved\";\r\n})(SYSTEM_EVENTS = exports.SYSTEM_EVENTS || (exports.SYSTEM_EVENTS = {}));\r\nvar ECM_EVENTS;\r\n(function (ECM_EVENTS) {\r\n    ECM_EVENTS[\"ENTITY_ADDED\"] = \"entityComponentManager.entityAdded\";\r\n    ECM_EVENTS[\"ENTITY_REMOVED\"] = \"entityComponentManager.entityRemoved\";\r\n    ECM_EVENTS[\"ENTITY_DESTROYED\"] = \"entityComponentManager.entityDestroyed\";\r\n    ECM_EVENTS[\"COMPONENT_ADDED\"] = \"entityComponentManager.componentAdded\";\r\n    ECM_EVENTS[\"COMPONENT_REMOVED\"] = \"entityComponentManager.componentRemoved\";\r\n})(ECM_EVENTS = exports.ECM_EVENTS || (exports.ECM_EVENTS = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Entity_1 = require(\"./Entity\");\r\nvar EntityComponentManager_1 = require(\"./EntityComponentManager\");\r\nvar Component_1 = require(\"./Component\");\r\nvar System_1 = require(\"./System\");\r\nvar EntitySystemManager_1 = require(\"./EntitySystemManager\");\r\nvar InjectorService_1 = require(\"./InjectorService\");\r\nvar EventEmitter = require(\"eventemitter3\");\r\nvar Events_1 = require(\"./Events\");\r\nvar ECS = /** @class */ (function () {\r\n    function ECS() {\r\n        this.componentBitmaskMap = new Component_1.ComponentBitmaskMap();\r\n        this.events = new EventEmitter();\r\n        this.ecm = new EntityComponentManager_1.EntityComponentManager(this.componentBitmaskMap, this.events);\r\n        this.scm = new EntitySystemManager_1.EntitySystemManager(this.componentBitmaskMap, this.events);\r\n        this.registerEvents();\r\n    }\r\n    ECS.prototype.registerEvents = function () {\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.ENTITY_ADDED, this.onEntityAdded);\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.ENTITY_REMOVED, this.onEntityRemoved);\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.ENTITY_DESTROYED, this.onEntityDestroyed);\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.COMPONENT_ADDED, this.onComponentAdded);\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.COMPONENT_REMOVED, this.onComponentRemoved);\r\n        this.scm.events.on(Events_1.ESM_EVENTS.SYSTEM_ADDED, this.onSystemAdded);\r\n    };\r\n    ECS.prototype.onEntityAdded = function (entity) {\r\n        ECS.instance.scm.updateEntity(entity);\r\n    };\r\n    ECS.prototype.onEntityRemoved = function (entity) {\r\n        ECS.instance.scm.removeEntity(entity);\r\n    };\r\n    ECS.prototype.onEntityDestroyed = function (entity) {\r\n        ECS.instance.scm.removeEntity(entity);\r\n    };\r\n    ECS.prototype.onComponentAdded = function (entity) {\r\n        ECS.instance.scm.updateEntity(entity);\r\n    };\r\n    ECS.prototype.onComponentRemoved = function (entity) {\r\n        ECS.instance.scm.updateEntity(entity);\r\n    };\r\n    ECS.prototype.onSystemAdded = function (system) {\r\n        for (var id in ECS.instance.ecm.entities) {\r\n            ECS.instance.scm.updateEntity(ECS.instance.ecm.entities[id], system);\r\n        }\r\n    };\r\n    Object.defineProperty(ECS, \"instance\", {\r\n        get: function () {\r\n            if (ECS._instance) {\r\n                return ECS._instance;\r\n            }\r\n            return ECS._instance = new ECS();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ECS.setPrototypeOf = function (obj, proto) {\r\n        //@ts-ignore\r\n        var fn = Object.setPrototypeOf || function (obj, proto) {\r\n            obj.__proto__ = proto;\r\n            return obj;\r\n        };\r\n        return fn(obj, proto);\r\n    };\r\n    Object.defineProperty(ECS, \"Injector\", {\r\n        get: function () {\r\n            return InjectorService_1.InjectorService.instance;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ECS.noop = function () { };\r\n    /**\r\n     * create an entity\r\n     * @param entity {optional} - use existing entity\r\n     * @param components {optional} - components to add to the entity if provided this will override the current components of the entity if any\r\n     */\r\n    ECS.createEntity = function (entity, components) {\r\n        return ECS.instance.ecm.createEntity(entity, components);\r\n    };\r\n    /**\r\n     * adds the Entity with the provided components(or existing ones) to the ECS\r\n     * @param entity - Entity to add to the ECS\r\n     * @param components - Components for the entity, if provided this will override the current components of the entity if any\r\n     */\r\n    ECS.addEntity = function (entity, components) {\r\n        return ECS.instance.ecm.addEntity(entity, components);\r\n    };\r\n    /**\r\n     * Return a list of entities with the specified components\r\n     * since we need to check all entities this can be quite slow\r\n     * @param components - list of components the entity needs to have\r\n     */\r\n    ECS.getEntities = function () {\r\n        var components = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            components[_i] = arguments[_i];\r\n        }\r\n        var _a;\r\n        return (_a = ECS.instance.ecm).getEntities.apply(_a, components);\r\n    };\r\n    /**\r\n     * removes the entity from the ECS, it will keep all of its components\r\n     * @param entity - Entity to remove\r\n     * @returns {IEntity}\r\n     */\r\n    ECS.removeEntity = function (entity) {\r\n        return ECS.instance.ecm.removeEntity(entity);\r\n    };\r\n    /**\r\n     * removes all entities from the ecs\r\n     */\r\n    ECS.removeAllEntities = function () {\r\n        return ECS.instance.ecm.removeAllEntities();\r\n    };\r\n    /**\r\n     * destroy an entity removes it from the ecs and removes all components\r\n     * usually you want to use removeEntity and let the garbage collector do its job\r\n     * @param entity - entity to destroy\r\n     * @param pool - wether or not to add the entity to the ObjectPool(default: true)\r\n     */\r\n    ECS.destroyEntity = function (entity, pool) {\r\n        return ECS.instance.ecm.destroyEntity(entity, pool);\r\n    };\r\n    /**\r\n     * remove all components and entities from the ecs\r\n     * usually you want to use removeAllEntities and let the garbage collector do its job\r\n     */\r\n    ECS.destroyAllEntities = function () {\r\n        return ECS.instance.ecm.destroyAllEntities();\r\n    };\r\n    ECS.hasEntity = function (entity) {\r\n        return ECS.instance.ecm.hasEntity(entity);\r\n    };\r\n    ECS.removeComponent = function (entity, component) {\r\n        return ECS.instance.ecm.removeComponent(entity, component);\r\n    };\r\n    ECS.addComponent = function (entity, component) {\r\n        return ECS.instance.ecm.addComponent(entity, component);\r\n    };\r\n    ECS.addSystem = function (system, componentMask) {\r\n        return ECS.instance.scm.add(system, componentMask);\r\n    };\r\n    ECS.hasSystem = function (system) {\r\n        return ECS.instance.scm.has(system);\r\n    };\r\n    ECS.hasSystemOf = function (constructor) {\r\n        return ECS.instance.scm.hasOf(constructor);\r\n    };\r\n    ECS.removeSystem = function (system) {\r\n        return ECS.instance.scm.remove(system);\r\n    };\r\n    ECS.removeSystemOf = function (constructor) {\r\n        return ECS.instance.scm.removeOf(constructor);\r\n    };\r\n    ECS.getSystemComponentMaskOf = function (constructor) {\r\n        return ECS.instance.scm.getComponentMaskOf(constructor);\r\n    };\r\n    ECS.removeEntityFromSystem = function (entity, system) {\r\n        ECS.instance.scm.removeEntity(entity, system);\r\n    };\r\n    ECS.getSystem = function (constructor) {\r\n        return ECS.instance.scm.get(constructor);\r\n    };\r\n    ECS.update = function (a1, a2, a3, a4, a5, a6, a7, a8, a9) {\r\n        ECS.instance.scm.update(a1, a2, a3, a4, a5, a6, a7, a8, a9);\r\n    };\r\n    /**\r\n     * Calls a specific method for all systems (e.g. update)\r\n     * @param functionName - name of the function to be called\r\n     */\r\n    ECS.callSystemMethod = function (functionName) {\r\n        ECS.instance.scm.callSystemMethod(functionName);\r\n    };\r\n    ECS.createComponentsFromDecorator = function (components) {\r\n        var comps = Object.create(null);\r\n        var component;\r\n        for (var _i = 0, components_1 = components; _i < components_1.length; _i++) {\r\n            var dec = components_1[_i];\r\n            component = new dec.component(dec.config);\r\n            comps[component.id] = component;\r\n        }\r\n        return comps;\r\n    };\r\n    ECS.Component = function (id) {\r\n        return function (constructor) {\r\n            var DecoratorComponent = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var component = new (constructor.bind.apply(constructor, [void 0].concat(args)))();\r\n                ECS.setPrototypeOf(component, Object.getPrototypeOf(this));\r\n                Component_1.injectComponent(component);\r\n                component.id = id || constructor.prototype.constructor.name;\r\n                return component;\r\n            };\r\n            DecoratorComponent.prototype = constructor.prototype;\r\n            return DecoratorComponent;\r\n        };\r\n    };\r\n    ECS.System = function () {\r\n        var components = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            components[_i] = arguments[_i];\r\n        }\r\n        return function (constructor) {\r\n            var DecoratorSystem = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var system = new (constructor.bind.apply(constructor, [void 0].concat(args)))();\r\n                ECS.setPrototypeOf(system, Object.getPrototypeOf(this));\r\n                System_1.injectSystem(system, ECS.instance.scm.systemUpdateMethods);\r\n                system.id = system.id || constructor.prototype.constructor.name;\r\n                ECS.instance.scm.updateBitmask(system, components);\r\n                return system;\r\n            };\r\n            DecoratorSystem.prototype = constructor.prototype;\r\n            return DecoratorSystem;\r\n        };\r\n    };\r\n    ECS.Entity = function () {\r\n        var components = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            components[_i] = arguments[_i];\r\n        }\r\n        return function (constructor) {\r\n            var DecoratorEntity = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var entity = new (constructor.bind.apply(constructor, [void 0].concat(args)))();\r\n                ECS.setPrototypeOf(entity, Object.getPrototypeOf(this));\r\n                Entity_1.injectEntity(entity);\r\n                ECS.instance.ecm.createEntity(entity, ECS.createComponentsFromDecorator(components));\r\n                return entity;\r\n            };\r\n            DecoratorEntity.prototype = constructor.prototype;\r\n            return DecoratorEntity;\r\n        };\r\n    };\r\n    Object.defineProperty(ECS, \"uuid\", {\r\n        get: function () {\r\n            return ECS.instance.ecm.uuid;\r\n        },\r\n        set: function (value) {\r\n            ECS.instance.ecm.uuid = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ECS, \"systemUpdateMethods\", {\r\n        get: function () {\r\n            return ECS.instance.scm.systemUpdateMethods;\r\n        },\r\n        set: function (methods) {\r\n            ECS.instance.scm.systemUpdateMethods = methods;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ECS, \"events\", {\r\n        get: function () {\r\n            return ECS.instance.events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ECS;\r\n}());\r\nexports.ECS = ECS;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by Soeren on 27.06.2017.\r\n */\r\nvar ECS_1 = require(\"./ECS\");\r\nvar ComponentBitmaskMap = /** @class */ (function () {\r\n    function ComponentBitmaskMap() {\r\n        this.bitmaskMap = Object.create(null);\r\n    }\r\n    ComponentBitmaskMap.prototype.has = function (component) {\r\n        if (typeof component === \"string\") {\r\n            return !!this.bitmaskMap[component];\r\n        }\r\n        else {\r\n            return !!this.bitmaskMap[component.prototype.constructor.name];\r\n        }\r\n    };\r\n    ComponentBitmaskMap.prototype.add = function (component) {\r\n        if (typeof component === \"string\") {\r\n            this.bitmaskMap[component] = 1 << this.size;\r\n        }\r\n        else {\r\n            this.bitmaskMap[component.prototype.constructor.name] = 1 << this.size;\r\n        }\r\n    };\r\n    ComponentBitmaskMap.prototype.get = function (component) {\r\n        if (!this.has(component)) {\r\n            this.add(component);\r\n        }\r\n        if (typeof component === \"string\") {\r\n            return this.bitmaskMap[component] || 0;\r\n        }\r\n        return this.bitmaskMap[component.prototype.constructor.name] || 0;\r\n    };\r\n    Object.defineProperty(ComponentBitmaskMap.prototype, \"size\", {\r\n        get: function () {\r\n            return Object.keys(this.bitmaskMap).length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ComponentBitmaskMap;\r\n}());\r\nexports.ComponentBitmaskMap = ComponentBitmaskMap;\r\nvar COMPONENT_PROPERTIES = {};\r\nvar COMPONENT_PROTOTYPE = {\r\n    init: function () { return ECS_1.ECS.noop; },\r\n    remove: function () { return ECS_1.ECS.noop; }\r\n};\r\nexports.COMPONENT_PROPERTY_DECORATOR = {};\r\nfunction injectComponent(component) {\r\n    for (var propKey in COMPONENT_PROPERTIES) {\r\n        if (component[propKey] === undefined || component[propKey] === null) {\r\n            component[propKey] = COMPONENT_PROPERTIES[propKey]();\r\n        }\r\n    }\r\n    for (var propKey in exports.COMPONENT_PROPERTY_DECORATOR) {\r\n        if (component[propKey] === undefined || component[propKey] === null) {\r\n            exports.COMPONENT_PROPERTY_DECORATOR[propKey](component);\r\n        }\r\n    }\r\n    for (var protoKey in COMPONENT_PROTOTYPE) {\r\n        if (component.constructor && component.constructor.prototype) {\r\n            if (component.constructor.prototype[protoKey] === undefined || component.constructor.prototype[protoKey] === null) {\r\n                component.constructor.prototype[protoKey] = COMPONENT_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n        else {\r\n            if (component[protoKey] === undefined || component[protoKey] === null) {\r\n                component[protoKey] = COMPONENT_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.injectComponent = injectComponent;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ECS_1 = require(\"./ECS\");\r\nvar ENTITY_PROPERTIES = {\r\n    id: function () { return ECS_1.ECS.uuid(); },\r\n    components: function () { return Object.create(null); },\r\n    bitmask: function () { return 0; }\r\n};\r\nvar ENTITY_PROTOTYPE = {\r\n    get: function () { return Entity.prototype.get; },\r\n    getAll: function () { return Entity.prototype.getAll; },\r\n    has: function () { return Entity.prototype.has; },\r\n    add: function () { return Entity.prototype.add; },\r\n    remove: function () { return Entity.prototype.remove; },\r\n    dispose: function () { return Entity.prototype.dispose; },\r\n    destroy: function () { return Entity.prototype.destroy; }\r\n};\r\nexports.ENTITY_PROPERTY_DECORATOR = {};\r\nfunction injectEntity(entity) {\r\n    for (var propKey in ENTITY_PROPERTIES) {\r\n        if (entity[propKey] === undefined || entity[propKey] === null) {\r\n            entity[propKey] = ENTITY_PROPERTIES[propKey]();\r\n        }\r\n    }\r\n    for (var propKey in exports.ENTITY_PROPERTY_DECORATOR) {\r\n        if (entity[propKey] === undefined || entity[propKey] === null) {\r\n            exports.ENTITY_PROPERTY_DECORATOR[propKey](entity);\r\n        }\r\n    }\r\n    for (var protoKey in ENTITY_PROTOTYPE) {\r\n        if (entity.constructor && entity.constructor.prototype) {\r\n            if (entity.constructor.prototype[protoKey] === undefined || entity.constructor.prototype[protoKey] === null) {\r\n                entity.constructor.prototype[protoKey] = ENTITY_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n        else {\r\n            if (entity[protoKey] === undefined || entity[protoKey] === null) {\r\n                entity[protoKey] = ENTITY_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.injectEntity = injectEntity;\r\nvar Entity = /** @class */ (function () {\r\n    function Entity() {\r\n        this.id = ENTITY_PROPERTIES.id();\r\n        this.components = ENTITY_PROPERTIES.components();\r\n        this.bitmask = ENTITY_PROPERTIES.bitmask();\r\n    }\r\n    Entity.prototype.getAll = function () {\r\n        return this.components;\r\n    };\r\n    Entity.prototype.get = function (component) {\r\n        if (typeof component === 'string') {\r\n            return this.components[component];\r\n        }\r\n        return this.components[component.prototype.constructor.name];\r\n    };\r\n    Entity.prototype.has = function (component) {\r\n        if (typeof component === 'string') {\r\n            return !!this.components[component];\r\n        }\r\n        return !!this.components[component.prototype.constructor.name];\r\n    };\r\n    Entity.prototype.add = function (component) {\r\n        return ECS_1.ECS.addComponent(this, component);\r\n    };\r\n    Entity.prototype.remove = function (component) {\r\n        return ECS_1.ECS.removeComponent(this, component);\r\n    };\r\n    Entity.prototype.dispose = function () {\r\n        return ECS_1.ECS.removeEntity(this);\r\n    };\r\n    Entity.prototype.destroy = function (pool) {\r\n        return ECS_1.ECS.destroyEntity(this, pool);\r\n    };\r\n    return Entity;\r\n}());\r\nexports.Entity = Entity;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ECS_1 = require(\"./ECS\");\r\nvar EventEmitter = require(\"eventemitter3\");\r\nexports.SYSTEM_PROTOTYPE = {\r\n    setUp: function () { return ECS_1.ECS.noop; },\r\n    tearDown: function () { return ECS_1.ECS.noop; },\r\n    has: function () { return System.prototype.has; },\r\n    remove: function () { return System.prototype.remove; },\r\n    dispose: function () { return System.prototype.dispose; }\r\n};\r\nexports.SYSTEM_PROPERTIES = {\r\n    bitmask: function () { return 0; },\r\n    entities: function () { return []; },\r\n    events: function () { return new EventEmitter(); }\r\n};\r\nexports.SYSTEM_PROPERTY_DECORATOR = {};\r\nfunction injectSystem(system, updateMethods) {\r\n    for (var propKey in exports.SYSTEM_PROPERTIES) {\r\n        if (system[propKey] === undefined || system[propKey] === null) {\r\n            system[propKey] = exports.SYSTEM_PROPERTIES[propKey]();\r\n        }\r\n    }\r\n    for (var propKey in exports.SYSTEM_PROPERTY_DECORATOR) {\r\n        if (system[propKey] === undefined || system[propKey] === null) {\r\n            exports.SYSTEM_PROPERTY_DECORATOR[propKey](system);\r\n        }\r\n    }\r\n    for (var protoKey in exports.SYSTEM_PROTOTYPE) {\r\n        if (system.constructor && system.constructor.prototype) {\r\n            if (system.constructor.prototype[protoKey] === undefined || system.constructor.prototype[protoKey] === null) {\r\n                system.constructor.prototype[protoKey] = exports.SYSTEM_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n        else {\r\n            if (system[protoKey] === undefined || system[protoKey] === null) {\r\n                system[protoKey] = exports.SYSTEM_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n    }\r\n    for (var i = 0, protoKey = void 0; protoKey = updateMethods[i]; i++) {\r\n        if (system.constructor && system.constructor.prototype) {\r\n            if (system.constructor.prototype[protoKey] === undefined || system.constructor.prototype[protoKey] === null) {\r\n                system.constructor.prototype[protoKey] = ECS_1.ECS.noop;\r\n            }\r\n        }\r\n        else {\r\n            if (system[protoKey] === undefined || system[protoKey] === null) {\r\n                system[protoKey] = ECS_1.ECS.noop;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.injectSystem = injectSystem;\r\nvar System = /** @class */ (function () {\r\n    function System() {\r\n        this.bitmask = exports.SYSTEM_PROPERTIES.bitmask();\r\n        this.entities = exports.SYSTEM_PROPERTIES.entities();\r\n        this.events = exports.SYSTEM_PROPERTIES.events();\r\n    }\r\n    System.prototype.has = function (entity) {\r\n        return this.entities.indexOf(entity) !== -1;\r\n    };\r\n    System.prototype.remove = function (entity, fromECS, destroy) {\r\n        if (fromECS === void 0) { fromECS = true; }\r\n        if (fromECS) {\r\n            if (destroy) {\r\n                ECS_1.ECS.destroyEntity(entity, true);\r\n            }\r\n            else {\r\n                ECS_1.ECS.removeEntity(entity);\r\n            }\r\n        }\r\n        ECS_1.ECS.removeEntityFromSystem(entity, this);\r\n    };\r\n    System.prototype.dispose = function () {\r\n        ECS_1.ECS.removeSystem(this);\r\n    };\r\n    return System;\r\n}());\r\nexports.System = System;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = require(\"./Component\");\r\nvar Entity_1 = require(\"./Entity\");\r\nvar UUIDGenerator_1 = require(\"./UUIDGenerator\");\r\nvar Events_1 = require(\"./Events\");\r\n/**\r\n * The EntityComponentManager stores and manages all Entities and their components\r\n * Entities itself are just empty objects with an id, the Manager maps those ids to the components\r\n * Its also responsible for adding and removing components from and entity or creating/removing entities\r\n * By default all Components are stored in an ObjectPool if no longer used instead of being destroyed/gc\r\n */\r\nvar EntityComponentManager = /** @class */ (function () {\r\n    function EntityComponentManager(componentBitmaskMap, events, uuid) {\r\n        if (uuid === void 0) { uuid = UUIDGenerator_1.UUIDGenerator.uuid; }\r\n        this._events = events;\r\n        this._uuid = uuid;\r\n        this.componentBitmask = componentBitmaskMap;\r\n        this._entities = Object.create(null);\r\n    }\r\n    /**\r\n     * Creates an Entity, adds it to the EntityComponentMap but not to the active entities or actual ECS,\r\n     * so if the entity is deleted/gc it will be removed from the WeakMap\r\n     * @param entity\r\n     * @param components\r\n     */\r\n    EntityComponentManager.prototype.createEntity = function (entity, components) {\r\n        if (!entity) {\r\n            entity = new Entity_1.Entity();\r\n        }\r\n        entity.components = components || Object.create(null);\r\n        entity.bitmask = 0;\r\n        this.updateComponentBitmask(entity);\r\n        return entity;\r\n    };\r\n    EntityComponentManager.prototype.updateComponentBitmask = function (entity) {\r\n        for (var key in entity.components) {\r\n            entity.bitmask = entity.bitmask | this.componentBitmask.get(entity.components[key].id);\r\n        }\r\n    };\r\n    /**\r\n     * Adds the Entity with the provided Components(or existing ones) to the ECS,\r\n     * @param entity - Entity to add to the ECS\r\n     * @param components - Components for the entity, if provided this will override the current components of the entity if any\r\n     * @param silent - dispatch the entityAdded signal(If added silent the entity wont be added to an system)\r\n     */\r\n    EntityComponentManager.prototype.addEntity = function (entity, components, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        Entity_1.injectEntity(entity);\r\n        this._entities[entity.id] = entity;\r\n        entity.components = components || entity.components || Object.create(null);\r\n        entity.bitmask = entity.bitmask || 0;\r\n        if (components) {\r\n            this.updateComponentBitmask(entity);\r\n        }\r\n        if (!silent) {\r\n            this._events.emit(Events_1.ECM_EVENTS.ENTITY_ADDED, entity);\r\n        }\r\n        return entity;\r\n    };\r\n    /**\r\n     * Return a list of entities with the specified components\r\n     * since we need to check all entities this can be quite slow\r\n     * @param components - list of components the entity needs to have\r\n     */\r\n    EntityComponentManager.prototype.getEntities = function () {\r\n        var components = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            components[_i] = arguments[_i];\r\n        }\r\n        var bitmask = 0;\r\n        for (var i = 0, component = void 0; component = components[i]; i++) {\r\n            bitmask = bitmask | this.componentBitmask.get(component);\r\n        }\r\n        var keys = Object.keys(this._entities);\r\n        var entities = [];\r\n        for (var i = 0, entity = void 0; entity = this._entities[keys[i]]; i++) {\r\n            if ((entity.bitmask & bitmask) === bitmask) {\r\n                entities.push(entity);\r\n            }\r\n        }\r\n        return entities;\r\n    };\r\n    /**\r\n     * destroys the entity removes it from the manager and deletes all of its components\r\n     * @param entity - entity to destroy\r\n     * @param silent - Dispatch onEntityDestroyed Signal(Removing the Entity from the Systems)\r\n     * @returns {boolean} - true if entity was destroyed from the ecs\r\n     */\r\n    EntityComponentManager.prototype.destroyEntity = function (entity, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (this._entities[entity.id]) {\r\n            for (var key in entity.components) {\r\n                this.removeComponent(entity, entity.components[key].id, true);\r\n            }\r\n            entity.bitmask = 0;\r\n            entity.components = Object.create(null);\r\n            if (!silent && this.hasEntity(entity)) {\r\n                this._events.emit(Events_1.ECM_EVENTS.ENTITY_DESTROYED, entity);\r\n            }\r\n            return delete this._entities[entity.id];\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * destroy all entities removing all of its components and remove them from the ecs\r\n     * @param pool - if all components and entities should be pooled\r\n     */\r\n    EntityComponentManager.prototype.destroyAllEntities = function (pool) {\r\n        var keys = Object.keys(this._entities);\r\n        for (var i = 0, entity = void 0; entity = this._entities[keys[i]]; i++) {\r\n            this.destroyEntity(entity, pool);\r\n        }\r\n    };\r\n    /**\r\n     * @param entity - Entity to remove\r\n     * @param silent - Dispatch onEntityRemoved Signal(Removing the Entity from the Systems)\r\n     * @returns {boolean} - true if entity got removed from the ecs\r\n     */\r\n    EntityComponentManager.prototype.removeEntity = function (entity, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (this._entities[entity.id]) {\r\n            if (!silent && this.hasEntity(entity)) {\r\n                this._events.emit(Events_1.ECM_EVENTS.ENTITY_REMOVED, entity);\r\n            }\r\n            delete this._entities[entity.id];\r\n            return entity;\r\n        }\r\n        return entity;\r\n    };\r\n    /**\r\n     * removes all Entities from the ecs\r\n     */\r\n    EntityComponentManager.prototype.removeAllEntities = function () {\r\n        var entities = [];\r\n        var keys = Object.keys(this._entities);\r\n        for (var i = 0, entity = void 0; entity = this._entities[keys[i]]; i++) {\r\n            entities.push(this.removeEntity(entity));\r\n        }\r\n        return entities;\r\n    };\r\n    /**\r\n     * Returns true if the entity is in the ECS\r\n     * @param entity\r\n     * @returns {boolean}\r\n     */\r\n    EntityComponentManager.prototype.hasEntity = function (entity) {\r\n        return !!this._entities[entity.id];\r\n    };\r\n    /**\r\n     * Adds a component to the Entity\r\n     * @param entity - Entity\r\n     * @param component - Component to add\r\n     * @param silent - If true this onComponentAdded signal is not dispatched and no system is updated\r\n     */\r\n    EntityComponentManager.prototype.addComponent = function (entity, component, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        Component_1.injectComponent(component);\r\n        entity.components[component.id] = component;\r\n        entity.bitmask = entity.bitmask | this.componentBitmask.get(component.id);\r\n        if (!silent && this.hasEntity(entity)) {\r\n            this._events.emit(Events_1.ECM_EVENTS.COMPONENT_ADDED, entity, component);\r\n        }\r\n    };\r\n    /**\r\n     * Removes a component from the Entity\r\n     * @param entity - Entity\r\n     * @param component - Component type to remove\r\n     * @param silent - If true the onComponentRemoved signal is not dispatched and no system will be updated\r\n     * @returns {boolean}\r\n     */\r\n    EntityComponentManager.prototype.removeComponent = function (entity, component, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        var comp;\r\n        if (typeof component === 'string') {\r\n            comp = entity.components[component];\r\n        }\r\n        else {\r\n            comp = entity.components[component.prototype.constructor.name];\r\n        }\r\n        if (comp) {\r\n            entity.bitmask = entity.bitmask ^ this.componentBitmask.get(comp.id);\r\n            if (!silent && this.hasEntity(entity)) {\r\n                this._events.emit(Events_1.ECM_EVENTS.COMPONENT_REMOVED, entity, comp);\r\n            }\r\n            comp.remove();\r\n            return delete entity.components[comp.id];\r\n        }\r\n        return false;\r\n    };\r\n    Object.defineProperty(EntityComponentManager.prototype, \"entities\", {\r\n        get: function () {\r\n            return this._entities;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(EntityComponentManager.prototype, \"uuid\", {\r\n        get: function () {\r\n            return this._uuid;\r\n        },\r\n        set: function (value) {\r\n            this._uuid = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(EntityComponentManager.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return EntityComponentManager;\r\n}());\r\nexports.EntityComponentManager = EntityComponentManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UUIDGenerator = {\r\n    uuid: function () { return (\"\" + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/1|0/g, function () { return (0 | Math.random() * 16).toString(16); }); }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar System_1 = require(\"./System\");\r\nvar Events_1 = require(\"./Events\");\r\nvar EntitySystemManager = /** @class */ (function () {\r\n    function EntitySystemManager(componentBitmaskMap, events) {\r\n        this._events = events;\r\n        this._systemUpdateMethods = ['update'];\r\n        this.componentBitmask = componentBitmaskMap;\r\n        this.systems = Object.create(null);\r\n        this.ids = [];\r\n    }\r\n    /**\r\n     * update the system bitmask\r\n     * @param system\r\n     * @param componentMask\r\n     */\r\n    EntitySystemManager.prototype.updateBitmask = function (system, componentMask) {\r\n        if (componentMask === void 0) { componentMask = []; }\r\n        for (var i = 0, component = void 0; component = componentMask[i]; i++) {\r\n            system.bitmask = system.bitmask | this.componentBitmask.get(component);\r\n        }\r\n        return system;\r\n    };\r\n    /**\r\n     * Add the system to the ECS so its methods will be called by the update methods\r\n     * Before the existing entities get added into the system the init method is called\r\n     * @param system\r\n     * @param componentMask\r\n     * @param silent\r\n     */\r\n    EntitySystemManager.prototype.add = function (system, componentMask, silent) {\r\n        if (componentMask === void 0) { componentMask = []; }\r\n        if (silent === void 0) { silent = false; }\r\n        if (!this.has(system)) {\r\n            System_1.injectSystem(system, this.systemUpdateMethods);\r\n            this.systems[system.id] = system;\r\n            this.ids.push(system.id);\r\n            this.updateBitmask(system, componentMask);\r\n            system.setUp();\r\n            if (!silent) {\r\n                this._events.emit(Events_1.ESM_EVENTS.SYSTEM_ADDED, system);\r\n            }\r\n        }\r\n        else {\r\n            console.warn('System ' + system + ' already exists! And can only exists ones');\r\n        }\r\n        return system;\r\n    };\r\n    /**\r\n     * Checks if the system is in the ECS\r\n     * @param system\r\n     * @returns {boolean}\r\n     */\r\n    EntitySystemManager.prototype.has = function (system) {\r\n        return !!this.systems[system.id];\r\n    };\r\n    /**\r\n     * Checks if a system of the class exists in the ECS\r\n     * @param constructor\r\n     * @returns {boolean}\r\n     */\r\n    EntitySystemManager.prototype.hasOf = function (constructor) {\r\n        return !!this.systems[constructor.prototype.constructor.name];\r\n    };\r\n    /**\r\n     * Removes the system\r\n     * @param system\r\n     * @param silent\r\n     * @returns {boolean}\r\n     */\r\n    EntitySystemManager.prototype.remove = function (system, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (this.has(system)) {\r\n            if (!silent) {\r\n                this._events.emit(Events_1.ESM_EVENTS.SYSTEM_REMOVED, system);\r\n            }\r\n            system.tearDown();\r\n            this.ids.splice(this.ids.indexOf(system.id), 1);\r\n            return delete this.systems[system.id];\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Removes the System of the provided type from the ECS\r\n     * @param constructor\r\n     * @param silent\r\n     * @returns {boolean}\r\n     */\r\n    EntitySystemManager.prototype.removeOf = function (constructor, silent) {\r\n        return this.remove(this.get(constructor), silent);\r\n    };\r\n    /**\r\n     * Returns entities for the system of the type if it exists in the ECS\r\n     * @param constructor\r\n     * @returns {undefined|Map<string, IEntity>}\r\n     */\r\n    EntitySystemManager.prototype.getEntitiesOf = function (constructor) {\r\n        var system = this.get(constructor);\r\n        if (system) {\r\n            return system.entities;\r\n        }\r\n        return undefined;\r\n    };\r\n    EntitySystemManager.prototype.getComponentMaskOf = function (constructor) {\r\n        var system = this.get(constructor);\r\n        if (system) {\r\n            return system.bitmask;\r\n        }\r\n        return undefined;\r\n    };\r\n    EntitySystemManager.prototype.get = function (constructor) {\r\n        return this.systems[constructor.prototype.constructor.name];\r\n    };\r\n    /**\r\n     * Adds the entity to the system, or adds it to all Systems\r\n     * @param entity\r\n     * @param system - optional system to add the entity to\r\n     * @param silent\r\n     */\r\n    EntitySystemManager.prototype.addEntity = function (entity, system, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (system) {\r\n            if (system.bitmask !== 0 && (entity.bitmask & system.bitmask) === system.bitmask) {\r\n                system.entities.push(entity);\r\n                system.events.emit(Events_1.SYSTEM_EVENTS.ENTITY_ADDED, entity);\r\n            }\r\n        }\r\n        else {\r\n            var ids = this.ids;\r\n            var systems = this.systems;\r\n            for (var i = 0, system_1; system_1 = systems[ids[i]]; i++) {\r\n                if ((entity.bitmask & system_1.bitmask) === system_1.bitmask) {\r\n                    system_1.entities.push(entity);\r\n                    system_1.events.emit(Events_1.SYSTEM_EVENTS.ENTITY_ADDED, entity);\r\n                }\r\n            }\r\n        }\r\n        if (!silent && (!system || this.has(system))) {\r\n            this._events.emit(Events_1.ESM_EVENTS.ENTITY_ADDED_TO_SYSTEM, entity, system);\r\n        }\r\n    };\r\n    /**\r\n     * Removes an entity from the system or all systems\r\n     * @param entity\r\n     * @param system\r\n     * @param silent\r\n     */\r\n    EntitySystemManager.prototype.removeEntity = function (entity, system, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (system) {\r\n            var idx = system.entities.indexOf(entity);\r\n            if (idx != -1) {\r\n                system.entities.splice(idx, 1);\r\n            }\r\n            system.events.emit(Events_1.SYSTEM_EVENTS.ENTITY_REMOVED, entity);\r\n        }\r\n        else {\r\n            var ids = this.ids;\r\n            var systems = this.systems;\r\n            var idx = -1;\r\n            for (var i = 0, system_2; system_2 = systems[ids[i]]; i++) {\r\n                idx = system_2.entities.indexOf(entity);\r\n                if (idx != -1) {\r\n                    system_2.entities.splice(idx, 1);\r\n                }\r\n                system_2.events.emit(Events_1.SYSTEM_EVENTS.ENTITY_REMOVED, entity);\r\n            }\r\n        }\r\n        if (!silent) {\r\n            this._events.emit(Events_1.ESM_EVENTS.ENTITY_REMOVED_FROM_SYSTEM, entity, system);\r\n        }\r\n    };\r\n    /**\r\n     * Updates the Entity adds it to the right systems and removes it from systems if it does not fit anymore\r\n     * @param entity\r\n     * @param system - optional only update for for the given system(ether add or remove the entity from the system)\r\n     */\r\n    EntitySystemManager.prototype.updateEntity = function (entity, system) {\r\n        if (system) {\r\n            this.addEntityToSystem(system, entity);\r\n        }\r\n        else {\r\n            var ids = this.ids;\r\n            var systems = this.systems;\r\n            for (var i = 0, system_3; system_3 = systems[ids[i]]; i++) {\r\n                this.addEntityToSystem(system_3, entity);\r\n            }\r\n        }\r\n    };\r\n    EntitySystemManager.prototype.addEntityToSystem = function (system, entity) {\r\n        if ((entity.bitmask & system.bitmask) === system.bitmask) {\r\n            if (!system.has(entity)) {\r\n                this.addEntity(entity, system);\r\n            }\r\n        }\r\n        else if (system.has(entity)) {\r\n            this.removeEntity(entity, system);\r\n        }\r\n    };\r\n    /**\r\n     * Calls the Method for all Systems and Subsystems\r\n     */\r\n    EntitySystemManager.prototype.callSystemMethod = function (id, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\r\n        var ids = this.ids;\r\n        var systems = this.systems;\r\n        for (var i = 0, system = void 0; system = systems[ids[i]]; i++) {\r\n            system[id](a1, a2, a3, a4, a5, a6, a7, a8, a9);\r\n        }\r\n    };\r\n    /**\r\n     * Calls all system update methods for all system and child systems\r\n     */\r\n    EntitySystemManager.prototype.update = function (a1, a2, a3, a4, a5, a6, a7, a8, a9) {\r\n        for (var i = 0, method = void 0; method = this._systemUpdateMethods[i]; i++) {\r\n            this.callSystemMethod(method, a1, a2, a3, a4, a5, a6, a7, a8, a9);\r\n        }\r\n    };\r\n    /**\r\n     * Injects the SystemMethods into all systems if the methods does not exist a noop method will be added\r\n     */\r\n    EntitySystemManager.prototype.updateSystemMethods = function () {\r\n        var ids = this.ids;\r\n        var systems = this.systems;\r\n        var methods = this.systemUpdateMethods;\r\n        for (var i = 0, system = void 0; system = systems[ids[i]]; i++) {\r\n            System_1.injectSystem(system, methods);\r\n        }\r\n    };\r\n    Object.defineProperty(EntitySystemManager.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(EntitySystemManager.prototype, \"systemUpdateMethods\", {\r\n        get: function () {\r\n            return this._systemUpdateMethods;\r\n        },\r\n        set: function (value) {\r\n            this._systemUpdateMethods = value;\r\n            this.updateSystemMethods();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return EntitySystemManager;\r\n}());\r\nexports.EntitySystemManager = EntitySystemManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ECS_1 = require(\"./ECS\");\r\nvar InjectorService = /** @class */ (function () {\r\n    function InjectorService() {\r\n    }\r\n    Object.defineProperty(InjectorService, \"instance\", {\r\n        get: function () {\r\n            if (InjectorService._instance) {\r\n                return InjectorService._instance;\r\n            }\r\n            return InjectorService._instance = new InjectorService();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Injects an existing system into the class\r\n     * @param {{new(config?: {[p: string]: any}) => T}} system\r\n     * @returns {(target: Object, propKey: (number | string)) => void}\r\n     * @constructor\r\n     */\r\n    InjectorService.prototype.System = function (systems) {\r\n        return function (constructor) {\r\n            var wrapper = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                return new (constructor.bind.apply(constructor, [void 0].concat(args)))();\r\n            };\r\n            var DecoratorInjector = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var object = wrapper.apply(this, args);\r\n                ECS_1.ECS.setPrototypeOf(object, Object.getPrototypeOf(this));\r\n                var keys = Object.keys(systems);\r\n                for (var i = 0, system = void 0; system = systems[keys[i]]; i++) {\r\n                    object[keys[i]] = ECS_1.ECS.getSystem(system);\r\n                }\r\n                return object;\r\n            };\r\n            DecoratorInjector.prototype = constructor.prototype;\r\n            return DecoratorInjector;\r\n        };\r\n    };\r\n    return InjectorService;\r\n}());\r\nexports.InjectorService = InjectorService;\r\n","export const GLOBAL_TEXTURES = {\r\n    BRDF_LUT: 'brdfLUT',\r\n    DIFFUSE_ENVIRONMENT: 'diffuseEnvironment',\r\n    SPECULAR_ENVIRONMENT: 'specularEnvironment',\r\n    SKYBOX: 'skybox'\r\n};\r\nexport var UBO_BINDINGS;\r\n(function (UBO_BINDINGS) {\r\n    UBO_BINDINGS[UBO_BINDINGS[\"CAMERA\"] = 0] = \"CAMERA\";\r\n    UBO_BINDINGS[UBO_BINDINGS[\"SKIN\"] = 1] = \"SKIN\";\r\n})(UBO_BINDINGS || (UBO_BINDINGS = {}));\r\n//# sourceMappingURL=constants.js.map","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\nexport var DefaultValue;\r\n(function (DefaultValue) {\r\n    function value(type, size) {\r\n        switch (type) {\r\n            case 'float':\r\n                return 0;\r\n            case 'vec2':\r\n                return new Float32Array(2 * size);\r\n            case 'vec3':\r\n                return new Float32Array(3 * size);\r\n            case 'vec4':\r\n                return new Float32Array(4 * size);\r\n            case 'int':\r\n            case 'samplerCube':\r\n            case 'sampler2D':\r\n                return 0;\r\n            case 'ivec2':\r\n                return new Int32Array(2 * size);\r\n            case 'ivec3':\r\n                return new Int32Array(3 * size);\r\n            case 'ivec4':\r\n                return new Int32Array(4 * size);\r\n            case 'bool':\r\n                return false;\r\n            case 'bvec2':\r\n                return booleanArray(2 * size);\r\n            case 'bvec3':\r\n                return booleanArray(3 * size);\r\n            case 'bvec4':\r\n                return booleanArray(4 * size);\r\n            case 'mat2':\r\n                return new Float32Array([1, 0,\r\n                    0, 1]);\r\n            case 'mat3':\r\n                return new Float32Array([1, 0, 0,\r\n                    0, 1, 0,\r\n                    0, 0, 1]);\r\n            case 'mat4':\r\n                return new Float32Array([1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1]);\r\n            default:\r\n                console.warn(\"no default value for type \", type);\r\n        }\r\n        function booleanArray(size) {\r\n            let array = new Array(size);\r\n            for (let i = 0; i < array.length; i++) {\r\n                array[i] = false;\r\n            }\r\n            return array;\r\n        }\r\n    }\r\n    DefaultValue.value = value;\r\n})(DefaultValue || (DefaultValue = {}));\r\n//# sourceMappingURL=defaultValue.js.map","function glGetStates(gl) {\r\n    return {\r\n        \"BLEND\": gl.BLEND,\r\n        \"DEPTH_TEST\": gl.DEPTH_TEST,\r\n        \"DITHER\": gl.DITHER,\r\n        \"SCISSOR_TEST\": gl.SCISSOR_TEST,\r\n        \"STENCIL_TEST\": gl.STENCIL_TEST,\r\n        \"TEXTURE_2D\": gl.TEXTURE_2D,\r\n        \"TEXTURE_3D\": gl.TEXTURE_3D,\r\n        \"TEXTURE_CUBE_MAP\": gl.TEXTURE_CUBE_MAP\r\n    };\r\n}\r\nexport function glGetCurrentState(gl) {\r\n    let states = glGetStates(gl);\r\n    let str = \"\";\r\n    for (let key in states) {\r\n        if (gl.isEnabled(states[key])) {\r\n            str += key + \" is enabled!\\n\";\r\n        }\r\n        else {\r\n            str += key + \" is disabled!\\n\";\r\n        }\r\n    }\r\n    return str;\r\n}\r\nexport function glResetState(gl) {\r\n    let states = glGetStates(gl);\r\n    for (let key in states) {\r\n        gl.disable(states[key]);\r\n    }\r\n    gl.enable(gl.DITHER);\r\n}\r\n//# sourceMappingURL=glGet.js.map","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\nexport var MapSize;\r\n(function (MapSize) {\r\n    var GLSL_TO_SIZE = {\r\n        'float': 1,\r\n        'vec2': 2,\r\n        'vec3': 3,\r\n        'vec4': 4,\r\n        'int': 1,\r\n        'ivec2': 2,\r\n        'ivec3': 3,\r\n        'ivec4': 4,\r\n        'bool': 1,\r\n        'bvec2': 2,\r\n        'bvec3': 3,\r\n        'bvec4': 4,\r\n        'mat2': 4,\r\n        'mat3': 9,\r\n        'mat4': 16,\r\n        'sampler2D': 1\r\n    };\r\n    /**\r\n     * Returns the componentTypeCount in Bytes needed for the provided GLSL Type in WebGL\r\n     * @param type\r\n     * @returns {any}\r\n     */\r\n    function map(type) {\r\n        return GLSL_TO_SIZE[type];\r\n    }\r\n    MapSize.map = map;\r\n})(MapSize || (MapSize = {}));\r\n//# sourceMappingURL=mapSize.js.map","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\n/**\r\n * Maps the WebGL Types to the convenient GLSL Types\r\n */\r\nexport var MapType;\r\n(function (MapType) {\r\n    var GL_TABLE = null;\r\n    var GL_TO_GLSL_TYPES = {\r\n        'FLOAT': 'float',\r\n        'FLOAT_VEC2': 'vec2',\r\n        'FLOAT_VEC3': 'vec3',\r\n        'FLOAT_VEC4': 'vec4',\r\n        'INT': 'int',\r\n        'INT_VEC2': 'ivec2',\r\n        'INT_VEC3': 'ivec3',\r\n        'INT_VEC4': 'ivec4',\r\n        'BOOL': 'bool',\r\n        'BOOL_VEC2': 'bvec2',\r\n        'BOOL_VEC3': 'bvec3',\r\n        'BOOL_VEC4': 'bvec4',\r\n        'FLOAT_MAT2': 'mat2',\r\n        'FLOAT_MAT3': 'mat3',\r\n        'FLOAT_MAT4': 'mat4',\r\n        'SAMPLER_2D': 'sampler2D',\r\n        'SAMPLER_CUBE': 'samplerCube'\r\n    };\r\n    function map(gl, type) {\r\n        if (!GL_TABLE) {\r\n            let typeNames = Object.keys(GL_TO_GLSL_TYPES);\r\n            GL_TABLE = {};\r\n            for (let i = 0; i < typeNames.length; i++) {\r\n                let tn = typeNames[i];\r\n                GL_TABLE[gl[tn]] = GL_TO_GLSL_TYPES[tn];\r\n            }\r\n        }\r\n        return GL_TABLE[type];\r\n    }\r\n    MapType.map = map;\r\n})(MapType || (MapType = {}));\r\n//# sourceMappingURL=mapType.js.map","/**\r\n * @fileoverview This file contains functions every webgl program will need\r\n * a version of one way or another.\r\n *\r\n * Instead of setting up a context manually it is recommended to\r\n * use. This will check for success or failure. On failure it\r\n * will attempt to present an approriate message to the user.\r\n *\r\n *       gl = WebGLUtils.setupWebGL(canvas);\r\n *\r\n * For animated WebGL apps use of setTimeout or setInterval are\r\n * discouraged. It is recommended you structure your rendering\r\n * loop like this.\r\n *\r\n *       function render() {\r\n *         window.requestAnimationFrame(render, canvas);\r\n *\r\n *         // do rendering\r\n *         ...\r\n *       }\r\n *       render();\r\n *\r\n * This will call your rendering function up to the refresh rate\r\n * of your display but will stop rendering if your app is not\r\n * visible.\r\n */\r\nexport var WebGLUtils;\r\n(function (WebGLUtils) {\r\n    /**\r\n     * Mesasge for getting a webgl browser\r\n     * @type {string}\r\n     */\r\n    var GET_A_WEBGL_BROWSER = '' +\r\n        'This page requires a browser that supports WebGL.<br/>' +\r\n        '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\r\n    /**\r\n     * Mesasge for need better hardware\r\n     * @type {string}\r\n     */\r\n    var OTHER_PROBLEM = '' +\r\n        \"It doesn't appear your computer can support WebGL.<br/>\" +\r\n        '<a href=\"http://get.webgl.org\">Click here for more information.</a>';\r\n    /**\r\n     * Creates the HTLM for a failure message\r\n     * @param {string} canvasContainerId id of container of th\r\n     *        canvas.\r\n     * @return {string} The html.\r\n     */\r\n    function makeFailHTML(msg) {\r\n        return '' +\r\n            '<div style=\"margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;\">' + msg + '</div>';\r\n    }\r\n    /**\r\n     * Creates a webgl context. If creation fails it will\r\n     * change the contents of the container of the <canvas>\r\n     * tag to an error message with the correct links for WebGL.\r\n     * @param {Element} canvas. The canvas element to create a\r\n     *     context from.\r\n     * @param {WebGLContextCreationAttirbutes} opt_attribs Any\r\n     *     creation attributes you want to pass in.\r\n     * @param {function:(msg)} opt_onError An function to call\r\n     *     if there is an error during creation.\r\n     * @return {WebGL2RenderingContext} The created context.\r\n     */\r\n    function setupWebGL(canvas, opt_attribs, opt_onError) {\r\n        function handleCreationError(msg) {\r\n            let container = document.getElementsByTagName(\"body\")[0];\r\n            if (container) {\r\n                let str = window['WebGL2RenderingContext'] ? OTHER_PROBLEM : GET_A_WEBGL_BROWSER;\r\n                if (msg) {\r\n                    str += \"<br/><br/>Status: \" + msg;\r\n                }\r\n                container.innerHTML = makeFailHTML(str);\r\n            }\r\n        }\r\n        let onError = opt_onError || handleCreationError;\r\n        if (canvas.addEventListener) {\r\n            canvas.addEventListener(\"webglcontextcreationerr\", (event) => {\r\n                onError(event.statusMessage);\r\n            }, false);\r\n        }\r\n        let context = create3DContext(canvas, opt_attribs);\r\n        if (!context) {\r\n            if (!window['WebGL2RenderingContext']) {\r\n                onError(\"\");\r\n            }\r\n            else {\r\n                onError(\"\");\r\n            }\r\n        }\r\n        return context;\r\n    }\r\n    WebGLUtils.setupWebGL = setupWebGL;\r\n    /**\r\n     * Creates a webgl context.\r\n     * @param {!Canvas} canvas The canvas tag to get context\r\n     *     from. If one is not passed in one will be created.\r\n     * @return {!WebGLContext} The created context.\r\n     */\r\n    function create3DContext(canvas, opt_attribs) {\r\n        let names = [\"webgl2\", \"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\r\n        let context = null;\r\n        for (let name of names) {\r\n            try {\r\n                context = canvas.getContext(name, opt_attribs);\r\n            }\r\n            catch (e) {\r\n            }\r\n            if (context) {\r\n                break;\r\n            }\r\n        }\r\n        return context;\r\n    }\r\n    WebGLUtils.create3DContext = create3DContext;\r\n    /**\r\n     * Provides requestAnimationFrame in a cross browser\r\n     * way.\r\n     */\r\n    if (!window.requestAnimationFrame) {\r\n        window[\"requestAnimationFrame\"] = (function () {\r\n            return window[\"requestAnimationFrame\"] ||\r\n                window[\"webkitRequestAnimationFrame\"] ||\r\n                window[\"mozRequestAnimationFrame\"] ||\r\n                window[\"oRequestAnimationFrame\"] ||\r\n                window[\"msRequestAnimationFrame\"] ||\r\n                function (callback, element) {\r\n                    window.setTimeout(callback, 1000 / 60);\r\n                };\r\n        })();\r\n    }\r\n    /** * ERRATA: 'cancelRequestAnimationFrame' renamed to 'cancelAnimationFrame' to reflect an update to the W3C Animation-Timing Spec.\r\n     *\r\n     * Cancels an animation frame request.\r\n     * Checks for cross-browser support, falls back to clearTimeout.\r\n     * @param {number}  Animation frame request. */\r\n    if (!window.cancelAnimationFrame) {\r\n        window.cancelAnimationFrame = (window[\"cancelRequestAnimationFrame\"] ||\r\n            window[\"webkitCancelAnimationFrame\"] || window[\"webkitCancelRequestAnimationFrame\"] ||\r\n            window[\"mozCancelAnimationFrame\"] || window[\"mozCancelRequestAnimationFrame\"] ||\r\n            window[\"msCancelAnimationFrame\"] || window[\"msCancelRequestAnimationFrame\"] ||\r\n            window[\"oCancelAnimationFrame\"] || window[\"oCancelRequestAnimationFrame\"] ||\r\n            window.clearTimeout);\r\n    }\r\n})(WebGLUtils || (WebGLUtils = {}));\r\n//# sourceMappingURL=webglUtil.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./defaultValue\";\r\nexport * from \"./glGet\";\r\nexport * from \"./mapSize\";\r\nexport * from \"./mapType\";\r\nexport * from \"./webglUtil\";\r\n//# sourceMappingURL=index.js.map","import { WebGLUtils } from \"../gl/gl_util\";\r\nexport class Canvas {\r\n    constructor(config) {\r\n        this._defaultWidth = config.width;\r\n        this._defaultHeight = config.height;\r\n        this._element = document.createElement('canvas');\r\n        this._element.id = \"viewer_canvas\";\r\n        this._element.width = this._defaultWidth;\r\n        this._element.height = this._defaultHeight;\r\n    }\r\n    appendCanvas(parent) {\r\n        if (!this._element) {\r\n            throw \"canvas failed to initialize\";\r\n        }\r\n        if (parent) {\r\n            document.getElementById(parent).appendChild(this._element);\r\n        }\r\n        else {\r\n            document.body.appendChild(this._element);\r\n        }\r\n    }\r\n    get context() {\r\n        if (!this._context) {\r\n            this._context = WebGLUtils.setupWebGL(this._element, { antialias: true, stencil: true });\r\n        }\r\n        return this._context;\r\n    }\r\n    get element() {\r\n        return this._element;\r\n    }\r\n    set element(value) {\r\n        this._element = value;\r\n    }\r\n    get width() {\r\n        return this._element.width;\r\n    }\r\n    get height() {\r\n        return this._element.height;\r\n    }\r\n}\r\n//# sourceMappingURL=Canvas.js.map","var EmitSignal = /** @class */ (function () {\r\n    function EmitSignal(emitter, type) {\r\n        this._type = type;\r\n        this._emitter = emitter;\r\n    }\r\n    EmitSignal.prototype.emit = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _a;\r\n        return (_a = this._emitter).emit.apply(_a, [this._type].concat(args));\r\n    };\r\n    /**\r\n     * function alias for emit\r\n     * @param args\r\n     */\r\n    EmitSignal.prototype.dispatch = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return this.emit.apply(this, args);\r\n    };\r\n    EmitSignal.prototype.on = function (fn, context) {\r\n        this._emitter.on(this._type, fn, context);\r\n        return this;\r\n    };\r\n    /**\r\n     * alias for on\r\n     * @param fn - EventFunction\r\n     * @param context - context to call the function with\r\n     */\r\n    EmitSignal.prototype.add = function (fn, context) {\r\n        return this.on(fn, context);\r\n    };\r\n    EmitSignal.prototype.once = function (fn, context) {\r\n        this._emitter.once(this._type, fn, context);\r\n        return this;\r\n    };\r\n    /**\r\n     * alias for once\r\n     * @param fn\r\n     * @param context\r\n     */\r\n    EmitSignal.prototype.addOnce = function (fn, context) {\r\n        return this.once(fn, context);\r\n    };\r\n    EmitSignal.prototype.removeAllListeners = function () {\r\n        this._emitter.removeAllListeners(this._type);\r\n        return this;\r\n    };\r\n    EmitSignal.prototype.removeListener = function (fn, context, once) {\r\n        this._emitter.removeListener(this._type, fn, context, once);\r\n        return this;\r\n    };\r\n    Object.defineProperty(EmitSignal.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(EmitSignal.prototype, \"emitter\", {\r\n        get: function () {\r\n            return this._emitter;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return EmitSignal;\r\n}());\r\nexport { EmitSignal };\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport * as EventEmitter from \"eventemitter3\";\r\nimport { EmitSignal } from \"./EmitSignal\";\r\nexport var RESOURCE_EVENT;\r\n(function (RESOURCE_EVENT) {\r\n    RESOURCE_EVENT[\"PROGRESS\"] = \"resource_event_progress\";\r\n    RESOURCE_EVENT[\"LOAD_START\"] = \"resource_event_loadStart\";\r\n    RESOURCE_EVENT[\"LOAD_COMPLETE\"] = \"resource_event_load\";\r\n    RESOURCE_EVENT[\"ERROR\"] = \"resource_event_error\";\r\n    RESOURCE_EVENT[\"ABORT\"] = \"resource_event_abort\";\r\n    RESOURCE_EVENT[\"TIMEOUT\"] = \"resource_event_timeout\";\r\n})(RESOURCE_EVENT || (RESOURCE_EVENT = {}));\r\nexport var LOAD_TYPE;\r\n(function (LOAD_TYPE) {\r\n    LOAD_TYPE[\"XHR\"] = \"xhr\";\r\n    LOAD_TYPE[\"IMAGE\"] = \"image\";\r\n})(LOAD_TYPE || (LOAD_TYPE = {}));\r\nvar Resource = /** @class */ (function () {\r\n    function Resource(options, config) {\r\n        this.config = config || Object.create(null);\r\n        if (typeof options === 'string') {\r\n            this.options = {\r\n                url: options,\r\n                loadType: LOAD_TYPE.XHR,\r\n                responseType: ''\r\n            };\r\n        }\r\n        else {\r\n            this.options = __assign({}, options, { url: options.url, loadType: options.loadType || LOAD_TYPE.XHR, responseType: options.responseType || '' });\r\n        }\r\n        this._emitter = new EventEmitter();\r\n        this.onProgress = new EmitSignal(this._emitter, RESOURCE_EVENT.PROGRESS);\r\n        this.onLoadStart = new EmitSignal(this._emitter, RESOURCE_EVENT.LOAD_START);\r\n        this.onLoadFinished = new EmitSignal(this._emitter, RESOURCE_EVENT.LOAD_COMPLETE);\r\n        this.onError = new EmitSignal(this._emitter, RESOURCE_EVENT.ERROR);\r\n        this.onAbort = new EmitSignal(this._emitter, RESOURCE_EVENT.ABORT);\r\n        this.onTimeout = new EmitSignal(this._emitter, RESOURCE_EVENT.TIMEOUT);\r\n    }\r\n    /**\r\n     * Create a XMLHttpRequest and start loading the Resource\r\n     * @param options - { url: string, timeout?: number, asnyc?: boolean, responseType?: string;}\r\n     * @param args - will be emitted with loadstart and load events\r\n     */\r\n    Resource.prototype.loadXhr = function (options) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var request = new XMLHttpRequest();\r\n        request.timeout = options.timeout;\r\n        request.responseType = options.responseType || 'text';\r\n        request.open('GET', options.url, options.async === undefined ? true : !!options.async);\r\n        request.addEventListener('progress', function (event) { return _this.onProgress.emit(event, request); }, { once: true });\r\n        request.addEventListener('loadstart', function (event) {\r\n            var _a;\r\n            return (_a = _this.onLoadStart).emit.apply(_a, [event, request].concat(args));\r\n        }, { once: true });\r\n        request.addEventListener('load', function (event) { return _this.onLoadFinished.emit(_this); }, { once: true });\r\n        request.addEventListener('error', function (event) { return _this.onError.emit(event, request); }, { once: true });\r\n        request.addEventListener('abort', function (event) { return _this.onAbort.emit(event, request); }, { once: true });\r\n        request.addEventListener('timeout', function (event) { return _this.onTimeout.emit(event, request); }, { once: true });\r\n        request.send();\r\n        return request;\r\n    };\r\n    /**\r\n     * Create a HTMLImageElement and start loading the Resource\r\n     * @param options - { url: string, width?: number, height?: number }\r\n     * @param args - will be emitted with loadstart and load events\r\n     */\r\n    Resource.prototype.loadImage = function (options) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var image = new Image(options.width, options.height);\r\n        if (!image) {\r\n            console.error('Failed to create Image Object');\r\n            this.onError.emit(event, image);\r\n            return image;\r\n        }\r\n        image.addEventListener('progress', function (event) { return _this.onProgress.emit(event, image); }, { once: true });\r\n        image.addEventListener('loadstart', function (event) {\r\n            var _a;\r\n            return (_a = _this.onLoadStart).emit.apply(_a, [event, image].concat(args));\r\n        }, { once: true });\r\n        image.addEventListener('load', function (event) { return _this.onLoadFinished.emit(_this); }, { once: true });\r\n        image.addEventListener('error', function (event) { return _this.onError.emit(event, image); }, { once: true });\r\n        image.addEventListener('abort', function (event) { return _this.onAbort.emit(event, image); }, { once: true });\r\n        image.crossOrigin = this._determineCrossOrigin(options.url);\r\n        image.src = options.url;\r\n        return image;\r\n    };\r\n    Resource.prototype._determineCrossOrigin = function (url) {\r\n        // data: and javascript: urls are considered same-origin\r\n        if (url.indexOf('data:') === 0) {\r\n            return '';\r\n        }\r\n        // A sandboxed iframe without the 'allow-same-origin' attribute will have a special\r\n        // origin designed not to match window.location.origin, and will always require\r\n        // crossOrigin requests regardless of whether the location matches.\r\n        if (window.origin !== window.location.origin) {\r\n            return 'anonymous';\r\n        }\r\n        // default is window.location\r\n        var loc = window.location;\r\n        if (!Resource.tempAnchor) {\r\n            Resource.tempAnchor = document.createElement('a');\r\n        }\r\n        // let the browser determine the full href for the url of this resource and then\r\n        // use the properties of the anchor element, cause fuck IE9\r\n        Resource.tempAnchor.href = url;\r\n        var samePort = (!Resource.tempAnchor.port && loc.port === '') || (Resource.tempAnchor.port === loc.port);\r\n        var protocol = Resource.tempAnchor.protocol ? Resource.tempAnchor.protocol + \":\" : '';\r\n        // if cross origin\r\n        if (Resource.tempAnchor.host !== loc.hostname || !samePort || protocol !== loc.protocol) {\r\n            return 'anonymous';\r\n        }\r\n        return '';\r\n    };\r\n    /**\r\n     * Called by the _loader to start loading the Resource\r\n     * @param options - load options for the resource or the url\r\n     * @param args\r\n     * @returns {LoadComponent}\r\n     */\r\n    Resource.prototype.load = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        switch (this.options.loadType) {\r\n            case LOAD_TYPE.IMAGE:\r\n                this.request = this.loadImage.apply(this, [this.options].concat(args));\r\n                return this;\r\n            case LOAD_TYPE.XHR:\r\n                this.request = this.loadXhr.apply(this, [this.options].concat(args));\r\n                return this;\r\n        }\r\n        return this;\r\n    };\r\n    Resource.prototype.abort = function () {\r\n        if (this.request instanceof XMLHttpRequest) {\r\n            this.request.abort();\r\n        }\r\n        else if (this.request instanceof HTMLImageElement) {\r\n            this.request.src = \"\";\r\n        }\r\n        return this;\r\n    };\r\n    return Resource;\r\n}());\r\nexport { Resource };\r\n","var _this = this;\r\nimport { Resource } from \"./Resource\";\r\nimport * as EventEmitter from \"eventemitter3\";\r\nimport { EmitSignal } from \"./EmitSignal\";\r\nexport var RESOURCE_LOADER_EVENTS;\r\n(function (RESOURCE_LOADER_EVENTS) {\r\n    RESOURCE_LOADER_EVENTS[\"LOAD_COMPLETE\"] = \"LOAD_COMPLETE\";\r\n})(RESOURCE_LOADER_EVENTS || (RESOURCE_LOADER_EVENTS = {}));\r\nvar RESOURCE_LOADER_PROPERTIES = {\r\n    _emitter: function () { return new EventEmitter(); },\r\n    onLoad: function () { return new EmitSignal(_this._emitter, RESOURCE_LOADER_EVENTS.LOAD_COMPLETE); },\r\n};\r\nvar RESOURCE_LOADER_PROTOTYPE = {\r\n    transform: function () { return Middleware.prototype.transform; },\r\n    add: function () { return Middleware.prototype.add; },\r\n    addResourceToQueue: function () { return Middleware.prototype.addResourceToQueue; },\r\n    _queueCallback: function () { return Middleware.prototype._queueCallback; }\r\n};\r\nvar Middleware = /** @class */ (function () {\r\n    function Middleware(type) {\r\n        this._emitter = new EventEmitter();\r\n        this.onLoad = new EmitSignal(this._emitter, RESOURCE_LOADER_EVENTS.LOAD_COMPLETE);\r\n        this.type = type;\r\n    }\r\n    Middleware.inject = function (middleware) {\r\n        for (var propKey in RESOURCE_LOADER_PROPERTIES) {\r\n            if (middleware[propKey] === undefined || middleware[propKey] === null) {\r\n                middleware[propKey] = RESOURCE_LOADER_PROPERTIES[propKey]();\r\n            }\r\n        }\r\n        for (var protoKey in RESOURCE_LOADER_PROTOTYPE) {\r\n            if (middleware.constructor && middleware.constructor.prototype) {\r\n                if (middleware.constructor.prototype[protoKey] === undefined || middleware.constructor.prototype[protoKey] === null) {\r\n                    middleware.constructor.prototype[protoKey] = RESOURCE_LOADER_PROTOTYPE[protoKey]();\r\n                }\r\n            }\r\n            else {\r\n                if (middleware[protoKey] === undefined || middleware[protoKey] === null) {\r\n                    middleware[protoKey] = RESOURCE_LOADER_PROTOTYPE[protoKey]();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Middleware.prototype.add = function (url) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        this.addResourceToQueue({\r\n            resources: [{\r\n                    resource: new Resource(url),\r\n                    args: args.slice()\r\n                }]\r\n        });\r\n        return this;\r\n    };\r\n    Middleware.prototype.addResourceToQueue = function (config) {\r\n        var _this = this;\r\n        this._loader._addResourceToQueue({\r\n            resources: config.resources,\r\n            onResourcesLoaded: function () {\r\n                var resources = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    resources[_i] = arguments[_i];\r\n                }\r\n                return _this._queueCallback.apply(_this, [config.key, _this.type].concat(resources));\r\n            },\r\n            onResourcesLoadedContext: this\r\n        });\r\n        return this;\r\n    };\r\n    Middleware.prototype._queueCallback = function (key, type) {\r\n        var resources = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            resources[_i - 2] = arguments[_i];\r\n        }\r\n        var data = this.transform.apply(this, resources);\r\n        this.onLoad.emit({ key: key, type: type, data: data });\r\n    };\r\n    /**\r\n     * transform is called after the Middleware has finished processing the Resources\r\n     * that have been added to the LoadQueue of the loader\r\n     * its used to further transform the loaded data, e.g. if u have 2 files json and binary etc.\r\n     * @param resources {Resource[]} - the resources that have finished loading\r\n     */\r\n    Middleware.prototype.transform = function () {\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        return resources.map(function (resource) { return resource.request; });\r\n    };\r\n    return Middleware;\r\n}());\r\nexport { Middleware };\r\n","function _noop() { }\r\nvar AsyncWorkerQueue = /** @class */ (function () {\r\n    function AsyncWorkerQueue(concurrency) {\r\n        this.concurrency = concurrency;\r\n        this.paused = false;\r\n        this.processes = 0;\r\n        this.workers = [];\r\n        this.tasks = [];\r\n    }\r\n    AsyncWorkerQueue.prototype.process = function (finishCb) {\r\n        var _this = this;\r\n        this.finishCb = finishCb || _noop;\r\n        var _loop_1 = function () {\r\n            var task = this_1.tasks.shift();\r\n            this_1.processes++;\r\n            task.listener.apply(task.listenerContext, [function () { return _this.next(task); }]);\r\n            task.process.apply(task.processContext, task.args);\r\n        };\r\n        var this_1 = this;\r\n        while (!this.paused && this.processes < this.concurrency && this.length) {\r\n            _loop_1();\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.enqueue = function (worker) {\r\n        if (!worker.tasks || worker.tasks.length === 0) {\r\n            throw \"Worker needs to have at least one task\";\r\n        }\r\n        worker.count = worker.count || 0;\r\n        worker.onWorkFinished = worker.onWorkFinished || _noop;\r\n        this.workers.push(worker);\r\n        for (var i = 0, task = void 0; task = worker.tasks[i]; i++) {\r\n            task.worker = worker;\r\n            task.completed = task.completed || false;\r\n            this.tasks.push(task);\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.dequeue = function () {\r\n        var workers = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            workers[_i] = arguments[_i];\r\n        }\r\n        for (var i = 0, worker = void 0; worker = workers[i]; i++) {\r\n            var index = this.workers.indexOf(worker);\r\n            if (index != -1) {\r\n                for (var k = 0, task = void 0; task = worker.tasks[k]; k++) {\r\n                    var taskIndex = this.tasks.indexOf(task);\r\n                    if (taskIndex != -1) {\r\n                        this.tasks.splice(taskIndex, 1);\r\n                    }\r\n                }\r\n                this.workers.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.idle = function () {\r\n        return this.length + this.processes + this.workers.length === 0;\r\n    };\r\n    AsyncWorkerQueue.prototype.next = function (task) {\r\n        //Completed the task\r\n        this.processes--;\r\n        task.completed = true;\r\n        //Check if all tasks of the Worker have been completed\r\n        this.workerFinished(task.worker);\r\n        this.onQueueFinished();\r\n        this.process(this.finishCb);\r\n    };\r\n    /**\r\n     * If all tasks of the worker have been completed we can call its onWorkFinished callback\r\n     * and remove the worker from the queue\r\n     * @param worker\r\n     */\r\n    AsyncWorkerQueue.prototype.workerFinished = function (worker) {\r\n        worker.count += 1;\r\n        var index = this.workers.indexOf(worker);\r\n        if (worker.count === worker.tasks.length && index != -1) {\r\n            var resources = worker.tasks.map(function (task) { return task.resource; });\r\n            worker.onWorkFinished.apply(worker.onWorkFinishedContext, resources);\r\n            this.workers.splice(index, 1);\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.onQueueFinished = function () {\r\n        if (this.idle()) {\r\n            this.finishCb();\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.abort = function () {\r\n        for (var i = 0, worker = void 0; worker = this.workers[i]; i++) {\r\n            for (var j = 0, task = void 0; task = worker.tasks[j]; j++) {\r\n                task.resource.abort();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Stop processing of further tasks and clear worker cb\r\n     */\r\n    AsyncWorkerQueue.prototype.stop = function () {\r\n        this.finishCb = _noop;\r\n        this.abort();\r\n        this.workers.length = 0;\r\n        this.tasks.length = 0;\r\n        this.processes = 0;\r\n    };\r\n    AsyncWorkerQueue.prototype.pause = function () {\r\n        this.paused = true;\r\n    };\r\n    AsyncWorkerQueue.prototype.resume = function () {\r\n        if (this.paused === false) {\r\n            return;\r\n        }\r\n        this.paused = false;\r\n        this.process();\r\n    };\r\n    Object.defineProperty(AsyncWorkerQueue.prototype, \"length\", {\r\n        get: function () {\r\n            return this.tasks.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AsyncWorkerQueue.prototype, \"running\", {\r\n        get: function () {\r\n            return !!this.processes;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AsyncWorkerQueue;\r\n}());\r\nexport { AsyncWorkerQueue };\r\n","import { Middleware } from \"./Middleware\";\r\nimport { AsyncWorkerQueue } from \"./AsyncWorkerQueue\";\r\nimport { EmitSignal } from \"./EmitSignal\";\r\nimport * as EventEmitter from \"eventemitter3\";\r\nexport var LOADER_EVENTS;\r\n(function (LOADER_EVENTS) {\r\n    LOADER_EVENTS[\"PRE\"] = \"PRE\";\r\n    LOADER_EVENTS[\"AFTER\"] = \"AFTER\";\r\n    LOADER_EVENTS[\"PROGRESS\"] = \"PROGRESS\";\r\n    LOADER_EVENTS[\"LOAD_START\"] = \"LOAD_START\";\r\n    LOADER_EVENTS[\"LOAD_COMPLETE\"] = \"LOAD_COMPLETE\";\r\n    LOADER_EVENTS[\"LOADER_FINISHED\"] = \"LOADER_FINISHED\";\r\n    LOADER_EVENTS[\"ERROR\"] = \"ERROR\";\r\n})(LOADER_EVENTS || (LOADER_EVENTS = {}));\r\nvar ResourceLoader = /** @class */ (function () {\r\n    function ResourceLoader(concurrency) {\r\n        if (concurrency === void 0) { concurrency = 10; }\r\n        this._emitter = new EventEmitter();\r\n        this.middleware = Object.create(null);\r\n        this.resourceQueue = new AsyncWorkerQueue(concurrency);\r\n        this._preSignal = new EmitSignal(this._emitter, LOADER_EVENTS.PRE);\r\n        this._afterSignal = new EmitSignal(this._emitter, LOADER_EVENTS.AFTER);\r\n        this.onProgress = new EmitSignal(this._emitter, LOADER_EVENTS.PROGRESS);\r\n        this.onLoadStart = new EmitSignal(this._emitter, LOADER_EVENTS.LOAD_START);\r\n        this.onLoadComplete = new EmitSignal(this._emitter, LOADER_EVENTS.LOAD_COMPLETE);\r\n        this.onError = new EmitSignal(this._emitter, LOADER_EVENTS.ERROR);\r\n        this.onComplete = new EmitSignal(this._emitter, LOADER_EVENTS.LOADER_FINISHED);\r\n    }\r\n    ResourceLoader.prototype._callAfter = function (data) {\r\n        this.onLoadComplete.emit(data);\r\n        this._afterSignal.emit(data);\r\n    };\r\n    /**\r\n     * get a LoadComponent\r\n     * @param {string | {new(...args): T}} id\r\n     * @returns {T}\r\n     */\r\n    ResourceLoader.prototype.get = function (id) {\r\n        if (id && typeof id === \"string\") {\r\n            return this.middleware[id];\r\n        }\r\n        else if (id && typeof id !== \"string\") {\r\n            return this.middleware[id.prototype.constructor.name];\r\n        }\r\n        return undefined;\r\n    };\r\n    /**\r\n     * Add a new Middleware e.g. to load Models from OBJ,GLTF file or to load Textures, Audio etc\r\n     * @param {Middleware} middleware\r\n     * @param {string | {new(...args): T}} id\r\n     * @returns {T}\r\n     */\r\n    ResourceLoader.prototype.addMiddleware = function (middleware, id) {\r\n        Middleware.inject(middleware);\r\n        middleware._loader = this;\r\n        if (id && typeof id === \"string\") {\r\n            this.middleware[id] = middleware;\r\n        }\r\n        else if (id && typeof id !== \"string\") {\r\n            this.middleware[id.prototype.constructor.name] = middleware;\r\n        }\r\n        middleware.onLoad.on(this._callAfter, this);\r\n        return middleware;\r\n    };\r\n    /**\r\n     * Remove a Middleware from the ResourceLoader\r\n     * @param {string | {new(...args): T}} id\r\n     */\r\n    ResourceLoader.prototype.removeMiddleware = function (id) {\r\n        if (id && typeof id === \"string\") {\r\n            delete this.middleware[id];\r\n        }\r\n        else if (id && typeof id !== \"string\") {\r\n            delete this.middleware[id.prototype.constructor.name];\r\n        }\r\n    };\r\n    ResourceLoader.prototype._onResourceLoadStart = function (value) {\r\n        this._preSignal.emit(value.resource);\r\n        this.onLoadStart.emit(value.resource);\r\n    };\r\n    ResourceLoader.prototype._addResourceToQueue = function (config) {\r\n        var _this = this;\r\n        config.resources.forEach(function (value) {\r\n            value.resource.onProgress.on(function (event) { return _this.onProgress.emit(event); });\r\n            value.resource.onError.on(function (event) { return _this.onError.emit(event); });\r\n            value.resource.onLoadStart.on(function () { return _this._onResourceLoadStart(value); });\r\n        });\r\n        this.resourceQueue.enqueue({\r\n            tasks: config.resources.map(function (value) {\r\n                return {\r\n                    resource: value.resource,\r\n                    process: value.resource.load,\r\n                    processContext: value.resource,\r\n                    listener: value.resource.onLoadFinished.once,\r\n                    listenerContext: value.resource.onLoadFinished,\r\n                    args: value.args\r\n                };\r\n            }),\r\n            onWorkFinished: config.onResourcesLoaded,\r\n            onWorkFinishedContext: config.onResourcesLoadedContext\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * cb to call before a resource starts loading\r\n     * cb is removed after the ResourceLoader has finished loading the resources\r\n     * @param cb\r\n     */\r\n    ResourceLoader.prototype.pre = function (cb) {\r\n        this._preSignal.on(cb);\r\n        return this;\r\n    };\r\n    /**\r\n     * cb to call after a Middleware has finished loading and transformed a resource\r\n     * cb is removed after the ResourceLoader has finished loading the resources\r\n     * @param cb\r\n     */\r\n    ResourceLoader.prototype.after = function (cb) {\r\n        this._afterSignal.on(cb);\r\n        return this;\r\n    };\r\n    ResourceLoader.prototype._onLoadComplete = function () {\r\n        this._preSignal.removeAllListeners();\r\n        this._afterSignal.removeAllListeners();\r\n        this.onComplete.emit(this);\r\n    };\r\n    ResourceLoader.prototype.load = function (finishCb) {\r\n        var _this = this;\r\n        if (finishCb && typeof finishCb === 'function') {\r\n            this.onComplete.once(finishCb);\r\n        }\r\n        this.resourceQueue.process(function () { return _this._onLoadComplete(); });\r\n        return this;\r\n    };\r\n    ResourceLoader.prototype.stop = function () {\r\n        this.resourceQueue.stop();\r\n    };\r\n    ResourceLoader.prototype.pause = function () {\r\n        this.resourceQueue.pause();\r\n    };\r\n    ResourceLoader.prototype.resume = function () {\r\n        this.resourceQueue.resume();\r\n    };\r\n    return ResourceLoader;\r\n}());\r\nexport { ResourceLoader };\r\n","export * from \"./ResourceLoader\";\r\nexport * from \"./Resource\";\r\nexport * from \"./Middleware\";\r\n","/**\r\n * Created by Soeren on 31.10.2017.\r\n */\r\nexport var GL_TYPES;\r\n(function (GL_TYPES) {\r\n    GL_TYPES[GL_TYPES[\"BYTE\"] = 5120] = \"BYTE\";\r\n    GL_TYPES[GL_TYPES[\"UNSIGNED_BYTE\"] = 5121] = \"UNSIGNED_BYTE\";\r\n    GL_TYPES[GL_TYPES[\"SHORT\"] = 5122] = \"SHORT\";\r\n    GL_TYPES[GL_TYPES[\"UNSIGNED_SHORT\"] = 5123] = \"UNSIGNED_SHORT\";\r\n    GL_TYPES[GL_TYPES[\"INT\"] = 5124] = \"INT\";\r\n    GL_TYPES[GL_TYPES[\"UNSIGNED_INT\"] = 5125] = \"UNSIGNED_INT\";\r\n    GL_TYPES[GL_TYPES[\"FLOAT\"] = 5126] = \"FLOAT\"; //5126\r\n})(GL_TYPES || (GL_TYPES = {}));\r\nexport const GL_TYPES_BYTESIZE = {\r\n    0x1400: 1,\r\n    0x1401: 1,\r\n    0x1402: 2,\r\n    0x1403: 2,\r\n    0x1404: 4,\r\n    0x1405: 4,\r\n    0x1406: 4\r\n};\r\nexport var GL_PRIMITIVES;\r\n(function (GL_PRIMITIVES) {\r\n    GL_PRIMITIVES[\"POSITION\"] = \"POSITION\";\r\n    GL_PRIMITIVES[\"NORMAL\"] = \"NORMAL\";\r\n    GL_PRIMITIVES[\"TANGENT\"] = \"TANGENT\";\r\n    GL_PRIMITIVES[\"TEXCOORD_0\"] = \"TEXCOORD_0\";\r\n    GL_PRIMITIVES[\"TEXCOORD_1\"] = \"TEXCOORD_1\";\r\n    GL_PRIMITIVES[\"COLOR_0\"] = \"COLOR_0\";\r\n    GL_PRIMITIVES[\"JOINTS_0\"] = \"JOINTS_0\";\r\n    GL_PRIMITIVES[\"WEIGHTS_0\"] = \"WEIGHTS_0\";\r\n    GL_PRIMITIVES[\"JOINTS_1\"] = \"JOINTS_1\";\r\n    GL_PRIMITIVES[\"WEIGHTS_1\"] = \"WEIGHTS_1\";\r\n})(GL_PRIMITIVES || (GL_PRIMITIVES = {}));\r\nexport var GL_BUFFERS;\r\n(function (GL_BUFFERS) {\r\n    GL_BUFFERS[GL_BUFFERS[\"STATIC_DRAW\"] = 35044] = \"STATIC_DRAW\";\r\n    GL_BUFFERS[GL_BUFFERS[\"STREAM_DRAW\"] = 35040] = \"STREAM_DRAW\";\r\n    GL_BUFFERS[GL_BUFFERS[\"DYNAMIC_DRAW\"] = 35048] = \"DYNAMIC_DRAW\";\r\n    GL_BUFFERS[GL_BUFFERS[\"ARRAY_BUFFER\"] = 34962] = \"ARRAY_BUFFER\";\r\n    GL_BUFFERS[GL_BUFFERS[\"ELEMENT_ARRAY_BUFFER\"] = 34963] = \"ELEMENT_ARRAY_BUFFER\";\r\n})(GL_BUFFERS || (GL_BUFFERS = {}));\r\nexport var MAG_FILTER;\r\n(function (MAG_FILTER) {\r\n    MAG_FILTER[MAG_FILTER[\"NEAREST\"] = 9728] = \"NEAREST\";\r\n    MAG_FILTER[MAG_FILTER[\"LINEAR\"] = 9729] = \"LINEAR\";\r\n})(MAG_FILTER || (MAG_FILTER = {}));\r\nexport var MIN_FILTER;\r\n(function (MIN_FILTER) {\r\n    MIN_FILTER[MIN_FILTER[\"NEAREST\"] = 9728] = \"NEAREST\";\r\n    MIN_FILTER[MIN_FILTER[\"LINEAR\"] = 9729] = \"LINEAR\";\r\n    MIN_FILTER[MIN_FILTER[\"NEAREST_MIPMAP_NEAREST\"] = 9984] = \"NEAREST_MIPMAP_NEAREST\";\r\n    MIN_FILTER[MIN_FILTER[\"LINEAR_MIPMAP_NEAREST\"] = 9985] = \"LINEAR_MIPMAP_NEAREST\";\r\n    MIN_FILTER[MIN_FILTER[\"NEAREST_MIPMAP_LINEAR\"] = 9986] = \"NEAREST_MIPMAP_LINEAR\";\r\n    MIN_FILTER[MIN_FILTER[\"LINEAR_MIPMAP_LINEAR\"] = 9987] = \"LINEAR_MIPMAP_LINEAR\";\r\n})(MIN_FILTER || (MIN_FILTER = {}));\r\nexport var TEXTURE_WRAP;\r\n(function (TEXTURE_WRAP) {\r\n    TEXTURE_WRAP[TEXTURE_WRAP[\"CLAMP_TO_EDGE\"] = 33071] = \"CLAMP_TO_EDGE\";\r\n    TEXTURE_WRAP[TEXTURE_WRAP[\"MIRRORED_REPEAT\"] = 33648] = \"MIRRORED_REPEAT\";\r\n    TEXTURE_WRAP[TEXTURE_WRAP[\"REPEAT\"] = 10497] = \"REPEAT\";\r\n})(TEXTURE_WRAP || (TEXTURE_WRAP = {}));\r\nexport var GL_INTERNALFORMAT;\r\n(function (GL_INTERNALFORMAT) {\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGB\"] = 6407] = \"RGB\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGBA\"] = 6408] = \"RGBA\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"R8\"] = 33321] = \"R8\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"R16F\"] = 33325] = \"R16F\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"R32F\"] = 33326] = \"R32F\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"R8UI\"] = 33330] = \"R8UI\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RG8\"] = 33323] = \"RG8\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RG16F\"] = 33327] = \"RG16F\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RG\"] = 33319] = \"RG\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RG32F\"] = 33328] = \"RG32F\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGB8\"] = 32849] = \"RGB8\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"SRGB\"] = 35904] = \"SRGB\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"SRGB8\"] = 35905] = \"SRGB8\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"SRGB8_ALPHA8\"] = 35907] = \"SRGB8_ALPHA8\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGB565\"] = 36194] = \"RGB565\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"R11F_G11F_B10F\"] = 35898] = \"R11F_G11F_B10F\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGB9_E5\"] = 35901] = \"RGB9_E5\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGB16F\"] = 34843] = \"RGB16F\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGB32F\"] = 34837] = \"RGB32F\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGB8UI\"] = 36221] = \"RGB8UI\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGBA8\"] = 32856] = \"RGBA8\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGB5_A1\"] = 32855] = \"RGB5_A1\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGBA16F\"] = 34842] = \"RGBA16F\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGBA32F\"] = 34836] = \"RGBA32F\";\r\n    GL_INTERNALFORMAT[GL_INTERNALFORMAT[\"RGBA8UI\"] = 36220] = \"RGBA8UI\";\r\n})(GL_INTERNALFORMAT || (GL_INTERNALFORMAT = {}));\r\n//# sourceMappingURL=GLConstants.js.map","import { MIN_FILTER } from \"./constants/GLConstants\";\r\nexport class GLTexture {\r\n    constructor(gl, textureID = 0, width = -1, height = -1, internalformat = gl.RGBA, format = gl.RGBA, type = gl.UNSIGNED_BYTE) {\r\n        this.gl = gl;\r\n        this._textureID = textureID;\r\n        this._texture = gl.createTexture();\r\n        this.mipmap = false;\r\n        this._premultiplyAlpha = false;\r\n        this._width = width;\r\n        this._height = height;\r\n        this.internalformat = internalformat;\r\n        this.format = format;\r\n        this.type = type;\r\n        this.miplevel = 0;\r\n    }\r\n    /**\r\n     * Uploads this texture to the GPU\r\n     * @param source {HTMLImageElement|ImageData|HTMLVideoElement}\r\n     */\r\n    upload(source) {\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this._premultiplyAlpha);\r\n        let newWidth = source.width;\r\n        let newHeight = source.height;\r\n        if (newHeight !== this._height || newWidth !== this._width) {\r\n            gl.texImage2D(gl.TEXTURE_2D, this.miplevel, this.internalformat, this.format, this.type, source);\r\n        }\r\n        else {\r\n            gl.texSubImage2D(gl.TEXTURE_2D, this.miplevel, 0, 0, this.format, this.type, source);\r\n        }\r\n        this._width = newWidth;\r\n        this._height = newHeight;\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Use a data source and uploads this texture to the GPU\r\n     * @param data {TypedArray} data to upload to the texture\r\n     * @param width {number} new width of the texture\r\n     * @param height {number} new height of the texture\r\n     */\r\n    uploadData(data, width, height) {\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this._premultiplyAlpha);\r\n        if (width !== this._width || height !== this._height) {\r\n            gl.texImage2D(gl.TEXTURE_2D, this.miplevel, this.internalformat, width, height, 0, this.format, this.type, data || null);\r\n        }\r\n        else {\r\n            gl.texSubImage2D(gl.TEXTURE_2D, this.miplevel, 0, 0, width, height, this.format, this.type, data || null);\r\n        }\r\n        this._width = width;\r\n        this._height = height;\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Binds the texture\r\n     * @param location\r\n     */\r\n    bind(location = this._textureID) {\r\n        let gl = this.gl;\r\n        if (location !== undefined) {\r\n            gl.activeTexture(gl.TEXTURE0 + location);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_2D, this._texture);\r\n        return this;\r\n    }\r\n    unbind(location = this._textureID) {\r\n        let gl = this.gl;\r\n        if (location !== undefined) {\r\n            gl.activeTexture(gl.TEXTURE0 + location);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n        return this;\r\n    }\r\n    /**\r\n     * @param linear {boolean} if we want to use linear filtering or nearest neighbour interpolation\r\n     */\r\n    minFilter(linear) {\r\n        this.bind();\r\n        let gl = this.gl;\r\n        if (this.mipmap) {\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, linear ? gl.LINEAR_MIPMAP_LINEAR : gl.NEAREST_MIPMAP_NEAREST);\r\n        }\r\n        else {\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, linear ? gl.LINEAR : gl.NEAREST);\r\n        }\r\n        this.unbind();\r\n    }\r\n    setMinFilter(filter) {\r\n        if (!this.mipmap && (filter === MIN_FILTER.LINEAR_MIPMAP_LINEAR\r\n            || filter === MIN_FILTER.LINEAR_MIPMAP_NEAREST\r\n            || filter === MIN_FILTER.NEAREST_MIPMAP_LINEAR\r\n            || filter === MIN_FILTER.NEAREST_MIPMAP_NEAREST)) {\r\n            this.enableMipmap();\r\n        }\r\n        this.bind();\r\n        let gl = this.gl;\r\n        if (this.mipmap) {\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter);\r\n        }\r\n        else {\r\n            //If there is no mipamp e.g. non power of 2 use LINEAR or NEAREST\r\n            const linear = filter === MIN_FILTER.LINEAR || MIN_FILTER.LINEAR_MIPMAP_LINEAR || MIN_FILTER.LINEAR_MIPMAP_NEAREST;\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, linear ? gl.LINEAR : gl.NEAREST);\r\n        }\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * @param linear {boolean} if we want to use linear or nearest neighbour interpolation\r\n     */\r\n    magFilter(linear) {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, linear ? gl.LINEAR : gl.NEAREST);\r\n        this.unbind();\r\n    }\r\n    setMagFilter(filter) {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter);\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Enables mipmapping\r\n     */\r\n    enableMipmap() {\r\n        if (GLTexture.isPowerOf2(this._width) && GLTexture.isPowerOf2(this._height) && (this.internalformat === this.gl.RGB || this.internalformat === this.gl.RGBA)) {\r\n            let gl = this.gl;\r\n            this.bind();\r\n            this.mipmap = true;\r\n            gl.generateMipmap(gl.TEXTURE_2D);\r\n            this.unbind();\r\n        }\r\n    }\r\n    /**\r\n     * Enables linear filtering\r\n     */\r\n    enableLinearScaling() {\r\n        this.minFilter(true);\r\n        this.magFilter(true);\r\n    }\r\n    /**\r\n     * Enabled nearest neighbour interpolation\r\n     */\r\n    enableNearestScaling() {\r\n        this.minFilter(false);\r\n        this.magFilter(false);\r\n    }\r\n    /**\r\n     * Enables clamping on the texture wo WebGL will not repeat it\r\n     */\r\n    enableWrapClamp() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Enable tiling on the texture\r\n     */\r\n    enableWrapRepeat() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n        this.unbind();\r\n    }\r\n    enableWrapMirrorRepeat() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.MIRRORED_REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.MIRRORED_REPEAT);\r\n        this.unbind();\r\n    }\r\n    setWrapS(mode) {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, mode);\r\n        this.unbind();\r\n    }\r\n    setWrapT(mode) {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, mode);\r\n        this.unbind();\r\n    }\r\n    flipY(flip) {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flip);\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Destroys this texture\r\n     */\r\n    destroy() {\r\n        let gl = this.gl;\r\n        gl.deleteTexture(this._texture);\r\n    }\r\n    static isPowerOf2(value) {\r\n        return (value & (value - 1)) === 0;\r\n    }\r\n    static nextHighestPowerOfTwo(x) {\r\n        --x;\r\n        for (var i = 1; i < 32; i <<= 1) {\r\n            x = x | x >> i;\r\n        }\r\n        return x + 1;\r\n    }\r\n    get textureID() {\r\n        return this._textureID;\r\n    }\r\n    set textureID(value) {\r\n        this._textureID = value;\r\n    }\r\n    get texture() {\r\n        return this._texture;\r\n    }\r\n    set texture(value) {\r\n        this._texture = value;\r\n    }\r\n    get premultiplyAlpha() {\r\n        return this._premultiplyAlpha;\r\n    }\r\n    set premultiplyAlpha(value) {\r\n        this._premultiplyAlpha = value;\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    /**\r\n     *\r\n     * @param gl {WebGL2RenderingContext} the current webgl context\r\n     * @param source {HTMLImageElement|ImageData} the source image of the texture\r\n     * @param premultiplyAlpha {Boolean} If we want to use pre-multiplied alpha\r\n     * @param textureID {number} textureID to use multiple textures in a shader\r\n     * @param internalformat {number} optional interal format RGBA8,RGB16 etc.\r\n     * @param format {number} optional the Format to use for the texture RGBA etc.\r\n     * @param type {number} texture type GL_FLOAT etc\r\n     * @returns {GLTexture}\r\n     */\r\n    static fromSource(gl, source, premultiplyAlpha = false, textureID = 0, internalformat, format, type) {\r\n        let texture = new GLTexture(gl, textureID, null, null, internalformat, format, type);\r\n        texture._premultiplyAlpha = premultiplyAlpha;\r\n        texture.upload(source);\r\n        return texture;\r\n    }\r\n    /**\r\n     * @param {WebGL2RenderingContext} gl - webgl context\r\n     * @param {Float32Array} data - data for the texture\r\n     * @param {number} width - width of the texture\r\n     * @param {number} height - height of the texture\r\n     * @param {number} textureID - textureID\r\n     * @param {number} internalformat - optional format to use RGBA,RGB etc.\r\n     * @param {number} format - optional format to use RGBA,RGB etc.\r\n     * @param {number} type - data type default: UNSIGNED_BYTE\r\n     * @param {boolean} premultiplyAlpha - If we want to use pre-multiplied alpha\r\n     * @returns {GLTexture}\r\n     */\r\n    static fromData(gl, data, width, height, textureID = 0, internalformat, format, type, premultiplyAlpha) {\r\n        let texture = new GLTexture(gl, textureID, null, null, internalformat, format, type);\r\n        texture._premultiplyAlpha = premultiplyAlpha;\r\n        texture.uploadData(data, width, height);\r\n        return texture;\r\n    }\r\n}\r\n//# sourceMappingURL=GLTexture.js.map","import { GLTexture } from \"./GLTexture\";\r\nexport class GLCubemap extends GLTexture {\r\n    constructor(gl, textureID = 0, width = -1, height = -1, internalFormat = gl.RGBA, format = gl.RGBA, type = gl.UNSIGNED_BYTE) {\r\n        super(gl, textureID, width, height, internalFormat, format, type);\r\n        this.gl = gl;\r\n        this._textureID = textureID;\r\n        this._texture = gl.createTexture();\r\n        this.mipmap = false;\r\n        this.premultiplyAlpha = false;\r\n        this._width = width;\r\n        this._height = height;\r\n        this.format = format;\r\n        this.type = type;\r\n    }\r\n    /**\r\n     * Uploads this texture to the GPU\r\n     * @param source {HTMLImageElement|ImageData|HTMLVideoElement}\r\n     * @param flip - {boolean} flip the texture\r\n     * @param face {number}\r\n     * @param level {number} mipmap level\r\n     */\r\n    upload(source, flip = false, face = 0, level = 0) {\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flip);\r\n        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, level, this.internalformat, this.format, this.type, source);\r\n        if (level === 0) {\r\n            this._width = source.width;\r\n            this._height = source.height;\r\n        }\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Use a data source and uploads this texture to the GPU\r\n     * @param data {TypedArray} data to upload to the texture\r\n     * @param width {number} new width of the texture\r\n     * @param height {number} new height of the texture\r\n     * @param flip - {boolean} flip the texture\r\n     * @param face {number}\r\n     */\r\n    uploadData(data, face, width = this._width, height = this._height, flip = false, level = 0) {\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flip);\r\n        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, level, this.internalformat, width, height, 0, this.format, this.type, data || null);\r\n        if (level === 0) {\r\n            this._width = width;\r\n            this._height = height;\r\n        }\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Binds the texture\r\n     * @param location\r\n     */\r\n    bind(location = this._textureID) {\r\n        let gl = this.gl;\r\n        if (location !== undefined) {\r\n            gl.activeTexture(gl.TEXTURE0 + location);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, this._texture);\r\n        return this;\r\n    }\r\n    unbind(location = this._textureID) {\r\n        let gl = this.gl;\r\n        if (location !== undefined) {\r\n            gl.activeTexture(gl.TEXTURE0 + location);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\r\n        return this;\r\n    }\r\n    /**\r\n     * Enables linear filtering\r\n     */\r\n    enableLinearScaling() {\r\n        this.minFilter(true);\r\n        this.magFilter(true);\r\n    }\r\n    /**\r\n     * Enabled nearest neighbour interpolation\r\n     */\r\n    enableNearestScaling() {\r\n        this.minFilter(false);\r\n        this.magFilter(false);\r\n    }\r\n    /**\r\n     * @param linear {boolean} if we want to use linear filtering or nearest neighbour interpolation\r\n     */\r\n    minFilter(linear) {\r\n        this.bind();\r\n        let gl = this.gl;\r\n        if (this.mipmap) {\r\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, linear ? gl.LINEAR_MIPMAP_LINEAR : gl.NEAREST_MIPMAP_NEAREST);\r\n        }\r\n        else {\r\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, linear ? gl.LINEAR : gl.NEAREST);\r\n        }\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * @param linear {boolean} if we want to use linear or nearest neighbour interpolation\r\n     */\r\n    magFilter(linear) {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, linear ? gl.LINEAR : gl.NEAREST);\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Enables mipmapping\r\n     */\r\n    enableMipmap() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        this.mipmap = true;\r\n        gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Enables clamping on the texture wo WebGL will not repeat it\r\n     */\r\n    enableWrapClamp() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_R, gl.CLAMP_TO_EDGE);\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Enable tiling on the texture\r\n     */\r\n    enableWrapRepeat() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_R, gl.REPEAT);\r\n        this.unbind();\r\n    }\r\n    enableWrapMirrorRepeat() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.MIRRORED_REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.MIRRORED_REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_R, gl.MIRRORED_REPEAT);\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Destroys this texture\r\n     */\r\n    destroy() {\r\n        let gl = this.gl;\r\n        gl.deleteTexture(this._texture);\r\n    }\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    /**\r\n     * create CubeMap from source data\r\n     * @param gl\r\n     * @param source - the src\r\n     * @param flip - flip the texture default: false\r\n     * @param premultiplyAlpha - premultiplyAlpha\r\n     * @param textureID - textureID\r\n     * @param internalformat\r\n     * @param format\r\n     * @param type\r\n     */\r\n    static cubemapFromSource(gl, source, flip = false, premultiplyAlpha = false, textureID = 0, internalformat, format, type) {\r\n        const cubemap = new GLCubemap(gl, textureID, null, null, internalformat, format, type);\r\n        const sources = [].concat(source);\r\n        cubemap.premultiplyAlpha = premultiplyAlpha;\r\n        const mipLevels = Math.floor(sources.length / 6);\r\n        for (let j = 0; j < mipLevels; j++) {\r\n            for (let i = 0; i < 6; i++) {\r\n                cubemap.upload(sources[(j * 6) + i], flip, i, j);\r\n            }\r\n        }\r\n        if (GLTexture.isPowerOf2(source[0].width) && GLTexture.isPowerOf2(source[0].height)) {\r\n            cubemap.enableMipmap();\r\n            cubemap.enableWrapRepeat();\r\n        }\r\n        else {\r\n            cubemap.enableWrapClamp();\r\n        }\r\n        cubemap.enableLinearScaling();\r\n        return cubemap;\r\n    }\r\n    static cubemapFromData(gl, data, width, height, flip = false, textureID = 0, internalformat, format, type) {\r\n        let texture = new GLCubemap(gl, textureID, null, null, format, type);\r\n        let datas = [].concat(data);\r\n        for (let i = 0; i < 6; i++) {\r\n            texture.uploadData(datas[i], i, width, height, flip);\r\n        }\r\n        return texture;\r\n    }\r\n}\r\n//# sourceMappingURL=GLCubemap.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./GLConstants\";\r\n//# sourceMappingURL=index.js.map","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\nexport class GLBuffer {\r\n    constructor(gl, type = gl.ARRAY_BUFFER, data, drawType = gl.STATIC_DRAW) {\r\n        this.gl = gl;\r\n        this.type = type;\r\n        this.arrayBuffers = [];\r\n        this._byteLength = 0;\r\n        this.buffer = gl.createBuffer();\r\n        this.drawType = drawType;\r\n        if (data) {\r\n            this.upload(data);\r\n        }\r\n    }\r\n    /**\r\n     * Add Data to the MeshBuffermap that should be uploaded\r\n     * @param {ArrayBuffer | ArrayBufferView} data\r\n     */\r\n    addData(data) {\r\n        this.arrayBuffers.push(data);\r\n        this._byteLength += data.byteLength;\r\n    }\r\n    /**\r\n     * Remove data from the MeshBuffermap\r\n     * @param {ArrayBuffer | ArrayBufferView} data\r\n     */\r\n    removeData(data) {\r\n        const index = this.arrayBuffers.indexOf(data);\r\n        if (index > -1) {\r\n            const data = this.arrayBuffers[index];\r\n            this._byteLength -= data.byteLength;\r\n            this.arrayBuffers.splice(index, 1);\r\n        }\r\n    }\r\n    /**\r\n     * Uploads the new data to the GPU and all the previous data\r\n     * @param data {ArrayBuffer|ArrayBufferView} an array of data to upload\r\n     */\r\n    upload(data) {\r\n        if (data) {\r\n            this.addData(data);\r\n        }\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.bufferData(this.type, this._byteLength, this.drawType);\r\n        let offset = 0;\r\n        for (let i = 0, data; data = this.arrayBuffers[i]; i++) {\r\n            gl.bufferSubData(this.type, offset, data);\r\n            offset += data.byteLength;\r\n        }\r\n        this.unbind();\r\n        return this._byteLength;\r\n    }\r\n    bind() {\r\n        this.gl.bindBuffer(this.type, this.buffer);\r\n    }\r\n    unbind() {\r\n        this.gl.bindBuffer(this.type, null);\r\n    }\r\n    destroy() {\r\n        if (this.gl.isBuffer(this.buffer)) {\r\n            this.gl.deleteBuffer(this.buffer);\r\n        }\r\n        this.gl = null;\r\n        this.buffer = null;\r\n    }\r\n    /**\r\n     * sum of the ByteLength of all ArrayBuffers stored in this GLBuffer\r\n     * @returns {number}\r\n     */\r\n    get byteLength() {\r\n        return this._byteLength;\r\n    }\r\n    /**\r\n     * Length of the ArrayBuffers stored in this MeshBuffermap\r\n     * @returns {number}\r\n     */\r\n    get length() {\r\n        return this.arrayBuffers.length;\r\n    }\r\n    static createVertexBuffer(gl, data = null, drawType = gl.STATIC_DRAW) {\r\n        return new GLBuffer(gl, gl.ARRAY_BUFFER, data, drawType);\r\n    }\r\n    static createIndexBuffer(gl, data = null, drawType = gl.STATIC_DRAW) {\r\n        return new GLBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, data, drawType);\r\n    }\r\n    static create(gl, type, data = null, drawType = gl.STATIC_DRAW) {\r\n        return new GLBuffer(gl, type, data, drawType);\r\n    }\r\n}\r\n//# sourceMappingURL=GLBuffer.js.map","export class GLVertexArrayObject {\r\n    constructor(gl) {\r\n        this.gl = gl;\r\n        this.vao = this.gl.createVertexArray();\r\n        this.attributes = [];\r\n        this.dirty = false;\r\n    }\r\n    /**\r\n     * Binds the VAO, if its dirty it will initialize the attributes for the data\r\n     */\r\n    bind() {\r\n        if (this.vao) {\r\n            this.gl.bindVertexArray(this.vao);\r\n            if (this.dirty) {\r\n                this.activate();\r\n                this.dirty = false;\r\n                this.bind();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Activates the vao,\r\n     * binds the data and applies the Attributes\r\n     */\r\n    activate() {\r\n        const gl = this.gl;\r\n        let lastBuffer = null;\r\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\r\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\r\n        for (let i = 0, attribute; attribute = this.attributes[i]; i++) {\r\n            if (lastBuffer !== attribute.buffer) {\r\n                //unbind previous buffer we dont want to apply the attribute to both buffers\r\n                if (lastBuffer) {\r\n                    lastBuffer.unbind();\r\n                }\r\n                //bind attribute buffer\r\n                attribute.buffer.bind();\r\n                //update lastBuffer\r\n                lastBuffer = attribute.buffer;\r\n            }\r\n            GLVertexArrayObject.setVertexAttribArray(gl, attribute);\r\n        }\r\n        if (lastBuffer) {\r\n            lastBuffer.unbind();\r\n        }\r\n        this.indexBuffer.bind();\r\n        return this;\r\n    }\r\n    /**\r\n     * Deactivates the non native VertexArrayObject\r\n     */\r\n    deactivate() {\r\n        const gl = this.gl;\r\n        let lastBuffer = null;\r\n        for (let i = 0, attribute; attribute = this.attributes[i]; i++) {\r\n            if (lastBuffer !== attribute.buffer) {\r\n                attribute.buffer.unbind();\r\n                lastBuffer = attribute.buffer;\r\n            }\r\n            GLVertexArrayObject.setVertexAttribArray(gl, attribute, true);\r\n        }\r\n        this.indexBuffer.unbind();\r\n        return this;\r\n    }\r\n    /**\r\n     * Unbind the VAO\r\n     */\r\n    unbind(force = false) {\r\n        if (this.vao) {\r\n            this.gl.bindVertexArray(null);\r\n        }\r\n        else if (!this.vao || force) {\r\n            this.deactivate();\r\n        }\r\n        return this;\r\n    }\r\n    addAttribute(buffer, attribute, size, type, normalized, stride, offset, initialize = true) {\r\n        this.attributes.push({\r\n            buffer,\r\n            attribute,\r\n            size,\r\n            type,\r\n            normalized,\r\n            stride,\r\n            offset,\r\n            initialize\r\n        });\r\n        this.dirty = true;\r\n        return this;\r\n    }\r\n    setIndexBuffer(buffer) {\r\n        this.indexBuffer = buffer;\r\n        return this;\r\n    }\r\n    draw(mode, size, type, offset) {\r\n        const gl = this.gl;\r\n        gl.drawElements(mode, size, type, offset);\r\n        return this;\r\n    }\r\n    /**\r\n     * Removes all attributes from this vao\r\n     * and deactivates the GLAttributes\r\n     */\r\n    clear() {\r\n        //Bind vao\r\n        if (this.vao) {\r\n            this.gl.bindVertexArray(this.vao);\r\n        }\r\n        //Remove attributes\r\n        this.deactivate();\r\n        //clear attributes\r\n        this.attributes.length = 0;\r\n        //Remove indexBuffer\r\n        this.indexBuffer = null;\r\n        //Unbind vao\r\n        if (this.vao) {\r\n            this.gl.bindVertexArray(null);\r\n        }\r\n    }\r\n    /**\r\n     * Clears the buffer the removes all references\r\n     * making it free for gc\r\n     */\r\n    destroy() {\r\n        this.clear();\r\n        if (this.vao) {\r\n            this.gl.deleteVertexArray(this.vao);\r\n        }\r\n        this.gl = undefined;\r\n        this.indexBuffer = undefined;\r\n        this.attributes = undefined;\r\n        this.vao = undefined;\r\n    }\r\n    static setVertexAttribArrays(gl, attributes, unbind = false) {\r\n        for (let i = 0, attribute; attribute = attributes[i]; i++) {\r\n            GLVertexArrayObject.setVertexAttribArray(gl, attribute, unbind);\r\n        }\r\n    }\r\n    static setVertexAttribArray(gl, attribute, unbind = false) {\r\n        if (attribute.initialize && attribute.attribute) {\r\n            gl.vertexAttribPointer(attribute.attribute.location, attribute.size, attribute.type, attribute.normalized, attribute.stride, attribute.offset);\r\n            attribute.initialize = false;\r\n        }\r\n        if (unbind && attribute.attribute) {\r\n            gl.disableVertexAttribArray(attribute.attribute.location);\r\n        }\r\n        else if (attribute.attribute) {\r\n            gl.enableVertexAttribArray(attribute.attribute.location);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=GLVertexArrayObject.js.map","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n;\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {vec4} result the receiving vector\r\n * @param {vec4} U the first vector\r\n * @param {vec4} V the second vector\r\n * @param {vec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n;\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat2 from \"./mat2.js\";\nimport * as mat2d from \"./mat2d.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as mat4 from \"./mat4.js\";\nimport * as quat from \"./quat.js\";\nimport * as quat2 from \"./quat2.js\";\nimport * as vec2 from \"./vec2.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\nexport { glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 };","import { GLBuffer } from \"./GLBuffer\";\r\nimport { GLVertexArrayObject } from \"./GLVertexArrayObject\";\r\nimport { vec3 } from \"gl-matrix\";\r\n/**\r\n * Created by Soeren on 18.05.2017.\r\n */\r\nexport class GLCube {\r\n    constructor(gl) {\r\n        this.gl = gl;\r\n        this.createVertexData();\r\n    }\r\n    calcVertexData() {\r\n        let vertices = [\r\n            1, 1, 1,\r\n            1, 1, -1,\r\n            1, -1, 1,\r\n            1, -1, -1,\r\n            -1, -1, 1,\r\n            -1, 1, 1,\r\n            -1, 1, -1,\r\n            -1, -1, -1\r\n        ];\r\n        let indices = [];\r\n        //right\r\n        indices[0] = 0;\r\n        indices[1] = 1;\r\n        indices[2] = 2;\r\n        indices[3] = 1;\r\n        indices[4] = 2;\r\n        indices[5] = 3;\r\n        //left\r\n        indices[6] = 4;\r\n        indices[7] = 5;\r\n        indices[8] = 6;\r\n        indices[9] = 4;\r\n        indices[10] = 6;\r\n        indices[11] = 7;\r\n        //top\r\n        indices[12] = 5;\r\n        indices[13] = 6;\r\n        indices[14] = 0;\r\n        indices[15] = 0;\r\n        indices[16] = 6;\r\n        indices[17] = 1;\r\n        //bottom\r\n        indices[18] = 7;\r\n        indices[19] = 2;\r\n        indices[20] = 3;\r\n        indices[21] = 7;\r\n        indices[22] = 2;\r\n        indices[23] = 4;\r\n        //back\r\n        indices[24] = 7;\r\n        indices[25] = 6;\r\n        indices[26] = 3;\r\n        indices[27] = 6;\r\n        indices[28] = 3;\r\n        indices[29] = 1;\r\n        //front\r\n        indices[30] = 5;\r\n        indices[31] = 4;\r\n        indices[32] = 0;\r\n        indices[33] = 0;\r\n        indices[34] = 4;\r\n        indices[35] = 2;\r\n        let a, b, c;\r\n        const fVertices = [];\r\n        for (let i = 0; i < indices.length; i += 3) {\r\n            a = vec3.fromValues(vertices[indices[i] * 3], vertices[indices[i] * 3 + 1], vertices[indices[i] * 3 + 2]);\r\n            b = vec3.fromValues(vertices[indices[i + 1] * 3], vertices[indices[i + 1] * 3 + 1], vertices[indices[i + 1] * 3 + 2]);\r\n            c = vec3.fromValues(vertices[indices[i + 2] * 3], vertices[indices[i + 2] * 3 + 1], vertices[indices[i + 2] * 3 + 2]);\r\n            const ab = vec3.create();\r\n            vec3.subtract(ab, b, a);\r\n            const ac = vec3.create();\r\n            vec3.subtract(ac, c, a);\r\n            const normal = vec3.create();\r\n            vec3.cross(normal, ab, ac);\r\n            vec3.normalize(normal, normal);\r\n            fVertices.push(a[0], a[1], a[2], normal[0], normal[1], normal[2]);\r\n            fVertices.push(b[0], b[1], b[2], normal[0], normal[1], normal[2]);\r\n            fVertices.push(c[0], c[1], c[2], normal[0], normal[1], normal[2]);\r\n        }\r\n        return new Float32Array(fVertices);\r\n    }\r\n    createVertexData() {\r\n        const vertices = this.calcVertexData();\r\n        const indices = new Uint8Array(36);\r\n        for (let i = 0; i < 36; i++) {\r\n            indices[i] = i;\r\n        }\r\n        this._vertexBuffer = GLBuffer.createVertexBuffer(this.gl, vertices, this.gl.STATIC_DRAW);\r\n        if (!this._vertexBuffer) {\r\n            throw 'Failed to create VertexBuffer Object';\r\n        }\r\n        this._indexBuffer = GLBuffer.createIndexBuffer(this.gl, indices, this.gl.STATIC_DRAW);\r\n        if (!this._indexBuffer) {\r\n            throw 'Failed to create IndexBuffer Object!';\r\n        }\r\n        this._vertexArrayObject = new GLVertexArrayObject(this.gl);\r\n        this.vertexArrayObject.setIndexBuffer(this._indexBuffer);\r\n    }\r\n    get vertexBuffer() {\r\n        return this._vertexBuffer;\r\n    }\r\n    set vertexBuffer(value) {\r\n        this._vertexBuffer = value;\r\n    }\r\n    get indexBuffer() {\r\n        return this._indexBuffer;\r\n    }\r\n    set indexBuffer(value) {\r\n        this._indexBuffer = value;\r\n    }\r\n    get vertexArrayObject() {\r\n        return this._vertexArrayObject;\r\n    }\r\n    set vertexArrayObject(value) {\r\n        this._vertexArrayObject = value;\r\n    }\r\n    draw() {\r\n        this.vertexArrayObject.bind();\r\n        this.gl.drawElements(this.gl.TRIANGLES, GLCube.INDEX_LENGTH, this.gl.UNSIGNED_BYTE, 0);\r\n        this.vertexArrayObject.unbind();\r\n    }\r\n}\r\nGLCube.INDEX_LENGTH = 36;\r\n//# sourceMappingURL=GLCube.js.map","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\nimport { GLTexture } from \"./GLTexture\";\r\nexport class GLFramebuffer {\r\n    constructor(gl, width = 512, height = 512) {\r\n        this.drawBuffers = [];\r\n        this.gl = gl;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.framebuffer = gl.createFramebuffer();\r\n        this.renderbuffer = null;\r\n        this._textures = [];\r\n    }\r\n    checkStatus() {\r\n        const gl = this.gl;\r\n        let status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\r\n        switch (status) {\r\n            case gl.FRAMEBUFFER_COMPLETE:\r\n                return true;\r\n            case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\r\n                console.warn(\"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT\");\r\n                return false;\r\n            case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\r\n                console.warn(\"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\");\r\n                return false;\r\n            case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\r\n                console.warn(\"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS\");\r\n                return false;\r\n            case gl.FRAMEBUFFER_UNSUPPORTED:\r\n                console.warn(\"Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED\");\r\n                return false;\r\n            default:\r\n                console.warn(\"Incomplete framebuffer: \" + status);\r\n                return false;\r\n        }\r\n    }\r\n    /**\r\n     * Creates a frame buffer with a texture containing the given data\r\n     *\r\n     * @static\r\n     * @param {WebGL2RenderingContext} gl - The current WebGL rendering context\r\n     * @param {number} width - the width of the drawing area of the frame buffer\r\n     * @param {number} height - the height of the drawing area of the frame buffer\r\n     * @param {number} textureID - texture target\r\n     * @param {number} attachment - COLOR_ATTACHMENT\r\n     * @param {number} internalformat\r\n     * @param {number} format\r\n     * @param {number} type\r\n     * @return {GLFramebuffer} The new framebuffer.\r\n     */\r\n    static createRGBA(gl, width, height, textureID = 0, attachment = gl.COLOR_ATTACHMENT0, internalformat, format, type) {\r\n        return GLFramebuffer.createFloat32(gl, width, height, null, textureID, attachment, format, type);\r\n    }\r\n    /**\r\n     * Creates a frame buffer with a texture containing the given data\r\n     *\r\n     * @static\r\n     * @param {WebGL2RenderingContext} gl - The current WebGL rendering context\r\n     * @param {number} width - the width of the drawing area of the frame buffer\r\n     * @param {number} height - the height of the drawing area of the frame buffer\r\n     * @param {ArrayBuffer|SharedArrayBuffer|ArrayBufferView} data - an array of data\r\n     * @param {number} textureID - texture target\r\n     * @param {number} attachment - COLOR_ATTACHMENT\r\n     * @param {number} internalformat\r\n     * @param {number} format\r\n     * @param {number} type\r\n     * @return {GLFramebuffer} The new framebuffer.\r\n     */\r\n    static createFloat32(gl, width, height, data, textureID = 0, attachment = gl.COLOR_ATTACHMENT0, internalformat, format, type) {\r\n        const texture = GLTexture.fromData(gl, data, width, height, textureID, internalformat, format, type);\r\n        texture.enableNearestScaling();\r\n        texture.enableWrapClamp();\r\n        // now create the framebuffer object and attach the texture to it.\r\n        const fbo = new GLFramebuffer(gl, width, height);\r\n        fbo.addTargetTexture(texture, attachment);\r\n        fbo.unbind();\r\n        return fbo;\r\n    }\r\n    /**\r\n     * Adds a texture to the framebuffer.\r\n     * @param {GLTexture} texture - the texture to add.\r\n     * @param {Number} attachment - COLOR_ATTACHMENT\r\n     * @param {Number} face if used for 3d Textures\r\n     * @param {Boolean} setDrawBuffer - adds the attachment to the drawBuffer\r\n     */\r\n    addTargetTexture(texture, attachment = this.gl.COLOR_ATTACHMENT0, face, setDrawBuffer = true) {\r\n        const gl = this.gl;\r\n        if (this._textures.indexOf(texture) > -1) {\r\n            this.bind();\r\n            return this;\r\n        }\r\n        this._textures.push(texture || new GLTexture(gl, 0));\r\n        let tex = this._textures[this._textures.length - 1].bind();\r\n        this.bind();\r\n        if (face || face === 0) {\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, tex.texture, 0);\r\n        }\r\n        else {\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, tex.texture, 0);\r\n        }\r\n        if (setDrawBuffer) {\r\n            this.drawBuffers.push(attachment);\r\n            this.gl.drawBuffers(this.drawBuffers);\r\n        }\r\n        return this;\r\n    }\r\n    setDrawBuffer(drawBuffers = this.drawBuffers) {\r\n        this.gl.drawBuffers(drawBuffers);\r\n    }\r\n    /**\r\n     * Initialises the stencil buffer\r\n     */\r\n    createRenderbuffer() {\r\n        if (this.renderbuffer) {\r\n            return null;\r\n        }\r\n        const gl = this.gl;\r\n        this.bind();\r\n        this.renderbuffer = gl.createRenderbuffer();\r\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.renderbuffer);\r\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, this.renderbuffer);\r\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, this.width, this.height);\r\n        this.unbind();\r\n        return this;\r\n    }\r\n    /**\r\n     * Erases the drawing area and fills it with a colour\r\n     *\r\n     * @param {number} r - the red value of the clearing colour\r\n     * @param {number} g - the green value of the clearing colour\r\n     * @param {number} b - the blue value of the clearing colour\r\n     * @param {number} a - the alpha value of the clearing colour\r\n     * @param {boolean} depthBuffer - clear DepthBuffer default: false\r\n     * @param {boolean} stencilBuffer - clear StencilBuffer default: false\r\n     */\r\n    clear(r = 0, g = 0, b = 0, a = 1, depthBuffer = false, stencilBuffer = false) {\r\n        this.bind();\r\n        const gl = this.gl;\r\n        gl.clearColor(r, g, b, a);\r\n        if (depthBuffer && stencilBuffer) {\r\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);\r\n        }\r\n        else if (depthBuffer) {\r\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        }\r\n        else if (stencilBuffer) {\r\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);\r\n        }\r\n        else {\r\n            gl.clear(gl.COLOR_BUFFER_BIT);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Binds the frame buffer to the WebGL context\r\n     */\r\n    bind(target = this.gl.FRAMEBUFFER) {\r\n        const gl = this.gl;\r\n        for (let texture of this._textures) {\r\n            texture.unbind();\r\n        }\r\n        gl.bindFramebuffer(target, this.framebuffer);\r\n        return this;\r\n    }\r\n    /**\r\n     * Unbinds the frame buffer to the WebGL context\r\n     */\r\n    unbind(target = this.gl.FRAMEBUFFER) {\r\n        this.gl.bindFramebuffer(target, null);\r\n        return this;\r\n    }\r\n    /**\r\n     * Resizes the drawing area of the buffer to the given width and height\r\n     *\r\n     * @param {number} width - the new width\r\n     * @param {number} height - the new height\r\n     */\r\n    resize(width, height) {\r\n        const gl = this.gl;\r\n        this.width = width;\r\n        this.height = height;\r\n        for (let texture of this._textures) {\r\n            texture.uploadData(null, width, height);\r\n        }\r\n        if (this.renderbuffer) {\r\n            // update the stencil buffer width and height\r\n            gl.bindRenderbuffer(gl.RENDERBUFFER, this.renderbuffer);\r\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, width, height);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Destroys this buffer\r\n     */\r\n    destroy() {\r\n        for (let texture of this._textures) {\r\n            texture.destroy();\r\n        }\r\n        this.gl.deleteFramebuffer(this.framebuffer);\r\n        this.gl = undefined;\r\n        this.framebuffer = undefined;\r\n        this.renderbuffer = undefined;\r\n        this.drawBuffers.length = 0;\r\n        this._textures.length = 0;\r\n    }\r\n    getTexture(idx = 0) {\r\n        return this._textures[idx];\r\n    }\r\n    setTexture(value, idx = 0) {\r\n        this._textures[idx] = value;\r\n    }\r\n    get texture() {\r\n        return this._textures[0];\r\n    }\r\n    set texture(value) {\r\n        this._textures[0] = value;\r\n    }\r\n    get textures() {\r\n        return this._textures;\r\n    }\r\n    set textures(value) {\r\n        this._textures = value;\r\n    }\r\n}\r\n//# sourceMappingURL=GLFramebuffer.js.map","import { GLBuffer } from \"./GLBuffer\";\r\nimport { GLVertexArrayObject } from \"./GLVertexArrayObject\";\r\n/**\r\n * Created by Soeren on 12.02.2017.\r\n */\r\nexport class GLQuad {\r\n    constructor(gl) {\r\n        this.gl = gl;\r\n        this.createVertexData();\r\n    }\r\n    createVertexData() {\r\n        let vertices = new Float32Array([\r\n            -1, 1, 0, 1,\r\n            -1, -1, 0, 0,\r\n            1, 1, 1, 1,\r\n            1, -1, 1, 0\r\n        ]);\r\n        let indices = new Uint8Array(6);\r\n        indices[0] = 0;\r\n        indices[1] = 1;\r\n        indices[2] = 2;\r\n        indices[3] = 1;\r\n        indices[4] = 2;\r\n        indices[5] = 3;\r\n        this._vertexBuffer = GLBuffer.createVertexBuffer(this.gl, vertices, this.gl.STATIC_DRAW);\r\n        if (!this._vertexBuffer) {\r\n            throw 'Failed to create VertexBuffer Object';\r\n        }\r\n        this._indexBuffer = GLBuffer.createIndexBuffer(this.gl, indices, this.gl.STATIC_DRAW);\r\n        if (!this._indexBuffer) {\r\n            throw 'Failed to create IndexBuffer Object!';\r\n        }\r\n        this._vertexArrayObject = new GLVertexArrayObject(this.gl);\r\n        this.vertexArrayObject.setIndexBuffer(this._indexBuffer);\r\n    }\r\n    get vertexBuffer() {\r\n        return this._vertexBuffer;\r\n    }\r\n    set vertexBuffer(value) {\r\n        this._vertexBuffer = value;\r\n    }\r\n    get indexBuffer() {\r\n        return this._indexBuffer;\r\n    }\r\n    set indexBuffer(value) {\r\n        this._indexBuffer = value;\r\n    }\r\n    get vertexArrayObject() {\r\n        return this._vertexArrayObject;\r\n    }\r\n    set vertexArrayObject(value) {\r\n        this._vertexArrayObject = value;\r\n    }\r\n    draw() {\r\n        this.vertexArrayObject.bind();\r\n        this.gl.drawElements(this.gl.TRIANGLES, GLQuad.INDEX_LENGTH, this.gl.UNSIGNED_BYTE, 0);\r\n        this.vertexArrayObject.unbind();\r\n    }\r\n}\r\nGLQuad.INDEX_LENGTH = 6;\r\n//# sourceMappingURL=GLQuad.js.map","import { GLBuffer } from \"./GLBuffer\";\r\nimport { GLVertexArrayObject } from \"./GLVertexArrayObject\";\r\nexport class GLSphere {\r\n    constructor(gl, radius = 1, rings = 12, sectors = 12) {\r\n        this.gl = gl;\r\n        this.createVertexData(radius, rings, sectors);\r\n    }\r\n    createVertexData(radius, rings, sectors) {\r\n        let R = 1.0 / (rings - 1);\r\n        let S = 1.0 / (sectors - 1);\r\n        let vertexData = new Float32Array(rings * sectors * 8);\r\n        let indexData = new Uint32Array(rings * sectors * 6);\r\n        let index = 0;\r\n        for (let r = 0; r < rings; r++) {\r\n            for (let s = 0; s < sectors; s++) {\r\n                let x = Math.cos(2 * Math.PI * s * S) * Math.sin(Math.PI * r * R);\r\n                let y = Math.sin((-Math.PI / 2) + (Math.PI * r * R));\r\n                let z = Math.sin(2 * Math.PI * s * S) * Math.sin(Math.PI * r * R);\r\n                vertexData[index++] = x * radius;\r\n                vertexData[index++] = y * radius;\r\n                vertexData[index++] = z * radius;\r\n                vertexData[index++] = x;\r\n                vertexData[index++] = y;\r\n                vertexData[index++] = z;\r\n                vertexData[index++] = s * S;\r\n                vertexData[index++] = r * R;\r\n            }\r\n        }\r\n        this._indexcount = 0;\r\n        for (let r = 0; r < rings - 1; r++) {\r\n            for (let s = 0; s < sectors - 1; s++) {\r\n                indexData[this._indexcount++] = r * sectors + s;\r\n                indexData[this._indexcount++] = (r + 1) * sectors + s;\r\n                indexData[this._indexcount++] = (r + 1) * sectors + (s + 1);\r\n                indexData[this._indexcount++] = r * sectors + s;\r\n                indexData[this._indexcount++] = (r + 1) * sectors + (s + 1);\r\n                indexData[this._indexcount++] = r * sectors + (s + 1);\r\n            }\r\n        }\r\n        this._vertexBuffer = GLBuffer.createVertexBuffer(this.gl, vertexData, this.gl.STATIC_DRAW);\r\n        if (!this._vertexBuffer) {\r\n            throw 'Failed to create VertexBuffer Object';\r\n        }\r\n        this._indexBuffer = GLBuffer.createIndexBuffer(this.gl, indexData, this.gl.STATIC_DRAW);\r\n        if (!this._indexBuffer) {\r\n            throw 'Failed to create IndexBuffer Object!';\r\n        }\r\n        this._vertexArrayObject = new GLVertexArrayObject(this.gl);\r\n        this._vertexArrayObject.setIndexBuffer(this._indexBuffer);\r\n    }\r\n    draw() {\r\n        this.vertexArrayObject.bind();\r\n        this.gl.drawElements(this.gl.TRIANGLES, this._indexcount, this.gl.UNSIGNED_INT, 0);\r\n        this.vertexArrayObject.unbind();\r\n    }\r\n    get vertexBuffer() {\r\n        return this._vertexBuffer;\r\n    }\r\n    set vertexBuffer(value) {\r\n        this._vertexBuffer = value;\r\n    }\r\n    get indexBuffer() {\r\n        return this._indexBuffer;\r\n    }\r\n    set indexBuffer(value) {\r\n        this._indexBuffer = value;\r\n    }\r\n    get vertexArrayObject() {\r\n        return this._vertexArrayObject;\r\n    }\r\n    set vertexArrayObject(value) {\r\n        this._vertexArrayObject = value;\r\n    }\r\n    get indexcount() {\r\n        return this._indexcount;\r\n    }\r\n    set indexcount(value) {\r\n        this._indexcount = value;\r\n    }\r\n}\r\n//# sourceMappingURL=GLSphere.js.map","export class GLUniformBufferObject {\r\n    constructor(gl, bindPoint = 0, drawType = gl.DYNAMIC_DRAW) {\r\n        this.gl = gl;\r\n        this.type = gl.UNIFORM_BUFFER;\r\n        this.buffer = gl.createBuffer();\r\n        this.items = {};\r\n        this.drawType = drawType;\r\n        this._bindingPoint = bindPoint;\r\n        this._byteLength = 0;\r\n    }\r\n    /**\r\n     * Add an item/property to the UBO\r\n     * make sure that the order of the items is right\r\n     */\r\n    addItem(name, type, data) {\r\n        this.items[name] = { type: type, offset: 0, blockSize: 0, alignedByteLength: 0, data: data };\r\n    }\r\n    /**\r\n     * Add an block of items/properties to the UBO\r\n     * make sure the order is the same as in the shader\r\n     */\r\n    addBlock(items) {\r\n        for (let i = 0, item; item = items[i]; i++) {\r\n            this.addItem(item.name, item.type, item.data);\r\n        }\r\n    }\r\n    /**\r\n     * Update the item data\r\n     * @param name - name of the item\r\n     * @param data - new data\r\n     * @param updateGL -\r\n     */\r\n    updateItem(name, data, updateGL = false) {\r\n        this.items[name].data = data;\r\n        if (updateGL) {\r\n            this.updateGL(name);\r\n        }\r\n    }\r\n    hasItem(name) {\r\n        return !!this.items[name];\r\n    }\r\n    removeItem(name, updateGL = false) {\r\n        delete this.items[name];\r\n        this.upload();\r\n    }\r\n    /**\r\n     * Update the Buffer for a single item\r\n     * @param name\r\n     */\r\n    updateGL(name) {\r\n        const item = this.items[name];\r\n        if (item.data) {\r\n            this.bind();\r\n            this.gl.bufferSubData(this.type, item.offset, item.data);\r\n            this.unbind();\r\n        }\r\n    }\r\n    /**\r\n     * upload one buffer instead of adding multiple small items\r\n     * @param data - the buffer containing all values\r\n     * @param byteLength - the aligned componentTypeCount of the UBO\r\n     */\r\n    uploadBuffer(byteLength, data, length) {\r\n        this._byteLength = byteLength;\r\n        const gl = this.gl;\r\n        this.bind();\r\n        gl.bufferData(this.type, this._byteLength, this.drawType);\r\n        if (data) {\r\n            gl.bufferSubData(this.type, 0, data, length);\r\n        }\r\n        this.unbind();\r\n        return this._byteLength;\r\n    }\r\n    /**\r\n     * Uploads all data to the gpu\r\n     */\r\n    upload() {\r\n        this._byteLength = this.updateItemAlignment();\r\n        this.bind();\r\n        const gl = this.gl;\r\n        gl.bufferData(this.type, this._byteLength, this.drawType);\r\n        for (let i = 0, item; item = this.items[i]; i++) {\r\n            if (item.data) {\r\n                gl.bufferSubData(this.type, item.offset, item.data);\r\n            }\r\n        }\r\n        this.unbind();\r\n        return this._byteLength;\r\n    }\r\n    bindUBO(bindingPoint = this._bindingPoint, offset = 0, size = this._byteLength) {\r\n        if (offset === 0 && size === this._byteLength) {\r\n            this.gl.bindBufferBase(this.type, bindingPoint, this.buffer);\r\n        }\r\n        else {\r\n            this.gl.bindBufferRange(this.type, bindingPoint, this.buffer, offset, size);\r\n        }\r\n    }\r\n    bind() {\r\n        this.gl.bindBuffer(this.type, this.buffer);\r\n    }\r\n    unbind() {\r\n        this.gl.bindBuffer(this.type, null);\r\n    }\r\n    destroy() {\r\n        if (this.gl.isBuffer(this.buffer)) {\r\n            this.gl.deleteBuffer(this.buffer);\r\n        }\r\n        this.gl = null;\r\n        this.buffer = null;\r\n    }\r\n    updateItemAlignment() {\r\n        let prevItem = null;\r\n        let byteLength = 0;\r\n        const keys = Object.keys(this.items);\r\n        for (let i = 0, item; item = this.items[keys[i]]; i++) {\r\n            if (!item.data) {\r\n                continue;\r\n            }\r\n            const sizes = GLUniformBufferObject.TYPE_TO_SIZE[item.type];\r\n            item.alignment = item.alignedByteLength = sizes[0];\r\n            item.blockSize = sizes[1];\r\n            //check if array\r\n            if (item.data.byteLength !== item.blockSize) {\r\n                const length = item.data.byteLength / item.blockSize;\r\n                item.alignedByteLength = item.alignment * length;\r\n            }\r\n            if (prevItem) {\r\n                item.offset = prevItem.alignedByteLength + prevItem.offset;\r\n            }\r\n            prevItem = item;\r\n            byteLength += item.alignedByteLength;\r\n        }\r\n        return byteLength;\r\n    }\r\n    get bindingPoint() {\r\n        return this._bindingPoint;\r\n    }\r\n    set bindingPoint(value) {\r\n        this._bindingPoint = value;\r\n    }\r\n    get byteLength() {\r\n        return this._byteLength;\r\n    }\r\n    set byteLength(value) {\r\n        this._byteLength = value;\r\n    }\r\n}\r\nGLUniformBufferObject.TYPE_TO_SIZE = {\r\n    float: [4, 4],\r\n    int: [4, 4],\r\n    bool: [4, 4],\r\n    boolean: [4, 4],\r\n    mat4: [64, 64],\r\n    mat3: [48, 48],\r\n    vec4: [16, 16],\r\n    vec3: [16, 12],\r\n    vec2: [8, 8]\r\n};\r\n//# sourceMappingURL=GLUniformBufferObject.js.map","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\nimport { MapType } from \"../gl_util/mapType\";\r\nimport { MapSize } from \"../gl_util/mapSize\";\r\nexport var Attributes;\r\n(function (Attributes) {\r\n    class AttributeMap {\r\n        constructor() {\r\n            this.attributeMap = {};\r\n        }\r\n        add(key, attribute) {\r\n            this.attributeMap[key] = attribute;\r\n        }\r\n        remove(key) {\r\n            if (this.attributeMap[key]) {\r\n                this.attributeMap[key] = undefined;\r\n            }\r\n        }\r\n        hasAttribute(key) {\r\n            return !!this.attributeMap[key];\r\n        }\r\n        getAttribute(key) {\r\n            return this.attributeMap[key];\r\n        }\r\n    }\r\n    Attributes.AttributeMap = AttributeMap;\r\n    class GLAttribute {\r\n        constructor(gl, type, size, location) {\r\n            this.gl = gl;\r\n            this.type = type;\r\n            this.size = size;\r\n            this.location = location;\r\n        }\r\n        pointer(type, normalized, stride, start) {\r\n            this.gl.vertexAttribPointer(this.location, this.size, type || this.gl.FLOAT, normalized || false, stride || 0, start || 0);\r\n        }\r\n    }\r\n    Attributes.GLAttribute = GLAttribute;\r\n    function extract(gl, program) {\r\n        const attributes = new AttributeMap();\r\n        const totalAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\r\n        for (let i = 0; i < totalAttributes; i++) {\r\n            const attribData = gl.getActiveAttrib(program, i);\r\n            const type = MapType.map(gl, attribData.type);\r\n            attributes.add(attribData.name, new GLAttribute(gl, type, MapSize.map(type), gl.getAttribLocation(program, attribData.name)));\r\n        }\r\n        return attributes;\r\n    }\r\n    Attributes.extract = extract;\r\n})(Attributes || (Attributes = {}));\r\n//# sourceMappingURL=GLAttribute.js.map","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\nexport var ProgramCompiler;\r\n(function (ProgramCompiler) {\r\n    /**\r\n     * @class\r\n     * @param gl {WebGL2RenderingContext} The current WebGL context {WebGLProgram}\r\n     * @param vertexSrc {string|string[]} The vertex shader source as an array of strings.\r\n     * @param fragmentSrc {string|string[]} The fragment shader source as an array of strings.\r\n     * @return {WebGLProgram} the shader program\r\n     */\r\n    function compile(gl, vertexSrc, fragmentSrc) {\r\n        let glVertShader = compileShader(gl, gl.VERTEX_SHADER, vertexSrc);\r\n        let glFragShader = compileShader(gl, gl.FRAGMENT_SHADER, fragmentSrc);\r\n        if (!glVertShader || !glFragShader) {\r\n            return;\r\n        }\r\n        let program = gl.createProgram(); //Create Program which combines two compiled Shaders\r\n        if (!program) {\r\n            console.error('Failed to create Programm');\r\n            return null;\r\n        }\r\n        gl.attachShader(program, glVertShader); //Attach OBJ_Vertex Shader\r\n        gl.attachShader(program, glFragShader); //Attach Fragment Shader\r\n        gl.linkProgram(program); // Then Link the program to the webgl context\r\n        //Check if linking succeeded\r\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n            console.error('Shader Program Linking failed. Could not initialize Shader.');\r\n            console.error(\"gl.VALIDATE_STATUS \" + gl.getProgramParameter(program, gl.VALIDATE_STATUS));\r\n            console.error('gl.getError(): ' + gl.getError());\r\n            //check if their is a program info log\r\n            if (gl.getProgramInfoLog(program) !== '') {\r\n                console.warn('gl.getProgramInfoLog(): ' + gl.getProgramInfoLog(program));\r\n            }\r\n            gl.deleteProgram(program);\r\n            program = null;\r\n        }\r\n        //Clean up the created shader\r\n        gl.deleteShader(glVertShader);\r\n        gl.deleteShader(glFragShader);\r\n        //Finally return the compiled program\r\n        return program;\r\n    }\r\n    ProgramCompiler.compile = compile;\r\n    /**\r\n     * @private\r\n     * @param gl {WebGL2RenderingContext} The current WebGL context {WebGLProgram}\r\n     * @param type {Number} the type, can be either VERTEX_SHADER or FRAGMENT_SHADER\r\n     * @param vertexSrc {string|string[]} The vertex shader source as an array of strings.\r\n     * @return {WebGLShader} the shader\r\n     */\r\n    function compileShader(gl, type, vertexSrc) {\r\n        let shader = gl.createShader(type);\r\n        if (shader == null) {\r\n            console.error(\"Unable to create shader\");\r\n            return null;\r\n        }\r\n        gl.shaderSource(shader, vertexSrc);\r\n        gl.compileShader(shader);\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            console.error(\"Failed to compile shader: \" + gl.getShaderInfoLog(shader));\r\n            gl.deleteShader(shader);\r\n            return null;\r\n        }\r\n        return shader;\r\n    }\r\n})(ProgramCompiler || (ProgramCompiler = {}));\r\n//# sourceMappingURL=programCompiler.js.map","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\nimport { MapType } from \"../gl_util/mapType\";\r\nimport { DefaultValue } from \"../gl_util/defaultValue\";\r\nexport var Uniforms;\r\n(function (Uniforms) {\r\n    var getterTemplate = [\r\n        'return this.data.%%.value;'\r\n    ].join('\\n');\r\n    var setterTemplate = [\r\n        'this.data.%%.value = value;',\r\n        'var location = this.data.%%.location;'\r\n    ].join('\\n');\r\n    var GLSL_TO_SINGLE_SETTERS = {\r\n        'float': 'uniform1f(location, value)',\r\n        'vec2': 'uniform2f(location, value[0], value[1])',\r\n        'vec3': 'uniform3f(location, value[0], value[1], value[2])',\r\n        'vec4': 'uniform4f(location, value[0], value[1], value[2], value[3])',\r\n        'int': 'uniform1i(location, value)',\r\n        'ivec2': 'uniform2i(location, value[0], value[1])',\r\n        'ivec3': 'uniform3i(location, value[0], value[1], value[2])',\r\n        'ivec4': 'uniform4i(location, value[0], value[1], value[2], value[3])',\r\n        'bool': 'uniform1i(location, value)',\r\n        'bvec2': 'uniform2i(location, value[0], value[1])',\r\n        'bvec3': 'uniform3i(location, value[0], value[1], value[2])',\r\n        'bvec4': 'uniform4i(location, value[0], value[1], value[2], value[3])',\r\n        'mat2': 'uniformMatrix2fv(location, false, value)',\r\n        'mat3': 'uniformMatrix3fv(location, false, value)',\r\n        'mat4': 'uniformMatrix4fv(location, false, value)',\r\n        'sampler2D': 'uniform1i(location, value)',\r\n        'samplerCube': 'uniform1i(location, value)',\r\n        'ubo': 'uniformBlockBinding(this.program, location, value)'\r\n    };\r\n    var GLSL_TO_ARRAY_SETTERS = {\r\n        'float': 'uniform1fv(location, value)',\r\n        'vec2': 'uniform2fv(location, value)',\r\n        'vec3': 'uniform3fv(location, value)',\r\n        'vec4': 'uniform4fv(location, value)',\r\n        'int': 'uniform1iv(location, value)',\r\n        'ivec2': 'uniform2iv(location, value)',\r\n        'ivec3': 'uniform3iv(location, value)',\r\n        'ivec4': 'uniform4iv(location, value)',\r\n        'bool': 'uniform1iv(location, value)',\r\n        'bvec2': 'uniform2iv(location, value)',\r\n        'bvec3': 'uniform3iv(location, value)',\r\n        'bvec4': 'uniform4iv(location, value)',\r\n        'sampler2D': 'uniform1iv(location, value)',\r\n        'samplerCube': 'uniform1iv(location, value)'\r\n    };\r\n    class Uniform {\r\n        constructor(type, size, location, value) {\r\n            this.type = type;\r\n            this.size = size;\r\n            this.location = location;\r\n            this.value = value;\r\n        }\r\n    }\r\n    Uniforms.Uniform = Uniform;\r\n    class UniformMap {\r\n        constructor() {\r\n            this.uniformMap = {};\r\n        }\r\n        add(key, attribute) {\r\n            this.uniformMap[key] = attribute;\r\n        }\r\n        get(key) {\r\n            return this.uniformMap[key];\r\n        }\r\n        remove(key) {\r\n            if (this.uniformMap[key]) {\r\n                this.uniformMap[key] = undefined;\r\n            }\r\n        }\r\n        get keys() {\r\n            return Object.keys(this.uniformMap);\r\n        }\r\n    }\r\n    Uniforms.UniformMap = UniformMap;\r\n    class UniformAccessObject {\r\n        constructor(gl, program) {\r\n            this.data = {};\r\n            this._gl = gl;\r\n            this._program = program;\r\n        }\r\n        get gl() {\r\n            return this._gl;\r\n        }\r\n        set gl(gl) {\r\n            this._gl = gl;\r\n        }\r\n        get program() {\r\n            return this._program;\r\n        }\r\n        set program(value) {\r\n            this._program = value;\r\n        }\r\n    }\r\n    Uniforms.UniformAccessObject = UniformAccessObject;\r\n    function extract(gl, program) {\r\n        const uniforms = new UniformMap();\r\n        //Get Uniform Blocks\r\n        const ubos = gl.getProgramParameter(program, gl.ACTIVE_UNIFORM_BLOCKS);\r\n        for (let i = 0; i < ubos; i++) {\r\n            let name = gl.getActiveUniformBlockName(program, i);\r\n            name = name.replace(/\\[.*?\\]/, \"\");\r\n            uniforms.add(name, new Uniform(\"ubo\", 1, i, null));\r\n        }\r\n        //Get uniforms\r\n        const totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\r\n        for (let i = 0; i < totalUniforms; i++) {\r\n            const uniformData = gl.getActiveUniform(program, i);\r\n            const name = uniformData.name.replace(/\\[.*?\\]/, \"\");\r\n            const type = MapType.map(gl, uniformData.type);\r\n            const location = gl.getUniformLocation(program, name); //null if its a uniform block value\r\n            if (location !== undefined && location !== null) {\r\n                uniforms.add(name, new Uniform(type, uniformData.size, gl.getUniformLocation(program, name), DefaultValue.value(type, uniformData.size)));\r\n            }\r\n        }\r\n        return uniforms;\r\n    }\r\n    Uniforms.extract = extract;\r\n    function generateUniformAccessObject(gl, uniformData, program) {\r\n        const uniforms = new UniformAccessObject(gl, program);\r\n        const uniformKeys = uniformData.keys;\r\n        for (let i = 0; i < uniformKeys.length; i++) {\r\n            const fullName = uniformKeys[i];\r\n            const nameTokens = fullName.split(\".\");\r\n            const name = nameTokens[nameTokens.length - 1];\r\n            const uniformGroup = getUniformGroup(nameTokens, uniforms);\r\n            const uniform = uniformData.get(fullName);\r\n            uniformGroup.data[name] = uniform;\r\n            uniformGroup.gl = gl;\r\n            Object.defineProperty(uniformGroup, name, generatePropertyDescriptor(name, uniform));\r\n        }\r\n        return uniforms;\r\n    }\r\n    Uniforms.generateUniformAccessObject = generateUniformAccessObject;\r\n    function getUniformGroup(nameTokens, uniform) {\r\n        let cur = uniform;\r\n        for (let i = 0; i < nameTokens.length - 1; i++) {\r\n            const o = cur[nameTokens[i]] || { data: {} };\r\n            cur[nameTokens[i]] = o;\r\n            cur = o;\r\n        }\r\n        return cur;\r\n    }\r\n    function generatePropertyDescriptor(name, uniform) {\r\n        return {\r\n            get: generateGetter(name),\r\n            set: generateSetter(name, uniform)\r\n        };\r\n    }\r\n    function generateGetter(name) {\r\n        let template = getterTemplate.replace('%%', name);\r\n        return new Function(template);\r\n    }\r\n    function generateSetter(name, uniform) {\r\n        let template = setterTemplate.replace(/%%/g, name);\r\n        let setTemplate;\r\n        if (uniform.size === 1) {\r\n            setTemplate = GLSL_TO_SINGLE_SETTERS[uniform.type];\r\n        }\r\n        else {\r\n            setTemplate = GLSL_TO_ARRAY_SETTERS[uniform.type];\r\n        }\r\n        if (setTemplate) {\r\n            template += \"\\nthis.gl.\" + setTemplate + \";\";\r\n        }\r\n        return new Function('value', template);\r\n    }\r\n})(Uniforms || (Uniforms = {}));\r\n//# sourceMappingURL=uniform.js.map","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\nimport { ProgramCompiler } from \"./programCompiler\";\r\nimport { Attributes } from \"./GLAttribute\";\r\nimport { Uniforms } from \"./uniform\";\r\nexport class GLShader {\r\n    constructor(gl, vertexSrc, fragmentSrc) {\r\n        this.gl = gl;\r\n        this._defines = Object.create(null);\r\n        this._vertexSrc = vertexSrc;\r\n        this._fragmentSrc = fragmentSrc;\r\n    }\r\n    getDefinesString() {\r\n        let defineString = \"\";\r\n        for (let key in this._defines) {\r\n            defineString += \"#define \" + key + \" \" + this._defines[key] + \"\\n\";\r\n        }\r\n        return defineString;\r\n    }\r\n    getShaderSrcWithDefines(src) {\r\n        const shaderDefines = this.getDefinesString();\r\n        const secondLineIdx = src.indexOf(\"\\n\");\r\n        const firstLine = src.substr(0, secondLineIdx);\r\n        const shaderSrc = src.substr(secondLineIdx);\r\n        if (firstLine.indexOf(\"#version\") != -1) {\r\n            return firstLine + shaderDefines + shaderSrc;\r\n        }\r\n        return shaderDefines + firstLine + shaderSrc;\r\n    }\r\n    upload() {\r\n        const gl = this.gl;\r\n        const vertexSrcWithDefines = this.getShaderSrcWithDefines(this._vertexSrc);\r\n        const fragmentSrcWithDefines = this.getShaderSrcWithDefines(this._fragmentSrc);\r\n        this._program = ProgramCompiler.compile(gl, vertexSrcWithDefines, fragmentSrcWithDefines);\r\n        this._attributes = Attributes.extract(gl, this._program);\r\n        const uniformData = Uniforms.extract(gl, this._program);\r\n        this._uniforms = Uniforms.generateUniformAccessObject(gl, uniformData, this._program);\r\n        return this;\r\n    }\r\n    addDefine(def, value) {\r\n        this._defines[def] = value;\r\n    }\r\n    removeDefine(def, value) {\r\n        delete this._defines[def];\r\n    }\r\n    get program() {\r\n        return this._program;\r\n    }\r\n    set program(program) {\r\n        this._program = program;\r\n    }\r\n    set attributes(attributes) {\r\n        this._attributes = attributes;\r\n    }\r\n    get attributes() {\r\n        return this._attributes;\r\n    }\r\n    set uniforms(uniforms) {\r\n        this.uniforms = uniforms;\r\n    }\r\n    get uniforms() {\r\n        return this._uniforms;\r\n    }\r\n    get defines() {\r\n        return this._defines;\r\n    }\r\n    set defines(value) {\r\n        this._defines = value;\r\n    }\r\n    /**\r\n     * Bind this shader and tells the WebGLContext to use it\r\n     */\r\n    bind() {\r\n        this.gl.useProgram(this.program);\r\n        return this;\r\n    }\r\n    /**\r\n     * Unbinds this Shader and tells the WebGLContext to use no shader\r\n     */\r\n    unbind() {\r\n        this.gl.useProgram(null);\r\n        return this;\r\n    }\r\n    /**\r\n     * Destroy the program unloads it from the gpu\r\n     */\r\n    unload() {\r\n        this.gl.deleteProgram(this.program);\r\n        this._program = null;\r\n        this._attributes = null;\r\n        this._uniforms = null;\r\n        this._defines = Object.create(null);\r\n    }\r\n    /**\r\n     * Destroys the program in the WebGLContext nulls all objects in the Shader\r\n     */\r\n    destroy() {\r\n        this.gl.deleteProgram(this.program);\r\n        this.gl = null;\r\n        this._program = null;\r\n        this._attributes = null;\r\n        this._uniforms = null;\r\n        this._defines = null;\r\n        this._vertexSrc = null;\r\n        this._fragmentSrc = null;\r\n    }\r\n    get vertexSrc() {\r\n        return this._vertexSrc;\r\n    }\r\n    set vertexSrc(value) {\r\n        this._vertexSrc = value;\r\n    }\r\n    get fragmentSrc() {\r\n        return this._fragmentSrc;\r\n    }\r\n    set fragmentSrc(value) {\r\n        this._fragmentSrc = value;\r\n    }\r\n}\r\n//# sourceMappingURL=GLShader.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./GLAttribute\";\r\nexport * from \"./GLShader\";\r\nexport * from \"./programCompiler\";\r\nexport * from \"./uniform\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./GLBuffer\";\r\nexport * from \"./GLCube\";\r\nexport * from \"./GLCubemap\";\r\nexport * from \"./GLFramebuffer\";\r\nexport * from \"./GLQuad\";\r\nexport * from \"./GLSphere\";\r\nexport * from \"./GLTexture\";\r\nexport * from \"./GLUniformBufferObject\";\r\nexport * from \"./GLVertexArrayObject\";\r\nexport * from \"./constants/index\";\r\nexport * from \"./gl_util/index\";\r\nexport * from \"./shader/index\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * With Scene, Node and Mesh cache we can access the Model in different stages\r\n * e.g. Mesh has no animation or Transform,\r\n * e.g. Node has Animation, Transform etc. for one Mesh\r\n * e.g. Scene has all Nodes with all Animations and Transforms\r\n */\r\nexport var CACHE_TYPE;\r\n(function (CACHE_TYPE) {\r\n    CACHE_TYPE[CACHE_TYPE[\"TEXTURE\"] = 0] = \"TEXTURE\";\r\n    CACHE_TYPE[CACHE_TYPE[\"MESH\"] = 1] = \"MESH\";\r\n    CACHE_TYPE[CACHE_TYPE[\"SCENE\"] = 2] = \"SCENE\";\r\n    CACHE_TYPE[CACHE_TYPE[\"ANIMATION\"] = 3] = \"ANIMATION\";\r\n    CACHE_TYPE[CACHE_TYPE[\"MATERIAL\"] = 4] = \"MATERIAL\";\r\n    CACHE_TYPE[CACHE_TYPE[\"SHADER\"] = 5] = \"SHADER\";\r\n    CACHE_TYPE[CACHE_TYPE[\"NOOP\"] = 6] = \"NOOP\";\r\n})(CACHE_TYPE || (CACHE_TYPE = {}));\r\n/**\r\n * Global Cache\r\n */\r\nexport class Cache {\r\n    constructor() {\r\n        this.caches = [];\r\n    }\r\n    /**\r\n     * Add a new sub cache\r\n     * @param {CACHE_TYPE} type\r\n     * @param {IBaseCache<T>} cache\r\n     */\r\n    addCache(type, cache) {\r\n        this.caches[type] = cache;\r\n    }\r\n    /**\r\n     * Remove a sub cache\r\n     * @param {string|number} type\r\n     */\r\n    removeCache(type) {\r\n        this.caches.splice(type, 1);\r\n    }\r\n    /**\r\n     * get sub cache\r\n     * @param {string|number} type\r\n     * @returns {IBaseCache<T>}\r\n     */\r\n    getCache(type) {\r\n        return this.caches[type];\r\n    }\r\n    /**\r\n     * add a value to a cache\r\n     * @param {string|number} type\r\n     * @param {string} key\r\n     * @param data\r\n     */\r\n    add(type, key, data) {\r\n        if (this.caches[type]) {\r\n            this.caches[type].add(key, data);\r\n        }\r\n    }\r\n    /**\r\n     * get value from cache\r\n     * @param {string|number} type\r\n     * @param {string} key\r\n     * @returns {T}\r\n     */\r\n    get(type, key) {\r\n        if (this.caches[type]) {\r\n            return this.caches[type].get(key);\r\n        }\r\n    }\r\n    has(type, key) {\r\n        if (this.caches[type]) {\r\n            return !!this.caches[type].get(key);\r\n        }\r\n        return false;\r\n    }\r\n}\r\n//# sourceMappingURL=cache.js.map","/**\r\n * EmitSignal wrapper for a single event of an EventEmitter\r\n */\r\nexport class EmitSignal {\r\n    constructor(emitter, type) {\r\n        this._type = type;\r\n        this._emitter = emitter;\r\n    }\r\n    emit(...args) {\r\n        return this._emitter.emit(this._type, ...args);\r\n    }\r\n    /**\r\n     * function alias for emit\r\n     * @param args\r\n     */\r\n    dispatch(...args) {\r\n        return this.emit(...args);\r\n    }\r\n    on(fn, context) {\r\n        this._emitter.on(this._type, fn, context);\r\n        return this;\r\n    }\r\n    /**\r\n     * alias for on\r\n     * @param fn - EventFunction\r\n     * @param context - context to call the function with\r\n     */\r\n    add(fn, context) {\r\n        return this.on(fn, context);\r\n    }\r\n    once(fn, context) {\r\n        this._emitter.once(this._type, fn, context);\r\n        return this;\r\n    }\r\n    /**\r\n     * alias for once\r\n     * @param fn\r\n     * @param context\r\n     */\r\n    addOnce(fn, context) {\r\n        return this.once(fn, context);\r\n    }\r\n    removeAllListeners() {\r\n        this._emitter.removeAllListeners(this._type);\r\n        return this;\r\n    }\r\n    removeListener(fn, context, once) {\r\n        this._emitter.removeListener(this._type, fn, context, once);\r\n        return this;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    get emitter() {\r\n        return this._emitter;\r\n    }\r\n}\r\n//# sourceMappingURL=EmitSignal.js.map","import { EmitSignal } from \"../../events/EmitSignal\";\r\nimport * as EventEmitter from \"eventemitter3\";\r\nexport var CACHE_EVENTS;\r\n(function (CACHE_EVENTS) {\r\n    CACHE_EVENTS[\"ADDED\"] = \"ADDED\";\r\n    CACHE_EVENTS[\"REMOVED\"] = \"REMOVED\";\r\n})(CACHE_EVENTS || (CACHE_EVENTS = {}));\r\nexport class BaseCache {\r\n    constructor() {\r\n        this.cache = {};\r\n        this.emitter = new EventEmitter();\r\n        this._onAdded = new EmitSignal(this.emitter, CACHE_EVENTS.ADDED);\r\n        this._onRemoved = new EmitSignal(this.emitter, CACHE_EVENTS.REMOVED);\r\n    }\r\n    get onAdded() {\r\n        return this._onAdded;\r\n    }\r\n    get onRemoved() {\r\n        return this._onRemoved;\r\n    }\r\n    add(key, data) {\r\n        this.cache[key] = data;\r\n        this._onAdded.emit(key, data);\r\n    }\r\n    addMultiple(elements, mapFunc) {\r\n        for (let i = 0, element; element = elements[i]; i++) {\r\n            const value = mapFunc(element);\r\n            this.add(value.key, value.data);\r\n        }\r\n    }\r\n    remove(key) {\r\n        const data = this.cache[key];\r\n        delete this.cache[key];\r\n        this._onRemoved.emit(key, data);\r\n    }\r\n    get(key) {\r\n        return this.cache[key];\r\n    }\r\n    getAll() {\r\n        return this.cache;\r\n    }\r\n}\r\n//# sourceMappingURL=baseCache.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./baseCache\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./cache\";\r\nexport * from \"./caches/index\";\r\n//# sourceMappingURL=index.js.map","import { LOAD_TYPE, Middleware, Resource } from \"curbl-loader\";\r\nimport { GLCubemap } from \"../gl/GLCubemap\";\r\nimport { MAG_FILTER, MIN_FILTER, TEXTURE_WRAP } from \"../gl/constants\";\r\nimport { GLTexture } from \"../gl\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nexport class CubemapLoader extends Middleware {\r\n    constructor(gl) {\r\n        super(CACHE_TYPE.TEXTURE);\r\n        this.gl = gl;\r\n    }\r\n    add(key, levels, config = { id: 0 }) {\r\n        const resources = [];\r\n        for (let i = 0, faces; faces = levels[i]; i++) {\r\n            const keys = Object.keys(faces);\r\n            for (let k = 0, face; face = faces[keys[k]]; k++) {\r\n                resources.push({\r\n                    resource: new Resource({\r\n                        url: face,\r\n                        loadType: LOAD_TYPE.IMAGE\r\n                    }, Object.assign({}, config, { face: k, level: i })),\r\n                });\r\n            }\r\n        }\r\n        return this.addResourceToQueue({\r\n            key: key,\r\n            resources: resources\r\n        });\r\n    }\r\n    transform(...resources) {\r\n        const images = resources.sort((a, b) => a.config.face - b.config.face + (a.config.level - b.config.level) * 6).map((resource) => resource.request);\r\n        const textureConfig = resources[0].config;\r\n        const data = GLCubemap.cubemapFromSource(this.gl, images, textureConfig.flipY, textureConfig.premultiplyAlpha, textureConfig.id, textureConfig.internalFormat, textureConfig.format, textureConfig.type);\r\n        if (textureConfig.flipY) {\r\n            data.flipY(1);\r\n        }\r\n        if (textureConfig.sampler) {\r\n            if (textureConfig.sampler.minFilter === MIN_FILTER.LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.LINEAR_MIPMAP_LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.LINEAR_MIPMAP_NEAREST\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST_MIPMAP_LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST_MIPMAP_NEAREST) {\r\n                data.setMinFilter(textureConfig.sampler.minFilter);\r\n            }\r\n            else if (GLTexture.isPowerOf2(data.width) && GLTexture.isPowerOf2(data.height)) {\r\n                data.setMinFilter(MIN_FILTER.LINEAR_MIPMAP_LINEAR);\r\n            }\r\n            else {\r\n                data.setMinFilter(MIN_FILTER.LINEAR);\r\n            }\r\n            if (textureConfig.sampler.magFilter === MAG_FILTER.LINEAR || textureConfig.sampler.magFilter === MAG_FILTER.NEAREST) {\r\n                data.setMagFilter(textureConfig.sampler.magFilter);\r\n            }\r\n            else {\r\n                data.setMagFilter(MAG_FILTER.LINEAR);\r\n            }\r\n            if (textureConfig.sampler.wrapS === TEXTURE_WRAP.CLAMP_TO_EDGE\r\n                || textureConfig.sampler.wrapS === TEXTURE_WRAP.MIRRORED_REPEAT\r\n                || textureConfig.sampler.wrapS === TEXTURE_WRAP.REPEAT) {\r\n                data.setWrapS(textureConfig.sampler.wrapS);\r\n            }\r\n            else {\r\n                data.setWrapS(TEXTURE_WRAP.REPEAT);\r\n            }\r\n            if (textureConfig.sampler.wrapT === TEXTURE_WRAP.CLAMP_TO_EDGE\r\n                || textureConfig.sampler.wrapT === TEXTURE_WRAP.MIRRORED_REPEAT\r\n                || textureConfig.sampler.wrapT === TEXTURE_WRAP.REPEAT) {\r\n                data.setWrapT(textureConfig.sampler.wrapT);\r\n            }\r\n            else {\r\n                data.setWrapT(TEXTURE_WRAP.REPEAT);\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n}\r\n//# sourceMappingURL=CubemapLoader.js.map","import { LOAD_TYPE, Middleware, Resource } from \"curbl-loader\";\r\nimport { GLTexture, MAG_FILTER, MIN_FILTER, TEXTURE_WRAP } from \"../gl\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nexport class TextureLoader extends Middleware {\r\n    constructor(gl) {\r\n        super(CACHE_TYPE.TEXTURE);\r\n        this.gl = gl;\r\n    }\r\n    add(key, url, config = {\r\n        id: 0,\r\n        sampler: {\r\n            wrapS: TEXTURE_WRAP.REPEAT,\r\n            wrapT: TEXTURE_WRAP.REPEAT\r\n        }\r\n    }) {\r\n        return this.addResourceToQueue({\r\n            key: key,\r\n            resources: [{\r\n                    resource: new Resource({\r\n                        url: url,\r\n                        loadType: LOAD_TYPE.IMAGE\r\n                    }, config)\r\n                }]\r\n        });\r\n    }\r\n    transform(resource) {\r\n        const textureConfig = resource.config;\r\n        const image = resource.request;\r\n        const data = GLTexture.fromSource(this.gl, image, textureConfig.premultiplyAlpha, textureConfig.id, textureConfig.internalFormat, textureConfig.format, textureConfig.type);\r\n        if (textureConfig.flipY) {\r\n            data.flipY(1);\r\n        }\r\n        if (textureConfig.sampler) {\r\n            if (textureConfig.sampler.minFilter === MIN_FILTER.LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.LINEAR_MIPMAP_LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.LINEAR_MIPMAP_NEAREST\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST_MIPMAP_LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST_MIPMAP_NEAREST) {\r\n                data.setMinFilter(textureConfig.sampler.minFilter);\r\n            }\r\n            else if (GLTexture.isPowerOf2(data.width) && GLTexture.isPowerOf2(data.height)) {\r\n                data.setMinFilter(MIN_FILTER.LINEAR_MIPMAP_LINEAR);\r\n            }\r\n            else {\r\n                data.setMinFilter(MIN_FILTER.LINEAR);\r\n            }\r\n            if (textureConfig.sampler.magFilter === MAG_FILTER.LINEAR || textureConfig.sampler.magFilter === MAG_FILTER.NEAREST) {\r\n                data.setMagFilter(textureConfig.sampler.magFilter);\r\n            }\r\n            else {\r\n                data.setMagFilter(MAG_FILTER.LINEAR);\r\n            }\r\n            if (textureConfig.sampler.wrapS === TEXTURE_WRAP.CLAMP_TO_EDGE\r\n                || textureConfig.sampler.wrapS === TEXTURE_WRAP.MIRRORED_REPEAT\r\n                || textureConfig.sampler.wrapS === TEXTURE_WRAP.REPEAT) {\r\n                data.setWrapS(textureConfig.sampler.wrapS);\r\n            }\r\n            else {\r\n                data.setWrapS(TEXTURE_WRAP.REPEAT);\r\n            }\r\n            if (textureConfig.sampler.wrapT === TEXTURE_WRAP.CLAMP_TO_EDGE\r\n                || textureConfig.sampler.wrapT === TEXTURE_WRAP.MIRRORED_REPEAT\r\n                || textureConfig.sampler.wrapT === TEXTURE_WRAP.REPEAT) {\r\n                data.setWrapT(textureConfig.sampler.wrapT);\r\n            }\r\n            else {\r\n                data.setWrapT(TEXTURE_WRAP.REPEAT);\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n}\r\n//# sourceMappingURL=TextureLoader.js.map","export var MATERIAL_TYPES;\r\n(function (MATERIAL_TYPES) {\r\n    MATERIAL_TYPES[MATERIAL_TYPES[\"PBR\"] = 0] = \"PBR\";\r\n})(MATERIAL_TYPES || (MATERIAL_TYPES = {}));\r\nexport var MATERIAL_MAPS;\r\n(function (MATERIAL_MAPS) {\r\n    MATERIAL_MAPS[MATERIAL_MAPS[\"ALBEDO\"] = 0] = \"ALBEDO\";\r\n    MATERIAL_MAPS[MATERIAL_MAPS[\"NORMAL\"] = 1] = \"NORMAL\";\r\n    MATERIAL_MAPS[MATERIAL_MAPS[\"OCCLUSION\"] = 2] = \"OCCLUSION\";\r\n    MATERIAL_MAPS[MATERIAL_MAPS[\"EMISSIVE\"] = 3] = \"EMISSIVE\";\r\n    MATERIAL_MAPS[MATERIAL_MAPS[\"METAL_ROUGHNESS\"] = 4] = \"METAL_ROUGHNESS\";\r\n})(MATERIAL_MAPS || (MATERIAL_MAPS = {}));\r\nexport class Material {\r\n    constructor(name, model) {\r\n        this._type = MATERIAL_TYPES.PBR;\r\n        this.name = name;\r\n        this._maps = [];\r\n        this._model = model;\r\n    }\r\n    hasMap(key) {\r\n        return !!this._maps[key];\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    set name(value) {\r\n        this._name = value;\r\n    }\r\n    get maps() {\r\n        return this._maps;\r\n    }\r\n    set maps(value) {\r\n        this._maps = value;\r\n    }\r\n    get model() {\r\n        return this._model;\r\n    }\r\n    set model(value) {\r\n        this._model = value;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(value) {\r\n        this._type = value;\r\n    }\r\n}\r\n//# sourceMappingURL=material.js.map","export class Materialmap {\r\n    constructor(texture, sampler) {\r\n        this._texture = texture;\r\n        this._sampler = sampler;\r\n    }\r\n    get texture() {\r\n        return this._texture;\r\n    }\r\n    set texture(value) {\r\n        this._texture = value;\r\n    }\r\n    get sampler() {\r\n        return this._sampler;\r\n    }\r\n    set sampler(value) {\r\n        this._sampler = value;\r\n    }\r\n}\r\n//# sourceMappingURL=materialmap.js.map","import { vec3, vec4 } from \"gl-matrix\";\r\nexport class MetallicRoughness {\r\n    constructor() {\r\n        this._baseColorFactor = vec4.fromValues(1, 1, 1, 1);\r\n        this._metallicFactor = 1;\r\n        this._roughnessFactor = 1;\r\n        this._normalScale = 1;\r\n        this._occlusionStrength = 1;\r\n        this._emissiveFactor = vec3.create();\r\n    }\r\n    get baseColorFactor() {\r\n        return this._baseColorFactor;\r\n    }\r\n    set baseColorFactor(value) {\r\n        this._baseColorFactor = value;\r\n    }\r\n    get metallicFactor() {\r\n        return this._metallicFactor;\r\n    }\r\n    set metallicFactor(value) {\r\n        this._metallicFactor = value;\r\n    }\r\n    get roughnessFactor() {\r\n        return this._roughnessFactor;\r\n    }\r\n    set roughnessFactor(value) {\r\n        this._roughnessFactor = value;\r\n    }\r\n    get emissiveFactor() {\r\n        return this._emissiveFactor;\r\n    }\r\n    set emissiveFactor(value) {\r\n        this._emissiveFactor = value;\r\n    }\r\n    get normalScale() {\r\n        return this._normalScale;\r\n    }\r\n    set normalScale(value) {\r\n        this._normalScale = value;\r\n    }\r\n    get occlusionStrength() {\r\n        return this._occlusionStrength;\r\n    }\r\n    set occlusionStrength(value) {\r\n        this._occlusionStrength = value;\r\n    }\r\n}\r\n//# sourceMappingURL=metallicRoughness.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./material\";\r\nexport * from \"./materialmap\";\r\nexport * from \"./metallicRoughness\";\r\n//# sourceMappingURL=index.js.map","import { Material, MATERIAL_MAPS, MATERIAL_TYPES, Materialmap } from \"../material\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nimport { MetallicRoughness } from \"../material/metallicRoughness\";\r\nimport { TextureLoader } from \"../loader/TextureLoader\";\r\nimport { TEXTURE_WRAP } from \"../gl/constants\";\r\nexport class GLTFMaterialProcessor {\r\n    constructor(model) {\r\n        this.model = model;\r\n        this.materialCache = this.model.cache.getCache(CACHE_TYPE.MATERIAL);\r\n    }\r\n    processMaterial(materialIdx) {\r\n        const gltf = this.model.gltf;\r\n        const gl = this.model.gl;\r\n        //set node name if not already provided\r\n        const materialNode = gltf.materials[materialIdx];\r\n        const cachedMat = this.materialCache.get(materialNode.name);\r\n        if (cachedMat) {\r\n            return cachedMat;\r\n        }\r\n        materialNode.name = materialNode.name || \"material\" + materialIdx;\r\n        let material;\r\n        if (materialNode.extensions && materialNode.extensions.KHR_materials_pbrSpecularGlossiness) {\r\n            throw \"specular glossiness gltf is not supported\";\r\n        }\r\n        else {\r\n            material = new Material(materialNode.name);\r\n            this.parsePBRMaterial(materialNode, material);\r\n        }\r\n        if (materialNode.emissiveFactor) {\r\n            material.model.emissiveFactor.set(materialNode.emissiveFactor);\r\n        }\r\n        //TODO: alphaMode\r\n        //TODO: alphaCutoff\r\n        //TODO: double sided\r\n        if (materialNode.emissiveTexture) {\r\n            this.parseTexture(material, materialNode.emissiveTexture.index, MATERIAL_MAPS.EMISSIVE, {\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.SRGB8_ALPHA8,\r\n                format: gl.RGBA,\r\n                type: gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n        if (materialNode.normalTexture) {\r\n            material.model.normalScale = materialNode.normalTexture.scale || 1;\r\n            this.parseTexture(material, materialNode.normalTexture.index, MATERIAL_MAPS.NORMAL, {\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.RGBA,\r\n                format: gl.RGBA,\r\n                type: gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n        if (materialNode.occlusionTexture) {\r\n            material.model.occlusionStrength = materialNode.occlusionTexture.strength || 1;\r\n            this.parseTexture(material, materialNode.occlusionTexture.index, MATERIAL_MAPS.OCCLUSION, {\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.RGBA,\r\n                format: gl.RGBA,\r\n                type: gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n        this.materialCache.add(material.name, material);\r\n        return material;\r\n    }\r\n    parsePBRMaterial(materialNode, material) {\r\n        const pbr = materialNode.pbrMetallicRoughness;\r\n        material.type = MATERIAL_TYPES.PBR;\r\n        const gl = this.model.gl;\r\n        if (!material.model) {\r\n            material.model = new MetallicRoughness();\r\n        }\r\n        if (pbr.baseColorFactor) {\r\n            material.model.baseColorFactor.set(pbr.baseColorFactor);\r\n        }\r\n        if (pbr.metallicFactor !== null\r\n            && pbr.metallicFactor !== undefined) {\r\n            material.model.metallicFactor = pbr.metallicFactor;\r\n        }\r\n        if (pbr.roughnessFactor !== null\r\n            && pbr.roughnessFactor !== undefined) {\r\n            material.model.roughnessFactor = pbr.roughnessFactor;\r\n        }\r\n        //AlbedoTexture\r\n        if (pbr.baseColorTexture !== undefined && pbr.baseColorTexture !== null) {\r\n            this.parseTexture(material, pbr.baseColorTexture.index, MATERIAL_MAPS.ALBEDO, {\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.SRGB8_ALPHA8,\r\n                format: gl.RGBA,\r\n                type: gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n        //Metallic Roughness Texture\r\n        if (pbr.metallicRoughnessTexture !== undefined && pbr.metallicRoughnessTexture !== null) {\r\n            this.parseTexture(material, pbr.metallicRoughnessTexture.index, MATERIAL_MAPS.METAL_ROUGHNESS, {\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.RGBA,\r\n                format: gl.RGBA,\r\n                type: gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Load the Texture defined by the corresponding image and sampler\r\n     * @param {Material} material\r\n     * @param {number} index\r\n     * @param {number} map\r\n     * @param {TextureLoaderConfig} config\r\n     */\r\n    parseTexture(material, index, map, config) {\r\n        if (index === null || index === undefined) {\r\n            return;\r\n        }\r\n        const gltf = this.model.gltf;\r\n        const loader = this.model.loader;\r\n        const path = this.model.path;\r\n        let img;\r\n        if (gltf.textures[index].source !== undefined && gltf.textures[index].source !== null) {\r\n            img = gltf.images[gltf.textures[index].source];\r\n        }\r\n        if (gltf.textures[index].sampler !== undefined && gltf.textures[index].sampler !== null) {\r\n            config.sampler = gltf.samplers[gltf.textures[index].sampler];\r\n        }\r\n        else {\r\n            config.sampler = {\r\n                wrapS: TEXTURE_WRAP.REPEAT,\r\n                wrapT: TEXTURE_WRAP.REPEAT\r\n            };\r\n        }\r\n        //TODO: Parse img from data\r\n        loader.get(TextureLoader).add(img.name || img.uri, path + img.uri, config);\r\n        material.maps[map] = new Materialmap(img.name || img.uri);\r\n        material.maps[map].sampler = config.sampler;\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFMaterialProcessor.js.map","import { GL_BUFFERS, GLBuffer } from \"../gl\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nexport class Mesh {\r\n    constructor() {\r\n        this._primitives = [];\r\n        this._bufferViews = Object.create(null);\r\n    }\r\n    /**\r\n     * init this modell by creating the GPUBuffers(Vertex- and Indexbuffer)\r\n     * ot upload the data to an existing buffer\r\n     * @param {WebGL2RenderingContext} gl\r\n     * @param {GLBuffer} vertexBuffer - use existing VertexBuffer and add the gltf data into it\r\n     * @param {GLBuffer} indexBuffer - use existing IndexBuffer and add the gltf indices into it\r\n     * @returns {Mesh}\r\n     */\r\n    init(gl, vertexBuffer, indexBuffer) {\r\n        this.initBuffers(gl, vertexBuffer, indexBuffer);\r\n        this.setIndexBuffers(gl);\r\n        return this;\r\n    }\r\n    initBuffers(gl, vertexBuffer, indexBuffer) {\r\n        const keys = Object.keys(this._bufferViews);\r\n        for (let i = 0, view; view = this._bufferViews[keys[i]]; i++) {\r\n            if (view.buffer === null || view.buffer === undefined) {\r\n                let buffer;\r\n                if (view.target === GL_BUFFERS.ARRAY_BUFFER) {\r\n                    buffer = vertexBuffer || GLBuffer.create(gl, view.target, null, view.drawType);\r\n                }\r\n                else {\r\n                    buffer = indexBuffer || GLBuffer.create(gl, view.target, null, view.drawType);\r\n                }\r\n                view.bufferOffset = buffer.byteLength;\r\n                buffer.addData(view.data);\r\n                view.buffer = buffer;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Create all the VAO for the IndexBuffers\r\n     * @param {WebGL2RenderingContext} gl\r\n     */\r\n    setIndexBuffers(gl) {\r\n        for (let i = 0, primitive; primitive = this._primitives[i]; i++) {\r\n            if (primitive.indices && primitive.indices.bufferView !== undefined && primitive.indices.bufferView !== null) {\r\n                const view = this._bufferViews[primitive.indices.bufferView];\r\n                primitive.initVertexArrayObject(gl, view.buffer);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Make sure to initialize(init) the Mesh before uploading the data\r\n     * Create the GPU_Buffers and upload this Mesh to the GPU\r\n     * @returns {Mesh}\r\n     */\r\n    upload() {\r\n        const keys = Object.keys(this._bufferViews);\r\n        for (let i = 0, view; view = this._bufferViews[keys[i]]; i++) {\r\n            if (!view.buffer) {\r\n                throw \"Failed to upload buffer for bufferView, did you forget to initialize the buffer first?\";\r\n            }\r\n            view.buffer.upload();\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Draws all Meshes that form the Mesh\r\n     * @param {Shader} shader - Shader that should be used for all primitives/Materials\r\n     * @param {Cache} cache - cache to get the materials\r\n     */\r\n    draw(shader, cache) {\r\n        shader.applyMesh(this);\r\n        for (let i = 0, primitive; primitive = this._primitives[i]; i++) {\r\n            const view = this._bufferViews[primitive.indices.bufferView];\r\n            const offset = view.bufferOffset + primitive.indices.byteOffset;\r\n            shader.applyMaterial(cache.get(CACHE_TYPE.MATERIAL, primitive.material));\r\n            primitive.draw(primitive.draw_mode, primitive.indices.count, primitive.indices.componentType, offset);\r\n        }\r\n    }\r\n    /**\r\n     * Add an attribute to the VAO\r\n     * @param {GL_PRIMITIVES} key\r\n     * @param {Shader} shader\r\n     * @param {Attributes.GLAttribute} glAttribute\r\n     */\r\n    addAttribute(key, glAttribute) {\r\n        for (let i = 0, primitive; primitive = this._primitives[i]; i++) {\r\n            const attribute = primitive.attributes[key];\r\n            if (attribute !== null && attribute !== undefined) {\r\n                const view = this._bufferViews[attribute.bufferView];\r\n                const buffer = view.buffer;\r\n                const offset = view.bufferOffset + attribute.byteOffset;\r\n                primitive.vertexArrayObject.addAttribute(buffer, glAttribute, attribute.componentTypeCount, attribute.componentType, attribute.normalized, attribute.stride, offset);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * check if any primitive in this mesh has the attribute\r\n     * @param key - key of the attribute e.g. TANGENT,NORMAL, etc.\r\n     */\r\n    hasAttribute(key) {\r\n        for (let i = 0, primitive; primitive = this._primitives[i]; i++) {\r\n            if (primitive.hasAttribute(key)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * check if any material used by a primitve has the map with the specified key\r\n     * @param cache - cache to get the material from\r\n     * @param key - key of the map e.g ALBEDO, METALIC_ROUGHNESS etc.\r\n     */\r\n    hasMap(cache, key) {\r\n        for (let i = 0, primitive; primitive = this._primitives[i]; i++) {\r\n            const material = cache.get(CACHE_TYPE.MATERIAL, primitive.material);\r\n            if (material) {\r\n                return material.hasMap(key);\r\n            }\r\n        }\r\n    }\r\n    unload() {\r\n        //TODO: destroy data and each mesh vao\r\n    }\r\n    addPrimitive(mesh) {\r\n        this._primitives.push(mesh);\r\n        return mesh;\r\n    }\r\n    get primitives() {\r\n        return this._primitives;\r\n    }\r\n    set primitives(value) {\r\n        this._primitives = value;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    set name(value) {\r\n        this._name = value;\r\n    }\r\n    addBufferView(idx, bufferView) {\r\n        this._bufferViews[idx] = bufferView;\r\n    }\r\n}\r\n//# sourceMappingURL=mesh.js.map","export class Scene {\r\n    constructor() {\r\n        this._nodes = [];\r\n        this._meshes = [];\r\n        this._animations = [];\r\n    }\r\n    /**\r\n     * init the scene creating the GPUBuffers(Vertex- and Indexbuffer) or using an existing MeshBuffermap\r\n     * or upload the data to an existing buffer\r\n     * @param {WebGL2RenderingContext} gl\r\n     * @param {GLBuffer} vertexBuffer - use existing VertexBuffer and add the gltf data into it\r\n     * @param {GLBuffer} indexBuffer - use existing IndexBuffer and add the gltf indices into it\r\n     * @returns {Mesh}\r\n     */\r\n    init(gl, vertexBuffer, indexBuffer) {\r\n        for (let i = 0, node; node = this._nodes[i]; i++) {\r\n            node.init(gl, vertexBuffer, indexBuffer);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Make sure to initialize(init) the Mesh before uploading the data\r\n     * Create the GPU_Buffers and upload this Mesh to the GPU\r\n     * @returns {Mesh}\r\n     */\r\n    upload() {\r\n        for (let i = 0, node; node = this._nodes[i]; i++) {\r\n            node.upload();\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Draws all Meshes in the scene\r\n     * @param {Shader} shader - Shader that should be used for all primitives/Materials\r\n     * @param {Cache} cache - cache to get the materials\r\n     */\r\n    draw(shader, cache) {\r\n        for (let i = 0, node; node = this._nodes[i]; i++) {\r\n            shader.applyScene(this);\r\n            node.draw(shader, cache);\r\n        }\r\n    }\r\n    /**\r\n     * Add an attribute to the VAO\r\n     * @param {GL_PRIMITIVES} key\r\n     * @param {Shader} shader\r\n     * @param {Attributes.GLAttribute} glAttribute\r\n     */\r\n    addAttribute(key, glAttribute) {\r\n        for (let i = 0, node; node = this._nodes[i]; i++) {\r\n            node.addAttribute(key, glAttribute);\r\n        }\r\n    }\r\n    addNode(...nodes) {\r\n        for (let i = 0, node; node = nodes[i]; i++) {\r\n            this._nodes.push(node);\r\n        }\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    set name(value) {\r\n        this._name = value;\r\n    }\r\n    get meshes() {\r\n        return this._meshes;\r\n    }\r\n    set meshes(value) {\r\n        this._meshes = value;\r\n    }\r\n    get animations() {\r\n        return this._animations;\r\n    }\r\n    set animations(value) {\r\n        this._animations = value;\r\n    }\r\n    get root() {\r\n        return this._nodes[0];\r\n    }\r\n}\r\n//# sourceMappingURL=scene.js.map","export class SceneNode {\r\n    constructor() {\r\n        this.children = [];\r\n    }\r\n    init(gl, vertexBuffer, indexBuffer) {\r\n        if (this.mesh) {\r\n            this.mesh.init(gl, vertexBuffer, indexBuffer);\r\n        }\r\n        if (this.skin) {\r\n            this.skin.init(gl);\r\n        }\r\n        for (let i = 0, child; child = this.children[i]; i++) {\r\n            child.init(gl, vertexBuffer, indexBuffer);\r\n        }\r\n        return this;\r\n    }\r\n    upload() {\r\n        if (this.mesh) {\r\n            this.mesh.upload();\r\n        }\r\n        for (let i = 0, child; child = this.children[i]; i++) {\r\n            child.upload();\r\n        }\r\n        return this;\r\n    }\r\n    draw(shader, cache) {\r\n        if (this.mesh) {\r\n            shader.applyNode(this);\r\n            this.mesh.draw(shader, cache);\r\n        }\r\n        for (let i = 0, child; child = this.children[i]; i++) {\r\n            child.draw(shader, cache);\r\n        }\r\n    }\r\n    /**\r\n     * Add an attribute to the VAO\r\n     * @param {GL_PRIMITIVES} key\r\n     * @param {Shader} shader\r\n     * @param {Attributes.GLAttribute} glAttribute\r\n     */\r\n    addAttribute(key, glAttribute) {\r\n        if (this.mesh) {\r\n            this.mesh.addAttribute(key, glAttribute);\r\n        }\r\n        for (let i = 0, child; child = this.children[i]; i++) {\r\n            child.addAttribute(key, glAttribute);\r\n        }\r\n    }\r\n    addChild(child) {\r\n        this.children.push(child);\r\n    }\r\n}\r\n//# sourceMappingURL=sceneNode.js.map","import { GLShader } from \"../gl/shader\";\r\nexport class Shader extends GLShader {\r\n    constructor(gl, vertexSrc, fragmentSrc) {\r\n        super(gl, vertexSrc, fragmentSrc);\r\n    }\r\n    apply() { }\r\n    applyMaterial(material) { }\r\n    applyMesh(mesh) { }\r\n    applyNode(node) { }\r\n    applyScene(scene) { }\r\n}\r\n//# sourceMappingURL=shader.js.map","import { mat4, quat, vec3 } from \"gl-matrix\";\r\nexport class Transform {\r\n    constructor(config = {\r\n        position: { x: 0, y: 0, z: 0 },\r\n        rotation: { x: 0, y: 0, z: 0, w: 1 },\r\n        scale: { x: 1, y: 1, z: 1 }\r\n    }) {\r\n        this.init(config);\r\n    }\r\n    init(config = {\r\n        position: { x: 0, y: 0, z: 0 },\r\n        rotation: { x: 0, y: 0, z: 0, w: 1 },\r\n        scale: { x: 1, y: 1, z: 1 }\r\n    }) {\r\n        //M=T*R*S\r\n        this._localMatrix = mat4.create();\r\n        if (!config) {\r\n            config = Object.create(null);\r\n        }\r\n        if (!config.position) {\r\n            config.position = { x: 0, y: 0, z: 0 };\r\n        }\r\n        if (!config.rotation) {\r\n            config.rotation = { x: 0, y: 0, z: 0, w: 1 };\r\n        }\r\n        if (!config.scale) {\r\n            config.scale = { x: 1, y: 1, z: 1 };\r\n        }\r\n        this._rotation = quat.fromValues(config.rotation.x, config.rotation.y, config.rotation.z, config.rotation.w);\r\n        this._translation = vec3.fromValues(config.position.x, config.position.y, config.position.z);\r\n        this._scale = vec3.fromValues(config.scale.x, config.scale.y, config.scale.z);\r\n        this._children = [];\r\n        this._level = 0;\r\n        this._dirty = true;\r\n        this._worldMatrix = mat4.create();\r\n        this.apply();\r\n    }\r\n    addChild(child) {\r\n        if (child._parent) {\r\n            child._parent.removeChild(child);\r\n        }\r\n        child._parent = this;\r\n        child._level = this._level + 1;\r\n        this._children.push(child);\r\n    }\r\n    removeChild(child) {\r\n        const index = this._children.indexOf(child);\r\n        if (index > -1) {\r\n            child._level = 0;\r\n            child._parent = undefined;\r\n            this._children.splice(index, 1);\r\n        }\r\n    }\r\n    apply() {\r\n        if (this._dirty) {\r\n            mat4.fromRotationTranslationScale(this._localMatrix, this._rotation, this._translation, this._scale);\r\n            this._dirty = false;\r\n        }\r\n        return this._localMatrix;\r\n    }\r\n    //TODO: check if we need to recalculate worldMatrix\r\n    get worldMatrix() {\r\n        if (!this._parent) {\r\n            return this.apply();\r\n        }\r\n        else {\r\n            return mat4.multiply(this._worldMatrix, this._parent.worldMatrix, this.localMatrix);\r\n        }\r\n    }\r\n    get modelMatrix() {\r\n        return this.worldMatrix;\r\n    }\r\n    /**\r\n     * Returns the LocalTransformation Matrix\r\n     * @returns {Matrix}\r\n     */\r\n    get localMatrix() {\r\n        return this.apply();\r\n    }\r\n    set localMatrix(value) {\r\n        mat4.getRotation(this._rotation, value);\r\n        mat4.getTranslation(this._translation, value);\r\n        mat4.getScaling(this._scale, value);\r\n        this._dirty = true;\r\n    }\r\n    get translation() {\r\n        this._dirty = true;\r\n        return this._translation;\r\n    }\r\n    set translation(value) {\r\n        this._dirty = true;\r\n        this._translation = value;\r\n    }\r\n    get rotation() {\r\n        this._dirty = true;\r\n        return this._rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._dirty = true;\r\n        this._rotation = value;\r\n    }\r\n    get scale() {\r\n        this._dirty = true;\r\n        return this._scale;\r\n    }\r\n    set scale(value) {\r\n        this._dirty = true;\r\n        this._scale = value;\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    get parent() {\r\n        return this._parent;\r\n    }\r\n    set parent(value) {\r\n        this._parent = value;\r\n    }\r\n    get children() {\r\n        return this._children;\r\n    }\r\n    set children(value) {\r\n        this._children = value;\r\n    }\r\n    get dirty() {\r\n        return this._dirty;\r\n    }\r\n}\r\n//# sourceMappingURL=transform.js.map","import { quat, vec3 } from \"gl-matrix\";\r\nexport class Animation {\r\n    constructor() {\r\n        this.samplers = [];\r\n        this.channels = [];\r\n        this._duration = 0;\r\n    }\r\n    addSampler(sampler) {\r\n        this.samplers.push(sampler);\r\n    }\r\n    addChannel(channel) {\r\n        this.channels.push(channel);\r\n    }\r\n    animate(t) {\r\n        const time = t * 0.001;\r\n        for (let i = 0, sampler; sampler = this.samplers[i]; i++) {\r\n            sampler.update(time);\r\n        }\r\n        for (let i = 0, channel; channel = this.channels[i]; i++) {\r\n            const sampler = this.samplers[channel.sampler];\r\n            const node = channel.node;\r\n            switch (channel.path) {\r\n                case \"rotation\":\r\n                    quat.copy(node.transform.rotation, sampler.value);\r\n                    break;\r\n                case \"translation\":\r\n                    vec3.copy(node.transform.translation, sampler.value);\r\n                    break;\r\n                case \"scale\":\r\n                    vec3.copy(node.transform.scale, sampler.value);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    set duration(duration) {\r\n        this._duration = duration;\r\n    }\r\n    get durationMS() {\r\n        return this._duration * 1000;\r\n    }\r\n    set durationMS(durationMS) {\r\n        this._duration = durationMS * 0.001;\r\n    }\r\n}\r\n//# sourceMappingURL=animation.js.map","export class AnimationChannel {\r\n}\r\n//# sourceMappingURL=animationChannel.js.map","import { quat, vec4 } from \"gl-matrix\";\r\nexport var Interpolation;\r\n(function (Interpolation) {\r\n    Interpolation[\"LINEAR\"] = \"LINEAR\";\r\n    Interpolation[\"STEP\"] = \"STEP\";\r\n    Interpolation[\"CUBICSPLINE\"] = \"CUBICSPLINE\";\r\n})(Interpolation || (Interpolation = {}));\r\nexport class AnimationSampler {\r\n    constructor() {\r\n        this._interpolation = Interpolation.LINEAR;\r\n        this.prevValue = vec4.create();\r\n        this.nextValue = vec4.create();\r\n        this._value = vec4.create();\r\n        this._duration = 0;\r\n    }\r\n    updateValue(idx, t) {\r\n        const typeCount = this._componentTypeCount;\r\n        const prevIdx = idx * typeCount;\r\n        const nextIdx = (prevIdx + typeCount + 2) <= this._outputData.length ? prevIdx + typeCount : prevIdx;\r\n        const lerp = (typeCount === 4 ? quat.slerp : vec4.lerp);\r\n        vec4.set(this.prevValue, this._outputData[prevIdx], this._outputData[prevIdx + 1], this._outputData[prevIdx + 2], typeCount === 3 ? 0 : this._outputData[prevIdx + 3]);\r\n        vec4.set(this.nextValue, this._outputData[nextIdx], this._outputData[nextIdx + 1], this._outputData[nextIdx + 2], typeCount === 3 ? 0 : this._outputData[nextIdx + 3]);\r\n        lerp(this._value, this.prevValue, this.nextValue, t);\r\n    }\r\n    update(t) {\r\n        let idx = 0;\r\n        while (idx < this._inputData.length - 2 && t >= this._inputData[idx + 1]) {\r\n            idx++;\r\n        }\r\n        const previousTime = this._inputData[idx];\r\n        const nextTime = this._inputData[idx + 1];\r\n        const interpolationTime = Math.min(Math.max(0, (t - previousTime) / (nextTime - previousTime)), 1);\r\n        this.updateValue(idx, interpolationTime);\r\n    }\r\n    get value() {\r\n        return this._value;\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    set duration(duration) {\r\n        this._duration = duration;\r\n    }\r\n    get interpolation() {\r\n        return this._interpolation;\r\n    }\r\n    set interpolation(value) {\r\n        this._interpolation = value;\r\n    }\r\n    get inputData() {\r\n        return this._inputData;\r\n    }\r\n    set inputData(value) {\r\n        this._inputData = value;\r\n    }\r\n    get outputData() {\r\n        return this._outputData;\r\n    }\r\n    set outputData(value) {\r\n        this._outputData = value;\r\n    }\r\n    get componentTypeCount() {\r\n        return this._componentTypeCount;\r\n    }\r\n    set componentTypeCount(value) {\r\n        this._componentTypeCount = value;\r\n    }\r\n}\r\n//# sourceMappingURL=animationSampler.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./animation\";\r\nexport * from \"./animationChannel\";\r\nexport * from \"./animationSampler\";\r\n//# sourceMappingURL=index.js.map","import { GL_TYPES } from \"../../gl/constants\";\r\nexport var ACCESSOR_TYPE;\r\n(function (ACCESSOR_TYPE) {\r\n    ACCESSOR_TYPE[\"SCALAR\"] = \"SCALAR\";\r\n    ACCESSOR_TYPE[\"VEC2\"] = \"VEC2\";\r\n    ACCESSOR_TYPE[\"VEC3\"] = \"VEC3\";\r\n    ACCESSOR_TYPE[\"VEC4\"] = \"VEC4\";\r\n    ACCESSOR_TYPE[\"MAT2\"] = \"MAT2\";\r\n    ACCESSOR_TYPE[\"MAT3\"] = \"MAT3\";\r\n    ACCESSOR_TYPE[\"MAT4\"] = \"MAT4\";\r\n})(ACCESSOR_TYPE || (ACCESSOR_TYPE = {}));\r\nexport const GLTF_ACCESORTYPE_SIZE = {\r\n    [ACCESSOR_TYPE.SCALAR]: 1,\r\n    [ACCESSOR_TYPE.VEC2]: 2,\r\n    [ACCESSOR_TYPE.VEC3]: 3,\r\n    [ACCESSOR_TYPE.VEC4]: 4,\r\n    [ACCESSOR_TYPE.MAT2]: 4,\r\n    [ACCESSOR_TYPE.MAT3]: 9,\r\n    [ACCESSOR_TYPE.MAT4]: 16,\r\n};\r\nexport class Accessor {\r\n    constructor() {\r\n        this._byteOffset = 0;\r\n        this._componentType = GL_TYPES.FLOAT;\r\n        this._stride = 0;\r\n        this._normalized = false;\r\n        this._max = [];\r\n        this._min = [];\r\n    }\r\n    get bufferView() {\r\n        return this._bufferView;\r\n    }\r\n    set bufferView(value) {\r\n        this._bufferView = value;\r\n    }\r\n    get byteOffset() {\r\n        return this._byteOffset;\r\n    }\r\n    set byteOffset(value) {\r\n        this._byteOffset = value;\r\n    }\r\n    get componentType() {\r\n        return this._componentType;\r\n    }\r\n    set componentType(value) {\r\n        this._componentType = value;\r\n    }\r\n    get stride() {\r\n        return this._stride;\r\n    }\r\n    set stride(value) {\r\n        this._stride = value;\r\n    }\r\n    get normalized() {\r\n        return this._normalized;\r\n    }\r\n    set normalized(value) {\r\n        this._normalized = value;\r\n    }\r\n    get componentTypeCount() {\r\n        return GLTF_ACCESORTYPE_SIZE[this._type];\r\n    }\r\n    get count() {\r\n        return this._count;\r\n    }\r\n    set count(value) {\r\n        this._count = value;\r\n    }\r\n    get max() {\r\n        return this._max;\r\n    }\r\n    set max(value) {\r\n        this._max = value;\r\n    }\r\n    get min() {\r\n        return this._min;\r\n    }\r\n    set min(value) {\r\n        this._min = value;\r\n    }\r\n    get type() {\r\n        return this._type;\r\n    }\r\n    set type(value) {\r\n        this._type = value;\r\n    }\r\n}\r\n//# sourceMappingURL=accessor.js.map","import { GL_BUFFERS } from \"../../gl/constants\";\r\n/**\r\n * Describes which buffer to create for the GPU\r\n */\r\nexport class BufferView {\r\n    constructor() {\r\n        this.bufferOffset = 0;\r\n        this.drawType = GL_BUFFERS.STATIC_DRAW;\r\n    }\r\n}\r\n//# sourceMappingURL=bufferView.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./accessor\";\r\nexport * from \"./bufferView\";\r\n//# sourceMappingURL=index.js.map","import { GLVertexArrayObject } from \"../../gl\";\r\nimport { Accessor } from \"../data/accessor\";\r\n/**\r\n * GLTF Primitive wrapper\r\n * Primitive is a Geometric piece of the Mesh that uses a specific material\r\n * or. a stream of vertices that can be rendered together\r\n */\r\nexport class Primitive {\r\n    constructor() {\r\n        this._attributes = Object.create(null);\r\n        this._draw_mode = 4; //GL_TRIANGLE\r\n        this._material = \"__default__\";\r\n    }\r\n    /**\r\n     * Check if this mesh has the attribute\r\n     * @param key - name/key of the attribute e.g. TANGENT,NORMAL,POSITION etc.\r\n     */\r\n    hasAttribute(key) {\r\n        return !!this._attributes[key];\r\n    }\r\n    /**\r\n     * adds an attribute to the MeshPrimitive, that is later send to the GPU via an VAO\r\n     * @param {GL_PRIMITIVES | string} key\r\n     * @param {number} accessorType\r\n     * @param {GL_TYPES} glType\r\n     * @param {boolean} normalized\r\n     * @param {number} stride\r\n     * @param {number} byteOffset\r\n     * @param {number} bufferView\r\n     * @param {ACCESSOR_TYPE} componentType\r\n     * @param count\r\n     * @param min\r\n     * @param max\r\n     * @returns {Accessor}\r\n     */\r\n    addAttribute(key, accessorType, glType, normalized = false, stride = 0, byteOffset = 0, bufferView, min = [], max = []) {\r\n        const accessor = new Accessor();\r\n        accessor.bufferView = bufferView;\r\n        accessor.type = accessorType;\r\n        accessor.componentType = glType;\r\n        accessor.normalized = normalized;\r\n        accessor.stride = stride;\r\n        accessor.byteOffset = byteOffset;\r\n        accessor.min = min;\r\n        accessor.max = max;\r\n        this._attributes[key] = accessor;\r\n        return this._attributes[key];\r\n    }\r\n    /**\r\n     * Sets the index accessor that is later used for the IndexBuffer as an attribute and send to the GPU\r\n     * @param {number} count\r\n     * @param {GL_TYPES} type\r\n     * @param {number} byteOffset\r\n     * @param {number} bufferView\r\n     * @returns {IndexAccessor}\r\n     */\r\n    setIndices(count, type, byteOffset = 0, bufferView) {\r\n        this._indices = new Accessor();\r\n        this._indices.bufferView = bufferView;\r\n        this._indices.count = count;\r\n        this._indices.componentType = type;\r\n        this._indices.byteOffset = byteOffset;\r\n        return this._indices;\r\n    }\r\n    initVertexArrayObject(gl, indexBuffer, vao) {\r\n        this._vertexArrayObject = vao || new GLVertexArrayObject(gl);\r\n        this._vertexArrayObject.setIndexBuffer(indexBuffer);\r\n    }\r\n    /**\r\n     * Should only be called by the Models draw method, to calculate the actual offset\r\n     * which is the bufferOffset + bufferDataOffset + indexAccessorOffset\r\n     * @param {number} mode\r\n     * @param {number} size\r\n     * @param {number} type\r\n     * @param {number} offset\r\n     */\r\n    draw(mode = this._draw_mode, size = this._indices.count, type = this._indices.componentType, offset = this._indices.byteOffset) {\r\n        if (this._vertexArrayObject) {\r\n            this._vertexArrayObject.bind();\r\n            this._vertexArrayObject.draw(mode, size, type, offset);\r\n            this._vertexArrayObject.unbind();\r\n        }\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    set name(value) {\r\n        this._name = value;\r\n    }\r\n    get draw_mode() {\r\n        return this._draw_mode;\r\n    }\r\n    set draw_mode(value) {\r\n        this._draw_mode = value;\r\n    }\r\n    get attributes() {\r\n        return this._attributes;\r\n    }\r\n    set attributes(value) {\r\n        this._attributes = value;\r\n    }\r\n    get indices() {\r\n        return this._indices;\r\n    }\r\n    set indices(value) {\r\n        this._indices = value;\r\n    }\r\n    get material() {\r\n        return this._material;\r\n    }\r\n    set material(value) {\r\n        this._material = value;\r\n    }\r\n    get vertexArrayObject() {\r\n        return this._vertexArrayObject;\r\n    }\r\n    set vertexArrayObject(value) {\r\n        this._vertexArrayObject = value;\r\n    }\r\n}\r\n//# sourceMappingURL=primitive.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./primitive\";\r\n//# sourceMappingURL=index.js.map","import { mat4 } from \"gl-matrix\";\r\nimport { GLUniformBufferObject } from \"../../gl/GLUniformBufferObject\";\r\nimport { UBO_BINDINGS } from \"../../viewer/constants\";\r\nconst NUM_MAX_JOINTS = 65;\r\nexport class Skin {\r\n    constructor() {\r\n        this._joints = [];\r\n        this._inverseBindMatrices = [];\r\n        this._jointMatrices = [];\r\n        this._data = new Float32Array(NUM_MAX_JOINTS * 16);\r\n        this._dirty = true;\r\n    }\r\n    init(gl) {\r\n        for (let i = 0; i < this._joints.length; i++) {\r\n            this._jointMatrices.push(mat4.create());\r\n        }\r\n        this._ubo = new GLUniformBufferObject(gl, UBO_BINDINGS.SKIN);\r\n        this._ubo.addItem('matrix', 'mat4', this._data);\r\n        this._ubo.upload();\r\n        this._ubo.bindUBO();\r\n        //this.update();\r\n    }\r\n    update() {\r\n        if (!this._dirty) {\r\n            return;\r\n        }\r\n        for (let i = 0, jointMatrix; jointMatrix = this._jointMatrices[i]; i++) {\r\n            this._data.set(jointMatrix, i * 16);\r\n        }\r\n        this._ubo.updateItem(\"matrix\", this._data, true);\r\n        this._dirty = false;\r\n    }\r\n    get joints() {\r\n        return this._joints;\r\n    }\r\n    set joints(value) {\r\n        this._joints = value;\r\n    }\r\n    get skeleton() {\r\n        return this._skeleton;\r\n    }\r\n    set skeleton(value) {\r\n        this._skeleton = value;\r\n    }\r\n    get inverseBindMatrices() {\r\n        return this._inverseBindMatrices;\r\n    }\r\n    set inverseBindMatrices(value) {\r\n        this._inverseBindMatrices = value;\r\n    }\r\n    get jointMatrices() {\r\n        this._dirty = true;\r\n        return this._jointMatrices;\r\n    }\r\n    set jointMatrices(value) {\r\n        this._dirty = true;\r\n        this._jointMatrices = value;\r\n    }\r\n    get ubo() {\r\n        return this._ubo;\r\n    }\r\n    set ubo(value) {\r\n        this._ubo = value;\r\n    }\r\n}\r\n//# sourceMappingURL=skin.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./skin\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./mesh\";\r\nexport * from \"./scene\";\r\nexport * from \"./sceneNode\";\r\nexport * from \"./shader\";\r\nexport * from \"./transform\";\r\nexport * from \"./animation/index\";\r\nexport * from \"./data/index\";\r\nexport * from \"./primitive/index\";\r\nexport * from \"./skin/index\";\r\n//# sourceMappingURL=index.js.map","import { Mesh, Primitive } from \"../scene\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nexport class GLTFMeshProcessor {\r\n    constructor(model) {\r\n        this.model = model;\r\n        this._meshes = [];\r\n        this.cache = this.model.cache.getCache(CACHE_TYPE.MESH);\r\n    }\r\n    processMesh(idx) {\r\n        if (this._meshes[idx]) {\r\n            return this._meshes[idx];\r\n        }\r\n        const sceneMesh = new Mesh();\r\n        const mesh = this.model.gltf.meshes[idx];\r\n        sceneMesh.name = mesh.name || \"mesh\" + idx;\r\n        for (let i = 0, primitive; primitive = mesh.primitives[i]; i++) {\r\n            sceneMesh.addPrimitive(this.parsePrimitives(sceneMesh, primitive));\r\n        }\r\n        this._meshes[idx] = sceneMesh;\r\n        this.cache.add(sceneMesh.name, sceneMesh);\r\n        return sceneMesh;\r\n    }\r\n    /**\r\n     * creates a new mesh/GLTF_Primitive for the gltf\r\n     * @param {IGLTF_Primitive} gltfPrimitive\r\n     */\r\n    parsePrimitives(mesh, gltfPrimitive) {\r\n        const gltf = this.model.gltf;\r\n        const primitive = new Primitive();\r\n        //Add attributes to mesh\r\n        for (let id in gltfPrimitive.attributes) {\r\n            //Create BufferView for each Accessor/GLBuffer for Position,Normal,tex,tangent etc. and map the accessor bufferViewIdx new\r\n            const accessor = gltf.accessors[gltfPrimitive.attributes[id]];\r\n            this.addAttribute(primitive, id, accessor);\r\n            mesh.addBufferView(accessor.bufferView, this.model.getBufferView(accessor.bufferView));\r\n        }\r\n        //Set indices for indexBuffer\r\n        if (gltfPrimitive.indices !== undefined && gltfPrimitive.indices !== null) {\r\n            //Create BufferView for each IndexBuffer and map the accessor bufferViewIdx new\r\n            const accessor = gltf.accessors[gltfPrimitive.indices];\r\n            this.setIndices(primitive, accessor);\r\n            mesh.addBufferView(accessor.bufferView, this.model.getBufferView(accessor.bufferView, true));\r\n        }\r\n        primitive.draw_mode = gltfPrimitive.mode || 4; //Default GL_TRIANGLE\r\n        //Set the Material name for the mesh\r\n        this.setMeshMaterial(primitive, gltfPrimitive.material);\r\n        //TODO: morph targets primitive.targets\r\n        return primitive;\r\n    }\r\n    /**\r\n     * Adds an attribute to the primitive of type\r\n     * POSITION,NORMAL,TANGENT,TEXCOORD0,TEXCOORD1,COLOR0,JOINTS0,WEIGHTS0\r\n     * @param {Primitive} primitive\r\n     * @param {string} id\r\n     * @param {IGLTF_Accessor} accessor\r\n     */\r\n    addAttribute(primitive, id, accessor) {\r\n        const gltf = this.model.gltf;\r\n        const view = gltf.bufferViews[accessor.bufferView];\r\n        primitive.addAttribute(id, accessor.type, accessor.componentType, accessor.normalized, view.byteStride || 0, accessor.byteOffset, accessor.bufferView, accessor.min, accessor.max);\r\n    }\r\n    /**\r\n     * sets the name of the material used for the mesh if any\r\n     * else its set to the \"__default__\" material\r\n     * @param {Primitive} mesh\r\n     * @param {number} materialIdx\r\n     */\r\n    setMeshMaterial(mesh, materialIdx) {\r\n        if (materialIdx === undefined || materialIdx === null) {\r\n            mesh.material = '__default__';\r\n            return;\r\n        }\r\n        mesh.material = this.model.getMaterial(materialIdx).name;\r\n    }\r\n    /**\r\n     * set the index accessor\r\n     * @param {Primitive} primitive\r\n     * @param {IGLTF_Accessor} indices\r\n     */\r\n    setIndices(primitive, indices) {\r\n        primitive.setIndices(indices.count, indices.componentType, indices.byteOffset || 0, indices.bufferView);\r\n    }\r\n    get meshes() {\r\n        return this._meshes;\r\n    }\r\n    set meshes(value) {\r\n        this._meshes = value;\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFMeshProcessor.js.map","import { SceneNode, Transform } from \"../scene\";\r\nimport { mat4, quat, vec3 } from \"gl-matrix\";\r\nexport class GLTFNodeProcessor {\r\n    constructor(model) {\r\n        this.model = model;\r\n        this.nodes = [];\r\n    }\r\n    processNode(idx) {\r\n        if (this.nodes[idx]) {\r\n            return this.nodes[idx];\r\n        }\r\n        return this.parseNode(idx, this.nodes);\r\n    }\r\n    /**\r\n     * Parse a single node and all its children\r\n     * a node can have multiple properties e.g. mesh,transform,weights,camera,skin etc.\r\n     * @param {number} nodeIdx\r\n     * @param nodes\r\n     * @param parent\r\n     */\r\n    parseNode(nodeIdx, nodes, parent) {\r\n        const gltf = this.model.gltf;\r\n        const node = gltf.nodes[nodeIdx];\r\n        if (nodes[nodeIdx]) {\r\n            return nodes[nodeIdx];\r\n        }\r\n        const sceneNode = new SceneNode();\r\n        sceneNode.name = node.name || \"node\" + nodeIdx;\r\n        nodes[nodeIdx] = sceneNode;\r\n        sceneNode.transform = this.parseTransform(node, parent);\r\n        if (node.mesh !== null && node.mesh !== undefined) {\r\n            sceneNode.mesh = this.model.getMesh(node.mesh);\r\n        }\r\n        if (node.skin !== null && node.skin !== undefined) {\r\n            sceneNode.skin = this.model.getSkin(node.skin);\r\n        }\r\n        node.children = node.children || [];\r\n        for (let i = 0, child; child = node.children[i]; i++) {\r\n            const childNode = this.parseNode(child, nodes, sceneNode);\r\n            sceneNode.addChild(childNode);\r\n        }\r\n        return sceneNode;\r\n    }\r\n    /**\r\n     * Parse the Transformation of a node and add it as a child to the list of transform nodes\r\n     * @param {IGLTF_Node} node\r\n     * @param {Transform} parent - parent of the new node\r\n     * @returns {Transform} newly create Transform node\r\n     */\r\n    parseTransform(node, parent) {\r\n        const transform = new Transform();\r\n        if (node.matrix !== undefined && node.matrix !== null) {\r\n            transform.localMatrix = mat4.clone(node.matrix);\r\n            mat4.getTranslation(transform.translation, transform.localMatrix);\r\n            mat4.getRotation(transform.rotation, transform.localMatrix);\r\n            mat4.getScaling(transform.scale, transform.localMatrix);\r\n        }\r\n        if (node.translation !== undefined && node.translation !== null) {\r\n            transform.translation = vec3.clone(node.translation);\r\n        }\r\n        if (node.rotation !== undefined && node.rotation !== null) {\r\n            transform.rotation = quat.clone(node.rotation);\r\n        }\r\n        if (node.scale !== undefined && node.scale !== null) {\r\n            transform.scale = vec3.clone(node.scale);\r\n        }\r\n        if (parent) {\r\n            parent.transform.addChild(transform);\r\n        }\r\n        return transform;\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFNodeProcessor.js.map","import { BufferView, GLTF_ACCESORTYPE_SIZE } from \"../scene/data\";\r\nimport { GL_BUFFERS, GL_TYPES } from \"../gl/constants\";\r\nexport class GLTFAccessorProcessor {\r\n    constructor(model) {\r\n        this.buffers = [];\r\n        this.model = model;\r\n    }\r\n    /**\r\n     * get/create the BufferViewObject for this accessor\r\n     * @param accessor\r\n     * @param idx\r\n     * @param isIndexBuffer\r\n     */\r\n    getBufferView(idx, isIndexBuffer = false) {\r\n        const gltf = this.model.gltf;\r\n        if (!this.buffers[idx]) {\r\n            this.buffers[idx] = this.createBufferView(gltf.bufferViews[idx]);\r\n        }\r\n        //get the bufferView\r\n        const view = this.buffers[idx];\r\n        //set target for the BufferView IndexBuffer or Vertex/ArrayBuffer\r\n        view.target = isIndexBuffer ? view.target || GL_BUFFERS.ELEMENT_ARRAY_BUFFER : view.target || GL_BUFFERS.ARRAY_BUFFER;\r\n        return view;\r\n    }\r\n    getAccessorData(accessor) {\r\n        return this.accessor2TypedArray(this.getBufferView(accessor.bufferView).data, accessor.byteOffset, GLTF_ACCESORTYPE_SIZE[accessor.type] * accessor.count, accessor.componentType);\r\n    }\r\n    /**\r\n     * Create a Bufferfiew from the GLTF_Bufferview\r\n     * @param {Array<ArrayBuffer|ArrayBufferView>} buffers\r\n     * @param {IGLTF_BufferView} bufferView\r\n     * @returns {BufferView}\r\n     */\r\n    createBufferView(bufferView) {\r\n        const view = new BufferView();\r\n        view.data = this.sliceBuffer(bufferView);\r\n        view.target = bufferView.target;\r\n        return view;\r\n    }\r\n    /**\r\n     * Slice up the Mesh data ArrayBuffer into smaller ArrayBuffers\r\n     * @param {Array<ArrayBuffer|ArrayBufferView>} buffers\r\n     * @param {BufferView} view\r\n     * @returns {ArrayBuffer}\r\n     */\r\n    sliceBuffer(view) {\r\n        const data = this.model.data[view.buffer];\r\n        const offset = view.byteOffset || 0;\r\n        if (data instanceof ArrayBuffer) {\r\n            return data.slice(offset, offset + view.byteLength);\r\n        }\r\n        else {\r\n            return data['buffer'].slice(offset, offset + view.byteLength);\r\n        }\r\n    }\r\n    accessor2TypedArray(buffer, byteOffset, count, componentType) {\r\n        switch (componentType) {\r\n            case GL_TYPES.BYTE:\r\n                return new Int8Array(buffer, byteOffset, count);\r\n            case GL_TYPES.UNSIGNED_BYTE:\r\n                return new Uint8Array(buffer, byteOffset, count);\r\n            case GL_TYPES.SHORT:\r\n                return new Int16Array(buffer, byteOffset, count);\r\n            case GL_TYPES.UNSIGNED_SHORT:\r\n                return new Int16Array(buffer, byteOffset, count);\r\n            case GL_TYPES.INT:\r\n                return new Int32Array(buffer, byteOffset, count);\r\n            case GL_TYPES.UNSIGNED_INT:\r\n                return new Int32Array(buffer, byteOffset, count);\r\n            case GL_TYPES.FLOAT:\r\n                return new Float32Array(buffer, byteOffset, count);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFAccessorProcessor.js.map","import { Skin } from \"../scene/skin/skin\";\r\nimport { mat4 } from \"gl-matrix\";\r\nexport class GLTFSkinProcessor {\r\n    constructor(model) {\r\n        this.model = model;\r\n        this.skins = [];\r\n    }\r\n    processSkin(idx) {\r\n        if (this.skins[idx]) {\r\n            return this.skins[idx];\r\n        }\r\n        const skin = new Skin();\r\n        const gltf = this.model.gltf;\r\n        const gltfSkin = gltf.skins[idx];\r\n        const accessor = gltf.accessors[gltfSkin.inverseBindMatrices];\r\n        if (gltfSkin.skeleton !== undefined && gltfSkin.skeleton !== null) {\r\n            skin.skeleton = this.model.getNode(gltfSkin.skeleton);\r\n        }\r\n        for (let i = 0; i < gltfSkin.joints.length; i++) {\r\n            skin.joints.push(this.model.getNode(gltfSkin.joints[i]));\r\n        }\r\n        if (accessor) {\r\n            const inverseBindMatrices = this.model.getAccessorData(accessor);\r\n            for (let i = 0; i < inverseBindMatrices.length; i += 16) {\r\n                skin.inverseBindMatrices.push(mat4.fromValues(inverseBindMatrices[i], inverseBindMatrices[i + 1], inverseBindMatrices[i + 2], inverseBindMatrices[i + 3], inverseBindMatrices[i + 4], inverseBindMatrices[i + 5], inverseBindMatrices[i + 6], inverseBindMatrices[i + 7], inverseBindMatrices[i + 8], inverseBindMatrices[i + 9], inverseBindMatrices[i + 10], inverseBindMatrices[i + 11], inverseBindMatrices[i + 12], inverseBindMatrices[i + 13], inverseBindMatrices[i + 14], inverseBindMatrices[i + 15]));\r\n            }\r\n        }\r\n        this.skins[idx] = skin;\r\n        return skin;\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFSkinProcessor.js.map","import { AnimationSampler, Interpolation } from \"../scene/animation/animationSampler\";\r\nimport { Accessor } from \"../scene/data/accessor\";\r\nimport { AnimationChannel } from \"../scene/animation/animationChannel\";\r\nimport { Animation } from \"../scene/animation\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nexport class GLTFAnimationProcessor {\r\n    constructor(model) {\r\n        this.model = model;\r\n        this.cache = this.model.cache.getCache(CACHE_TYPE.ANIMATION);\r\n    }\r\n    processAnimations() {\r\n        this._animations = [];\r\n        const gltf = this.model.gltf;\r\n        gltf.animations = gltf.animations || [];\r\n        for (let i = 0; i < gltf.animations.length; i++) {\r\n            this._animations.push(this.processAnimation(i));\r\n        }\r\n        return this._animations;\r\n    }\r\n    processAnimation(idx) {\r\n        const animation = new Animation();\r\n        const gltfAnimation = this.model.gltf.animations[idx];\r\n        animation.name = gltfAnimation.name || \"animation\" + idx;\r\n        for (let i = 0, sampler; sampler = gltfAnimation.samplers[i]; i++) {\r\n            const animationSampler = this.processSampler(sampler);\r\n            animation.addSampler(animationSampler);\r\n            animation.duration = animation.duration < animationSampler.duration ? animationSampler.duration : animation.duration;\r\n        }\r\n        for (let i = 0, channel; channel = gltfAnimation.channels[i]; i++) {\r\n            animation.addChannel(this.processChannel(channel));\r\n        }\r\n        this.cache.add(animation.name, animation);\r\n        return animation;\r\n    }\r\n    processSampler(sampler) {\r\n        const gltf = this.model.gltf;\r\n        const animationSampler = new AnimationSampler();\r\n        animationSampler.interpolation = sampler.interpolation || Interpolation.LINEAR;\r\n        const inputAccessor = this.createAccessor(gltf.accessors[sampler.input]);\r\n        const outputAccessor = this.createAccessor(gltf.accessors[sampler.output]);\r\n        animationSampler.inputData = this.model.getAccessorData(inputAccessor);\r\n        animationSampler.outputData = this.model.getAccessorData(outputAccessor);\r\n        animationSampler.componentTypeCount = outputAccessor.componentTypeCount;\r\n        animationSampler.duration = animationSampler.inputData[animationSampler.inputData.length - 1];\r\n        return animationSampler;\r\n    }\r\n    processChannel(channel) {\r\n        const animationChannel = new AnimationChannel();\r\n        animationChannel.sampler = channel.sampler;\r\n        animationChannel.node = this.model.getNode(channel.target.node);\r\n        animationChannel.path = channel.target.path;\r\n        return animationChannel;\r\n    }\r\n    createAccessor(gltfAccessor) {\r\n        const gltf = this.model.gltf;\r\n        const accessor = new Accessor();\r\n        accessor.bufferView = gltfAccessor.bufferView;\r\n        accessor.byteOffset = gltfAccessor.byteOffset || 0;\r\n        accessor.normalized = gltfAccessor.normalized;\r\n        accessor.type = gltfAccessor.type;\r\n        accessor.componentType = gltfAccessor.componentType;\r\n        accessor.count = gltfAccessor.count;\r\n        accessor.min = gltfAccessor.min || [];\r\n        accessor.max = gltfAccessor.max || [];\r\n        accessor.stride = gltf.bufferViews[gltfAccessor.bufferView].byteStride || 0;\r\n        return accessor;\r\n    }\r\n    get animations() {\r\n        return this._animations;\r\n    }\r\n    set animations(value) {\r\n        this._animations = value;\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFAnimationProcessor.js.map","import { Scene } from \"../scene\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nexport class GLTFSceneProcessor {\r\n    constructor(model) {\r\n        this.model = model;\r\n        this.cache = this.model.cache.getCache(CACHE_TYPE.SCENE);\r\n    }\r\n    /**\r\n     * Parse the scenes by parsing each node of the GTLF File\r\n     */\r\n    processScenes() {\r\n        const gltf = this.model.gltf;\r\n        const scenes = [];\r\n        for (let i = 0, scene; scene = gltf.scenes[i]; i++) {\r\n            scenes.push(this.processScene(scene, i));\r\n        }\r\n        return scenes[0];\r\n    }\r\n    processScene(gltfScene, idx) {\r\n        const scene = new Scene();\r\n        scene.name = gltfScene.name || \"scene\" + idx;\r\n        for (let i = 0; i < gltfScene.nodes.length; i++) {\r\n            scene.addNode(this.model.getNode(gltfScene.nodes[i]));\r\n        }\r\n        this.cache.add(scene.name, scene);\r\n        return scene;\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFSceneProcessor.js.map","import { GLTFMaterialProcessor } from \"./GLTFMaterialProcessor\";\r\nimport { GLTFMeshProcessor } from \"./GLTFMeshProcessor\";\r\nimport { GLTFNodeProcessor } from \"./GLTFNodeProcessor\";\r\nimport { GLTFAccessorProcessor } from \"./GLTFAccessorProcessor\";\r\nimport { GLTFSkinProcessor } from \"./GLTFSkinProcessor\";\r\nimport { GLTFAnimationProcessor } from \"./GLTFAnimationProcessor\";\r\nimport { GLTFSceneProcessor } from \"./GLTFSceneProcessor\";\r\nexport class GLTFModel {\r\n    constructor(gltf, data, config) {\r\n        this.gltf = gltf;\r\n        this.data = data;\r\n        this.cache = config.cache;\r\n        this.loader = config.loader;\r\n        this.gl = config.gl;\r\n        this.path = config.path;\r\n        this.accessorProcessor = new GLTFAccessorProcessor(this);\r\n        this.meshProcessor = new GLTFMeshProcessor(this);\r\n        this.nodeProcessor = new GLTFNodeProcessor(this);\r\n        this.materialProcessor = new GLTFMaterialProcessor(this);\r\n        this.skinProcessor = new GLTFSkinProcessor(this);\r\n    }\r\n    process() {\r\n        const scene = new GLTFSceneProcessor(this).processScenes();\r\n        scene.animations = new GLTFAnimationProcessor(this).processAnimations();\r\n        scene.meshes = this.meshProcessor.meshes;\r\n        return scene;\r\n    }\r\n    getSkin(idx) {\r\n        return this.skinProcessor.processSkin(idx);\r\n    }\r\n    getMaterial(idx) {\r\n        return this.materialProcessor.processMaterial(idx);\r\n    }\r\n    getNode(idx) {\r\n        return this.nodeProcessor.processNode(idx);\r\n    }\r\n    getMesh(idx) {\r\n        return this.meshProcessor.processMesh(idx);\r\n    }\r\n    getBufferView(idx, isIndexBuffer) {\r\n        return this.accessorProcessor.getBufferView(idx, isIndexBuffer);\r\n    }\r\n    getAccessorData(accessor) {\r\n        return this.accessorProcessor.getAccessorData(accessor);\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFModel.js.map","export class Base64Binary {\r\n    static decodeArrayBuffer(input) {\r\n        const bytes = (input.length / 4) * 3;\r\n        const ab = new ArrayBuffer(bytes);\r\n        Base64Binary.decode(input, null, ab);\r\n        return ab;\r\n    }\r\n    static removePaddingChars(input) {\r\n        const lkey = Base64Binary._keyStr.indexOf(input.charAt(input.length - 1));\r\n        if (lkey === 64) {\r\n            return input.substring(0, input.length - 1);\r\n        }\r\n        return input;\r\n    }\r\n    static decode(input, byteLength, arrayBuffer) {\r\n        //get last chars to see if are valid\r\n        input = Base64Binary.removePaddingChars(input);\r\n        //@ts-ignore\r\n        const bytes = parseInt((input.length / 4) * 3, 10);\r\n        const offset = byteLength !== undefined ? bytes - byteLength : 0;\r\n        const uarray = arrayBuffer ? new Uint8Array(arrayBuffer) : new Uint8Array(bytes);\r\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n        for (let i = 0, j = 0; i < bytes; i += 3) {\r\n            const enc1 = Base64Binary._keyStr.indexOf(input.charAt(j++));\r\n            const enc2 = Base64Binary._keyStr.indexOf(input.charAt(j++));\r\n            const enc3 = Base64Binary._keyStr.indexOf(input.charAt(j++));\r\n            const enc4 = Base64Binary._keyStr.indexOf(input.charAt(j++));\r\n            const chr1 = (enc1 << 2) | (enc2 >> 4);\r\n            const chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n            const chr3 = ((enc3 & 3) << 6) | enc4;\r\n            uarray[i] = chr1;\r\n            if (enc3 != 64)\r\n                uarray[i + 1] = chr2;\r\n            if (enc4 != 64)\r\n                uarray[i + 2] = chr3;\r\n        }\r\n        return uarray.slice(offset, bytes);\r\n    }\r\n}\r\nBase64Binary._keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n//# sourceMappingURL=Base64Binary.js.map","import { GLTFModel } from \"./GLTFModel\";\r\nimport { Base64Binary } from \"./Base64Binary\";\r\n/**\r\n * Parse the GLTF_Json\r\n */\r\nexport class GLTF_Parser {\r\n    constructor(loader, gl, cache) {\r\n        this._path = '';\r\n        this.loader = loader;\r\n        this.gl = gl;\r\n        this.cache = cache;\r\n    }\r\n    /**\r\n     *\r\n     * @param {ArrayBuffer} buffer - gltf data(vertices,indices)\r\n     * @param {IGLTF_Model} gltf_model - json object in gltf format\r\n     * @returns {Mesh}\r\n     */\r\n    parse(gltf_model, buffer) {\r\n        const buffers = [];\r\n        if (!buffer) {\r\n            buffers.push(...this.parseBuffers(gltf_model));\r\n        }\r\n        else {\r\n            buffers.push(buffer);\r\n        }\r\n        return new GLTFModel(gltf_model, buffers, {\r\n            path: this._path,\r\n            gl: this.gl,\r\n            cache: this.cache,\r\n            loader: this.loader\r\n        }).process();\r\n    }\r\n    parseBuffers(gltfModel) {\r\n        const buffers = [];\r\n        for (let i = 0; i < gltfModel.buffers.length; i++) {\r\n            const gltfBuffer = gltfModel.buffers[i];\r\n            const buffer = Base64Binary.decode(gltfBuffer.uri, gltfBuffer.byteLength);\r\n            buffers.push(buffer);\r\n        }\r\n        return buffers;\r\n    }\r\n    get path() {\r\n        return this._path;\r\n    }\r\n    set path(value) {\r\n        this._path = value;\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFParser.js.map","import { LOAD_TYPE, Middleware, Resource } from \"curbl-loader\";\r\nimport { GLTF_Parser } from \"../gltf/GLTFParser\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nexport class GLTFLoader extends Middleware {\r\n    constructor(gl, cache) {\r\n        super(CACHE_TYPE.SCENE);\r\n        this.gl = gl;\r\n        this.cache = cache;\r\n    }\r\n    add(key, gltfJson, gltfBin) {\r\n        const bufferResource = gltfBin ? {\r\n            resource: new Resource({\r\n                url: gltfBin,\r\n                loadType: LOAD_TYPE.XHR,\r\n                responseType: 'arraybuffer'\r\n            }, {\r\n                type: 'buffer'\r\n            })\r\n        } : null;\r\n        const jsonResource = {\r\n            resource: new Resource({\r\n                url: gltfJson,\r\n                loadType: LOAD_TYPE.XHR,\r\n                responseType: 'json'\r\n            }, {\r\n                type: 'json'\r\n            })\r\n        };\r\n        const resources = bufferResource ? [jsonResource, bufferResource] : [jsonResource];\r\n        return this.addResourceToQueue({\r\n            key: key,\r\n            resources: resources\r\n        });\r\n    }\r\n    transform(...resources) {\r\n        const jsonResource = resources.find((resource) => resource.config.type === 'json');\r\n        const bufferResource = resources.find((resource) => resource.config.type === 'buffer');\r\n        const url = jsonResource.options.url;\r\n        const match = url.match(/[\\w\\.]+/g);\r\n        const parser = new GLTF_Parser(this._loader, this.gl, this.cache);\r\n        parser.path = url.replace(match[match.length - 1], '');\r\n        return parser.parse(jsonResource.request.response, bufferResource ? bufferResource.request.response : undefined);\r\n    }\r\n}\r\n//# sourceMappingURL=GLTFLoader.js.map","import { LOAD_TYPE, Middleware, Resource } from \"curbl-loader\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nimport { Shader } from \"../scene/shader\";\r\nexport class GLSLLoader extends Middleware {\r\n    constructor(gl) {\r\n        super(CACHE_TYPE.SHADER);\r\n        this.gl = gl;\r\n    }\r\n    add(key, vertexSrc, fragSrc, shader) {\r\n        return this.addResourceToQueue({\r\n            key: key,\r\n            resources: [\r\n                {\r\n                    resource: new Resource({\r\n                        url: vertexSrc,\r\n                        loadType: LOAD_TYPE.XHR,\r\n                        responseType: \"text\"\r\n                    }, { type: \"vertex\", shader: shader })\r\n                },\r\n                {\r\n                    resource: new Resource({\r\n                        url: fragSrc,\r\n                        loadType: LOAD_TYPE.XHR,\r\n                        responseType: \"text\"\r\n                    }, { type: \"fragment\", shader: shader })\r\n                }\r\n            ]\r\n        });\r\n    }\r\n    transform(...resources) {\r\n        const vertex = resources.find((r) => r.config.type === \"vertex\");\r\n        const fragment = resources.find((r) => r.config.type === \"fragment\");\r\n        if (vertex.config.shader) {\r\n            const shader = vertex.config.shader;\r\n            shader.vertexSrc = vertex.request.response;\r\n            shader.fragmentSrc = fragment.request.response;\r\n            return shader;\r\n        }\r\n        return new Shader(this.gl, vertex.request.response, fragment.request.response);\r\n    }\r\n}\r\n//# sourceMappingURL=GLSLLoader.js.map","import { Shader } from \"../scene/shader\";\r\nimport { MATERIAL_MAPS } from \"../material\";\r\nimport { GL_PRIMITIVES } from \"../gl\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nimport { GLOBAL_TEXTURES, UBO_BINDINGS } from \"../viewer/constants\";\r\nimport { mat4 } from \"gl-matrix\";\r\nconst TEXTURES = {\r\n    DIFFUSE_ENVIRONMENT: 0,\r\n    SPECULAR_ENVIRONMENT: 1,\r\n    BRDF_LUT: 2,\r\n    DIFFUSE: 3,\r\n    METALLIC_ROUGHNESS: 4,\r\n    NORMAL: 5,\r\n    EMISSIVE: 6,\r\n    OCCLUSION: 7\r\n};\r\nexport class KhronosPbrShader extends Shader {\r\n    constructor(gl, cache) {\r\n        super(gl);\r\n        this.cache = cache;\r\n    }\r\n    initializeDefines(model) {\r\n        if (model.hasAttribute(GL_PRIMITIVES.NORMAL)) {\r\n            this.addDefine(\"HAS_NORMALS\", 1);\r\n        }\r\n        if (model.hasAttribute(GL_PRIMITIVES.TANGENT)) {\r\n            this.addDefine(\"HAS_TANGENTS\", 1);\r\n        }\r\n        if (model.hasAttribute(GL_PRIMITIVES.TEXCOORD_0)) {\r\n            this.addDefine(\"HAS_UV\", 1);\r\n        }\r\n        if (model.hasAttribute(GL_PRIMITIVES.JOINTS_0) && model.hasAttribute(GL_PRIMITIVES.WEIGHTS_0)) {\r\n            this.addDefine(\"HAS_SKIN\", 1);\r\n        }\r\n        if (model.hasAttribute(GL_PRIMITIVES.JOINTS_1) && model.hasAttribute(GL_PRIMITIVES.WEIGHTS_1)) {\r\n            this.addDefine(\"SKIN_VEC8\", 1);\r\n        }\r\n        if (model.hasMap(this.cache, MATERIAL_MAPS.ALBEDO)) {\r\n            this.addDefine(\"HAS_BASECOLORMAP\", 1);\r\n        }\r\n        if (model.hasMap(this.cache, MATERIAL_MAPS.METAL_ROUGHNESS)) {\r\n            this.addDefine(\"HAS_METALROUGHNESSMAP\", 1);\r\n        }\r\n        if (model.hasMap(this.cache, MATERIAL_MAPS.NORMAL)) {\r\n            this.addDefine(\"HAS_NORMALMAP\", 1);\r\n        }\r\n        if (model.hasMap(this.cache, MATERIAL_MAPS.EMISSIVE)) {\r\n            this.addDefine(\"HAS_EMISSIVEMAP\", 1);\r\n        }\r\n        if (model.hasMap(this.cache, MATERIAL_MAPS.OCCLUSION)) {\r\n            this.addDefine(\"HAS_OCCLUSIONMAP\", 1);\r\n        }\r\n        const brdfLUT = this.cache.get(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.BRDF_LUT);\r\n        const diffuseEnv = this.cache.get(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.DIFFUSE_ENVIRONMENT);\r\n        const specularEnv = this.cache.get(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.SPECULAR_ENVIRONMENT);\r\n        if (brdfLUT && diffuseEnv && specularEnv) {\r\n            this.addDefine(\"USE_IBL\", 1);\r\n        }\r\n    }\r\n    applyMesh(model) { }\r\n    applyNode(node) {\r\n        this.uniforms.u_ModelMatrix = node.transform.modelMatrix;\r\n        if (node.skin) {\r\n            const inverseTransformMatrix = mat4.create();\r\n            //TODO: skin.skeleton.transform.modelMatrix if skeleton provided\r\n            mat4.invert(inverseTransformMatrix, node.transform.modelMatrix);\r\n            for (let i = 0, join; join = node.skin.joints[i]; i++) {\r\n                const joinMatrix = node.skin.jointMatrices[i];\r\n                mat4.mul(joinMatrix, join.transform.modelMatrix, node.skin.inverseBindMatrices[i]);\r\n                mat4.mul(joinMatrix, inverseTransformMatrix, joinMatrix);\r\n            }\r\n            node.skin.update();\r\n        }\r\n    }\r\n    applyScene(scene) {\r\n    }\r\n    applyMaterial(material) {\r\n        this.applyCamera();\r\n        this.applyTextures(material);\r\n        this.applyIBL();\r\n        this.uniforms.u_BaseColorFactor = material.model.baseColorFactor;\r\n        this.uniforms.u_RoughnessFactor = material.model.roughnessFactor;\r\n        this.uniforms.u_MetallicFactor = material.model.metallicFactor;\r\n    }\r\n    applyIBL() {\r\n        /*******************************IBL*************************************/\r\n        const brdfLUT = this.cache.get(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.BRDF_LUT);\r\n        if (brdfLUT) {\r\n            brdfLUT.bind(TEXTURES.BRDF_LUT);\r\n            this.uniforms.u_brdfLUT = TEXTURES.BRDF_LUT;\r\n        }\r\n        const diffuseEnv = this.cache.get(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.DIFFUSE_ENVIRONMENT);\r\n        if (diffuseEnv) {\r\n            diffuseEnv.bind(TEXTURES.DIFFUSE_ENVIRONMENT);\r\n            this.uniforms.u_DiffuseEnvSampler = TEXTURES.DIFFUSE_ENVIRONMENT;\r\n        }\r\n        const specularEnv = this.cache.get(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.SPECULAR_ENVIRONMENT);\r\n        if (specularEnv) {\r\n            specularEnv.bind(TEXTURES.SPECULAR_ENVIRONMENT);\r\n            this.uniforms.u_SpecularEnvSampler = TEXTURES.SPECULAR_ENVIRONMENT;\r\n        }\r\n    }\r\n    applyTextures(material) {\r\n        //applyMaterial BaseColor Texture\r\n        if (material.maps[MATERIAL_MAPS.ALBEDO] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.ALBEDO].texture)) {\r\n            const texture = this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.ALBEDO].texture);\r\n            texture.bind(TEXTURES.DIFFUSE);\r\n            this.uniforms.u_BaseColorSampler = TEXTURES.DIFFUSE;\r\n        }\r\n        //applyMaterial MetallicRoughnessSampler\r\n        if (material.maps[MATERIAL_MAPS.METAL_ROUGHNESS] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.METAL_ROUGHNESS].texture)) {\r\n            let texture = this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.METAL_ROUGHNESS].texture);\r\n            texture.bind(TEXTURES.METALLIC_ROUGHNESS);\r\n            this.uniforms.u_MetallicRoughnessSampler = TEXTURES.METALLIC_ROUGHNESS;\r\n        }\r\n        //applyMaterial NormalMaps\r\n        if (material.maps[MATERIAL_MAPS.NORMAL] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.NORMAL].texture)) {\r\n            let texture = this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.NORMAL].texture);\r\n            texture.bind(TEXTURES.NORMAL);\r\n            this.uniforms.u_NormalSampler = TEXTURES.NORMAL;\r\n            this.uniforms.u_NormalScale = material.model.normalScale;\r\n        }\r\n        //applyMaterial emissive map\r\n        if (material.maps[MATERIAL_MAPS.EMISSIVE] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.EMISSIVE].texture)) {\r\n            let texture = this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.EMISSIVE].texture);\r\n            texture.bind(TEXTURES.EMISSIVE);\r\n            this.uniforms.u_EmissiveSampler = TEXTURES.EMISSIVE;\r\n            this.uniforms.u_EmissiveFactor = material.model.emissiveFactor;\r\n        }\r\n        //applyMesh Occlusion map\r\n        if (material.maps[MATERIAL_MAPS.OCCLUSION] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.OCCLUSION].texture)) {\r\n            let texture = this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.OCCLUSION].texture);\r\n            texture.bind(TEXTURES.OCCLUSION);\r\n            this.uniforms.u_OcclusionSampler = TEXTURES.OCCLUSION;\r\n            this.uniforms.u_OcclusionStrength = material.model.occlusionStrength;\r\n        }\r\n    }\r\n    applyCamera() {\r\n        this.uniforms.Matrices = UBO_BINDINGS.CAMERA;\r\n        this.uniforms.JointMatrix = UBO_BINDINGS.SKIN;\r\n    }\r\n}\r\n//# sourceMappingURL=khronosPbrShader.js.map","import { Shader } from \"../scene/shader\";\r\nimport { CACHE_TYPE } from \"../cache\";\r\nimport { GLOBAL_TEXTURES, UBO_BINDINGS } from \"../viewer/constants\";\r\nexport class SkyboxShader extends Shader {\r\n    constructor(gl, cache) {\r\n        super(gl);\r\n        this.cache = cache;\r\n    }\r\n    apply() {\r\n        this.applyCamera();\r\n        const texture = this.cache.get(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.SKYBOX);\r\n        texture.bind(0);\r\n        this.uniforms.u_Skybox = 0;\r\n    }\r\n    applyCamera() {\r\n        this.uniforms.Matrices = UBO_BINDINGS.CAMERA;\r\n    }\r\n}\r\n//# sourceMappingURL=SkyboxShader.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS, System } from \"curbl-ecs\";\r\nimport { GLCube } from \"../../gl\";\r\nimport { CACHE_TYPE } from \"../../cache\";\r\nimport { GLOBAL_TEXTURES } from \"../../viewer/constants\";\r\nlet SkyboxPass = class SkyboxPass extends System {\r\n    constructor(config) {\r\n        super();\r\n        this.gl = config.gl;\r\n        this.cache = config.cache;\r\n        this.shader = config.shader;\r\n        this.cube = new GLCube(this.gl);\r\n    }\r\n    setUp() {\r\n        this.shader.bind();\r\n        this.cube.vertexArrayObject.bind();\r\n        this.cube.vertexArrayObject.addAttribute(this.cube.vertexBuffer, this.shader.attributes.getAttribute('a_Position'), 3, this.gl.FLOAT, false, 24, 0);\r\n        this.cube.vertexArrayObject.unbind();\r\n        this.shader.unbind();\r\n    }\r\n    tearDown() {\r\n    }\r\n    render() {\r\n        if (this.cache.has(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.SKYBOX)) {\r\n            this.gl.enable(this.gl.DEPTH_TEST);\r\n            this.gl.depthFunc(this.gl.LEQUAL);\r\n            this.shader.bind();\r\n            this.shader.apply();\r\n            this.cube.draw();\r\n            this.shader.unbind();\r\n            this.gl.depthFunc(this.gl.LESS);\r\n            this.gl.disable(this.gl.DEPTH_TEST);\r\n        }\r\n    }\r\n};\r\nSkyboxPass = __decorate([\r\n    ECS.System()\r\n], SkyboxPass);\r\nexport { SkyboxPass };\r\n//# sourceMappingURL=SkyboxPass.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS } from \"curbl-ecs\";\r\nimport { mat4 } from \"gl-matrix\";\r\nlet CameraComponent = class CameraComponent {\r\n    constructor(config = {\r\n        fovy: 0.785,\r\n        aspect: 16 / 9,\r\n        near: 0.01,\r\n        far: 100\r\n    }) {\r\n        this.init(config);\r\n    }\r\n    init(config) {\r\n        if (!config.projMatrix) {\r\n            this._viewMatrix = mat4.create();\r\n        }\r\n        else {\r\n            this._viewMatrix = config.viewMatrix;\r\n        }\r\n        if (!config.projMatrix) {\r\n            this._projMatrix = mat4.create();\r\n            mat4.perspective(this._projMatrix, config.fovy || 0.785, config.aspect || (16 / 9), config.near || 0.01, config.far || 100);\r\n        }\r\n        else {\r\n            this._projMatrix = config.projMatrix;\r\n        }\r\n    }\r\n    remove() {\r\n        mat4.identity(this._viewMatrix);\r\n        mat4.identity(this._projMatrix);\r\n    }\r\n    get viewMatrix() {\r\n        return this._viewMatrix;\r\n    }\r\n    set viewMatrix(value) {\r\n        this._viewMatrix = value;\r\n    }\r\n    get projMatrix() {\r\n        return this._projMatrix;\r\n    }\r\n    set projMatrix(value) {\r\n        this._projMatrix = value;\r\n    }\r\n};\r\nCameraComponent = __decorate([\r\n    ECS.Component('CameraComponent')\r\n], CameraComponent);\r\nexport { CameraComponent };\r\n//# sourceMappingURL=cameraComponent.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS } from \"curbl-ecs\";\r\nimport { vec3 } from \"gl-matrix\";\r\nlet LookAtCameraComponent = class LookAtCameraComponent {\r\n    constructor(config) {\r\n        this.init(config);\r\n    }\r\n    init(config = {\r\n        target: vec3.create(),\r\n        up: vec3.fromValues(0, 1, 0),\r\n        panning: vec3.create(),\r\n        zoom: vec3.create(),\r\n    }) {\r\n        this._target = config.target || vec3.create();\r\n        this._up = config.up || vec3.fromValues(0, 1, 0);\r\n        this._panning = config.panning || vec3.create();\r\n        this._zooming = config.zoom || vec3.create();\r\n        this._zoomPos = 0;\r\n    }\r\n    remove() {\r\n    }\r\n    get target() {\r\n        return this._target;\r\n    }\r\n    set target(value) {\r\n        this._target = value;\r\n    }\r\n    get up() {\r\n        return this._up;\r\n    }\r\n    set up(value) {\r\n        this._up = value;\r\n    }\r\n    get panning() {\r\n        return this._panning;\r\n    }\r\n    set panning(value) {\r\n        this._panning = value;\r\n    }\r\n    get zooming() {\r\n        return this._zooming;\r\n    }\r\n    set zooming(value) {\r\n        this._zooming = value;\r\n    }\r\n    get zoomPos() {\r\n        return this._zoomPos;\r\n    }\r\n    set zoomPos(value) {\r\n        this._zoomPos = value;\r\n    }\r\n};\r\nLookAtCameraComponent = __decorate([\r\n    ECS.Component()\r\n], LookAtCameraComponent);\r\nexport { LookAtCameraComponent };\r\n//# sourceMappingURL=lookAtCameraComponent.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./cameraComponent\";\r\nexport * from \"./lookAtCameraComponent\";\r\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS } from \"curbl-ecs\";\r\nlet GUIComponent = class GUIComponent {\r\n    constructor(config) {\r\n        this.init(config);\r\n    }\r\n    init(config) {\r\n        this.config = config;\r\n    }\r\n    remove() {\r\n    }\r\n};\r\nGUIComponent = __decorate([\r\n    ECS.Component()\r\n], GUIComponent);\r\nexport { GUIComponent };\r\n//# sourceMappingURL=GUIComponent.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./GUIComponent\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * Created by Soeren on 26.11.2016.\r\n */\r\nexport class Color {\r\n    constructor(r = 0, g = 0, b = 0, a = 1) {\r\n        this._elements = new Float32Array([r, g, b, a]);\r\n    }\r\n    get r() {\r\n        return this._elements[0];\r\n    }\r\n    set r(r) {\r\n        this._elements[0] = r;\r\n    }\r\n    get g() {\r\n        return this._elements[1];\r\n    }\r\n    set g(g) {\r\n        this._elements[1] = g;\r\n    }\r\n    get b() {\r\n        return this._elements[2];\r\n    }\r\n    set b(b) {\r\n        this._elements[2] = b;\r\n    }\r\n    get a() {\r\n        return this._elements[3];\r\n    }\r\n    set(a) {\r\n        this._elements[3] = a;\r\n    }\r\n    mult(f) {\r\n        if (typeof f === 'number') {\r\n            f = f;\r\n            return new Color(this.r * f, this.g * f, this.b * f, Math.abs(Math.min(this.a * f, 1)));\r\n        }\r\n        else {\r\n            return new Color(this.r * f.r, this.g * f.g, this.b * f.b, Math.abs(Math.min(this.a * f.a, 1)));\r\n        }\r\n    }\r\n    div(f) {\r\n        if (typeof f === 'number') {\r\n            f = f;\r\n            return this.mult(1 / f);\r\n        }\r\n        let color = new Color(1 / f.r, 1 / f.g, 1 / f.b, Math.min(1 / f.a, 1));\r\n        return this.mult(color);\r\n    }\r\n    plus(other) {\r\n        return new Color(this.r + other.r, this.g + other.g, this.b + other.b, Math.abs(Math.min(this.a + other.a, 1)));\r\n    }\r\n    minus(other) {\r\n        return new Color(this.r - other.r, this.g - other.g, this.b - other.b, Math.abs(Math.min(this.a - other.a, 1)));\r\n    }\r\n    get elements() {\r\n        return this._elements;\r\n    }\r\n    set elements(value) {\r\n        this._elements = value;\r\n    }\r\n    toString() {\r\n        return \"{Color: [R: \" + this.r + \" G: \" + this.g + \" B: \" + this.b + \" A: \" + this.a + \"]}\";\r\n    }\r\n}\r\n//# sourceMappingURL=color.js.map","import { vec3 } from \"gl-matrix\";\r\nexport var Math3d;\r\n(function (Math3d) {\r\n    /**\r\n     * Return a vector point on a position of a sphere\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {number} width\r\n     * @param {number} height\r\n     * @returns {Vector}\r\n     */\r\n    function getVSpherePos(x, y, width, height) {\r\n        const out = vec3.fromValues(1.0 * x / width * 2.0 - 1.0, -(1.0 * y / height * 2.0 - 1.0), 0);\r\n        vec3.squaredLength(out);\r\n        let sqrLen = vec3.squaredLength(out);\r\n        if (sqrLen <= 1.0) {\r\n            vec3.add(out, out, [0, 0, Math.sqrt(1 - sqrLen)]);\r\n        }\r\n        else {\r\n            vec3.normalize(out, out);\r\n        }\r\n        return out;\r\n    }\r\n    Math3d.getVSpherePos = getVSpherePos;\r\n    /**\r\n     * Rotate vector v around axis n with angle a\r\n     * @param {Vector} v - vector to rotate\r\n     * @param {Vector} n - axis to rotate around\r\n     * @param {number} a - rotation angle\r\n     * @returns {Vector}\r\n     */\r\n    function rotateAxisAngle(v, n, a) {\r\n        let co = Math.cos(a);\r\n        let si = Math.sin(a);\r\n        let o = vec3.create();\r\n        let mx = vec3.fromValues(n[0] * n[0] * (1.0 - co) + co, n[0] * n[1] * (1.0 - co) - n[2] * si, n[0] * n[2] * (1.0 - co) + n[1] * si);\r\n        let my = vec3.fromValues(n[0] * n[1] * (1.0 - co) + n[2] * si, n[1] * n[1] * (1.0 - co) + co, n[1] * n[2] * (1.0 - co) - n[0] * si);\r\n        let mz = vec3.fromValues(n[0] * n[2] * (1.0 - co) - n[1] * si, n[2] * n[1] * (1.0 - co) + n[0] * si, n[2] * n[2] * (1.0 - co) + co);\r\n        o[0] = vec3.dot(mx, v);\r\n        o[1] = vec3.dot(my, v);\r\n        o[2] = vec3.dot(mz, v);\r\n        return o;\r\n    }\r\n    Math3d.rotateAxisAngle = rotateAxisAngle;\r\n    /**\r\n     * transform degree to radians\r\n     * @param {number} deg\r\n     * @returns {number}\r\n     */\r\n    function radians(deg) {\r\n        return deg * Math.PI / 180;\r\n    }\r\n    Math3d.radians = radians;\r\n    /**\r\n     * ModelTransform radians to degrees\r\n     * @param {number} rad\r\n     * @returns {number}\r\n     */\r\n    function degrees(rad) {\r\n        return rad * 180 / Math.PI;\r\n    }\r\n    Math3d.degrees = degrees;\r\n})(Math3d || (Math3d = {}));\r\nexport var Math2d;\r\n(function (Math2d) {\r\n    function lerp(a, b, f) {\r\n        return a + f * (b - a);\r\n    }\r\n    Math2d.lerp = lerp;\r\n})(Math2d || (Math2d = {}));\r\n//# sourceMappingURL=math.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./color\";\r\nexport * from \"./math\";\r\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS } from \"curbl-ecs\";\r\nimport { Color } from \"../../math\";\r\nimport { vec3 } from \"gl-matrix\";\r\nlet LightComponent = class LightComponent {\r\n    constructor(config = {\r\n        lightColor: [255, 255, 255],\r\n        lightScale: 1.0,\r\n        lightRotation: 75,\r\n        lightPitch: 40\r\n    }) {\r\n        this.init(config);\r\n    }\r\n    init(config = {\r\n        lightColor: [255, 255, 255],\r\n        lightScale: 1.0,\r\n        lightRotation: 75,\r\n        lightPitch: 40\r\n    }) {\r\n        this._direction = vec3.create();\r\n        this._color = new Color();\r\n        this._lightColor = config.lightColor;\r\n        this._lightScale = config.lightScale;\r\n        this._lightRotation = config.lightRotation;\r\n        this._lightPitch = config.lightPitch;\r\n        this.updateLight();\r\n    }\r\n    remove() {\r\n    }\r\n    updateLight() {\r\n        this._color.r = this._lightScale * this._lightColor[0] / 255;\r\n        this._color.g = this._lightScale * this._lightColor[1] / 255;\r\n        this._color.b = this._lightScale * this._lightColor[2] / 255;\r\n        const rot = this._lightRotation * Math.PI / 180;\r\n        const pitch = this._lightPitch * Math.PI / 180;\r\n        vec3.set(this._direction, Math.sin(rot) * Math.cos(pitch), Math.sin(pitch), Math.cos(rot) * Math.cos(pitch));\r\n    }\r\n    get lightColor() {\r\n        return this._lightColor;\r\n    }\r\n    set lightColor(value) {\r\n        this._lightColor = value;\r\n    }\r\n    get lightScale() {\r\n        return this._lightScale;\r\n    }\r\n    set lightScale(value) {\r\n        this._lightScale = value;\r\n    }\r\n    get lightRotation() {\r\n        return this._lightRotation;\r\n    }\r\n    set lightRotation(value) {\r\n        this._lightRotation = value;\r\n    }\r\n    get lightPitch() {\r\n        return this._lightPitch;\r\n    }\r\n    set lightPitch(value) {\r\n        this._lightPitch = value;\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(value) {\r\n        this._color = value;\r\n    }\r\n    get direction() {\r\n        return this._direction;\r\n    }\r\n    set direction(value) {\r\n        this._direction = value;\r\n    }\r\n};\r\nLightComponent = __decorate([\r\n    ECS.Component()\r\n], LightComponent);\r\nexport { LightComponent };\r\n//# sourceMappingURL=lightComponent.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./lightComponent\";\r\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS } from \"curbl-ecs\";\r\nlet SkyboxComponent = class SkyboxComponent {\r\n    constructor(config = {}) {\r\n        this.init(config);\r\n    }\r\n    init(config = {}) {\r\n        this._texture = config.texture;\r\n    }\r\n    remove() {\r\n        this._texture = undefined;\r\n    }\r\n    get texture() {\r\n        return this._texture;\r\n    }\r\n    set texture(value) {\r\n        this._texture = value;\r\n    }\r\n};\r\nSkyboxComponent = __decorate([\r\n    ECS.Component()\r\n], SkyboxComponent);\r\nexport { SkyboxComponent };\r\n//# sourceMappingURL=skyboxComponent.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./skyboxComponent\";\r\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS } from \"curbl-ecs\";\r\nlet AnimationComponent = class AnimationComponent {\r\n    constructor(config) {\r\n        this.init(config);\r\n    }\r\n    init(config) {\r\n        this._key = config.key;\r\n        this._running = false;\r\n        this._paused = false;\r\n        this._startTime = 0;\r\n        this._pauseStart = 0;\r\n        this._pauseEnd = 0;\r\n        this._autoStart = true;\r\n        this._loop = true;\r\n    }\r\n    remove() {\r\n    }\r\n    start() {\r\n        this._running = true;\r\n        this._startTime = performance.now();\r\n    }\r\n    stop() {\r\n        this._running = false;\r\n    }\r\n    pause() {\r\n        this.paused = true;\r\n    }\r\n    resume() {\r\n        this.paused = false;\r\n    }\r\n    get key() {\r\n        return this._key;\r\n    }\r\n    set key(value) {\r\n        this._key = value;\r\n    }\r\n    get running() {\r\n        return this._running;\r\n    }\r\n    get paused() {\r\n        return this._paused;\r\n    }\r\n    set paused(value) {\r\n        if (this._paused === value) {\r\n            return;\r\n        }\r\n        if (value === true) {\r\n            this._pauseStart = performance.now();\r\n        }\r\n        else {\r\n            this._pauseEnd = performance.now();\r\n        }\r\n        this._paused = value;\r\n    }\r\n    get pauseStart() {\r\n        return this._pauseStart;\r\n    }\r\n    get pauseEnd() {\r\n        return this._pauseEnd;\r\n    }\r\n    get startTime() {\r\n        return this._startTime;\r\n    }\r\n    get loop() {\r\n        return this._loop;\r\n    }\r\n    set loop(value) {\r\n        this._loop = value;\r\n    }\r\n    get autoStart() {\r\n        return this._autoStart;\r\n    }\r\n    set autoStart(value) {\r\n        this._autoStart = value;\r\n    }\r\n};\r\nAnimationComponent = __decorate([\r\n    ECS.Component()\r\n], AnimationComponent);\r\nexport { AnimationComponent };\r\n//# sourceMappingURL=animationComponent.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS } from \"curbl-ecs\";\r\nlet SceneComponent = class SceneComponent {\r\n    constructor(config) {\r\n        this._key = config.key;\r\n    }\r\n    init(config) {\r\n        this._key = config.key;\r\n    }\r\n    remove() {\r\n    }\r\n    get key() {\r\n        return this._key;\r\n    }\r\n    set key(value) {\r\n        this._key = value;\r\n    }\r\n};\r\nSceneComponent = __decorate([\r\n    ECS.Component()\r\n], SceneComponent);\r\nexport { SceneComponent };\r\n//# sourceMappingURL=sceneComponent.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./animationComponent\";\r\nexport * from \"./sceneComponent\";\r\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS } from \"curbl-ecs\";\r\nimport { mat4, quat, vec3 } from \"gl-matrix\";\r\nlet TransformComponent = class TransformComponent {\r\n    constructor(config = {\r\n        position: { x: 0, y: 0, z: 0 },\r\n        rotation: { x: 0, y: 0, z: 0, w: 1 },\r\n        scale: { x: 1, y: 1, z: 1 }\r\n    }) {\r\n        this.init(config);\r\n    }\r\n    init(config = {\r\n        position: { x: 0, y: 0, z: 0 },\r\n        rotation: { x: 0, y: 0, z: 0, w: 1 },\r\n        scale: { x: 1, y: 1, z: 1 }\r\n    }) {\r\n        //M=T*R*S\r\n        this._localMatrix = mat4.create();\r\n        if (!config) {\r\n            config = Object.create(null);\r\n        }\r\n        if (!config.position) {\r\n            config.position = { x: 0, y: 0, z: 0 };\r\n        }\r\n        if (!config.rotation) {\r\n            config.rotation = { x: 0, y: 0, z: 0, w: 1 };\r\n        }\r\n        if (!config.scale) {\r\n            config.scale = { x: 1, y: 1, z: 1 };\r\n        }\r\n        this._rotation = quat.fromValues(config.rotation.x, config.rotation.y, config.rotation.z, config.rotation.w);\r\n        this._translation = vec3.fromValues(config.position.x, config.position.y, config.position.z);\r\n        this._scale = vec3.fromValues(config.scale.x, config.scale.y, config.scale.z);\r\n        this._children = [];\r\n        this._level = 0;\r\n        this._dirty = true;\r\n        this.apply();\r\n    }\r\n    remove() { }\r\n    addChild(child) {\r\n        if (child._parent) {\r\n            child._parent.removeChild(child);\r\n        }\r\n        child._parent = this;\r\n        child._level = this._level + 1;\r\n        this._children.push(child);\r\n    }\r\n    removeChild(child) {\r\n        const index = this._children.indexOf(child);\r\n        if (index > -1) {\r\n            child._level = 0;\r\n            child._parent = undefined;\r\n            this._children.splice(index, 1);\r\n        }\r\n    }\r\n    apply() {\r\n        if (this._dirty) {\r\n            mat4.fromRotationTranslationScale(this._localMatrix, this._rotation, this._translation, this._scale);\r\n            this._dirty = false;\r\n        }\r\n        return this._localMatrix;\r\n    }\r\n    get globalMatrix() {\r\n        if (!this._parent) {\r\n            return this.apply();\r\n        }\r\n        else {\r\n            //TODO: check if this is right or do we need to calculcate the parent globalMatrix?\r\n            return mat4.multiply(mat4.create(), this._parent.localMatrix, this._localMatrix);\r\n        }\r\n    }\r\n    get modelMatrix() {\r\n        return this.globalMatrix;\r\n    }\r\n    /**\r\n     * Returns the LocalTransformation Matrix\r\n     * @returns {Matrix}\r\n     */\r\n    get localMatrix() {\r\n        return this.apply();\r\n    }\r\n    set localMatrix(value) {\r\n        this._localMatrix = value;\r\n    }\r\n    get translation() {\r\n        this._dirty = true;\r\n        return this._translation;\r\n    }\r\n    set translation(value) {\r\n        this._dirty = true;\r\n        this._translation = value;\r\n    }\r\n    get rotation() {\r\n        this._dirty = true;\r\n        return this._rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._dirty = true;\r\n        this._rotation = value;\r\n    }\r\n    get scale() {\r\n        this._dirty = true;\r\n        return this._scale;\r\n    }\r\n    set scale(value) {\r\n        this._dirty = true;\r\n        this._scale = value;\r\n    }\r\n    get level() {\r\n        return this._level;\r\n    }\r\n    get parent() {\r\n        return this._parent;\r\n    }\r\n    set parent(value) {\r\n        this._parent = value;\r\n    }\r\n    get children() {\r\n        return this._children;\r\n    }\r\n    set children(value) {\r\n        this._children = value;\r\n    }\r\n};\r\nTransformComponent = __decorate([\r\n    ECS.Component()\r\n], TransformComponent);\r\nexport { TransformComponent };\r\n//# sourceMappingURL=transformComponent.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./transformComponent\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./camera/index\";\r\nexport * from \"./gui/index\";\r\nexport * from \"./light/index\";\r\nexport * from \"./renderer/index\";\r\nexport * from \"./scene/index\";\r\nexport * from \"./transform/index\";\r\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS, System } from \"curbl-ecs\";\r\nimport { SceneComponent } from \"../../components\";\r\nimport { CACHE_TYPE } from \"../../cache\";\r\nimport { SYSTEM_EVENTS } from \"curbl-ecs/lib/Events\";\r\nimport { GL_PRIMITIVES } from \"../../gl/constants\";\r\nlet ForwardScenePass = class ForwardScenePass extends System {\r\n    //use the same data for all scenes/meshes etc.\r\n    // private vertexBuffer:GLBuffer;\r\n    // private indexBuffer:GLBuffer;\r\n    constructor(config) {\r\n        super();\r\n        this.gl = config.gl;\r\n        this.cache = config.cache;\r\n        this.shader = config.shader;\r\n        // this.vertexBuffer = GLBuffer.createVertexBuffer(this.gl);\r\n        // this.indexBuffer = GLBuffer.createIndexBuffer(this.gl);\r\n    }\r\n    setUp() {\r\n        this.events.on(SYSTEM_EVENTS.ENTITY_ADDED, this.initEntity, this);\r\n    }\r\n    /**\r\n     * Init Shader for the Meshes\r\n     * @param entity\r\n     */\r\n    initEntity(entity) {\r\n        const sceneComponent = entity.get(SceneComponent);\r\n        const scene = this.cache.get(CACHE_TYPE.SCENE, sceneComponent.key);\r\n        if (scene) {\r\n            scene.init(this.gl);\r\n            scene.upload();\r\n            this.initShaderAttributes(scene);\r\n        }\r\n        else {\r\n            console.warn('Their is no scene for key ' + sceneComponent.key + ' in the cache.');\r\n        }\r\n    }\r\n    initShaderAttributes(scene) {\r\n        scene.addAttribute(GL_PRIMITIVES.POSITION, this.shader.attributes.getAttribute('a_Position'));\r\n        scene.addAttribute(GL_PRIMITIVES.NORMAL, this.shader.attributes.getAttribute('a_Normal'));\r\n        scene.addAttribute(GL_PRIMITIVES.TANGENT, this.shader.attributes.getAttribute('a_Tangent'));\r\n        scene.addAttribute(GL_PRIMITIVES.TEXCOORD_0, this.shader.attributes.getAttribute('a_UV'));\r\n        scene.addAttribute(GL_PRIMITIVES.JOINTS_0, this.shader.attributes.getAttribute('a_Joint0'));\r\n        scene.addAttribute(GL_PRIMITIVES.WEIGHTS_0, this.shader.attributes.getAttribute('a_Weight0'));\r\n    }\r\n    draw() {\r\n        for (let i = 0, entity; entity = this.entities[i]; i++) {\r\n            this.drawScene(entity);\r\n        }\r\n    }\r\n    drawScene(entity) {\r\n        const key = entity.get(SceneComponent).key;\r\n        const scene = this.cache.get(CACHE_TYPE.SCENE, key);\r\n        this.shader.apply();\r\n        scene.draw(this.shader, this.cache);\r\n    }\r\n};\r\nForwardScenePass = __decorate([\r\n    ECS.System(SceneComponent)\r\n], ForwardScenePass);\r\nexport { ForwardScenePass };\r\n//# sourceMappingURL=ForwardScenePass.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS, System } from \"curbl-ecs\";\r\nimport { LightComponent } from \"../../components\";\r\nimport { ForwardScenePass } from \"./ForwardScenePass\";\r\nlet ForwardLightPass = class ForwardLightPass extends System {\r\n    constructor(config) {\r\n        super();\r\n        this.gl = config.gl;\r\n        this.cache = config.cache;\r\n        this.shader = config.shader;\r\n    }\r\n    setUp() {\r\n        this.scenePass = ECS.addSystem(new ForwardScenePass({ gl: this.gl, cache: this.cache, shader: this.shader }));\r\n    }\r\n    tearDown() {\r\n        ECS.removeSystem(this.scenePass);\r\n    }\r\n    render() {\r\n        //this.gl.enable(this.gl.CULL_FACE);\r\n        this.gl.enable(this.gl.DEPTH_TEST);\r\n        this.shader.bind();\r\n        for (let i = 0, light; light = this.entities[i]; i++) {\r\n            this.shader.uniforms.u_LightColor = light.get(LightComponent).color.elements;\r\n            this.shader.uniforms.u_LightDirection = light.get(LightComponent).direction;\r\n            this.scenePass.draw();\r\n        }\r\n        this.shader.unbind();\r\n        //this.gl.disable(this.gl.CULL_FACE);\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n    }\r\n};\r\nForwardLightPass = __decorate([\r\n    ECS.System(LightComponent)\r\n], ForwardLightPass);\r\nexport { ForwardLightPass };\r\n//# sourceMappingURL=ForwardLightPass.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS, System } from \"curbl-ecs\";\r\nimport { ForwardLightPass } from \"./ForwardLightPass\";\r\nlet ForwardShadingSystem = class ForwardShadingSystem extends System {\r\n    constructor(config) {\r\n        super();\r\n        this.gl = config.gl;\r\n        this.cache = config.cache;\r\n        this.shader = config.shader;\r\n    }\r\n    setUp() {\r\n        this.forwardLightningPass = ECS.addSystem(new ForwardLightPass({ gl: this.gl, cache: this.cache, shader: this.shader }));\r\n    }\r\n    tearDown() {\r\n        ECS.removeSystem(this.forwardLightningPass);\r\n        ECS.removeSystem(this);\r\n    }\r\n};\r\nForwardShadingSystem = __decorate([\r\n    ECS.System()\r\n], ForwardShadingSystem);\r\nexport { ForwardShadingSystem };\r\n//# sourceMappingURL=ForwardShadingSystem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS, System } from \"curbl-ecs\";\r\nlet PrePass = class PrePass extends System {\r\n    constructor(gl) {\r\n        super();\r\n        this.gl = gl;\r\n    }\r\n    /**\r\n     * Clear rendering Context\r\n     * @param colorBuffer\r\n     * @param depthBuffer\r\n     * @param color\r\n     */\r\n    clearContext(colorBuffer = true, depthBuffer = false, color = { r: 0, g: 0, b: 0, a: 1 }) {\r\n        this.gl.clearColor(color.r, color.g, color.b, color.a);\r\n        if (colorBuffer && depthBuffer) {\r\n            this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT | this.gl.STENCIL_BUFFER_BIT);\r\n        }\r\n        else if (colorBuffer) {\r\n            this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n        }\r\n        else if (depthBuffer) {\r\n            this.gl.clear(this.gl.DEPTH_BUFFER_BIT);\r\n        }\r\n    }\r\n    render() {\r\n        this.clearContext(true, true, { r: 0.2, g: 0.2, b: 0.2, a: 1 });\r\n    }\r\n};\r\nPrePass = __decorate([\r\n    ECS.System()\r\n], PrePass);\r\nexport { PrePass };\r\n//# sourceMappingURL=PrePass.js.map","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nexport default function(color, forceCSSHex) {\n  const colorFormat = color.__state.conversionName.toString();\n\n  const r = Math.round(color.r);\n  const g = Math.round(color.g);\n  const b = Math.round(color.b);\n  const a = color.a;\n  const h = Math.round(color.h);\n  const s = color.s.toFixed(1);\n  const v = color.v.toFixed(1);\n\n  if (forceCSSHex || (colorFormat === 'THREE_CHAR_HEX') || (colorFormat === 'SIX_CHAR_HEX')) {\n    let str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n\n  return 'unknown format';\n}\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nconst ARR_EACH = Array.prototype.forEach;\nconst ARR_SLICE = Array.prototype.slice;\n\n/**\n * Band-aid methods for things that should be a lot easier in JavaScript.\n * Implementation and structure inspired by underscore.js\n * http://documentcloud.github.com/underscore/\n */\n\nconst Common = {\n  BREAK: {},\n\n  extend: function(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n      const keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function(key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n\n    return target;\n  },\n\n  defaults: function(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n      const keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function(key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n\n    return target;\n  },\n\n  compose: function() {\n    const toCall = ARR_SLICE.call(arguments);\n    return function() {\n      let args = ARR_SLICE.call(arguments);\n      for (let i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n\n  each: function(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) { // Is number but not NaN\n      let key;\n      let l;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (const key in obj) {\n        if (itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n\n  defer: function(fnc) {\n    setTimeout(fnc, 0);\n  },\n\n  // if the function is called repeatedly, wait until threshold passes until we execute the function\n  debounce: function(func, threshold, callImmediately) {\n    let timeout;\n\n    return function() {\n      const obj = this;\n      const args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n\n      const callNow = callImmediately || !timeout;\n\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n\n  toArray: function(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n\n  isUndefined: function(obj) {\n    return obj === undefined;\n  },\n\n  isNull: function(obj) {\n    return obj === null;\n  },\n\n  isNaN: function(obj) {\n    return isNaN(obj);\n  },\n\n  isArray: Array.isArray || function(obj) {\n    return obj.constructor === Array;\n  },\n\n  isObject: function(obj) {\n    return obj === Object(obj);\n  },\n\n  isNumber: function(obj) {\n    return obj === obj + 0;\n  },\n\n  isString: function(obj) {\n    return obj === obj + '';\n  },\n\n  isBoolean: function(obj) {\n    return obj === false || obj === true;\n  },\n\n  isFunction: function(obj) {\n    return Object.prototype.toString.call(obj) === '[object Function]';\n  }\n\n};\n\nexport default Common;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport toString from './toString';\nimport common from '../utils/common';\n\nconst INTERPRETATIONS = [\n  // Strings\n  {\n    litmus: common.isString,\n    conversions: {\n      THREE_CHAR_HEX: {\n        read: function(original) {\n          const test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'HEX',\n            hex: parseInt(\n              '0x' +\n              test[1].toString() + test[1].toString() +\n              test[2].toString() + test[2].toString() +\n              test[3].toString() + test[3].toString(), 0)\n          };\n        },\n\n        write: toString\n      },\n\n      SIX_CHAR_HEX: {\n        read: function(original) {\n          const test = original.match(/^#([A-F0-9]{6})$/i);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'HEX',\n            hex: parseInt('0x' + test[1].toString(), 0)\n          };\n        },\n\n        write: toString\n      },\n\n      CSS_RGB: {\n        read: function(original) {\n          const test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: parseFloat(test[1]),\n            g: parseFloat(test[2]),\n            b: parseFloat(test[3])\n          };\n        },\n\n        write: toString\n      },\n\n      CSS_RGBA: {\n        read: function(original) {\n          const test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: parseFloat(test[1]),\n            g: parseFloat(test[2]),\n            b: parseFloat(test[3]),\n            a: parseFloat(test[4])\n          };\n        },\n\n        write: toString\n      }\n    }\n  },\n\n  // Numbers\n  {\n    litmus: common.isNumber,\n\n    conversions: {\n\n      HEX: {\n        read: function(original) {\n          return {\n            space: 'HEX',\n            hex: original,\n            conversionName: 'HEX'\n          };\n        },\n\n        write: function(color) {\n          return color.hex;\n        }\n      }\n\n    }\n\n  },\n\n  // Arrays\n  {\n    litmus: common.isArray,\n    conversions: {\n      RGB_ARRAY: {\n        read: function(original) {\n          if (original.length !== 3) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: original[0],\n            g: original[1],\n            b: original[2]\n          };\n        },\n\n        write: function(color) {\n          return [color.r, color.g, color.b];\n        }\n      },\n\n      RGBA_ARRAY: {\n        read: function(original) {\n          if (original.length !== 4) return false;\n          return {\n            space: 'RGB',\n            r: original[0],\n            g: original[1],\n            b: original[2],\n            a: original[3]\n          };\n        },\n\n        write: function(color) {\n          return [color.r, color.g, color.b, color.a];\n        }\n      }\n    }\n  },\n\n  // Objects\n  {\n    litmus: common.isObject,\n    conversions: {\n\n      RGBA_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.r) &&\n            common.isNumber(original.g) &&\n            common.isNumber(original.b) &&\n            common.isNumber(original.a)) {\n            return {\n              space: 'RGB',\n              r: original.r,\n              g: original.g,\n              b: original.b,\n              a: original.a\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            r: color.r,\n            g: color.g,\n            b: color.b,\n            a: color.a\n          };\n        }\n      },\n\n      RGB_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.r) &&\n            common.isNumber(original.g) &&\n            common.isNumber(original.b)) {\n            return {\n              space: 'RGB',\n              r: original.r,\n              g: original.g,\n              b: original.b\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            r: color.r,\n            g: color.g,\n            b: color.b\n          };\n        }\n      },\n\n      HSVA_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.h) &&\n            common.isNumber(original.s) &&\n            common.isNumber(original.v) &&\n            common.isNumber(original.a)) {\n            return {\n              space: 'HSV',\n              h: original.h,\n              s: original.s,\n              v: original.v,\n              a: original.a\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            h: color.h,\n            s: color.s,\n            v: color.v,\n            a: color.a\n          };\n        }\n      },\n\n      HSV_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.h) &&\n            common.isNumber(original.s) &&\n            common.isNumber(original.v)) {\n            return {\n              space: 'HSV',\n              h: original.h,\n              s: original.s,\n              v: original.v\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            h: color.h,\n            s: color.s,\n            v: color.v\n          };\n        }\n      }\n    }\n  }\n];\n\nlet result;\nlet toReturn;\n\nconst interpret = function() {\n  toReturn = false;\n\n  const original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n  common.each(INTERPRETATIONS, function(family) {\n    if (family.litmus(original)) {\n      common.each(family.conversions, function(conversion, conversionName) {\n        result = conversion.read(original);\n\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return common.BREAK;\n        }\n      });\n\n      return common.BREAK;\n    }\n  });\n\n  return toReturn;\n};\n\nexport default interpret;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nlet tmpComponent;\n\nconst ColorMath = {\n  hsv_to_rgb: function(h, s, v) {\n    const hi = Math.floor(h / 60) % 6;\n\n    const f = h / 60 - Math.floor(h / 60);\n    const p = v * (1.0 - s);\n    const q = v * (1.0 - (f * s));\n    const t = v * (1.0 - ((1.0 - f) * s));\n\n    const c = [\n      [v, t, p],\n      [q, v, p],\n      [p, v, t],\n      [p, q, v],\n      [t, p, v],\n      [v, p, q]\n    ][hi];\n\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n\n  rgb_to_hsv: function(r, g, b) {\n    const min = Math.min(r, g, b);\n    const max = Math.max(r, g, b);\n    const delta = max - min;\n    let h;\n    let s;\n\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n\n  rgb_to_hex: function(r, g, b) {\n    let hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n\n  component_from_hex: function(hex, componentIndex) {\n    return (hex >> (componentIndex * 8)) & 0xFF;\n  },\n\n  hex_with_component: function(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | (hex & ~(0xFF << tmpComponent));\n  }\n};\n\nexport default ColorMath;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport interpret from './interpret';\nimport math from './math';\nimport colorToString from './toString';\nimport common from '../utils/common';\n\nclass Color {\n  constructor() {\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n\n    this.__state.a = this.__state.a || 1;\n  }\n\n  toString() {\n    return colorToString(this);\n  }\n\n  toHexString() {\n    return colorToString(this, true);\n  }\n\n  toOriginal() {\n    return this.__state.conversion.write(this);\n  }\n}\n\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n\n      Color.recalculateRGB(this, component, componentHexIndex);\n\n      return this.__state[component];\n    },\n\n    set: function(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n\n      Color.recalculateHSV(this);\n\n      return this.__state[component];\n    },\n\n    set: function(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\n\nColor.recalculateRGB = function(color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\n\nColor.recalculateHSV = function(color) {\n  const result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n  common.extend(color.__state,\n    {\n      s: result.s,\n      v: result.v\n    }\n  );\n\n  if (!common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\n\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\n\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\n\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\n\nObject.defineProperty(Color.prototype, 'a', {\n  get: function() {\n    return this.__state.a;\n  },\n\n  set: function(v) {\n    this.__state.a = v;\n  }\n});\n\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function() {\n    if (!this.__state.space !== 'HEX') {\n      this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n    }\n\n    return this.__state.hex;\n  },\n\n  set: function(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nexport default Color;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/**\n * @class An \"abstract\" class that represents a given property of an object.\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass Controller {\n  constructor(object, property) {\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n  }\n\n  /**\n   * Specify that a function fire every time someone changes the value with\n   * this Controller.\n   *\n   * @param {Function} fnc This function will be called whenever the value\n   * is modified via this Controller.\n   * @returns {Controller} this\n   */\n  onChange(fnc) {\n    this.__onChange = fnc;\n    return this;\n  }\n\n  /**\n   * Specify that a function fire every time someone \"finishes\" changing\n   * the value wih this Controller. Useful for values that change\n   * incrementally like numbers or strings.\n   *\n   * @param {Function} fnc This function will be called whenever\n   * someone \"finishes\" changing the value via this Controller.\n   * @returns {Controller} this\n   */\n  onFinishChange(fnc) {\n    this.__onFinishChange = fnc;\n    return this;\n  }\n\n  /**\n   * Change the value of <code>object[property]</code>\n   *\n   * @param {Object} newValue The new value of <code>object[property]</code>\n   */\n  setValue(newValue) {\n    this.object[this.property] = newValue;\n    if (this.__onChange) {\n      this.__onChange.call(this, newValue);\n    }\n\n    this.updateDisplay();\n    return this;\n  }\n\n  /**\n   * Gets the value of <code>object[property]</code>\n   *\n   * @returns {Object} The current value of <code>object[property]</code>\n   */\n  getValue() {\n    return this.object[this.property];\n  }\n\n  /**\n   * Refreshes the visual display of a Controller in order to keep sync\n   * with the object's current value.\n   * @returns {Controller} this\n   */\n  updateDisplay() {\n    return this;\n  }\n\n  /**\n   * @returns {Boolean} true if the value has deviated from initialValue\n   */\n  isModified() {\n    return this.initialValue !== this.getValue();\n  }\n}\n\nexport default Controller;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport common from '../utils/common';\n\nconst EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\n\nconst EVENT_MAP_INV = {};\ncommon.each(EVENT_MAP, function(v, k) {\n  common.each(v, function(e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\n\nconst CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\nfunction cssValueToPixels(val) {\n  if (val === '0' || common.isUndefined(val)) {\n    return 0;\n  }\n\n  const match = val.match(CSS_VALUE_PIXELS);\n\n  if (!common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n\n  // TODO ...ems? %?\n\n  return 0;\n}\n\n/**\n * @namespace\n * @member dat.dom\n */\nconst dom = {\n\n  /**\n   *\n   * @param elem\n   * @param selectable\n   */\n  makeSelectable: function(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n\n    elem.onselectstart = selectable ? function() {\n      return false;\n    } : function() {\n    };\n\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n\n  /**\n   *\n   * @param elem\n   * @param horizontal\n   * @param vert\n   */\n  makeFullscreen: function(elem, hor, vert) {\n    let vertical = vert;\n    let horizontal = hor;\n\n    if (common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n\n    if (common.isUndefined(vertical)) {\n      vertical = true;\n    }\n\n    elem.style.position = 'absolute';\n\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n\n  /**\n   *\n   * @param elem\n   * @param eventType\n   * @param params\n   */\n  fakeEvent: function(elem, eventType, pars, aux) {\n    const params = pars || {};\n    const className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    const evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n        {\n          const clientX = params.x || params.clientX || 0;\n          const clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n            params.cancelable || true, window, params.clickCount || 1,\n            0, // screen X\n            0, // screen Y\n            clientX, // client X\n            clientY, // client Y\n            false, false, false, false, 0, null);\n          break;\n        }\n      case 'KeyboardEvents':\n        {\n          const init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n            params.cancelable, window,\n            params.ctrlKey, params.altKey,\n            params.shiftKey, params.metaKey,\n            params.keyCode, params.charCode);\n          break;\n        }\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n    common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n\n  /**\n   *\n   * @param elem\n   * @param event\n   * @param func\n   * @param bool\n   */\n  bind: function(elem, event, func, newBool) {\n    const bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param event\n   * @param func\n   * @param bool\n   */\n  unbind: function(elem, event, func, newBool) {\n    const bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param className\n   */\n  addClass: function(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      const classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param className\n   */\n  removeClass: function(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        const classes = elem.className.split(/ +/);\n        const index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n\n  hasClass: function(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n\n  /**\n   *\n   * @param elem\n   */\n  getWidth: function(elem) {\n    const style = getComputedStyle(elem);\n\n    return cssValueToPixels(style['border-left-width']) +\n      cssValueToPixels(style['border-right-width']) +\n      cssValueToPixels(style['padding-left']) +\n      cssValueToPixels(style['padding-right']) +\n      cssValueToPixels(style.width);\n  },\n\n  /**\n   *\n   * @param elem\n   */\n  getHeight: function(elem) {\n    const style = getComputedStyle(elem);\n\n    return cssValueToPixels(style['border-top-width']) +\n      cssValueToPixels(style['border-bottom-width']) +\n      cssValueToPixels(style['padding-top']) +\n      cssValueToPixels(style['padding-bottom']) +\n      cssValueToPixels(style.height);\n  },\n\n  /**\n   *\n   * @param el\n   */\n  getOffset: function(el) {\n    let elem = el;\n    const offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n\n  // http://stackoverflow.com/posts/2684561/revisions\n  /**\n   *\n   * @param elem\n   */\n  isActive: function(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n\n};\n\nexport default dom;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a checkbox input to alter the boolean property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass BooleanController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    const _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n  }\n\n  setValue(v) {\n    const toReturn = super.setValue(v);\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n    this.__prev = this.getValue();\n    return toReturn;\n  }\n\n  updateDisplay() {\n    if (this.getValue() === true) {\n      this.__checkbox.setAttribute('checked', 'checked');\n      this.__checkbox.checked = true;\n      this.__prev = true;\n    } else {\n      this.__checkbox.checked = false;\n      this.__prev = false;\n    }\n\n    return super.updateDisplay();\n  }\n}\n\nexport default BooleanController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\n/**\n * @class Provides a select input to alter the property of an object, using a\n * list of accepted values.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object|string[]} options A map of labels to acceptable values, or\n * a list of acceptable string values.\n */\nclass OptionController extends Controller {\n  constructor(object, property, opts) {\n    super(object, property);\n\n    let options = opts;\n\n    const _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      const map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n      const opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      const desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n  }\n\n  setValue(v) {\n    const toReturn = super.setValue(v);\n\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n    return toReturn;\n  }\n\n  updateDisplay() {\n    if (dom.isActive(this.__select)) return this; // prevent number from updating if user is trying to manually update\n    this.__select.value = this.getValue();\n    return super.updateDisplay();\n  }\n}\n\nexport default OptionController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a text input to alter the string property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass StringController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    const _this = this;\n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  }\n\n  updateDisplay() {\n    // Stops the caret from moving on account of:\n    // keyup -> setValue -> updateDisplay\n    if (!dom.isActive(this.__input)) {\n      this.__input.value = this.getValue();\n    }\n    return super.updateDisplay();\n  }\n}\n\nexport default StringController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport common from '../utils/common';\n\nfunction numDecimals(x) {\n  const _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n\n  return 0;\n}\n\n/**\n * @class Represents a given property of an object that is a number.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object} [params] Optional parameters\n * @param {Number} [params.min] Minimum allowed value\n * @param {Number} [params.max] Maximum allowed value\n * @param {Number} [params.step] Increment by which to change value\n */\nclass NumberController extends Controller {\n  constructor(object, property, params) {\n    super(object, property);\n\n    const _params = params || {};\n\n    this.__min = _params.min;\n    this.__max = _params.max;\n    this.__step = _params.step;\n\n    if (common.isUndefined(this.__step)) {\n      if (this.initialValue === 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      this.__impliedStep = this.__step;\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n  }\n\n  setValue(v) {\n    let _v = v;\n\n    if (this.__min !== undefined && _v < this.__min) {\n      _v = this.__min;\n    } else if (this.__max !== undefined && _v > this.__max) {\n      _v = this.__max;\n    }\n\n    if (this.__step !== undefined && _v % this.__step !== 0) {\n      _v = Math.round(_v / this.__step) * this.__step;\n    }\n\n    return super.setValue(_v);\n  }\n\n  /**\n   * Specify a minimum value for <code>object[property]</code>.\n   *\n   * @param {Number} minValue The minimum value for\n   * <code>object[property]</code>\n   * @returns {dat.controllers.NumberController} this\n   */\n  min(minValue) {\n    this.__min = minValue;\n    return this;\n  }\n\n  /**\n   * Specify a maximum value for <code>object[property]</code>.\n   *\n   * @param {Number} maxValue The maximum value for\n   * <code>object[property]</code>\n   * @returns {dat.controllers.NumberController} this\n   */\n  max(maxValue) {\n    this.__max = maxValue;\n    return this;\n  }\n\n  /**\n   * Specify a step value that dat.controllers.NumberController\n   * increments by.\n   *\n   * @param {Number} stepValue The step value for\n   * dat.controllers.NumberController\n   * @default if minimum and maximum specified increment is 1% of the\n   * difference otherwise stepValue is 1\n   * @returns {dat.controllers.NumberController} this\n   */\n  step(stepValue) {\n    this.__step = stepValue;\n    this.__impliedStep = stepValue;\n    this.__precision = numDecimals(stepValue);\n    return this;\n  }\n}\n\nexport default NumberController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport NumberController from './NumberController';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nfunction roundToDecimal(value, decimals) {\n  const tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\n\n/**\n * @class Represents a given property of an object that is a number and\n * provides an input element with which to manipulate it.\n *\n * @extends dat.controllers.Controller\n * @extends dat.controllers.NumberController\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object} [params] Optional parameters\n * @param {Number} [params.min] Minimum allowed value\n * @param {Number} [params.max] Maximum allowed value\n * @param {Number} [params.step] Increment by which to change value\n */\nclass NumberControllerBox extends NumberController {\n  constructor(object, property, params) {\n    super(object, property, params);\n\n    this.__truncationSuspended = false;\n\n    const _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    let prevY;\n\n    function onChange() {\n      const attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onBlur() {\n      onFinish();\n    }\n\n    function onMouseDrag(e) {\n      const diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prevY = e.clientY;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n      // When pressing enter, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  }\n\n  updateDisplay() {\n    this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n    return super.updateDisplay();\n  }\n}\n\nexport default NumberControllerBox;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport NumberController from './NumberController';\nimport dom from '../dom/dom';\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\n\n/**\n * @class Represents a given property of an object that is a number, contains\n * a minimum and maximum, and provides a slider element with which to\n * manipulate it. It should be noted that the slider element is made up of\n * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n * <code>&lt;slider&gt;</code> element.\n *\n * @extends dat.controllers.Controller\n * @extends dat.controllers.NumberController\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Number} minValue Minimum allowed value\n * @param {Number} maxValue Maximum allowed value\n * @param {Number} stepValue Increment by which to change value\n */\nclass NumberControllerSlider extends NumberController {\n  constructor(object, property, min, max, step) {\n    super(object, property, { min: min, max: max, step: step });\n\n    const _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    dom.bind(this.__background, 'touchstart', onTouchStart);\n\n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n      document.activeElement.blur();\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n      e.preventDefault();\n\n      const bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(\n        map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max)\n      );\n\n      return false;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) { return; }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n\n    function onTouchMove(e) {\n      const clientX = e.touches[0].clientX;\n      const bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(\n        map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max)\n      );\n    }\n\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n  }\n\n  updateDisplay() {\n    const pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n    this.__foreground.style.width = pct * 100 + '%';\n    return super.updateDisplay();\n  }\n}\n\nexport default NumberControllerSlider;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a GUI interface to fire a specified method, a property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass FunctionController extends Controller {\n  constructor(object, property, text) {\n    super(object, property);\n\n    const _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n  }\n\n  fire() {\n    if (this.__onChange) {\n      this.__onChange.call(this);\n    }\n    this.getValue().call(this.object);\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n  }\n}\n\nexport default FunctionController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\nimport Color from '../color/Color';\nimport interpret from '../color/interpret';\nimport common from '../utils/common';\n\n/**\n * @class Represents a given property of an object that is a color.\n * @param {Object} object\n * @param {string} property\n */\nclass ColorController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    const _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(/* e */) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(/* e */) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    dom.bind(this.__selector, 'touchstart', function(/* e */) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'touchend', function(/* e */) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    const valueField = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n\n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__saturation_field, 'touchstart', fieldDown);\n\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'touchstart', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(this.__hue_field, 'touchstart', fieldDownH);\n\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n\n    function onBlur() {\n      const i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n\n    this.__saturation_field.appendChild(valueField);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) { e.preventDefault(); }\n\n      const fieldRect = _this.__saturation_field.getBoundingClientRect();\n      const { clientX, clientY } = (e.touches && e.touches[0]) || e;\n      let s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      let v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n    }\n\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) { e.preventDefault(); }\n\n      const fieldRect = _this.__hue_field.getBoundingClientRect();\n      const { clientY } = (e.touches && e.touches[0]) || e;\n      let h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n    }\n  }\n\n  updateDisplay() {\n    const i = interpret(this.getValue());\n\n    if (i !== false) {\n      let mismatch = false;\n\n      // Check for mismatch on the interpreted value.\n\n      common.each(Color.COMPONENTS, function(component) {\n        if (!common.isUndefined(i[component]) && !common.isUndefined(this.__color.__state[component]) &&\n          i[component] !== this.__color.__state[component]) {\n          mismatch = true;\n          return {}; // break\n        }\n      }, this);\n\n      // If nothing diverges, we keep our previous values\n      // for statefulness, otherwise we recalculate fresh\n      if (mismatch) {\n        common.extend(this.__color.__state, i);\n      }\n    }\n\n    common.extend(this.__temp.__state, this.__color.__state);\n\n    this.__temp.a = 1;\n\n    const flip = (this.__color.v < 0.5 || this.__color.s > 0.5) ? 255 : 0;\n    const _flip = 255 - flip;\n\n    common.extend(this.__field_knob.style, {\n      marginLeft: 100 * this.__color.s - 7 + 'px',\n      marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n      backgroundColor: this.__temp.toHexString(),\n      border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n    });\n\n    this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n\n    this.__temp.s = 1;\n    this.__temp.v = 1;\n\n    linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n\n    this.__input.value = this.__color.toString();\n\n    common.extend(this.__input.style, {\n      backgroundColor: this.__color.toHexString(),\n      color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n      textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n    });\n  }\n}\n\nconst vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\n\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  common.each(vendors, function(vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\n\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nexport default ColorController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nconst css = {\n  load: function(url, indoc) {\n    const doc = indoc || document;\n    const link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n\n  inject: function(cssContent, indoc) {\n    const doc = indoc || document;\n    const injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    const head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) { // Unable to inject CSS, probably because of a Content Security Policy\n    }\n  }\n};\n\nexport default css;\n","const saveDialogContents = `<div id=\"dg-save\" class=\"dg dialogue\">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id=\"dg-new-constructor\"></textarea>\n\n  <div id=\"dg-save-locally\">\n\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>`;\n\nexport default saveDialogContents;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport OptionController from './OptionController';\nimport NumberControllerBox from './NumberControllerBox';\nimport NumberControllerSlider from './NumberControllerSlider';\nimport StringController from './StringController';\nimport FunctionController from './FunctionController';\nimport BooleanController from './BooleanController';\nimport common from '../utils/common';\n\nconst ControllerFactory = function(object, property) {\n  const initialValue = object[property];\n\n  // Providing options?\n  if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n\n  // Providing a map?\n  if (common.isNumber(initialValue)) {\n    // Has min and max? (slider)\n    if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n      // has step?\n      if (common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property,\n                        arguments[2], arguments[3], arguments[4]);\n      }\n\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n\n    // number box\n    if (common.isNumber(arguments[4])) { // has step\n      return new NumberControllerBox(object, property,\n                        { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n\n  if (common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n\n  if (common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n\n  if (common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n\n  return null;\n};\n\nexport default ControllerFactory;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\n\nexport default window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    requestAnimationFrame;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nclass CenteredDiv {\n  constructor() {\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    const _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n  }\n\n  show() {\n    const _this = this;\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n  }\n\n  /**\n   * Hide centered div\n   */\n  hide() {\n    const _this = this;\n\n    const hide = function() {\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n  }\n\n  layout() {\n    this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n  }\n}\n\nexport default CenteredDiv;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport css from '../utils/css';\nimport saveDialogueContents from './saveDialogue.html';\nimport ControllerFactory from '../controllers/ControllerFactory';\nimport Controller from '../controllers/Controller';\nimport BooleanController from '../controllers/BooleanController';\nimport FunctionController from '../controllers/FunctionController';\nimport NumberControllerBox from '../controllers/NumberControllerBox';\nimport NumberControllerSlider from '../controllers/NumberControllerSlider';\nimport ColorController from '../controllers/ColorController';\nimport requestAnimationFrame from '../utils/requestAnimationFrame';\nimport CenteredDiv from '../dom/CenteredDiv';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nimport styleSheet from './style.scss'; // CSS to embed in build\n\ncss.inject(styleSheet);\n\n/** @ignore Outer-most className for GUI's */\nconst CSS_NAMESPACE = 'dg';\n\nconst HIDE_KEY_CODE = 72;\n\n/** @ignore The only value shared between the JS and SCSS. Use caution. */\nconst CLOSE_BUTTON_HEIGHT = 20;\n\nconst DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\nconst SUPPORTS_LOCAL_STORAGE = (function() {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}());\n\nlet SAVE_DIALOGUE;\n\n/** @ignore Have we yet to create an autoPlace GUI? */\nlet autoPlaceVirgin = true;\n\n/** @ignore Fixed position div that auto place GUI's go inside */\nlet autoPlaceContainer;\n\n/** @ignore Are we hiding the GUI's ? */\nlet hide = false;\n\n/** @private GUI's which should be hidden */\nconst hideableGuis = [];\n\n/**\n * @class A lightweight controller library for JavaScript. It allows you to easily\n * manipulate variables and fire functions on the fly.\n *\n * @typicalname gui\n *\n * @example\n * // Creating a GUI with options.\n * var gui = new dat.GUI({name: 'My GUI'});\n *\n * @example\n * // Creating a GUI and a subfolder.\n * var gui = new dat.GUI();\n * var folder1 = gui.addFolder('Flow Field');\n *\n * @param {Object} [params]\n * @param {String} [params.name] The name of this GUI.\n * @param {Object} [params.load] JSON object representing the saved state of\n * this GUI.\n * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n * @param {Boolean} [params.autoPlace=true]\n * @param {Boolean} [params.hideable=true] If true, GUI is shown/hidden by <kbd>h</kbd> keypress.\n * @param {Boolean} [params.closed=false] If true, starts closed\n * @param {Boolean} [params.closeOnTop=false] If true, close/open button shows on top of the GUI\n */\nconst GUI = function(pars) {\n  const _this = this;\n\n  let params = pars || {};\n\n  /**\n   * Outermost DOM Element\n   * @type {DOMElement}\n   */\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n\n  /**\n   * Nested GUI's by name\n   * @ignore\n   */\n  this.__folders = {};\n\n  this.__controllers = [];\n\n  /**\n   * List of objects I'm remembering for save, only used in top level GUI\n   * @ignore\n   */\n  this.__rememberedObjects = [];\n\n  /**\n   * Maps the index of remembered objects to a map of controllers, only used\n   * in top level GUI.\n   *\n   * @private\n   * @ignore\n   *\n   * @example\n   * [\n   *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n   *  {\n     *    propertyName: Controller\n     *  }\n   * ]\n   */\n  this.__rememberedObjectIndecesToControllers = [];\n\n  this.__listening = [];\n\n  // Default parameters\n  params = common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n\n  params = common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n\n  if (!common.isUndefined(params.load)) {\n    // Explicit preset\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n\n  if (common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n\n  // Only root level GUI's are resizable.\n  params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n  if (params.autoPlace && common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n  // Not part of params because I don't want people passing this in via\n  // constructor. Should be a 'remembered' value.\n  let useLocalStorage =\n    SUPPORTS_LOCAL_STORAGE &&\n    localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n  let saveToLocalStorage;\n  let titleRow;\n\n  Object.defineProperties(this,\n    /** @lends GUI.prototype */\n    {\n      /**\n       * The parent <code>GUI</code>\n       * @type dat.gui.GUI\n       */\n      parent: {\n        get: function() {\n          return params.parent;\n        }\n      },\n\n      scrollable: {\n        get: function() {\n          return params.scrollable;\n        }\n      },\n\n      /**\n       * Handles <code>GUI</code>'s element placement for you\n       * @type Boolean\n       */\n      autoPlace: {\n        get: function() {\n          return params.autoPlace;\n        }\n      },\n\n      /**\n       * Handles <code>GUI</code>'s position of open/close button\n       * @type Boolean\n       */\n      closeOnTop: {\n        get: function() {\n          return params.closeOnTop;\n        }\n      },\n\n      /**\n       * The identifier for a set of saved values\n       * @type String\n       */\n      preset: {\n        get: function() {\n          if (_this.parent) {\n            return _this.getRoot().preset;\n          }\n\n          return params.load.preset;\n        },\n\n        set: function(v) {\n          if (_this.parent) {\n            _this.getRoot().preset = v;\n          } else {\n            params.load.preset = v;\n          }\n          setPresetSelectIndex(this);\n          _this.revert();\n        }\n      },\n\n      /**\n       * The width of <code>GUI</code> element\n       * @type Number\n       */\n      width: {\n        get: function() {\n          return params.width;\n        },\n        set: function(v) {\n          params.width = v;\n          setWidth(_this, v);\n        }\n      },\n\n      /**\n       * The name of <code>GUI</code>. Used for folders. i.e\n       * a folder's name\n       * @type String\n       */\n      name: {\n        get: function() {\n          return params.name;\n        },\n        set: function(v) {\n          // TODO Check for collisions among sibling folders\n          params.name = v;\n          if (titleRow) {\n            titleRow.innerHTML = params.name;\n          }\n        }\n      },\n\n      /**\n       * Whether the <code>GUI</code> is collapsed or not\n       * @type Boolean\n       */\n      closed: {\n        get: function() {\n          return params.closed;\n        },\n        set: function(v) {\n          params.closed = v;\n          if (params.closed) {\n            dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n          } else {\n            dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n          }\n          // For browsers that aren't going to respect the CSS transition,\n          // Lets just check our height against the window height right off\n          // the bat.\n          this.onResize();\n\n          if (_this.__closeButton) {\n            _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n          }\n        }\n      },\n\n      /**\n       * Contains all presets\n       * @type Object\n       */\n      load: {\n        get: function() {\n          return params.load;\n        }\n      },\n\n      /**\n       * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n       * <code>remember</code>ing\n       * @type Boolean\n       */\n      useLocalStorage: {\n\n        get: function() {\n          return useLocalStorage;\n        },\n        set: function(bool) {\n          if (SUPPORTS_LOCAL_STORAGE) {\n            useLocalStorage = bool;\n            if (bool) {\n              dom.bind(window, 'unload', saveToLocalStorage);\n            } else {\n              dom.unbind(window, 'unload', saveToLocalStorage);\n            }\n            localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n          }\n        }\n      }\n    });\n\n  // Are we a root level GUI?\n  if (common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n\n    // Are we supposed to be loading locally?\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n\n        const savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n\n    dom.bind(this.__closeButton, 'click', function() {\n      _this.closed = !_this.closed;\n    });\n    // Oh, you're a nested GUI!\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n\n    const titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n\n    titleRow = addRow(_this, titleRowName);\n\n    const onClickTitle = function(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n\n  if (params.autoPlace) {\n    if (common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n\n      // Put it in the dom for you.\n      autoPlaceContainer.appendChild(this.domElement);\n\n      // Apply the auto styles\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n\n\n    // Make it not elastic.\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n\n  this.__resizeHandler = function() {\n    _this.onResizeDebounced();\n  };\n\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n\n  saveToLocalStorage = function() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n\n  // expose this method publicly\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n\n  function resetWidth() {\n    const root = _this.getRoot();\n    root.width += 1;\n    common.defer(function() {\n      root.width -= 1;\n    });\n  }\n\n  if (!params.parent) {\n    resetWidth();\n  }\n};\n\nGUI.toggleHide = function() {\n  hide = !hide;\n  common.each(hideableGuis, function(gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\n\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\n\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\n\nGUI._keydownHandler = function(e) {\n  if (document.activeElement.type !== 'text' &&\n    (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\n\ncommon.extend(\n  GUI.prototype,\n\n  /** @lends GUI.prototype */\n  {\n\n    /**\n     * Adds a new {@link Controller} to the GUI. The type of controller created\n     * is inferred from the initial value of <code>object[property]</code>. For\n     * color properties, see {@link addColor}.\n     *\n     * @param {Object} object The object to be manipulated\n     * @param {String} property The name of the property to be manipulated\n     * @param {Number} [min] Minimum allowed value\n     * @param {Number} [max] Maximum allowed value\n     * @param {Number} [step] Increment by which to change value\n     * @returns {Controller} The controller that was added to the GUI.\n     * @instance\n     *\n     * @example\n     * // Add a string controller.\n     * var person = {name: 'Sam'};\n     * gui.add(person, 'name');\n     *\n     * @example\n     * // Add a number controller slider.\n     * var person = {age: 45};\n     * gui.add(person, 'age', 0, 100);\n     */\n    add: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          factoryArgs: Array.prototype.slice.call(arguments, 2)\n        }\n      );\n    },\n\n    /**\n     * Adds a new color controller to the GUI.\n     *\n     * @param object\n     * @param property\n     * @returns {Controller} The controller that was added to the GUI.\n     * @instance\n     *\n     * @example\n     * var palette = {\n     *   color1: '#FF0000', // CSS string\n     *   color2: [ 0, 128, 255 ], // RGB array\n     *   color3: [ 0, 128, 255, 0.3 ], // RGB with alpha\n     *   color4: { h: 350, s: 0.9, v: 0.3 } // Hue, saturation, value\n     * };\n     * gui.addColor(palette, 'color1');\n     * gui.addColor(palette, 'color2');\n     * gui.addColor(palette, 'color3');\n     * gui.addColor(palette, 'color4');\n     */\n    addColor: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          color: true\n        }\n      );\n    },\n\n    /**\n     * Removes the given controller from the GUI.\n     * @param {Controller} controller\n     * @instance\n     */\n    remove: function(controller) {\n      // TODO listening?\n      this.__ul.removeChild(controller.__li);\n      this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n      const _this = this;\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    /**\n     * Removes the root GUI from the document and unbinds all event listeners.\n     * For subfolders, use `gui.removeFolder(folder)` instead.\n     * @instance\n     */\n    destroy: function() {\n      if (this.parent) {\n        throw new Error(\n          'Only the root GUI should be removed with .destroy(). ' +\n          'For subfolders, use gui.removeFolder(folder) instead.'\n        );\n      }\n\n      if (this.autoPlace) {\n        autoPlaceContainer.removeChild(this.domElement);\n      }\n\n      const _this = this;\n      common.each(this.__folders, function(subfolder) {\n        _this.removeFolder(subfolder);\n      });\n\n      dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n\n      removeListeners(this);\n    },\n\n    /**\n     * Creates a new subfolder GUI instance.\n     * @param name\n     * @returns {dat.gui.GUI} The new folder.\n     * @throws {Error} if this GUI already has a folder by the specified\n     * name\n     * @instance\n     */\n    addFolder: function(name) {\n      // We have to prevent collisions on names in order to have a key\n      // by which to remember saved values\n      if (this.__folders[name] !== undefined) {\n        throw new Error('You already have a folder in this GUI by the' +\n          ' name \"' + name + '\"');\n      }\n\n      const newGuiParams = { name: name, parent: this };\n\n      // We need to pass down the autoPlace trait so that we can\n      // attach event listeners to open/close folder actions to\n      // ensure that a scrollbar appears if the window is too short.\n      newGuiParams.autoPlace = this.autoPlace;\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n        this.load.folders && // Was my parent a dead-end?\n        this.load.folders[name]) { // Did daddy remember me?\n        // Start me closed if I was closed\n        newGuiParams.closed = this.load.folders[name].closed;\n\n        // Pass down the loaded data\n        newGuiParams.load = this.load.folders[name];\n      }\n\n      const gui = new GUI(newGuiParams);\n      this.__folders[name] = gui;\n\n      const li = addRow(this, gui.domElement);\n      dom.addClass(li, 'folder');\n      return gui;\n    },\n\n    /**\n     * Removes a subfolder GUI instance.\n     * @param {dat.gui.GUI} folder The folder to remove.\n     * @instance\n     */\n    removeFolder: function(folder) {\n      this.__ul.removeChild(folder.domElement.parentElement);\n\n      delete this.__folders[folder.name];\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n        this.load.folders && // Was my parent a dead-end?\n        this.load.folders[folder.name]) {\n        delete this.load.folders[folder.name];\n      }\n\n      removeListeners(folder);\n\n      const _this = this;\n\n      common.each(folder.__folders, function(subfolder) {\n        folder.removeFolder(subfolder);\n      });\n\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    /**\n     * Opens the GUI.\n     */\n    open: function() {\n      this.closed = false;\n    },\n\n    /**\n     * Closes the GUI.\n     */\n    close: function() {\n      this.closed = true;\n    },\n\n\n    onResize: function() {\n      // we debounce this function to prevent performance issues when rotating on tablet/mobile\n      const root = this.getRoot();\n      if (root.scrollable) {\n        const top = dom.getOffset(root.__ul).top;\n        let h = 0;\n\n        common.each(root.__ul.childNodes, function(node) {\n          if (!(root.autoPlace && node === root.__save_row)) {\n            h += dom.getHeight(node);\n          }\n        });\n\n        if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n          dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n        } else {\n          dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = 'auto';\n        }\n      }\n\n      if (root.__resize_handle) {\n        common.defer(function() {\n          root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n        });\n      }\n\n      if (root.__closeButton) {\n        root.__closeButton.style.width = root.width + 'px';\n      }\n    },\n\n    onResizeDebounced: common.debounce(function() { this.onResize(); }, 50),\n\n    /**\n     * Mark objects for saving. The order of these objects cannot change as\n     * the GUI grows. When remembering new objects, append them to the end\n     * of the list.\n     *\n     * @param {...Object} objects\n     * @throws {Error} if not called on a top level GUI.\n     * @instance\n     * @ignore\n     */\n    remember: function() {\n      if (common.isUndefined(SAVE_DIALOGUE)) {\n        SAVE_DIALOGUE = new CenteredDiv();\n        SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n      }\n\n      if (this.parent) {\n        throw new Error('You can only call remember on a top level GUI.');\n      }\n\n      const _this = this;\n\n      common.each(Array.prototype.slice.call(arguments), function(object) {\n        if (_this.__rememberedObjects.length === 0) {\n          addSaveMenu(_this);\n        }\n        if (_this.__rememberedObjects.indexOf(object) === -1) {\n          _this.__rememberedObjects.push(object);\n        }\n      });\n\n      if (this.autoPlace) {\n        // Set save row width\n        setWidth(this, this.width);\n      }\n    },\n\n    /**\n     * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n     * @instance\n     */\n    getRoot: function() {\n      let gui = this;\n      while (gui.parent) {\n        gui = gui.parent;\n      }\n      return gui;\n    },\n\n    /**\n     * @returns {Object} a JSON object representing the current state of\n     * this GUI as well as its remembered properties.\n     * @instance\n     */\n    getSaveObject: function() {\n      const toReturn = this.load;\n      toReturn.closed = this.closed;\n\n      // Am I remembering any values?\n      if (this.__rememberedObjects.length > 0) {\n        toReturn.preset = this.preset;\n\n        if (!toReturn.remembered) {\n          toReturn.remembered = {};\n        }\n\n        toReturn.remembered[this.preset] = getCurrentPreset(this);\n      }\n\n      toReturn.folders = {};\n      common.each(this.__folders, function(element, key) {\n        toReturn.folders[key] = element.getSaveObject();\n      });\n\n      return toReturn;\n    },\n\n    save: function() {\n      if (!this.load.remembered) {\n        this.load.remembered = {};\n      }\n\n      this.load.remembered[this.preset] = getCurrentPreset(this);\n      markPresetModified(this, false);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    saveAs: function(presetName) {\n      if (!this.load.remembered) {\n        // Retain default values upon first save\n        this.load.remembered = {};\n        this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n      }\n\n      this.load.remembered[presetName] = getCurrentPreset(this);\n      this.preset = presetName;\n      addPresetOption(this, presetName, true);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    revert: function(gui) {\n      common.each(this.__controllers, function(controller) {\n        // Make revert work on Default.\n        if (!this.getRoot().load.remembered) {\n          controller.setValue(controller.initialValue);\n        } else {\n          recallSavedValue(gui || this.getRoot(), controller);\n        }\n\n        // fire onFinishChange callback\n        if (controller.__onFinishChange) {\n          controller.__onFinishChange.call(controller, controller.getValue());\n        }\n      }, this);\n\n      common.each(this.__folders, function(folder) {\n        folder.revert(folder);\n      });\n\n      if (!gui) {\n        markPresetModified(this.getRoot(), false);\n      }\n    },\n\n    listen: function(controller) {\n      const init = this.__listening.length === 0;\n      this.__listening.push(controller);\n      if (init) {\n        updateDisplays(this.__listening);\n      }\n    },\n\n    updateDisplay: function() {\n      common.each(this.__controllers, function(controller) {\n        controller.updateDisplay();\n      });\n      common.each(this.__folders, function(folder) {\n        folder.updateDisplay();\n      });\n    }\n  }\n);\n\n/**\n * Add a row to the end of the GUI or before another row.\n *\n * @param gui\n * @param [newDom] If specified, inserts the dom content in the new row\n * @param [liBefore] If specified, places the new row before another row\n *\n * @ignore\n */\nfunction addRow(gui, newDom, liBefore) {\n  const li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\n\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\n\nfunction markPresetModified(gui, modified) {\n  const opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\n\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n\n  common.extend(controller, /** @lends Controller.prototype */ {\n    /**\n     * @param  {Array|Object} options\n     * @return {Controller}\n     */\n    options: function(options) {\n      if (arguments.length > 1) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [common.toArray(arguments)]\n          }\n        );\n      }\n\n      if (common.isArray(options) || common.isObject(options)) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [options]\n          }\n        );\n      }\n    },\n\n    /**\n     * Sets the name of the controller.\n     * @param  {string} name\n     * @return {Controller}\n     */\n    name: function(name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = name;\n      return controller;\n    },\n\n    /**\n     * Sets controller to listen for changes on its underlying object.\n     * @return {Controller}\n     */\n    listen: function() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n\n    /**\n     * Removes the controller from its parent GUI.\n     * @return {Controller}\n     */\n    remove: function() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n\n  // All sliders should be accompanied by a box.\n  if (controller instanceof NumberControllerSlider) {\n    const box = new NumberControllerBox(controller.object, controller.property,\n      { min: controller.__min, max: controller.__max, step: controller.__step });\n\n    common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function(method) {\n      const pc = controller[method];\n      const pb = box[method];\n      controller[method] = box[method] = function() {\n        const args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    const r = function(returned) {\n      // Have we defined both boundaries?\n      if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n        // Well, then lets just replace this with a slider.\n\n        // lets remember if the old controller had a specific name or was listening\n        const oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        const wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n\n        controller.remove();\n        const newController = add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: controller.__li.nextElementSibling,\n            factoryArgs: [controller.__min, controller.__max, controller.__step]\n          });\n\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n\n        return newController;\n      }\n\n      return returned;\n    };\n\n    controller.min = common.compose(r, controller.min);\n    controller.max = common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n\n    dom.bind(controller.__checkbox, 'click', function(e) {\n      e.stopPropagation(); // Prevents double-toggle\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n\n    dom.bind(li, 'mouseover', function() {\n      dom.addClass(controller.__button, 'hover');\n    });\n\n    dom.bind(li, 'mouseout', function() {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = common.compose(function(val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n\n    controller.updateDisplay();\n  }\n\n  controller.setValue = common.compose(function(val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n\n    return val;\n  }, controller.setValue);\n}\n\nfunction recallSavedValue(gui, controller) {\n  // Find the topmost GUI, that's where remembered objects live.\n  const root = gui.getRoot();\n\n  // Does the object we're controlling match anything we've been told to\n  // remember?\n  const matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n\n  // Why yes, it does!\n  if (matchedIndex !== -1) {\n    // Let me fetch a map of controllers for thcommon.isObject.\n    let controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n\n    // Ohp, I believe this is the first controller we've created for this\n    // object. Lets make the map fresh.\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] =\n        controllerMap;\n    }\n\n    // Keep track of this controller\n    controllerMap[controller.property] = controller;\n\n    // Okay, now have we saved any values for this controller?\n    if (root.load && root.load.remembered) {\n      const presetMap = root.load.remembered;\n\n      // Which preset are we trying to load?\n      let preset;\n\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        // Uhh, you can have the default instead?\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        // Nada.\n        return;\n      }\n\n      // Did the loaded object remember thcommon.isObject? &&  Did we remember this particular property?\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        // We did remember something for this guy ...\n        const value = preset[matchedIndex][controller.property];\n\n        // And that's what it is.\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\n\nfunction add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error(`Object \"${object}\" has no property \"${property}\"`);\n  }\n\n  let controller;\n\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    const factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n\n  recallSavedValue(gui, controller);\n\n  dom.addClass(controller.domElement, 'c');\n\n  const name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n\n  const container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n\n  const li = addRow(gui, container, params.before);\n\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, typeof controller.getValue());\n  }\n\n  augmentController(gui, li, controller);\n\n  gui.__controllers.push(controller);\n\n  return controller;\n}\n\nfunction getLocalStorageHash(gui, key) {\n  // TODO how does this deal with multiple GUI's?\n  return document.location.href + '.' + key;\n}\n\nfunction addPresetOption(gui, name, setSelected) {\n  const opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\n\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\n\nfunction addSaveMenu(gui) {\n  const div = gui.__save_row = document.createElement('li');\n\n  dom.addClass(gui.domElement, 'has-save');\n\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n  dom.addClass(div, 'save-row');\n\n  const gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n\n  // TODO replace with FunctionController\n  const button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n\n  const button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n\n  const button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n\n  const select = gui.__preset_select = document.createElement('select');\n\n  if (gui.load && gui.load.remembered) {\n    common.each(gui.load.remembered, function(value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n\n  dom.bind(select, 'change', function() {\n    for (let index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n\n    gui.preset = this.value;\n  });\n\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n\n  if (SUPPORTS_LOCAL_STORAGE) {\n    const explain = document.getElementById('dg-local-explain');\n    const localStorageCheckBox = document.getElementById('dg-local-storage');\n    const saveLocally = document.getElementById('dg-save-locally');\n\n    saveLocally.style.display = 'block';\n\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n\n    showHideExplain(gui, explain);\n\n    // TODO: Use a boolean controller, fool!\n    dom.bind(localStorageCheckBox, 'change', function() {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n\n  const newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n  dom.bind(newConstructorTextArea, 'keydown', function(e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n\n  dom.bind(gears, 'click', function() {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n\n  dom.bind(button, 'click', function() {\n    gui.save();\n  });\n\n  dom.bind(button2, 'click', function() {\n    const presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n\n  dom.bind(button3, 'click', function() {\n    gui.revert();\n  });\n\n  // div.appendChild(button2);\n}\n\nfunction addResizeHandle(gui) {\n  let pmouseX;\n\n  gui.__resize_handle = document.createElement('div');\n\n  common.extend(gui.__resize_handle.style, {\n\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n    // border: '1px solid blue'\n\n  });\n\n  function drag(e) {\n    e.preventDefault();\n\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n\n    return false;\n  }\n\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n\n  function dragStart(e) {\n    e.preventDefault();\n\n    pmouseX = e.clientX;\n\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n\n    return false;\n  }\n\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\n\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  // Auto placed save-rows are position fixed, so we have to\n  // set the width manually if we want it to bleed to the edge\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\n\nfunction getCurrentPreset(gui, useInitialValues) {\n  const toReturn = {};\n\n  // For each object I'm remembering\n  common.each(gui.__rememberedObjects, function(val, index) {\n    const savedValues = {};\n\n    // The controllers I've made for thcommon.isObject by property\n    const controllerMap =\n      gui.__rememberedObjectIndecesToControllers[index];\n\n    // Remember each value for each property\n    common.each(controllerMap, function(controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n\n    // Save the values for thcommon.isObject\n    toReturn[index] = savedValues;\n  });\n\n  return toReturn;\n}\n\nfunction setPresetSelectIndex(gui) {\n  for (let index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\n\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame.call(window, function() {\n      updateDisplays(controllerArray);\n    });\n  }\n\n  common.each(controllerArray, function(c) {\n    c.updateDisplay();\n  });\n}\n\nexport default GUI;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Color from './color/Color';\nimport math from './color/math';\nimport interpret from './color/interpret';\n\nimport Controller from './controllers/Controller';\nimport BooleanController from './controllers/BooleanController';\nimport OptionController from './controllers/OptionController';\nimport StringController from './controllers/StringController';\nimport NumberController from './controllers/NumberController';\nimport NumberControllerBox from './controllers/NumberControllerBox';\nimport NumberControllerSlider from './controllers/NumberControllerSlider';\nimport FunctionController from './controllers/FunctionController';\nimport ColorController from './controllers/ColorController';\n\nimport domImport from './dom/dom';\nimport GUIImport from './gui/GUI';\n\nexport const color = {\n  Color: Color,\n  math: math,\n  interpret: interpret\n};\n\nexport const controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\n\nexport const dom = { dom: domImport };\n\nexport const gui = { GUI: GUIImport };\n\nexport const GUI = GUIImport;\n\nexport default {\n  color,\n  controllers,\n  dom,\n  gui,\n  GUI\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS, System } from \"curbl-ecs\";\r\nimport * as dat from \"dat.gui\";\r\nimport { SYSTEM_EVENTS } from \"curbl-ecs/lib/Events\";\r\nimport { GUIComponent } from \"../../components/gui/GUIComponent\";\r\nlet GUISystem = class GUISystem extends System {\r\n    constructor() {\r\n        super();\r\n        this.gui = new dat.GUI();\r\n    }\r\n    setUp() {\r\n        this.events.on(SYSTEM_EVENTS.ENTITY_ADDED, this.onEntityAdded, this);\r\n    }\r\n    onEntityAdded(entity) {\r\n        const config = entity.get(GUIComponent).config;\r\n        let folder = this.gui;\r\n        let controller;\r\n        if (config.folder) {\r\n            folder = this.gui.addFolder(config.folder);\r\n        }\r\n        for (let property of config.properties) {\r\n            if (property.isColor) {\r\n                controller = folder.addColor(property.prop, property.propName);\r\n            }\r\n            else if (property.items) {\r\n                controller = folder.add(property.prop, property.propName, property.items);\r\n            }\r\n            else {\r\n                controller = folder.add(property.prop, property.propName, property.min, property.max);\r\n            }\r\n            controller.onChange(property.onChange).onFinishChange(property.onFinishChange);\r\n        }\r\n    }\r\n};\r\nGUISystem = __decorate([\r\n    ECS.System(GUIComponent)\r\n], GUISystem);\r\nexport { GUISystem };\r\n//# sourceMappingURL=GUISystem.js.map","import * as EventEmitter from \"eventemitter3\";\r\nimport { EmitSignal } from \"./EmitSignal\";\r\nvar DOM_EVENTS;\r\n(function (DOM_EVENTS) {\r\n    DOM_EVENTS[\"KEYDOWN\"] = \"KEY_DOWN\";\r\n    DOM_EVENTS[\"KEYPRESS\"] = \"KEY_PRESS\";\r\n    DOM_EVENTS[\"KEYUP\"] = \"KEY_UP\";\r\n    DOM_EVENTS[\"MOUSECLICK\"] = \"MOUSE_CLICK\";\r\n    DOM_EVENTS[\"CONTEXTMENU\"] = \"CONTEXT_MENU\";\r\n    DOM_EVENTS[\"DOUBLECLICK\"] = \"DOUBLE_CLICK\";\r\n    DOM_EVENTS[\"MOUSEDOWN\"] = \"MOUSE_DOWN\";\r\n    DOM_EVENTS[\"MOUSEOUT\"] = \"MOUSE_OUT\";\r\n    DOM_EVENTS[\"MOUSEOVER\"] = \"MOUSE_OVER\";\r\n    DOM_EVENTS[\"MOUSEUP\"] = \"MOUSE_UP\";\r\n    DOM_EVENTS[\"MOUSEMOVE\"] = \"MOUSE_MOVE\";\r\n    DOM_EVENTS[\"WHEEL\"] = \"WHEEL\";\r\n})(DOM_EVENTS || (DOM_EVENTS = {}));\r\nconst emitter = new EventEmitter();\r\nexport const DomEvents = {\r\n    onKeyDown: new EmitSignal(emitter, DOM_EVENTS.KEYDOWN),\r\n    onKeyPress: new EmitSignal(emitter, DOM_EVENTS.KEYPRESS),\r\n    onKeyUp: new EmitSignal(emitter, DOM_EVENTS.KEYUP),\r\n    onClick: new EmitSignal(emitter, DOM_EVENTS.MOUSECLICK),\r\n    onContextMenu: new EmitSignal(emitter, DOM_EVENTS.CONTEXTMENU),\r\n    onDoubleClick: new EmitSignal(emitter, DOM_EVENTS.DOUBLECLICK),\r\n    onMouseDown: new EmitSignal(emitter, DOM_EVENTS.MOUSEDOWN),\r\n    onMouseOut: new EmitSignal(emitter, DOM_EVENTS.MOUSEOUT),\r\n    onMouseOver: new EmitSignal(emitter, DOM_EVENTS.MOUSEOVER),\r\n    onMouseUp: new EmitSignal(emitter, DOM_EVENTS.MOUSEUP),\r\n    onMouseMove: new EmitSignal(emitter, DOM_EVENTS.MOUSEMOVE),\r\n    onWheel: new EmitSignal(emitter, DOM_EVENTS.WHEEL)\r\n};\r\n(function () {\r\n    document.onkeydown = (ev) => {\r\n        DomEvents.onKeyDown.dispatch(ev);\r\n    };\r\n    document.onkeypress = (ev) => {\r\n        DomEvents.onKeyPress.dispatch(ev);\r\n    };\r\n    document.onkeyup = (ev) => {\r\n        DomEvents.onKeyUp.dispatch(ev);\r\n    };\r\n    document.onclick = (ev) => {\r\n        DomEvents.onClick.dispatch(ev);\r\n    };\r\n    document.oncontextmenu = (ev) => {\r\n        DomEvents.onContextMenu.dispatch(ev);\r\n    };\r\n    document.ondblclick = (ev) => {\r\n        DomEvents.onDoubleClick.dispatch(ev);\r\n    };\r\n    document.onmousedown = (ev) => {\r\n        DomEvents.onMouseDown.dispatch(ev);\r\n    };\r\n    document.onmouseout = (ev) => {\r\n        DomEvents.onMouseOut.dispatch(ev);\r\n    };\r\n    document.onmouseover = (ev) => {\r\n        DomEvents.onMouseOver.dispatch(ev);\r\n    };\r\n    document.onmouseup = (ev) => {\r\n        DomEvents.onMouseUp.dispatch(ev);\r\n    };\r\n    document.onmousemove = (ev) => {\r\n        DomEvents.onMouseMove.dispatch(ev);\r\n    };\r\n    document.onwheel = (ev) => {\r\n        DomEvents.onWheel.dispatch(ev);\r\n    };\r\n})();\r\n//# sourceMappingURL=DomEvents.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { CameraComponent, LookAtCameraComponent, TransformComponent } from \"../../components\";\r\nimport { ECS, System } from \"curbl-ecs\";\r\nimport { Math3d } from \"../../math\";\r\nimport { DomEvents } from \"../../events/DomEvents\";\r\nimport { mat4, quat, vec3 } from \"gl-matrix\";\r\nlet LookAtCameraControlSystem = class LookAtCameraControlSystem extends System {\r\n    constructor(canvas) {\r\n        super();\r\n        this.canvas = canvas;\r\n        this.lastMouseX = -1;\r\n        this.lastMouseY = -1;\r\n        this.drag = false;\r\n    }\r\n    setUp() {\r\n        this.canvas.element.addEventListener('mousedown', (ev) => this.onMouseDown(ev));\r\n        this.canvas.element.addEventListener('mouseup', (ev) => this.onMouseUp(ev));\r\n        this.canvas.element.addEventListener('mousemove', (ev) => this.onMouseMove(ev));\r\n        DomEvents.onWheel.add(this.onMouseWheel, this);\r\n        DomEvents.onKeyDown.add(this.onKeyDown, this);\r\n    }\r\n    onMouseDown(ev) {\r\n        this.drag = true;\r\n        if (this.lastMouseX === -1) {\r\n            this.lastMouseX = ev.x;\r\n        }\r\n        if (this.lastMouseY === -1) {\r\n            this.lastMouseY = ev.y;\r\n        }\r\n    }\r\n    calcTranslation(panning, zooming, rotation) {\r\n        const translation = vec3.create();\r\n        vec3.add(translation, translation, panning);\r\n        vec3.add(translation, translation, zooming);\r\n        const vec3Rotation = vec3.fromValues(rotation[0] / rotation[3], rotation[1] / rotation[3], rotation[2] / rotation[3]);\r\n        return vec3.add(translation, translation, vec3Rotation);\r\n    }\r\n    onMouseUp(ev) {\r\n        for (let i = 0, entity; entity = this.entities[i]; i++) {\r\n            let transform = entity.get(TransformComponent);\r\n            let perspective = entity.get(LookAtCameraComponent);\r\n            const translation = this.calcTranslation(perspective.panning, perspective.zooming, transform.rotation);\r\n            vec3.add(transform.translation, transform.translation, translation);\r\n            vec3.add(perspective.target, perspective.target, perspective.panning);\r\n            quat.set(transform.rotation, 0, 0, 0, transform.rotation[3]);\r\n            vec3.set(perspective.panning, 0, 0, 0);\r\n            vec3.set(perspective.zooming, 0, 0, 0);\r\n        }\r\n        this.drag = false;\r\n        this.lastMouseX = -1;\r\n        this.lastMouseY = -1;\r\n    }\r\n    onMouseWheel(ev) {\r\n        for (let i = 0, entity; entity = this.entities[i]; i++) {\r\n            let transform = entity.get(TransformComponent);\r\n            let perspective = entity.get(LookAtCameraComponent);\r\n            this.zoom(entity, ev.deltaY, 0.001);\r\n            const translation = this.calcTranslation(perspective.panning, perspective.zooming, transform.rotation);\r\n            vec3.add(transform.translation, transform.translation, translation);\r\n            vec3.set(perspective.zooming, 0, 0, 0);\r\n        }\r\n    }\r\n    onMouseMove(ev) {\r\n        if (this.drag) {\r\n            for (let i = 0, entity; entity = this.entities[i]; i++) {\r\n                this.rotate(entity, ev.x, ev.y);\r\n                this.lastMouseX = ev.x;\r\n                this.lastMouseY = ev.y;\r\n            }\r\n        }\r\n    }\r\n    onKeyDown(ev) {\r\n        let y = 0;\r\n        let x = 0;\r\n        //W\r\n        if (ev.key === \"w\") {\r\n            y += 0.1;\r\n        }\r\n        //S\r\n        if (ev.key === \"s\") {\r\n            y -= 0.1;\r\n        }\r\n        //A\r\n        if (ev.key === \"a\") {\r\n            x += 0.1;\r\n        }\r\n        //D\r\n        if (ev.key === \"d\") {\r\n            x -= 0.1;\r\n        }\r\n        for (let i = 0, entity; entity = this.entities[i]; i++) {\r\n            const perspective = entity.get(LookAtCameraComponent);\r\n            const transform = entity.get(TransformComponent);\r\n            this.pan(entity, x, y);\r\n            const translation = this.calcTranslation(perspective.panning, perspective.zooming, transform.rotation);\r\n            vec3.add(transform.translation, transform.translation, translation);\r\n            vec3.add(perspective.target, perspective.target, perspective.panning);\r\n            vec3.set(perspective.panning, 0, 0, 0);\r\n        }\r\n    }\r\n    /**\r\n     * Calculate the panning-plane\r\n     */\r\n    pan(entity, dx, dy) {\r\n        const perspective = entity.get(LookAtCameraComponent);\r\n        const transform = entity.get(TransformComponent);\r\n        const aDir = vec3.create();\r\n        vec3.subtract(aDir, perspective.target, transform.translation); //Vektor von Target nach Position\r\n        vec3.normalize(aDir, aDir);\r\n        const aRight = vec3.create();\r\n        vec3.cross(aRight, aDir, perspective.up);\r\n        vec3.normalize(aRight, aRight);\r\n        const aUp = vec3.create();\r\n        vec3.cross(aUp, aDir, aRight);\r\n        //calc out vector(overwriting aRight, aUp)\r\n        vec3.scale(aRight, aRight, dx);\r\n        vec3.scale(aUp, aUp, dy);\r\n        vec3.add(perspective.panning, aRight, aUp);\r\n    }\r\n    /**\r\n     * Calculate camera zoom\r\n     */\r\n    zoom(entity, wheelDelta, delta) {\r\n        const perspective = entity.get(LookAtCameraComponent);\r\n        const transform = entity.get(TransformComponent);\r\n        const dz = (perspective.zoomPos - wheelDelta) * delta;\r\n        const aDir = vec3.create();\r\n        vec3.subtract(aDir, perspective.target, transform.translation);\r\n        const dist = vec3.length(aDir);\r\n        vec3.normalize(aDir, aDir);\r\n        if (dist - dz <= 1.0) {\r\n            vec3.scale(perspective.zooming, aDir, dist - 1.0);\r\n        }\r\n        else {\r\n            vec3.scale(perspective.zooming, aDir, dz);\r\n        }\r\n    }\r\n    rotate(entity, x, y) {\r\n        const perspective = entity.get(LookAtCameraComponent);\r\n        const transform = entity.get(TransformComponent);\r\n        const po = Math3d.getVSpherePos(this.lastMouseX, this.lastMouseY, this.canvas.width, this.canvas.height);\r\n        const pn = Math3d.getVSpherePos(x, y, this.canvas.width, this.canvas.height);\r\n        const poPn = vec3.create();\r\n        vec3.subtract(poPn, po, pn);\r\n        if (vec3.squaredLength(poPn) < 0.0001) {\r\n            return;\r\n        }\r\n        let cosangle = vec3.dot(po, pn);\r\n        if (cosangle > 1.0) {\r\n            cosangle = 1;\r\n        }\r\n        else if (cosangle < -1.0) {\r\n            cosangle = -1;\r\n        }\r\n        let angle = Math.acos(cosangle);\r\n        const rotAxis = vec3.create();\r\n        vec3.cross(rotAxis, pn, po);\r\n        vec3.normalize(rotAxis, rotAxis);\r\n        const subTranslationPerspective = vec3.create();\r\n        vec3.subtract(subTranslationPerspective, transform.translation, perspective.target);\r\n        let diff = vec3.fromValues(0, 0, vec3.length(subTranslationPerspective));\r\n        let rotDiff = Math3d.rotateAxisAngle(diff, rotAxis, angle);\r\n        const cDir = vec3.create();\r\n        vec3.subtract(cDir, perspective.target, transform.translation);\r\n        vec3.normalize(cDir, cDir);\r\n        const cRight = vec3.create();\r\n        vec3.cross(cRight, cDir, perspective.up);\r\n        vec3.normalize(cRight, cRight);\r\n        const cUp = vec3.create();\r\n        vec3.cross(cUp, cRight, cDir);\r\n        const rotDiffW = vec3.fromValues(cRight[0] * rotDiff[0] + cUp[0] * rotDiff[1] + -cDir[0] * rotDiff[2], cRight[1] * rotDiff[0] + cUp[1] * rotDiff[1] + -cDir[1] * rotDiff[2], cRight[2] * rotDiff[0] + cUp[2] * rotDiff[1] + -cDir[2] * rotDiff[2]);\r\n        const out = vec3.create();\r\n        vec3.subtract(out, rotDiffW, vec3.subtract(out, transform.translation, perspective.target));\r\n        const w = transform.rotation[3];\r\n        quat.set(transform.rotation, out[0] / w, out[1] / w, out[2] / w, w);\r\n    }\r\n    update() {\r\n        for (let i = 0, entity; entity = this.entities[i]; i++) {\r\n            const camera = entity.get(CameraComponent);\r\n            const transform = entity.get(TransformComponent);\r\n            const perspective = entity.get(LookAtCameraComponent);\r\n            //Update\r\n            const translation = this.calcTranslation(perspective.panning, perspective.zooming, transform.rotation);\r\n            vec3.add(transform.translation, transform.translation, translation);\r\n            vec3.add(perspective.target, perspective.target, perspective.panning);\r\n            quat.set(transform.rotation, 0, 0, 0, transform.rotation[3]);\r\n            vec3.set(perspective.panning, 0, 0, 0);\r\n            vec3.set(perspective.zooming, 0, 0, 0);\r\n            //Apply to camera localMatrix\r\n            const target = vec3.create();\r\n            vec3.add(target, perspective.target, perspective.panning);\r\n            const position = vec3.create();\r\n            vec3.add(position, perspective.panning, perspective.zooming);\r\n            vec3.add(position, position, transform.translation);\r\n            mat4.lookAt(camera.viewMatrix, position, target, perspective.up);\r\n        }\r\n    }\r\n};\r\nLookAtCameraControlSystem = __decorate([\r\n    ECS.System(TransformComponent, CameraComponent, LookAtCameraComponent)\r\n], LookAtCameraControlSystem);\r\nexport { LookAtCameraControlSystem };\r\n//# sourceMappingURL=LookAtCameraControlSystem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS, System } from \"curbl-ecs\";\r\nimport { CameraComponent, TransformComponent } from \"../../components\";\r\nimport { GLUniformBufferObject } from \"../../gl/GLUniformBufferObject\";\r\nimport { UBO_BINDINGS } from \"../../viewer/constants\";\r\nimport { SYSTEM_EVENTS } from \"curbl-ecs/lib/Events\";\r\nimport { mat4, vec3 } from \"gl-matrix\";\r\n/**\r\n * Handle Camera component\r\n */\r\nlet CameraSystem = class CameraSystem extends System {\r\n    constructor(config) {\r\n        super();\r\n        this.gl = config.gl;\r\n        this.translation = vec3.create();\r\n    }\r\n    setUp() {\r\n        const initMatrix = mat4.create();\r\n        this.cameraUBO = new GLUniformBufferObject(this.gl, UBO_BINDINGS.CAMERA);\r\n        this.cameraUBO.addItem(\"projectionMatrix\", \"mat4\");\r\n        this.cameraUBO.addItem(\"viewMatrix\", \"mat4\");\r\n        this.cameraUBO.addItem(\"viewPos\", \"vec3\");\r\n        this.cameraUBO.updateItem(\"projectionMatrix\", initMatrix);\r\n        this.cameraUBO.updateItem(\"viewMatrix\", initMatrix);\r\n        this.cameraUBO.updateItem(\"viewPos\", this.translation);\r\n        this.cameraUBO.upload();\r\n        this.cameraUBO.bindUBO();\r\n        this.events.on(SYSTEM_EVENTS.ENTITY_ADDED, this.initEntity, this);\r\n        this.events.on(SYSTEM_EVENTS.ENTITY_REMOVED, this.removeEntity, this);\r\n    }\r\n    initEntity(entity) {\r\n        if (!this._camera) {\r\n            this._camera = entity;\r\n            const camera = this._camera.get(CameraComponent);\r\n            const transform = this._camera.get(TransformComponent);\r\n            this.cameraUBO.updateItem(\"projectionMatrix\", camera.projMatrix);\r\n            this.cameraUBO.updateItem(\"viewMatrix\", camera.viewMatrix);\r\n            this.cameraUBO.updateItem(\"viewPos\", mat4.getTranslation(this.translation, transform.modelMatrix));\r\n            this.cameraUBO.upload();\r\n            this.cameraUBO.bindUBO();\r\n        }\r\n    }\r\n    removeEntity(entity) {\r\n        if (entity === this._camera) {\r\n            this._camera = undefined;\r\n        }\r\n    }\r\n    render() {\r\n        if (this._camera) {\r\n            const camera = this._camera.get(CameraComponent);\r\n            const transform = this._camera.get(TransformComponent);\r\n            this.cameraUBO.updateItem(\"projectionMatrix\", camera.projMatrix, true);\r\n            this.cameraUBO.updateItem(\"viewMatrix\", camera.viewMatrix, true);\r\n            this.cameraUBO.updateItem(\"viewPos\", mat4.getTranslation(this.translation, transform.modelMatrix), true);\r\n        }\r\n    }\r\n    get camera() {\r\n        return this._camera;\r\n    }\r\n    set camera(value) {\r\n        this._camera = value;\r\n    }\r\n};\r\nCameraSystem = __decorate([\r\n    ECS.System(TransformComponent, CameraComponent)\r\n], CameraSystem);\r\nexport { CameraSystem };\r\n//# sourceMappingURL=CameraSystem.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS, System } from \"curbl-ecs\";\r\nimport { AnimationComponent } from \"../../components/scene/animationComponent\";\r\nimport { CACHE_TYPE } from \"../../cache\";\r\nlet AnimationSystem = class AnimationSystem extends System {\r\n    constructor(cache) {\r\n        super();\r\n        this.cache = cache;\r\n    }\r\n    setUp() {\r\n    }\r\n    tearDown() {\r\n    }\r\n    update(t) {\r\n        for (let i = 0, entity; entity = this.entities[i]; i++) {\r\n            const animationComponent = entity.get(AnimationComponent);\r\n            if (animationComponent.autoStart && animationComponent.loop && !animationComponent.running) {\r\n                animationComponent.start();\r\n            }\r\n            const animation = this.cache.get(CACHE_TYPE.ANIMATION, animationComponent.key);\r\n            const pauseDuration = (animationComponent.pauseEnd - animationComponent.pauseStart);\r\n            const time = t - animationComponent.startTime - pauseDuration;\r\n            if (!animationComponent.paused && animationComponent.running) {\r\n                animation.animate(time);\r\n            }\r\n            if (time >= animation.durationMS) {\r\n                animationComponent.stop();\r\n            }\r\n        }\r\n    }\r\n};\r\nAnimationSystem = __decorate([\r\n    ECS.System(AnimationComponent)\r\n], AnimationSystem);\r\nexport { AnimationSystem };\r\n//# sourceMappingURL=AnimationSystem.js.map","import { ECS } from \"curbl-ecs\";\r\nexport class WorldScene {\r\n    constructor(config) {\r\n        this.entities = {};\r\n        this._destroyOnTearDown = config.destroyOnTearDown || false;\r\n        this._name = config.name;\r\n    }\r\n    /**\r\n     * setUp the scene loading necessary elements\r\n     * calls preload and triggers the loader\r\n     * once the loader finished loading the create method is called\r\n     */\r\n    setUp(loader, cache) {\r\n        this._loader = loader;\r\n        this._cache = cache;\r\n        this._active = true;\r\n        this.preload();\r\n        this._loader.onComplete.once(this.create, this);\r\n        this._loader.load();\r\n    }\r\n    /**\r\n     * tearDown the scene removing all Entities from the scene\r\n     * it will destroy all entities if destroyOnTearDown is true{default: false}\r\n     */\r\n    tearDown() {\r\n        this.shutdown();\r\n        this._active = false;\r\n        if (this._destroyOnTearDown) {\r\n            const keys = Object.keys(this.entities);\r\n            for (let i = 0, entity; entity = this.entities[keys[i]]; i++) {\r\n                ECS.destroyEntity(entity);\r\n            }\r\n        }\r\n        else {\r\n            const keys = Object.keys(this.entities);\r\n            for (let i = 0, entity; entity = this.entities[keys[i]]; i++) {\r\n                ECS.removeEntity(entity);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Restore the Scene, adding all Entities previously removed, with their latest values\r\n     */\r\n    restore() {\r\n        for (let i = 0, entity; entity = this.entities[i]; i++) {\r\n            ECS.addEntity(entity);\r\n        }\r\n    }\r\n    /**\r\n     * add Entity to the Scene\r\n     * @param entity\r\n     */\r\n    add(entity) {\r\n        this.entities[entity.id] = ECS.addEntity(entity);\r\n        return entity;\r\n    }\r\n    /**\r\n     * Remove entity from the scene and ecs\r\n     * @param entity\r\n     */\r\n    remove(entity) {\r\n        delete this.entities[entity.id];\r\n        return ECS.removeEntity(entity);\r\n    }\r\n    /**\r\n     * Destroy entity, removes it from the scene and ecs and removes all components\r\n     */\r\n    destroy(entity) {\r\n        delete this.entities[entity.id];\r\n        return ECS.destroyEntity(entity);\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get destroyOnTearDown() {\r\n        return this._destroyOnTearDown;\r\n    }\r\n    set destroyOnTearDown(value) {\r\n        this._destroyOnTearDown = value;\r\n    }\r\n    get active() {\r\n        return this._active;\r\n    }\r\n    set active(value) {\r\n        this._active = value;\r\n    }\r\n    get loader() {\r\n        return this._loader;\r\n    }\r\n    set loader(value) {\r\n        this._loader = value;\r\n    }\r\n    get cache() {\r\n        return this._cache;\r\n    }\r\n    set cache(value) {\r\n        this._cache = value;\r\n    }\r\n}\r\n//# sourceMappingURL=worldScene.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ECS, System } from \"curbl-ecs\";\r\nimport { WorldScene } from \"./worldScene\";\r\nlet WorldSystem = class WorldSystem extends System {\r\n    constructor(config) {\r\n        super();\r\n        this._loader = config.loader;\r\n        this._cache = config.cache;\r\n    }\r\n    setUp() {\r\n        this._scenes = Object.create(null);\r\n    }\r\n    tearDown() {\r\n        const keys = Object.keys(this._scenes);\r\n        for (let i = 0, scene; scene = this._scenes[keys[i]]; i++) {\r\n            this.removeScene(scene);\r\n        }\r\n    }\r\n    update() {\r\n        const keys = Object.keys(this._scenes);\r\n        for (let i = 0, scene; scene = this._scenes[keys[i]]; i++) {\r\n            if (scene.active) {\r\n                scene.update();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Return the key of the given scene\r\n     * @param scene\r\n     */\r\n    getKey(scene) {\r\n        let key = scene;\r\n        if (scene instanceof WorldScene) {\r\n            key = scene.name;\r\n        }\r\n        return key;\r\n    }\r\n    addScene(scene) {\r\n        this._scenes[scene.name] = scene;\r\n        return scene;\r\n    }\r\n    removeScene(scene) {\r\n        const key = this.getKey(scene);\r\n        const sceneObj = this._scenes[key];\r\n        sceneObj.tearDown();\r\n        delete this._scenes[key];\r\n        return sceneObj;\r\n    }\r\n    start(scene) {\r\n        const key = this.getKey(scene);\r\n        this._scenes[key].setUp(this._loader, this._cache);\r\n        return this._scenes[key];\r\n    }\r\n    stop(scene) {\r\n        const key = this.getKey(scene);\r\n        this._scenes[key].tearDown();\r\n        return this._scenes[key];\r\n    }\r\n    restore(scene) {\r\n        const key = this.getKey(scene);\r\n        this._scenes[key].restore();\r\n        return this._scenes[key];\r\n    }\r\n};\r\nWorldSystem = __decorate([\r\n    ECS.System()\r\n], WorldSystem);\r\nexport { WorldSystem };\r\n//# sourceMappingURL=worldSystem.js.map","import { Canvas } from \"../canvas/Canvas\";\r\nimport { ResourceLoader } from \"curbl-loader\";\r\nimport { CubemapLoader } from \"../loader/CubemapLoader\";\r\nimport { TextureLoader } from \"../loader/TextureLoader\";\r\nimport { GLTFLoader } from \"../loader/GLTFLoader\";\r\nimport { BaseCache, Cache, CACHE_TYPE } from \"../cache\";\r\nimport { GLTexture } from \"../gl\";\r\nimport { Material, MATERIAL_MAPS, Materialmap } from \"../material\";\r\nimport { ECS } from \"curbl-ecs\";\r\nimport { GLSLLoader } from \"../loader/GLSLLoader\";\r\nimport { KhronosPbrShader } from \"../shader/khronosPbrShader\";\r\nimport { SkyboxShader } from \"../shader/SkyboxShader\";\r\nimport { SkyboxPass } from \"../systems/rendering/SkyboxPass\";\r\nimport { ForwardShadingSystem } from \"../systems/rendering/ForwardShadingSystem\";\r\nimport { PrePass } from \"../systems/rendering/PrePass\";\r\nimport { GUISystem } from \"../systems/gui/GUISystem\";\r\nimport { LookAtCameraControlSystem } from \"../systems/camera/LookAtCameraControlSystem\";\r\nimport { CameraSystem } from \"../systems/camera/CameraSystem\";\r\nimport { MetallicRoughness } from \"../material/metallicRoughness\";\r\nimport { vec4 } from \"gl-matrix\";\r\nimport { AnimationSystem } from \"../systems/animation/AnimationSystem\";\r\nimport { WorldSystem } from \"../systems/world/worldSystem\";\r\nexport class Viewer {\r\n    constructor(config = { width: 1280, height: 720 }) {\r\n        this._canvas = new Canvas({ width: config.width, height: config.height });\r\n        this._loader = new ResourceLoader();\r\n        this._cache = new Cache();\r\n    }\r\n    init(onLoaded) {\r\n        this._canvas.appendCanvas(\"root\");\r\n        const gl = this._canvas.context;\r\n        this._gl = gl;\r\n        //Create cache\r\n        this._cache.addCache(CACHE_TYPE.MATERIAL, new BaseCache());\r\n        this._cache.addCache(CACHE_TYPE.MESH, new BaseCache());\r\n        this._cache.addCache(CACHE_TYPE.TEXTURE, new BaseCache());\r\n        this._cache.addCache(CACHE_TYPE.SCENE, new BaseCache());\r\n        this._cache.addCache(CACHE_TYPE.ANIMATION, new BaseCache());\r\n        //Set loader Middlewares\r\n        this._loader.addMiddleware(new CubemapLoader(gl), CubemapLoader);\r\n        this._loader.addMiddleware(new TextureLoader(gl), TextureLoader);\r\n        this._loader.addMiddleware(new GLTFLoader(gl, this._cache), GLTFLoader);\r\n        this._loader.addMiddleware(new GLSLLoader(gl), GLSLLoader);\r\n        //Cache them all\r\n        this._loader.onLoadComplete.on((data) => {\r\n            this._cache.add(data.type, data.key, data.data);\r\n        });\r\n        this.defaultMaterial();\r\n        //Create shader\r\n        this._shader = new KhronosPbrShader(this._gl, this._cache);\r\n        this._skyboxShader = new SkyboxShader(this._gl, this._cache);\r\n        //Load shader\r\n        this._loader.get(GLSLLoader).add(\"shader\", \"../assets/shader/pbr-vert.glsl\", \"../assets/shader/pbr-frag.glsl\", this._shader);\r\n        this._loader.get(GLSLLoader).add(\"skyboxShader\", \"../assets/shader/skybox-vert.glsl\", \"../assets/shader/skybox-frag.glsl\", this._skyboxShader);\r\n        this.load(onLoaded);\r\n    }\r\n    defaultMaterial() {\r\n        const gl = this._gl;\r\n        const texture = GLTexture.fromData(gl, new Uint8Array([128, 128, 128, 255]), 1, 1, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE);\r\n        texture.enableNearestScaling();\r\n        texture.enableWrapClamp();\r\n        this._cache.getCache(CACHE_TYPE.TEXTURE).add('__default__', texture);\r\n        const mat = new MetallicRoughness();\r\n        mat.baseColorFactor = vec4.fromValues(0.5, 0.5, 0.5, 1);\r\n        const material = new Material(name, mat);\r\n        material.maps[MATERIAL_MAPS.ALBEDO] = new Materialmap('__default__');\r\n        this._cache.getCache(CACHE_TYPE.MATERIAL).add('__default__', material);\r\n    }\r\n    createSystems() {\r\n        //Create Systems\r\n        ECS.systemUpdateMethods = ['update', 'render'];\r\n        this._world = ECS.addSystem(new WorldSystem({ loader: this._loader, cache: this._cache }));\r\n        ECS.addSystem(new CameraSystem({ gl: this._gl }));\r\n        ECS.addSystem(new LookAtCameraControlSystem(this._canvas));\r\n        ECS.addSystem(new GUISystem());\r\n        ECS.addSystem(new AnimationSystem(this._cache));\r\n        ECS.addSystem(new PrePass(this._gl));\r\n        ECS.addSystem(new ForwardShadingSystem({ gl: this._gl, cache: this._cache, shader: this._shader }));\r\n        ECS.addSystem(new SkyboxPass({ gl: this._gl, cache: this._cache, shader: this._skyboxShader }));\r\n    }\r\n    load(onLoaded) {\r\n        this._loader.load(() => {\r\n            this._shader.upload();\r\n            this._skyboxShader.upload();\r\n            this.createSystems();\r\n            onLoaded();\r\n            this.update(0);\r\n        });\r\n    }\r\n    update(t) {\r\n        ECS.update(t);\r\n        requestAnimationFrame((t) => { this.update(t); });\r\n    }\r\n    get cache() {\r\n        return this._cache;\r\n    }\r\n    set cache(value) {\r\n        this._cache = value;\r\n    }\r\n    get canvas() {\r\n        return this._canvas;\r\n    }\r\n    set canvas(value) {\r\n        this._canvas = value;\r\n    }\r\n    get loader() {\r\n        return this._loader;\r\n    }\r\n    set loader(value) {\r\n        this._loader = value;\r\n    }\r\n    get gl() {\r\n        return this._gl;\r\n    }\r\n    set gl(value) {\r\n        this._gl = value;\r\n    }\r\n    get shader() {\r\n        return this._shader;\r\n    }\r\n    set shader(value) {\r\n        this._shader = value;\r\n    }\r\n    get skyboxShader() {\r\n        return this._skyboxShader;\r\n    }\r\n    set skyboxShader(value) {\r\n        this._skyboxShader = value;\r\n    }\r\n    get world() {\r\n        return this._world;\r\n    }\r\n    set world(value) {\r\n        this._world = value;\r\n    }\r\n}\r\n//# sourceMappingURL=Viewer.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./constants\";\r\nexport * from \"./Viewer\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./Canvas\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./DomEvents\";\r\nexport * from \"./EmitSignal\";\r\n//# sourceMappingURL=index.js.map","export var ALPHA_MODE;\r\n(function (ALPHA_MODE) {\r\n    ALPHA_MODE[\"OPAQUE\"] = \"OPAQUE\";\r\n    ALPHA_MODE[\"MASK\"] = \"MASK\";\r\n    ALPHA_MODE[\"BLEND\"] = \"BLEND\";\r\n})(ALPHA_MODE || (ALPHA_MODE = {}));\r\n//# sourceMappingURL=GLTF_Material.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./GLTF_Material\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./Base64Binary\";\r\nexport * from \"./GLTFAccessorProcessor\";\r\nexport * from \"./GLTFAnimationProcessor\";\r\nexport * from \"./GLTFMaterialProcessor\";\r\nexport * from \"./GLTFMeshProcessor\";\r\nexport * from \"./GLTFModel\";\r\nexport * from \"./GLTFNodeProcessor\";\r\nexport * from \"./GLTFParser\";\r\nexport * from \"./GLTFSceneProcessor\";\r\nexport * from \"./GLTFSkinProcessor\";\r\nexport * from \"./model/index\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./CubemapLoader\";\r\nexport * from \"./GLSLLoader\";\r\nexport * from \"./GLTFLoader\";\r\nexport * from \"./TextureLoader\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./khronosPbrShader\";\r\nexport * from \"./SkyboxShader\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./AnimationSystem\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./CameraSystem\";\r\nexport * from \"./LookAtCameraControlSystem\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./GUISystem\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./ForwardLightPass\";\r\nexport * from \"./ForwardScenePass\";\r\nexport * from \"./ForwardShadingSystem\";\r\nexport * from \"./PrePass\";\r\nexport * from \"./SkyboxPass\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./worldScene\";\r\nexport * from \"./worldSystem\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./animation/index\";\r\nexport * from \"./camera/index\";\r\nexport * from \"./gui/index\";\r\nexport * from \"./rendering/index\";\r\nexport * from \"./world/index\";\r\n//# sourceMappingURL=index.js.map","/**\r\n * @file Automatically generated by barrelsby.\r\n */\r\nexport * from \"./cache/index\";\r\nexport * from \"./canvas/index\";\r\nexport * from \"./components/index\";\r\nexport * from \"./events/index\";\r\nexport * from \"./gl/index\";\r\nexport * from \"./gltf/index\";\r\nexport * from \"./loader/index\";\r\nexport * from \"./material/index\";\r\nexport * from \"./math/index\";\r\nexport * from \"./scene/index\";\r\nexport * from \"./shader/index\";\r\nexport * from \"./systems/index\";\r\nexport * from \"./viewer/index\";\r\n//# sourceMappingURL=index.js.map","import {\r\n    WorldScene,\r\n    CubemapLoader,\r\n    GLOBAL_TEXTURES,\r\n    GL_INTERNALFORMAT,\r\n    GL_TYPES,\r\n    MAG_FILTER,\r\n    MIN_FILTER,\r\n    TEXTURE_WRAP,\r\n    LightComponent,\r\n    GUIComponent,\r\n    TextureLoader\r\n} from \"../../../lib\";\r\nimport {ECS} from \"curbl-ecs\";\r\n\r\nexport class EnvironmentScene extends WorldScene {\r\n    preload(): void {\r\n        this.loader.get(CubemapLoader).add(GLOBAL_TEXTURES.SKYBOX,\r\n            [{\r\n                right:'./assets/ibl/environment/environment_right_0.jpg',\r\n                left:'./assets/ibl/environment/environment_left_0.jpg',\r\n                top:'./assets/ibl/environment/environment_top_0.jpg',\r\n                bottom:'./assets/ibl/environment/environment_bottom_0.jpg',\r\n                front:'./assets/ibl/environment/environment_front_0.jpg',\r\n                back:'./assets/ibl/environment/environment_back_0.jpg'\r\n            }]\r\n        );\r\n\r\n        this.loader.get(CubemapLoader).add(GLOBAL_TEXTURES.DIFFUSE_ENVIRONMENT,\r\n            [{\r\n                right:'./assets/ibl/diffuse/diffuse_right_0.jpg',\r\n                left:'./assets/ibl/diffuse/diffuse_left_0.jpg',\r\n                top:'./assets/ibl/diffuse/diffuse_top_0.jpg',\r\n                bottom:'./assets/ibl/diffuse/diffuse_bottom_0.jpg',\r\n                front:'./assets/ibl/diffuse/diffuse_front_0.jpg',\r\n                back:'./assets/ibl/diffuse/diffuse_back_0.jpg'\r\n            }],\r\n            {\r\n                premultiplyAlpha: false,\r\n                internalFormat: GL_INTERNALFORMAT.SRGB8_ALPHA8,\r\n                format: GL_INTERNALFORMAT.RGBA,\r\n                type:GL_TYPES.UNSIGNED_BYTE\r\n            }\r\n        );\r\n\r\n        let specular_map = [];\r\n        for(let i=0; i < 10; i++){\r\n            specular_map.push({\r\n                right:'./assets/ibl/specular/specular_right_'+i+'.jpg',\r\n                left:'./assets/ibl/specular/specular_left_'+i+'.jpg',\r\n                top:'./assets/ibl/specular/specular_top_'+i+'.jpg',\r\n                bottom:'./assets/ibl/specular/specular_bottom_'+i+'.jpg',\r\n                front:'./assets/ibl/specular/specular_front_'+i+'.jpg',\r\n                back:'./assets/ibl/specular/specular_back_'+i+'.jpg'\r\n            });\r\n        }\r\n\r\n        this.loader.get(CubemapLoader).add(GLOBAL_TEXTURES.SPECULAR_ENVIRONMENT, specular_map, {\r\n            premultiplyAlpha: false,\r\n            internalFormat: GL_INTERNALFORMAT.SRGB8_ALPHA8,\r\n            format: GL_INTERNALFORMAT.RGBA,\r\n            type:GL_TYPES.UNSIGNED_BYTE\r\n        });\r\n\r\n        this.loader.get(TextureLoader).add(GLOBAL_TEXTURES.BRDF_LUT, \"./assets/ibl/brdfLUT.png\", {\r\n            premultiplyAlpha: false,\r\n            internalFormat: GL_INTERNALFORMAT.SRGB8_ALPHA8,\r\n            format: GL_INTERNALFORMAT.RGBA,\r\n            type:GL_TYPES.UNSIGNED_BYTE,\r\n            sampler: {\r\n                magFilter:MAG_FILTER.LINEAR,\r\n                minFilter:MIN_FILTER.LINEAR,\r\n                wrapS:TEXTURE_WRAP.CLAMP_TO_EDGE,\r\n                wrapT:TEXTURE_WRAP.CLAMP_TO_EDGE\r\n            }\r\n        });\r\n    }\r\n\r\n    create(): void {\r\n        const entity = ECS.createEntity();\r\n        const lightComponent = new LightComponent({\r\n            lightColor: [255, 255, 255],\r\n            lightScale: 1.0,\r\n            lightRotation: 75,\r\n            lightPitch: 40\r\n        });\r\n        entity.add(lightComponent);\r\n        entity.add(new GUIComponent({\r\n            folder: \"Directional Light\",\r\n            properties: [\r\n                {\r\n                    prop: lightComponent,\r\n                    propName: \"lightColor\",\r\n                    isColor: true,\r\n                    onChange: ()=>lightComponent.updateLight()\r\n                },\r\n                {\r\n                    prop: lightComponent,\r\n                    propName: \"lightScale\",\r\n                    min: 0,\r\n                    max: 10,\r\n                    onChange: ()=>lightComponent.updateLight()\r\n                },\r\n                {\r\n                    prop: lightComponent,\r\n                    propName: \"lightRotation\",\r\n                    min: 0,\r\n                    max: 360,\r\n                    onChange: ()=>lightComponent.updateLight()\r\n                },\r\n                {\r\n                    prop: lightComponent,\r\n                    propName: \"lightPitch\",\r\n                    min: -90,\r\n                    max: 90,\r\n                    onChange: ()=>lightComponent.updateLight()\r\n                }\r\n            ]\r\n        }));\r\n        this.add(entity);\r\n    }\r\n\r\n    shutdown(): void {\r\n    }\r\n\r\n    update(): void {\r\n    }\r\n}","import {\r\n    AnimationComponent,\r\n    CACHE_TYPE,\r\n    GLTFLoader,\r\n    KhronosPbrShader,\r\n    Scene,\r\n    SceneComponent,\r\n    SceneConfig,\r\n    TransformComponent,\r\n    WorldScene\r\n} from \"../../../lib\";\r\nimport {ECS} from \"curbl-ecs\";\r\n\r\nexport interface ModelSceneConfig extends SceneConfig {\r\n    gltfJson: string;\r\n    gltfBin: string;\r\n    shader: KhronosPbrShader\r\n}\r\n\r\nexport class ModelScene extends WorldScene {\r\n\r\n    private gltfJson:string;\r\n    private gltfBin:string;\r\n    private shader:KhronosPbrShader;\r\n\r\n    constructor(config: ModelSceneConfig) {\r\n        super(config);\r\n        this.gltfJson = config.gltfJson;\r\n        this.gltfBin = config.gltfBin;\r\n        this.shader = config.shader;\r\n    }\r\n\r\n    preload(): void {\r\n        this.loader.get(GLTFLoader).add(\r\n            \"ExampleScene\",\r\n            this.gltfJson,\r\n            this.gltfBin\r\n        );\r\n    }\r\n\r\n    create(): void {\r\n        const sceneObj = this.cache.get<Scene>(CACHE_TYPE.SCENE, \"ExampleScene\");\r\n\r\n        this.shader.unload();\r\n        this.shader.initializeDefines(sceneObj.meshes[0]);\r\n        this.shader.upload();\r\n\r\n        const scene = ECS.createEntity();\r\n        scene.add(new SceneComponent({key: \"ExampleScene\"}));\r\n        scene.add(new TransformComponent({\r\n            position: {x:0, y:0, z:0},\r\n            rotation: {x:0, y:0, z:0, w:1},\r\n            scale: {x:1, y:1, z:1}\r\n        }));\r\n        if(sceneObj.animations[0]) {\r\n            const animationKey = sceneObj.animations[0].name;\r\n            scene.add(new AnimationComponent({key: animationKey}));\r\n        }\r\n        this.add(scene);\r\n    }\r\n\r\n    shutdown(): void {\r\n    }\r\n\r\n    update(): void {\r\n    }\r\n\r\n}","import {Viewer} from \"../../lib/viewer\";\r\nimport {EnvironmentScene} from \"./scenes/EnvironmentScene\";\r\nimport {ModelScene} from \"./scenes/ModelScene\";\r\nimport {GUIComponent} from \"../../lib/components/gui\";\r\nimport {ECS, IEntity} from \"curbl-ecs\";\r\nimport {CameraComponent, LookAtCameraComponent} from \"../../lib/components/camera\";\r\nimport {TransformComponent} from \"../../lib/components/transform\";\r\nimport {mat4} from \"gl-matrix\";\r\n\r\nconst sampleModels = {\r\n    \"BoxAnimated\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BoxAnimated/glTF/BoxAnimated.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BoxAnimated/glTF/BoxAnimated0.bin\"\r\n    },\r\n    \"RiggedSimple\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/RiggedSimple/glTF/RiggedSimple.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/RiggedSimple/glTF/RiggedSimple0.bin\"\r\n    },\r\n    \"BrainStem\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BrainStem/glTF/BrainStem.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BrainStem/glTF/BrainStem0.bin\"\r\n    },\r\n    \"WaterBottle\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/WaterBottle/glTF/WaterBottle.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/WaterBottle/glTF/WaterBottle.bin\"\r\n    },\r\n    \"Sponza\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Sponza/glTF/Sponza.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Sponza/glTF/Sponza.bin\"\r\n    },\r\n    \"DamagedHelmet\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/DamagedHelmet/glTF/DamagedHelmet.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/DamagedHelmet/glTF/DamagedHelmet.bin\"\r\n    },\r\n    \"MetalRoughSpheres\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/MetalRoughSpheres/glTF/MetalRoughSpheres.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/MetalRoughSpheres/glTF/MetalRoughSpheres0.bin\"\r\n    }\r\n};\r\n\r\nexport class Example {\r\n    private camera:IEntity;\r\n    private viewer: Viewer;\r\n    private scene: string;\r\n\r\n    constructor() {\r\n        this.scene = \"DamagedHelmet\";\r\n        this.viewer = new Viewer({width:window.innerWidth, height:window.innerHeight});\r\n        this.viewer.init(()=>this.init());\r\n    }\r\n\r\n    private init() {\r\n        this.createSceneSelector();\r\n        this.createCamera();\r\n\r\n        this.viewer.world.addScene(new EnvironmentScene({name: \"Environment\"}));\r\n\r\n        this.viewer.world.addScene(new ModelScene({\r\n            name: \"ModelScene\",\r\n            gltfJson: sampleModels[this.scene].gltfJson,\r\n            gltfBin: sampleModels[this.scene].gltfBin,\r\n            shader: this.viewer.shader\r\n        }));\r\n\r\n        this.viewer.world.start(\"Environment\");\r\n        this.viewer.world.start(\"ModelScene\");\r\n    }\r\n\r\n    private reloadModelScene() {\r\n        this.viewer.loader.stop();\r\n        this.viewer.world.removeScene(\"ModelScene\");\r\n\r\n        this.viewer.world.addScene(new ModelScene({\r\n            name: \"ModelScene\",\r\n            gltfJson: sampleModels[this.scene].gltfJson,\r\n            gltfBin: sampleModels[this.scene].gltfBin,\r\n            shader: this.viewer.shader\r\n        }));\r\n\r\n        this.viewer.world.start(\"ModelScene\");\r\n    }\r\n\r\n    private createCamera() {\r\n        this.camera = ECS.createEntity();\r\n        this.camera.add(new CameraComponent({\r\n            aspect: (window.innerWidth/window.innerHeight),\r\n            fovy: 45.0 * Math.PI / 180.0,\r\n            near: 0.01,\r\n            far: 100.0\r\n        }));\r\n        this.camera.add(new TransformComponent({\r\n            position: {x:0,y:0,z:-4.00},\r\n            rotation: {x:0,y:0,z:0,w:1},\r\n            scale: {x:1,y:1,z:1}\r\n        }));\r\n        this.camera.add(new LookAtCameraComponent());\r\n        ECS.addEntity(this.camera);\r\n\r\n        window.addEventListener('resize', () => this.onResize());\r\n    }\r\n\r\n    private onResize() {\r\n        if(this.camera) {\r\n            mat4.perspective(\r\n                this.camera.get(CameraComponent).projMatrix,\r\n                45.0 * Math.PI / 180.0,\r\n                (window.innerWidth / window.innerHeight),\r\n                0.01,\r\n                100\r\n            );\r\n        }\r\n    }\r\n\r\n    private createSceneSelector() {\r\n        const entity = ECS.createEntity();\r\n        entity.add(new GUIComponent({\r\n            properties: [\r\n                {\r\n                    prop: this,\r\n                    propName: \"scene\",\r\n                    items: Object.keys(sampleModels),\r\n                    onChange: ()=>this.reloadModelScene()\r\n                }\r\n            ]\r\n        }));\r\n        ECS.addEntity(entity);\r\n    }\r\n}","import {Example} from \"./example\";\r\n\r\nwindow.onload = () => {new Example();};"],"sourceRoot":""}