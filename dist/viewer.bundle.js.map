{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/cache/cache.ts","webpack:///../src/cache/caches/baseCache.ts","webpack:///../src/cache/caches/index.ts","webpack:///../src/cache/index.ts","webpack:///../src/canvas/Canvas.ts","webpack:///../src/canvas/index.ts","webpack:///../src/components/camera/cameraComponent.ts","webpack:///../src/components/camera/index.ts","webpack:///../src/components/camera/lookAtCameraComponent.ts","webpack:///../src/components/gui/GUIComponent.ts","webpack:///../src/components/gui/index.ts","webpack:///../src/components/index.ts","webpack:///../src/components/light/index.ts","webpack:///../src/components/light/lightComponent.ts","webpack:///../src/components/renderer/index.ts","webpack:///../src/components/renderer/skyboxComponent.ts","webpack:///../src/components/scene/animationComponent.ts","webpack:///../src/components/scene/index.ts","webpack:///../src/components/scene/sceneComponent.ts","webpack:///../src/components/transform/index.ts","webpack:///../src/components/transform/transformComponent.ts","webpack:///../src/events/DomEvents.ts","webpack:///../src/events/EmitSignal.ts","webpack:///../src/events/index.ts","webpack:///../src/gl/GLBuffer.ts","webpack:///../src/gl/GLCubemap.ts","webpack:///../src/gl/GLFramebuffer.ts","webpack:///../src/gl/GLTexture.ts","webpack:///../src/gl/GLUniformBufferObject.ts","webpack:///../src/gl/GLVertexArrayObject.ts","webpack:///../src/gl/constants/GLConstants.ts","webpack:///../src/gl/constants/index.ts","webpack:///../src/gl/gl_util/defaultValue.ts","webpack:///../src/gl/gl_util/glGet.ts","webpack:///../src/gl/gl_util/index.ts","webpack:///../src/gl/gl_util/mapSize.ts","webpack:///../src/gl/gl_util/mapType.ts","webpack:///../src/gl/gl_util/webglUtil.ts","webpack:///../src/gl/index.ts","webpack:///../src/gl/primitives/GLCube.ts","webpack:///../src/gl/primitives/GLQuad.ts","webpack:///../src/gl/primitives/GLSphere.ts","webpack:///../src/gl/primitives/GLWiredCube.ts","webpack:///../src/gl/shader/GLAttribute.ts","webpack:///../src/gl/shader/GLShader.ts","webpack:///../src/gl/shader/index.ts","webpack:///../src/gl/shader/programCompiler.ts","webpack:///../src/gl/shader/uniform.ts","webpack:///../src/gltf/Base64Binary.ts","webpack:///../src/gltf/GLTFAccessorProcessor.ts","webpack:///../src/gltf/GLTFAnimationProcessor.ts","webpack:///../src/gltf/GLTFBufferViewProcessor.ts","webpack:///../src/gltf/GLTFMaterialProcessor.ts","webpack:///../src/gltf/GLTFMeshProcessor.ts","webpack:///../src/gltf/GLTFModel.ts","webpack:///../src/gltf/GLTFNodeProcessor.ts","webpack:///../src/gltf/GLTFParser.ts","webpack:///../src/gltf/GLTFPrimitiveProcessor.ts","webpack:///../src/gltf/GLTFSceneProcessor.ts","webpack:///../src/gltf/GLTFSkinProcessor.ts","webpack:///../src/gltf/index.ts","webpack:///../src/gltf/model/index.ts","webpack:///../src/index.ts","webpack:///../src/loader/CubemapLoader.ts","webpack:///../src/loader/GLSLLoader.ts","webpack:///../src/loader/GLTFLoader.ts","webpack:///../src/loader/TextureLoader.ts","webpack:///../src/loader/index.ts","webpack:///../src/material/index.ts","webpack:///../src/material/material.ts","webpack:///../src/material/materialmap.ts","webpack:///../src/material/metallicRoughness.ts","webpack:///../src/math/color.ts","webpack:///../src/math/index.ts","webpack:///../src/math/math.ts","webpack:///../src/model/animation/animation.ts","webpack:///../src/model/animation/animationChannel.ts","webpack:///../src/model/animation/animationSampler.ts","webpack:///../src/model/animation/index.ts","webpack:///../src/model/bvh/boundingBox.ts","webpack:///../src/model/bvh/bvhNode.ts","webpack:///../src/model/bvh/frustum.ts","webpack:///../src/model/data/accessor.ts","webpack:///../src/model/data/bufferView.ts","webpack:///../src/model/data/index.ts","webpack:///../src/model/index.ts","webpack:///../src/model/mesh/index.ts","webpack:///../src/model/mesh/mesh.ts","webpack:///../src/model/mesh/primitive.ts","webpack:///../src/model/model.ts","webpack:///../src/model/skin/index.ts","webpack:///../src/model/skin/skin.ts","webpack:///../src/model/transform.ts","webpack:///../src/shader/BBoxShader.ts","webpack:///../src/shader/SkyboxShader.ts","webpack:///../src/shader/index.ts","webpack:///../src/shader/khronosPbrShader.ts","webpack:///../src/shader/shader.ts","webpack:///../src/systems/animation/AnimationSystem.ts","webpack:///../src/systems/animation/index.ts","webpack:///../src/systems/camera/CameraSystem.ts","webpack:///../src/systems/camera/LookAtCameraControlSystem.ts","webpack:///../src/systems/camera/index.ts","webpack:///../src/systems/gui/GUISystem.ts","webpack:///../src/systems/gui/index.ts","webpack:///../src/systems/index.ts","webpack:///../src/systems/rendering/DebugBVHThreePass.ts","webpack:///../src/systems/rendering/ForwardLightPass.ts","webpack:///../src/systems/rendering/ForwardScenePass.ts","webpack:///../src/systems/rendering/ForwardShadingSystem.ts","webpack:///../src/systems/rendering/PrePass.ts","webpack:///../src/systems/rendering/SkyboxPass.ts","webpack:///../src/systems/rendering/index.ts","webpack:///../src/systems/world/index.ts","webpack:///../src/systems/world/worldScene.ts","webpack:///../src/systems/world/worldSystem.ts","webpack:///../src/viewer/Viewer.ts","webpack:///../src/viewer/constants.ts","webpack:///../src/viewer/index.ts","webpack:///../node_modules/curbl-ecs/lib/Component.js","webpack:///../node_modules/curbl-ecs/lib/ECS.js","webpack:///../node_modules/curbl-ecs/lib/Entity.js","webpack:///../node_modules/curbl-ecs/lib/EntityComponentManager.js","webpack:///../node_modules/curbl-ecs/lib/EntitySystemManager.js","webpack:///../node_modules/curbl-ecs/lib/Events.js","webpack:///../node_modules/curbl-ecs/lib/InjectorService.js","webpack:///../node_modules/curbl-ecs/lib/System.js","webpack:///../node_modules/curbl-ecs/lib/UUIDGenerator.js","webpack:///../node_modules/curbl-ecs/lib/index.js","webpack:///../node_modules/curbl-loader/lib/AsyncWorkerQueue.js","webpack:///../node_modules/curbl-loader/lib/EmitSignal.js","webpack:///../node_modules/curbl-loader/lib/Middleware.js","webpack:///../node_modules/curbl-loader/lib/Resource.js","webpack:///../node_modules/curbl-loader/lib/ResourceLoader.js","webpack:///../node_modules/curbl-loader/lib/index.js","webpack:///../src/dat/color/toString.js","webpack:///../src/dat/utils/common.js","webpack:///../src/dat/color/interpret.js","webpack:///../src/dat/color/math.js","webpack:///../src/dat/color/Color.js","webpack:///../src/dat/controllers/Controller.js","webpack:///../src/dat/dom/dom.js","webpack:///../src/dat/controllers/BooleanController.js","webpack:///../src/dat/controllers/OptionController.js","webpack:///../src/dat/controllers/StringController.js","webpack:///../src/dat/controllers/NumberController.js","webpack:///../src/dat/controllers/NumberControllerBox.js","webpack:///../src/dat/controllers/NumberControllerSlider.js","webpack:///../src/dat/controllers/FunctionController.js","webpack:///../src/dat/controllers/ColorController.js","webpack:///../src/dat/utils/css.js","webpack:///../src/dat/gui/saveDialogue.html.js","webpack:///../src/dat/controllers/ControllerFactory.js","webpack:///../src/dat/utils/requestAnimationFrame.js","webpack:///../src/dat/dom/CenteredDiv.js","webpack:///../src/dat/gui/GUI.js","webpack:///../src/dat/index.js","webpack:///../node_modules/eventemitter3/index.js","webpack:///../node_modules/gl-matrix/esm/common.js","webpack:///../node_modules/gl-matrix/esm/index.js","webpack:///../node_modules/gl-matrix/esm/mat2.js","webpack:///../node_modules/gl-matrix/esm/mat2d.js","webpack:///../node_modules/gl-matrix/esm/mat3.js","webpack:///../node_modules/gl-matrix/esm/mat4.js","webpack:///../node_modules/gl-matrix/esm/quat.js","webpack:///../node_modules/gl-matrix/esm/quat2.js","webpack:///../node_modules/gl-matrix/esm/vec2.js","webpack:///../node_modules/gl-matrix/esm/vec3.js","webpack:///../node_modules/gl-matrix/esm/vec4.js","webpack:///./src/example.ts","webpack:///./src/index.ts","webpack:///./src/scenes/EnvironmentScene.ts","webpack:///./src/scenes/ModelScene.ts"],"names":["Object","defineProperty","exports","value","ECS_1","require","ComponentBitmaskMap","bitmaskMap","create","prototype","has","component","constructor","name","add","size","get","keys","length","enumerable","configurable","COMPONENT_PROPERTIES","COMPONENT_PROTOTYPE","init","ECS","noop","remove","COMPONENT_PROPERTY_DECORATOR","injectComponent","propKey","undefined","protoKey","Entity_1","EntityComponentManager_1","Component_1","System_1","EntitySystemManager_1","InjectorService_1","EventEmitter","Events_1","componentBitmaskMap","events","ecm","EntityComponentManager","scm","EntitySystemManager","registerEvents","on","ECM_EVENTS","ENTITY_ADDED","onEntityAdded","ENTITY_REMOVED","onEntityRemoved","ENTITY_DESTROYED","onEntityDestroyed","COMPONENT_ADDED","onComponentAdded","COMPONENT_REMOVED","onComponentRemoved","ESM_EVENTS","SYSTEM_ADDED","onSystemAdded","entity","instance","updateEntity","removeEntity","system","id","entities","_instance","setPrototypeOf","obj","proto","fn","__proto__","InjectorService","createEntity","components","addEntity","getEntities","_i","arguments","_a","apply","removeAllEntities","destroyEntity","pool","destroyAllEntities","hasEntity","removeComponent","addComponent","addSystem","componentMask","hasSystem","hasSystemOf","hasOf","removeSystem","removeSystemOf","removeOf","getSystemComponentMaskOf","getComponentMaskOf","removeEntityFromSystem","getSystem","update","a1","a2","a3","a4","a5","a6","a7","a8","a9","callSystemMethod","functionName","createComponentsFromDecorator","comps","components_1","dec","config","Component","DecoratorComponent","args","bind","concat","getPrototypeOf","System","DecoratorSystem","injectSystem","systemUpdateMethods","updateBitmask","Entity","DecoratorEntity","injectEntity","uuid","set","methods","ENTITY_PROPERTIES","bitmask","ENTITY_PROTOTYPE","getAll","dispose","destroy","ENTITY_PROPERTY_DECORATOR","UUIDGenerator_1","UUIDGenerator","_events","_uuid","componentBitmask","_entities","updateComponentBitmask","key","silent","emit","i","push","comp","_systemUpdateMethods","systems","ids","setUp","console","warn","SYSTEM_REMOVED","tearDown","splice","indexOf","getEntitiesOf","SYSTEM_EVENTS","system_1","ENTITY_ADDED_TO_SYSTEM","idx","system_2","ENTITY_REMOVED_FROM_SYSTEM","addEntityToSystem","system_3","method","updateSystemMethods","wrapper","DecoratorInjector","object","SYSTEM_PROTOTYPE","SYSTEM_PROPERTIES","SYSTEM_PROPERTY_DECORATOR","updateMethods","fromECS","replace","Math","random","toString","__export","m","p","hasOwnProperty","_noop","AsyncWorkerQueue","concurrency","paused","processes","workers","tasks","process","finishCb","_this","_loop_1","task","this_1","shift","listener","listenerContext","next","processContext","enqueue","worker","count","onWorkFinished","completed","dequeue","index","k","taskIndex","idle","workerFinished","onQueueFinished","resources","map","resource","onWorkFinishedContext","abort","j","stop","pause","resume","EmitSignal","emitter","type","_type","_emitter","dispatch","context","once","addOnce","removeAllListeners","removeListener","RESOURCE_LOADER_EVENTS","RESOURCE_LOADER_PROPERTIES","onLoad","LOAD_COMPLETE","RESOURCE_LOADER_PROTOTYPE","transform","Middleware","addResourceToQueue","_queueCallback","inject","middleware","url","Resource","slice","_loader","_addResourceToQueue","onResourcesLoaded","onResourcesLoadedContext","data","request","__assign","assign","t","s","n","call","RESOURCE_EVENT","LOAD_TYPE","options","loadType","XHR","responseType","onProgress","PROGRESS","onLoadStart","LOAD_START","onLoadFinished","onError","ERROR","onAbort","ABORT","onTimeout","TIMEOUT","loadXhr","XMLHttpRequest","timeout","open","async","addEventListener","event","send","loadImage","image","Image","width","height","error","crossOrigin","_determineCrossOrigin","src","window","origin","location","loc","tempAnchor","document","createElement","href","samePort","port","protocol","host","hostname","load","IMAGE","HTMLImageElement","LOADER_EVENTS","ResourceLoader","resourceQueue","_preSignal","PRE","_afterSignal","AFTER","onLoadComplete","onComplete","LOADER_FINISHED","_callAfter","addMiddleware","removeMiddleware","_onResourceLoadStart","forEach","pre","cb","after","_onLoadComplete","colorFormat","color","r","g","b","a","h","v","forceCSSHex","str","ARR_EACH","Array","ARR_SLICE","Common","target","toCall","l","itr","func","callNow","callImmediately","setTimeout","isNaN","INTERPRETATIONS","common","test","original","parseInt","parseFloat","result","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hi","f","q","c","min","max","delta","hex","componentIndex","Color","colorToString","math","defineRGBComponent","defineHSVComponent","Controller","fnc","newValue","EVENT_MAP","EVENT_MAP_INV","CSS_VALUE_PIXELS","val","match","dom","elem","selectable","vertical","horizontal","params","pars","className","evt","clientX","clientY","bool","newBool","classes","style","getComputedStyle","cssValueToPixels","offset","left","top","BooleanController","OptionController","opt","desiredValue","StringController","e","_x","x","NumberController","_params","numDecimals","_v","minValue","maxValue","stepValue","tenTo","NumberControllerBox","prevY","attempted","diff","roundToDecimal","o1","o2","i2","NumberControllerSlider","step","bgRect","pct","FunctionController","text","ColorController","valueField","fieldRect","mismatch","flip","_flip","vendors","css","doc","indoc","link","injected","head","saveDialogContents","ControllerFactory","initialValue","CenteredDiv","hide","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","DEFAULT_WIDTH","autoPlace","preset","useLocalStorage","localStorage","getLocalStorageHash","saveToLocalStorage","titleRow","savedGui","JSON","titleRowName","addRow","onClickTitle","root","controller","newGuiParams","parent","gui","li","folder","node","getCurrentPreset","element","nextSibling","box","pc","pb","oldName","wasListening","newController","matchedIndex","controllerMap","presetMap","factoryArgs","container","div","gears","button","button2","button3","select","explain","localStorageCheckBox","saveLocally","newConstructorTextArea","presetName","prompt","pmouseX","w","savedValues","useInitialValues","controllerArray","controllers","prefix","Events","EE","addListener","TypeError","_eventsCount","clearEvent","eventNames","names","getOwnPropertySymbols","listeners","handlers","ee","listenerCount","len","off","prefixed","module","EPSILON","ARRAY_TYPE","Float32Array","RANDOM","setMatrixArrayType","degree","PI","toRadian","equals","abs","out","glMatrix","clone","copy","identity","fromValues","m00","m01","m10","m11","transpose","invert","a0","det","adjoint","determinant","multiply","b0","b1","b2","b3","rotate","rad","sin","cos","scale","v0","v1","fromRotation","fromScaling","frob","sqrt","pow","LDU","L","D","U","subtract","exactEquals","multiplyScalar","multiplyScalarAndAdd","mul","sub","d","tx","ty","aa","ab","ac","ad","atx","aty","b4","b5","translate","fromTranslation","fromMat4","m02","m12","m20","m21","m22","a01","a02","a12","a00","a10","a11","a20","a21","a22","b01","b11","b21","b00","b02","b10","b12","b20","b22","y","fromMat2d","fromQuat","z","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","normalFromMat4","a03","a13","a23","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","projection","b6","b7","b8","m03","m13","m23","m30","m31","m32","m33","axis","rotateX","rotateY","rotateZ","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","xy","xz","yz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","frustum","right","bottom","near","far","rl","tb","nf","perspective","fovy","aspect","tan","Infinity","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","a14","a15","b9","b13","b14","b15","setAxisAngle","getAxisAngle","out_axis","acos","calculateW","slerp","omega","cosom","sinom","scale0","scale1","u1","u2","u3","sqrt1MinusU1","sqrtU1","dot","invDot","conjugate","fromMat3","fTrace","fRoot","fromEuler","halfToRad","cx","cy","cz","vec4","lerp","squaredLength","sqrLen","normalize","rotationTo","tmpvec3","vec3","xUnitVec3","yUnitVec3","sqlerp","temp1","temp2","setAxes","matr","mat3","view","dq","w1","w2","fromRotationTranslationValues","outer","quat","mat4","getReal","getDual","setReal","setDual","ax1","ay1","az1","aw1","bx1","by1","bz1","ax2","ay2","az2","aw2","rotateByQuatAppend","qx","qy","qz","qw","rotateByQuatPrepend","rotateAroundAxis","axisLength","ax0","ay0","az0","aw0","bw1","bx0","by0","bz0","bw0","mt","sqlen","a_dot_b","divide","ceil","floor","round","scaleAndAdd","distance","squaredDistance","negate","inverse","cross","transformMat2","transformMat2d","transformMat3","transformMat4","p0","p1","sinC","cosC","angle","len1","len2","cosine","zero","dist","sqrDist","vec","stride","arg","hermite","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","zScale","transformQuat","uvx","uvy","uvz","uuvx","uuvy","uuvz","tempA","tempB","u","A","B","C","E","F","G","H","I","J","v2","v3","v4","s1","s2","ix","iy","iz","iw","sampleModels","gltfJson","gltfBin","Example","camera","viewer","scene","Viewer","innerWidth","innerHeight","createSceneSelector","createCamera","world","addScene","EnvironmentScene","ModelScene","shader","start","reloadModelScene","loader","removeScene","CameraComponent","TransformComponent","position","rotation","LookAtCameraComponent","onResize","projMatrix","GUIComponent","properties","prop","propName","items","onChange","onload","preload","CubemapLoader","GLOBAL_TEXTURES","SKYBOX","front","back","DIFFUSE_ENVIRONMENT","premultiplyAlpha","internalFormat","GL_INTERNALFORMAT","SRGB8_ALPHA8","format","RGBA","GL_TYPES","UNSIGNED_BYTE","specular_map","SPECULAR_ENVIRONMENT","TextureLoader","BRDF_LUT","sampler","magFilter","MAG_FILTER","LINEAR","minFilter","MIN_FILTER","wrapS","TEXTURE_WRAP","CLAMP_TO_EDGE","wrapT","lightComponent","LightComponent","lightColor","lightScale","lightRotation","lightPitch","isColor","updateLight","shutdown","WorldScene","GLTFLoader","sceneObj","cache","CACHE_TYPE","MODEL","unload","initializeDefines","meshes","upload","SceneComponent","animations","animationKey","AnimationComponent"],"mappings":"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","file":"viewer.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import {IBaseCache} from \"./caches\";\r\n\r\n/**\r\n * With Scene, Node and Mesh cache we can access the Model in different stages\r\n * e.g. Mesh has no animation or Transform,\r\n * e.g. Node has Animation, Transform etc. for one Mesh\r\n * e.g. Scene has all Nodes with all Animations and Transforms\r\n */\r\nexport enum CACHE_TYPE  {\r\n    TEXTURE,\r\n    MESH,\r\n    MODEL,\r\n    ANIMATION,\r\n    MATERIAL,\r\n    SHADER,\r\n    NOOP\r\n}\r\n\r\n/**\r\n * Global Cache\r\n */\r\nexport class Cache {\r\n    private caches:Array<IBaseCache<any>>;\r\n\r\n    constructor(){\r\n        this.caches = [];\r\n    }\r\n\r\n    /**\r\n     * Add a new sub cache\r\n     * @param {CACHE_TYPE} type\r\n     * @param {IBaseCache<T>} cache\r\n     */\r\n    addCache<T>(type:number, cache:IBaseCache<T>):void{\r\n        this.caches[type] = cache;\r\n    }\r\n\r\n    /**\r\n     * Remove a sub cache\r\n     * @param {string|number} type\r\n     */\r\n    removeCache(type:number):void{\r\n        this.caches.splice(type,1);\r\n    }\r\n\r\n    /**\r\n     * get sub cache\r\n     * @param {string|number} type\r\n     * @returns {IBaseCache<T>}\r\n     */\r\n    getCache<T>(type:number):IBaseCache<T>{\r\n        return this.caches[type] as IBaseCache<T>;\r\n    }\r\n\r\n    /**\r\n     * add a value to a cache\r\n     * @param {string|number} type\r\n     * @param {string} key\r\n     * @param data\r\n     */\r\n    public add(type:number, key:string, data:any){\r\n        if(this.caches[type]) {\r\n            this.caches[type].add(key, data);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * get value from cache\r\n     * @param {string|number} type\r\n     * @param {string} key\r\n     * @returns {T}\r\n     */\r\n    public get<T>(type:number, key:string):T{\r\n        if(this.caches[type]){\r\n            return this.caches[type].get(key);\r\n        }\r\n    }\r\n\r\n    public has(type:number, key:string):boolean{\r\n        if(this.caches[type]){\r\n            return !!this.caches[type].get(key);\r\n        }\r\n        return false;\r\n    }\r\n}","import {EmitSignal} from \"../../events/EmitSignal\";\r\nimport * as EventEmitter from \"eventemitter3\";\r\n\r\nexport enum CACHE_EVENTS {\r\n    ADDED = \"ADDED\",\r\n    REMOVED = \"REMOVED\"\r\n}\r\n\r\nexport interface  IBaseCache<T> {\r\n    onAdded:EmitSignal;\r\n    onRemoved:EmitSignal;\r\n    add(key:string,data:T):void;\r\n    addMultiple(elements:Array<T>, mapFunc:(e:T)=>{key:string,data:T});\r\n    remove(key:string):void;\r\n    get(key:string):T;\r\n    getAll():{[x:string]:T};\r\n}\r\n\r\nexport class BaseCache<T> implements IBaseCache<T> {\r\n\r\n    protected cache:{[x:string]:T};\r\n    protected emitter:EventEmitter;\r\n    private _onAdded:EmitSignal<(key:string,data:T)=>void>;\r\n    private _onRemoved:EmitSignal<(key:string,data:T)=>void>;\r\n\r\n    constructor(){\r\n        this.cache = {};\r\n        this.emitter = new EventEmitter();\r\n        this._onAdded = new EmitSignal(this.emitter,CACHE_EVENTS.ADDED);\r\n        this._onRemoved = new EmitSignal(this.emitter,CACHE_EVENTS.REMOVED);\r\n    }\r\n\r\n    get onAdded(): EmitSignal<(key:string,data: T) => void> {\r\n        return this._onAdded;\r\n    }\r\n\r\n    get onRemoved(): EmitSignal<(key:string,data: T) => void> {\r\n        return this._onRemoved;\r\n    }\r\n\r\n    public add(key:string,data:T):void{\r\n        this.cache[key] = data;\r\n        this._onAdded.emit(key,data);\r\n    }\r\n\r\n    public addMultiple(elements:Array<T>,mapFunc: (e: T) => { key: string; data: T }) {\r\n        for(let i=0, element:T; element = elements[i]; i++) {\r\n            const value = mapFunc(element);\r\n            this.add(value.key, value.data);\r\n        }\r\n    }\r\n\r\n    public remove(key:string):void {\r\n        const data = this.cache[key];\r\n        delete this.cache[key];\r\n        this._onRemoved.emit(key,data);\r\n    }\r\n\r\n    public get(key:string):T{\r\n        return this.cache[key];\r\n    }\r\n\r\n    public getAll():{[x:string]:T}{\r\n        return this.cache;\r\n    }\r\n\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./baseCache\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./cache\";\nexport * from \"./caches/index\";\n","import {WebGLUtils} from \"../gl/gl_util\";\r\n\r\nexport class Canvas {\r\n    private readonly _defaultWidth:number;\r\n    private readonly _defaultHeight:number;\r\n    private _element:HTMLCanvasElement;\r\n    private _context:WebGL2RenderingContext|WebGL2RenderingContext;\r\n\r\n\r\n    constructor(config:{width:number,height:number}){\r\n        this._defaultWidth = config.width;\r\n        this._defaultHeight = config.height;\r\n        this._element = document.createElement('canvas');\r\n        this._element.id     = \"viewer_canvas\";\r\n        this._element.width  = this._defaultWidth;\r\n        this._element.height = this._defaultHeight;\r\n    }\r\n\r\n    public appendCanvas(parent?:string):void{\r\n        if(!this._element){\r\n            throw \"canvas failed to initialize\";\r\n        }\r\n        if(parent){\r\n            document.getElementById(parent).appendChild(this._element);\r\n        }else{\r\n            document.body.appendChild(this._element);\r\n        }\r\n    }\r\n\r\n    public get context():WebGL2RenderingContext{\r\n        if(!this._context) {\r\n            this._context = WebGLUtils.setupWebGL(this._element,{ antialias: true, stencil: true, alpha: false} ) as WebGL2RenderingContext;\r\n        }\r\n        return this._context;\r\n    }\r\n\r\n    public get element():HTMLCanvasElement {\r\n        return this._element;\r\n    }\r\n\r\n    public set element(value:HTMLCanvasElement) {\r\n        this._element = value;\r\n    }\r\n\r\n    get width():number {\r\n        return this._element.width;\r\n    }\r\n\r\n    get height():number {\r\n        return this._element.height;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./Canvas\";\n","import {ECS, IComponent} from \"curbl-ecs\";\r\nimport {mat4} from \"gl-matrix\";\r\n\r\nexport type CameraConfig = {\r\n    viewMatrix?:mat4,\r\n    projMatrix?:mat4,\r\n    fovy?: number,\r\n    aspect?: number,\r\n    near?: number,\r\n    far?: number\r\n};\r\n\r\n@ECS.Component('CameraComponent')\r\nexport class CameraComponent implements IComponent{\r\n\r\n    private _viewMatrix:mat4;\r\n    private _projMatrix:mat4;\r\n\r\n    constructor(config:CameraConfig={\r\n        fovy: 0.785,\r\n        aspect: 16/9,\r\n        near: 0.01,\r\n        far: 100\r\n    }){\r\n       this.init(config);\r\n    }\r\n\r\n    init(config?:CameraConfig):void {\r\n        if(!config.projMatrix) {\r\n            this._viewMatrix = mat4.create();\r\n        }else {\r\n            this._viewMatrix = config.viewMatrix;\r\n        }\r\n        if(!config.projMatrix) {\r\n            this._projMatrix = mat4.create();\r\n            mat4.perspective(this._projMatrix, config.fovy||0.785, config.aspect||(16/9), config.near||0.01, config.far||100);\r\n        }else {\r\n            this._projMatrix = config.projMatrix;\r\n        }\r\n    }\r\n\r\n    remove():void {\r\n        mat4.identity(this._viewMatrix);\r\n        mat4.identity(this._projMatrix);\r\n    }\r\n\r\n    public get viewMatrix():mat4 {\r\n        return this._viewMatrix;\r\n    }\r\n\r\n    public set viewMatrix(value:mat4) {\r\n        this._viewMatrix = value;\r\n    }\r\n\r\n    public get projMatrix():mat4 {\r\n        return this._projMatrix;\r\n    }\r\n\r\n    public set projMatrix(value:mat4) {\r\n        this._projMatrix = value;\r\n    }\r\n\r\n    public get projViewMatrix(): mat4 {\r\n        return mat4.mul(mat4.create(), this._projMatrix, this._viewMatrix);\r\n    }\r\n}\r\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./cameraComponent\";\nexport * from \"./lookAtCameraComponent\";\n","import {ECS, IComponent} from \"curbl-ecs\";\r\nimport {vec3} from \"gl-matrix\";\r\n\r\nexport type LookAtCameraConfig = {\r\n    target?:vec3,\r\n    up?:vec3,\r\n    panning?:vec3,\r\n    zoom?:vec3,\r\n};\r\n\r\n@ECS.Component()\r\nexport class LookAtCameraComponent implements IComponent{\r\n\r\n    protected _target:vec3;\r\n    protected _up:vec3;\r\n    protected _panning:vec3;\r\n    protected _zooming:vec3;\r\n    protected _zoomPos:number;\r\n    private _position:vec3;\r\n\r\n    constructor(config?:LookAtCameraConfig){\r\n        this.init(config);\r\n    }\r\n\r\n    init(config:LookAtCameraConfig=\r\n             {\r\n                 target: vec3.create(),\r\n                 up: vec3.fromValues(0,1,0),\r\n                 panning: vec3.create(),\r\n                 zoom: vec3.create(),\r\n             }):void {\r\n        this._target = config.target||vec3.create();\r\n        this._up = config.up||vec3.fromValues(0,1,0);\r\n        this._panning = config.panning||vec3.create();\r\n        this._zooming = config.zoom||vec3.create();\r\n        this._zoomPos = 0;\r\n    }\r\n\r\n    remove():void {\r\n    }\r\n\r\n    public get target():vec3 {\r\n        return this._target;\r\n    }\r\n\r\n    public set target(value:vec3) {\r\n        this._target = value;\r\n    }\r\n\r\n    public get up():vec3 {\r\n        return this._up;\r\n    }\r\n\r\n    public set up(value:vec3) {\r\n        this._up = value;\r\n    }\r\n\r\n    public get panning():vec3 {\r\n        return this._panning;\r\n    }\r\n\r\n    public set panning(value:vec3) {\r\n        this._panning = value;\r\n    }\r\n\r\n    public get zooming():vec3 {\r\n        return this._zooming;\r\n    }\r\n\r\n    public set zooming(value:vec3) {\r\n        this._zooming = value;\r\n    }\r\n\r\n    public get zoomPos():number {\r\n        return this._zoomPos;\r\n    }\r\n\r\n    public set zoomPos(value:number) {\r\n        this._zoomPos = value;\r\n    }\r\n\r\n    get position(): vec3 {\r\n        return this._position;\r\n    }\r\n\r\n    set position(value: vec3) {\r\n        this._position = value;\r\n    }\r\n}","import {ECS, IComponent} from \"curbl-ecs\";\r\n\r\nexport type GUIComponentConfig = {\r\n    folder?: string;\r\n    properties: Array<{\r\n        isColor?: boolean;\r\n        prop: any;\r\n        propName: string;\r\n        min?: number;\r\n        max?: number;\r\n        items?: Array<string>|{[x:string]:any};\r\n        onChange?: (value) => void;\r\n        onFinishChange?: (value) => void;\r\n    }>\r\n};\r\n\r\n@ECS.Component()\r\nexport class GUIComponent implements IComponent {\r\n\r\n    public config: GUIComponentConfig;\r\n\r\n    constructor(config: GUIComponentConfig) {\r\n        this.init(config);\r\n    }\r\n\r\n    init(config: GUIComponentConfig): void {\r\n        this.config = config;\r\n    }\r\n\r\n    remove(): void {\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./GUIComponent\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./camera/index\";\nexport * from \"./gui/index\";\nexport * from \"./light/index\";\nexport * from \"./renderer/index\";\nexport * from \"./scene/index\";\nexport * from \"./transform/index\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./lightComponent\";\n","import {ECS, IComponent} from \"curbl-ecs\";\r\nimport {Color} from \"../../math\";\r\nimport {vec3} from \"gl-matrix\";\r\n\r\nexport interface BaseLightConfig  {\r\n    lightColor: [number, number, number]\r\n    lightScale: number,\r\n    lightRotation: number,\r\n    lightPitch: number\r\n}\r\n\r\n@ECS.Component()\r\nexport class LightComponent implements IComponent{\r\n\r\n    private _color:Color;\r\n    private _direction: vec3;\r\n    private _lightColor: [number, number, number];\r\n    private _lightScale: number;\r\n    private _lightRotation: number;\r\n    private _lightPitch: number;\r\n\r\n    constructor(config:BaseLightConfig={\r\n        lightColor: [255, 255, 255],\r\n        lightScale: 1.0,\r\n        lightRotation: 75,\r\n        lightPitch: 40\r\n    }){\r\n        this.init(config);\r\n    }\r\n\r\n    init(config:BaseLightConfig={\r\n        lightColor: [255, 255, 255],\r\n        lightScale: 1.0,\r\n        lightRotation: 75,\r\n        lightPitch: 40\r\n    }){\r\n        this._direction = vec3.create();\r\n        this._color = new Color();\r\n\r\n        this._lightColor = config.lightColor;\r\n        this._lightScale = config.lightScale;\r\n        this._lightRotation = config.lightRotation;\r\n        this._lightPitch = config.lightPitch;\r\n        this.updateLight();\r\n    }\r\n\r\n    remove():void {\r\n    }\r\n\r\n    public updateLight() {\r\n        this._color.r = this._lightScale * this._lightColor[0]/255;\r\n        this._color.g = this._lightScale * this._lightColor[1]/255;\r\n        this._color.b = this._lightScale * this._lightColor[2]/255;\r\n\r\n        const rot = this._lightRotation * Math.PI / 180;\r\n        const pitch = this._lightPitch * Math.PI / 180;\r\n\r\n        vec3.set(\r\n            this._direction,\r\n            Math.sin(rot) * Math.cos(pitch),\r\n            Math.sin(pitch),\r\n            Math.cos(rot) * Math.cos(pitch)\r\n        );\r\n    }\r\n\r\n    get lightColor(): [number, number, number] {\r\n        return this._lightColor;\r\n    }\r\n\r\n    set lightColor(value: [number, number, number]) {\r\n        this._lightColor = value;\r\n    }\r\n\r\n    get lightScale(): number {\r\n        return this._lightScale;\r\n    }\r\n\r\n    set lightScale(value: number) {\r\n        this._lightScale = value;\r\n    }\r\n\r\n    get lightRotation(): number {\r\n        return this._lightRotation;\r\n    }\r\n\r\n    set lightRotation(value: number) {\r\n        this._lightRotation = value;\r\n    }\r\n\r\n    get lightPitch(): number {\r\n        return this._lightPitch;\r\n    }\r\n\r\n    set lightPitch(value: number) {\r\n        this._lightPitch = value;\r\n    }\r\n\r\n    public get color():Color {\r\n        return this._color;\r\n    }\r\n\r\n    public set color(value:Color) {\r\n        this._color = value;\r\n    }\r\n\r\n    get direction(): vec3 {\r\n        return this._direction;\r\n    }\r\n\r\n    set direction(value: vec3) {\r\n        this._direction = value;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./skyboxComponent\";\n","import {ECS, IComponent} from \"curbl-ecs\";\r\n\r\nexport type SkyboxComponentConfig = {\r\n    texture?: string;\r\n};\r\n\r\n@ECS.Component()\r\nexport class SkyboxComponent implements IComponent {\r\n\r\n    private _texture: string;\r\n\r\n    constructor(config:SkyboxComponentConfig={}){\r\n        this.init(config);\r\n    }\r\n\r\n    init(config: SkyboxComponentConfig={}): void {\r\n        this._texture = config.texture;\r\n    }\r\n\r\n    remove(): void {\r\n        this._texture = undefined;\r\n    }\r\n\r\n    get texture(): string {\r\n        return this._texture;\r\n    }\r\n\r\n    set texture(value: string) {\r\n        this._texture = value;\r\n    }\r\n}","import {ECS, IComponent} from \"curbl-ecs\";\r\nimport {SceneComponentConfig} from \"./sceneComponent\";\r\n\r\n@ECS.Component()\r\nexport class AnimationComponent implements IComponent {\r\n\r\n    private _key:string;\r\n\r\n    private _startTime:number;\r\n    private _pauseStart: number;\r\n    private _pauseEnd:number;\r\n    private _running:boolean;\r\n    private _paused:boolean;\r\n    private _loop:boolean;\r\n    private _autoStart:boolean;\r\n\r\n    constructor(config:{key:string}){\r\n        this.init(config);\r\n    }\r\n\r\n    init(config:SceneComponentConfig){\r\n        this._key = config.key;\r\n        this._running = false;\r\n        this._paused = false;\r\n        this._startTime = 0;\r\n        this._pauseStart = 0;\r\n        this._pauseEnd = 0;\r\n        this._autoStart = true;\r\n        this._loop = true;\r\n    }\r\n\r\n    remove():void {\r\n    }\r\n\r\n    start() {\r\n        this._running = true;\r\n        this._startTime = performance.now();\r\n    }\r\n\r\n    stop() {\r\n        this._running = false;\r\n    }\r\n\r\n    pause() {\r\n        this.paused = true;\r\n    }\r\n\r\n    resume() {\r\n        this.paused = false;\r\n    }\r\n\r\n    get key(): string {\r\n        return this._key;\r\n    }\r\n\r\n    set key(value: string) {\r\n        this._key = value;\r\n    }\r\n\r\n    get running(): boolean {\r\n        return this._running;\r\n    }\r\n\r\n    get paused(): boolean {\r\n        return this._paused;\r\n    }\r\n\r\n    set paused(value: boolean) {\r\n        if(this._paused === value){\r\n            return;\r\n        }\r\n        if(value === true) {\r\n            this._pauseStart = performance.now();\r\n        }else{\r\n            this._pauseEnd = performance.now();\r\n        }\r\n        this._paused = value;\r\n    }\r\n\r\n    get pauseStart(): number {\r\n        return this._pauseStart;\r\n    }\r\n\r\n    get pauseEnd(): number {\r\n        return this._pauseEnd;\r\n    }\r\n\r\n    get startTime(): number {\r\n        return this._startTime;\r\n    }\r\n\r\n    get loop(): boolean {\r\n        return this._loop;\r\n    }\r\n\r\n    set loop(value: boolean) {\r\n        this._loop = value;\r\n    }\r\n\r\n    get autoStart(): boolean {\r\n        return this._autoStart;\r\n    }\r\n\r\n    set autoStart(value: boolean) {\r\n        this._autoStart = value;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./animationComponent\";\nexport * from \"./sceneComponent\";\n","import {ECS, IComponent} from \"curbl-ecs\";\r\n\r\nexport type SceneComponentConfig = {key:string};\r\n\r\n@ECS.Component()\r\nexport class SceneComponent implements IComponent {\r\n    private _key:string;\r\n\r\n    constructor(config:SceneComponentConfig){\r\n        this._key = config.key;\r\n    }\r\n\r\n    init(config:SceneComponentConfig){\r\n        this._key = config.key;\r\n    }\r\n\r\n    remove():void {\r\n    }\r\n\r\n    public get key():string {\r\n        return this._key;\r\n    }\r\n\r\n    public set key(value:string) {\r\n        this._key = value;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./transformComponent\";\n","import {ECS, IComponent} from \"curbl-ecs\";\r\nimport {mat4, quat, vec3} from \"gl-matrix\";\r\n\r\nexport type TransformComponentConfig = {\r\n    position:{x:number,y:number,z:number},\r\n    rotation:{x:number,y:number,z:number,w:number},\r\n    scale:{x:number,y:number,z:number}\r\n};\r\n\r\n@ECS.Component()\r\nexport class TransformComponent implements IComponent {\r\n    private _level:number;\r\n    private _parent:TransformComponent;\r\n    private _children:TransformComponent[];\r\n    private _localMatrix:mat4;\r\n    private _rotation:quat;\r\n    private _translation:vec3;\r\n    private _scale:vec3;\r\n    private _dirty:boolean;\r\n\r\n    constructor(config:TransformComponentConfig={\r\n        position: {x:0,y:0,z:0},\r\n        rotation: {x:0,y:0,z:0,w:1},\r\n        scale: {x:1,y:1,z:1}\r\n    }){\r\n        this.init(config);\r\n    }\r\n\r\n    init(config:TransformComponentConfig={\r\n        position: {x:0,y:0,z:0},\r\n        rotation: {x:0,y:0,z:0,w:1},\r\n        scale: {x:1,y:1,z:1}\r\n    }):void{\r\n        //M=T*R*S\r\n        this._localMatrix = mat4.create();\r\n        if(!config){\r\n            config = Object.create(null);\r\n        }\r\n        if(!config.position){\r\n            config.position = {x:0,y:0,z:0}\r\n        }\r\n        if(!config.rotation){\r\n            config.rotation = {x:0,y:0,z:0,w:1};\r\n        }\r\n        if(!config.scale){\r\n            config.scale = {x:1,y:1,z:1};\r\n        }\r\n\r\n        this._rotation = quat.fromValues(config.rotation.x,config.rotation.y,config.rotation.z,config.rotation.w);\r\n        this._translation = vec3.fromValues(config.position.x,config.position.y,config.position.z);\r\n        this._scale = vec3.fromValues(config.scale.x,config.scale.y,config.scale.z);\r\n        this._children = [];\r\n        this._level = 0;\r\n        this._dirty = true;\r\n        this.apply();\r\n    }\r\n\r\n    remove():void{}\r\n\r\n    public addChild(child:TransformComponent):void {\r\n        if(child._parent) {\r\n            child._parent.removeChild(child);\r\n        }\r\n        child._parent = this;\r\n        child._level = this._level+1;\r\n        this._children.push(child);\r\n    }\r\n\r\n    public removeChild(child:TransformComponent):void {\r\n        const index = this._children.indexOf(child);\r\n        if (index > -1) {\r\n            child._level = 0;\r\n            child._parent = undefined;\r\n            this._children.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    private apply():mat4{\r\n        if(this._dirty) {\r\n            mat4.fromRotationTranslationScale(\r\n                this._localMatrix,\r\n                this._rotation,\r\n                this._translation,\r\n                this._scale\r\n            );\r\n            this._dirty = false;\r\n        }\r\n        return this._localMatrix;\r\n    }\r\n\r\n    public get globalMatrix():mat4 {\r\n        if(!this._parent){\r\n            return this.apply();\r\n        }else{\r\n            //TODO: check if this is right or do we need to calculcate the parent globalMatrix?\r\n            return mat4.multiply(\r\n                mat4.create(),\r\n                this._parent.localMatrix,\r\n                this._localMatrix\r\n            );\r\n        }\r\n    }\r\n\r\n    public get modelMatrix():mat4 {\r\n        return this.globalMatrix;\r\n    }\r\n\r\n    /**\r\n     * Returns the LocalTransformation Matrix\r\n     * @returns {Matrix}\r\n     */\r\n    public get localMatrix():mat4 {\r\n        return this.apply();\r\n    }\r\n\r\n    public set localMatrix(value:mat4) {\r\n        this._localMatrix = value;\r\n    }\r\n\r\n    public get translation():vec3 {\r\n        this._dirty = true;\r\n        return this._translation;\r\n    }\r\n\r\n    public set translation(value:vec3) {\r\n        this._dirty = true;\r\n        this._translation = value;\r\n    }\r\n\r\n    public get rotation():quat {\r\n        this._dirty = true;\r\n        return this._rotation;\r\n    }\r\n\r\n    public set rotation(value:quat) {\r\n        this._dirty = true;\r\n        this._rotation = value;\r\n    }\r\n\r\n    public get scale():vec3 {\r\n        this._dirty = true;\r\n        return this._scale;\r\n    }\r\n\r\n    public set scale(value:vec3) {\r\n        this._dirty = true;\r\n        this._scale = value;\r\n    }\r\n\r\n    get level(): number {\r\n        return this._level;\r\n    }\r\n\r\n    get parent(): TransformComponent {\r\n        return this._parent;\r\n    }\r\n\r\n    set parent(value: TransformComponent) {\r\n        this._parent = value;\r\n    }\r\n\r\n    get children(): TransformComponent[] {\r\n        return this._children;\r\n    }\r\n\r\n    set children(value: TransformComponent[]) {\r\n        this._children = value;\r\n    }\r\n\r\n}","import * as EventEmitter from \"eventemitter3\";\r\nimport {EmitSignal} from \"./EmitSignal\";\r\n\r\nenum DOM_EVENTS {\r\n    KEYDOWN = \"KEY_DOWN\",\r\n    KEYPRESS = \"KEY_PRESS\",\r\n    KEYUP = \"KEY_UP\",\r\n    MOUSECLICK = \"MOUSE_CLICK\",\r\n    CONTEXTMENU = \"CONTEXT_MENU\",\r\n    DOUBLECLICK = \"DOUBLE_CLICK\",\r\n    MOUSEDOWN = \"MOUSE_DOWN\",\r\n    MOUSEOUT = \"MOUSE_OUT\",\r\n    MOUSEOVER = \"MOUSE_OVER\",\r\n    MOUSEUP = \"MOUSE_UP\",\r\n    MOUSEMOVE = \"MOUSE_MOVE\",\r\n    WHEEL = \"WHEEL\"\r\n}\r\n\r\nconst emitter = new EventEmitter();\r\n\r\nexport const DomEvents = {\r\n    onKeyDown: new EmitSignal(emitter,DOM_EVENTS.KEYDOWN),\r\n    onKeyPress: new EmitSignal(emitter,DOM_EVENTS.KEYPRESS),\r\n    onKeyUp: new EmitSignal(emitter,DOM_EVENTS.KEYUP),\r\n    onClick: new EmitSignal(emitter,DOM_EVENTS.MOUSECLICK),\r\n    onContextMenu: new EmitSignal(emitter,DOM_EVENTS.CONTEXTMENU),\r\n    onDoubleClick: new EmitSignal(emitter,DOM_EVENTS.DOUBLECLICK),\r\n    onMouseDown: new EmitSignal(emitter,DOM_EVENTS.MOUSEDOWN),\r\n    onMouseOut: new EmitSignal(emitter,DOM_EVENTS.MOUSEOUT),\r\n    onMouseOver: new EmitSignal(emitter,DOM_EVENTS.MOUSEOVER),\r\n    onMouseUp: new EmitSignal(emitter,DOM_EVENTS.MOUSEUP),\r\n    onMouseMove: new EmitSignal(emitter,DOM_EVENTS.MOUSEMOVE),\r\n    onWheel: new EmitSignal(emitter, DOM_EVENTS.WHEEL)\r\n};\r\n\r\n(function()  {\r\n    document.onkeydown = (ev: KeyboardEvent) => {\r\n        DomEvents.onKeyDown.dispatch(ev);\r\n    };\r\n    document.onkeypress = (ev: KeyboardEvent) => {\r\n        DomEvents.onKeyPress.dispatch(ev)\r\n    };\r\n    document.onkeyup = (ev: KeyboardEvent) => {\r\n        DomEvents.onKeyUp.dispatch(ev)\r\n    };\r\n    document.onclick = (ev: MouseEvent) => {\r\n        DomEvents.onClick.dispatch(ev)\r\n    };\r\n    document.oncontextmenu = (ev: PointerEvent) => {\r\n        DomEvents.onContextMenu.dispatch(ev)\r\n    };\r\n    document.ondblclick = (ev: MouseEvent) => {\r\n        DomEvents.onDoubleClick.dispatch(ev)\r\n    };\r\n    document.onmousedown = (ev: MouseEvent) => {\r\n        DomEvents.onMouseDown.dispatch(ev)\r\n    };\r\n    document.onmouseout = (ev: MouseEvent) => {\r\n        DomEvents.onMouseOut.dispatch(ev)\r\n    };\r\n    document.onmouseover = (ev: MouseEvent) => {\r\n        DomEvents.onMouseOver.dispatch(ev)\r\n    };\r\n    document.onmouseup = (ev: MouseEvent) => {\r\n        DomEvents.onMouseUp.dispatch(ev)\r\n    };\r\n    document.onmousemove = (ev: MouseEvent) => {\r\n        DomEvents.onMouseMove.dispatch(ev)\r\n    };\r\n    document.onwheel = (ev: WheelEvent) => {\r\n        DomEvents.onWheel.dispatch(ev);\r\n    }\r\n})();\r\n","import * as EventEmitter from \"eventemitter3\";\r\n\r\n/**\r\n * EmitSignal wrapper for a single event of an EventEmitter\r\n */\r\nexport class EmitSignal<EventFunction extends EventEmitter.ListenerFn = (...args:Array<any>) => void> {\r\n    private _type:string | symbol;\r\n    private _emitter: EventEmitter;\r\n\r\n    constructor(emitter:EventEmitter,type:string|symbol){\r\n        this._type = type;\r\n        this._emitter = emitter;\r\n    }\r\n\r\n    emit(...args: any[]): boolean {\r\n        return this._emitter.emit(this._type,...args);\r\n    }\r\n\r\n    /**\r\n     * function alias for emit\r\n     * @param args\r\n     */\r\n    dispatch(...args:any[]): boolean {\r\n        return this.emit(...args);\r\n    }\r\n\r\n    on(fn: EventFunction, context?: any): this {\r\n        this._emitter.on(this._type, fn, context);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * alias for on\r\n     * @param fn - EventFunction\r\n     * @param context - context to call the function with\r\n     */\r\n    add(fn: EventFunction, context?: any): this {\r\n        return this.on(fn,context);\r\n    }\r\n\r\n    once(fn: EventFunction, context?: any): this {\r\n        this._emitter.once(this._type, fn, context);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * alias for once\r\n     * @param fn\r\n     * @param context\r\n     */\r\n    addOnce(fn: EventFunction, context?: any): this {\r\n        return this.once(fn,context);\r\n    }\r\n\r\n    removeAllListeners(): this {\r\n        this._emitter.removeAllListeners(this._type);\r\n        return this;\r\n    }\r\n\r\n    removeListener(fn?: EventFunction, context?: any, once?: boolean): this {\r\n        this._emitter.removeListener(this._type, fn, context, once);\r\n        return this;\r\n    }\r\n\r\n    get type(): string | symbol {\r\n        return this._type;\r\n    }\r\n\r\n    get emitter(): EventEmitter {\r\n        return this._emitter;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./DomEvents\";\nexport * from \"./EmitSignal\";\n","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\n\r\nexport class GLBuffer {\r\n\r\n    private gl:WebGL2RenderingContext;\r\n    /**\r\n     * Type of the buffer\r\n     * @member {gl.ARRAY_BUFFER|gl.ELEMENT_ARRAY_BUFFER}\r\n     */\r\n    private type:number;\r\n    private arrayBuffers:Array<ArrayBuffer|ArrayBufferView>;\r\n    /**\r\n     * The draw type of the buffer\r\n     * @member {gl.STATIC_DRAW|gl.DYNAMIC_DRAW|gl.STREAM_DRAW}\r\n     */\r\n    private drawType:number;\r\n    private buffer:WebGLBuffer;\r\n    private _byteLength:number;\r\n\r\n    constructor(gl:WebGL2RenderingContext, type=gl.ARRAY_BUFFER, data?:ArrayBuffer|ArrayBufferView, drawType=gl.STATIC_DRAW){\r\n        this.gl = gl;\r\n        this.type = type;\r\n        this.arrayBuffers = [];\r\n        this._byteLength = 0;\r\n        this.buffer = gl.createBuffer();\r\n        this.drawType = drawType;\r\n        if(data){\r\n            this.upload(data);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add Data to the MeshBuffermap that should be uploaded\r\n     * @param {ArrayBuffer | ArrayBufferView} data\r\n     */\r\n    public addData(data:ArrayBuffer|ArrayBufferView):void{\r\n        this.arrayBuffers.push(data);\r\n        this._byteLength += data.byteLength;\r\n    }\r\n\r\n    /**\r\n     * Remove data from the MeshBuffermap\r\n     * @param {ArrayBuffer | ArrayBufferView} data\r\n     */\r\n    public removeData(data:ArrayBuffer|ArrayBufferView):void {\r\n        const index = this.arrayBuffers.indexOf(data);\r\n        if(index > -1){\r\n            const data = this.arrayBuffers[index];\r\n            this._byteLength -= data.byteLength;\r\n            this.arrayBuffers.splice(index,1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Uploads the new data to the GPU and all the previous data\r\n     * @param data {ArrayBuffer|ArrayBufferView} an array of data to upload\r\n     */\r\n    public upload(data?:ArrayBuffer|ArrayBufferView):number{\r\n        if(data) {\r\n            this.addData(data);\r\n        }\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.bufferData(this.type,this._byteLength,this.drawType);\r\n        let offset = 0;\r\n        for(let i=0,data:ArrayBufferView; data = this.arrayBuffers[i] as ArrayBufferView; i++){\r\n            gl.bufferSubData(this.type,offset,data);\r\n            offset+=data.byteLength;\r\n        }\r\n        this.unbind();\r\n        return this._byteLength;\r\n    }\r\n\r\n    public bind(){\r\n        this.gl.bindBuffer(this.type,this.buffer);\r\n    }\r\n\r\n    public unbind(){\r\n        this.gl.bindBuffer(this.type,null);\r\n    }\r\n\r\n    public destroy(){\r\n        if(this.gl.isBuffer(this.buffer)){\r\n            this.gl.deleteBuffer(this.buffer);\r\n        }\r\n        this.gl = null;\r\n        this.buffer = null;\r\n    }\r\n\r\n    /**\r\n     * sum of the ByteLength of all ArrayBuffers stored in this GLBuffer\r\n     * @returns {number}\r\n     */\r\n    public get byteLength():number {\r\n        return this._byteLength;\r\n    }\r\n\r\n    /**\r\n     * Length of the ArrayBuffers stored in this MeshBuffermap\r\n     * @returns {number}\r\n     */\r\n    public get length():number{\r\n        return this.arrayBuffers.length;\r\n    }\r\n\r\n    public static createVertexBuffer(gl:WebGL2RenderingContext, data:ArrayBuffer|ArrayBufferView=null, drawType=gl.STATIC_DRAW):GLBuffer{\r\n        return new GLBuffer(gl,gl.ARRAY_BUFFER,data,drawType);\r\n    }\r\n\r\n    public static createIndexBuffer(gl:WebGL2RenderingContext, data:ArrayBuffer|ArrayBufferView=null, drawType=gl.STATIC_DRAW):GLBuffer{\r\n        return new GLBuffer(gl,gl.ELEMENT_ARRAY_BUFFER,data,drawType);\r\n    }\r\n\r\n    public static create(gl:WebGL2RenderingContext, type:number, data:ArrayBuffer|ArrayBufferView=null, drawType=gl.STATIC_DRAW):GLBuffer{\r\n        return new GLBuffer(gl,type,data,drawType);\r\n    }\r\n}","import {GLTexture} from \"./GLTexture\";\r\n\r\nexport class GLCubemap extends GLTexture {\r\n    protected gl: WebGL2RenderingContext;\r\n    protected _textureID: number;\r\n    protected _texture: WebGLTexture;\r\n    protected mipmap: boolean;\r\n    protected _width: number;\r\n    protected _height: number;\r\n    protected format: number;\r\n    protected internalformat: number;\r\n    protected type: number;\r\n    public premultiplyAlpha: boolean;\r\n\r\n    constructor(gl: WebGL2RenderingContext, textureID: number = 0, width: number = -1, height: number = -1, internalFormat: number = gl.RGBA, format: number = gl.RGBA, type: number = gl.UNSIGNED_BYTE) {\r\n        super(gl, textureID, width, height, internalFormat, format, type);\r\n        this.gl = gl;\r\n        this._textureID = textureID;\r\n        this._texture = gl.createTexture();\r\n        this.mipmap = false;\r\n        this.premultiplyAlpha = false;\r\n        this._width = width;\r\n        this._height = height;\r\n        this.format = format;\r\n        this.type = type;\r\n    }\r\n\r\n    /**\r\n     * Uploads this texture to the GPU\r\n     * @param source {HTMLImageElement|ImageData|HTMLVideoElement}\r\n     * @param flip - {boolean} flip the texture\r\n     * @param face {number}\r\n     * @param level {number} mipmap level\r\n     */\r\n    public upload(source: HTMLImageElement | ImageData | HTMLVideoElement, flip: boolean = false, face: number = 0, level: number = 0) {\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha as any as GLint);\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flip as any as GLint);\r\n        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, level, this.internalformat, this.format, this.type, source);\r\n        if (level === 0) {\r\n            this._width = source.width;\r\n            this._height = source.height;\r\n        }\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Use a data source and uploads this texture to the GPU\r\n     * @param data {TypedArray} data to upload to the texture\r\n     * @param width {number} new width of the texture\r\n     * @param height {number} new height of the texture\r\n     * @param flip - {boolean} flip the texture\r\n     * @param face {number}\r\n     */\r\n    public uploadData(data: Float32Array, face: number, width: number = this._width, height: number = this._height, flip: boolean = false, level: number = 0) {\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha as any as GLint);\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flip as any as GLint);\r\n        gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, level, this.internalformat, width, height, 0, this.format, this.type, data || null);\r\n        if (level === 0) {\r\n            this._width = width;\r\n            this._height = height;\r\n        }\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Binds the texture\r\n     * @param location\r\n     */\r\n    public bind(location: number = this._textureID): GLCubemap {\r\n        let gl = this.gl;\r\n        if (location !== undefined) {\r\n            gl.activeTexture(gl.TEXTURE0 + location);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, this._texture);\r\n        return this;\r\n    }\r\n\r\n    public unbind(location: number = this._textureID): GLCubemap {\r\n        let gl = this.gl;\r\n        if (location !== undefined) {\r\n            gl.activeTexture(gl.TEXTURE0 + location);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Enables linear filtering\r\n     */\r\n    public enableLinearScaling() {\r\n        this.minFilter(true);\r\n        this.magFilter(true);\r\n    }\r\n\r\n    /**\r\n     * Enabled nearest neighbour interpolation\r\n     */\r\n    public enableNearestScaling() {\r\n        this.minFilter(false);\r\n        this.magFilter(false);\r\n    }\r\n\r\n    /**\r\n     * @param linear {boolean} if we want to use linear filtering or nearest neighbour interpolation\r\n     */\r\n    public minFilter(linear: boolean) {\r\n        this.bind();\r\n        let gl = this.gl;\r\n        if (this.mipmap) {\r\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, linear ? gl.LINEAR_MIPMAP_LINEAR : gl.NEAREST_MIPMAP_NEAREST);\r\n        } else {\r\n            gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, linear ? gl.LINEAR : gl.NEAREST);\r\n        }\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * @param linear {boolean} if we want to use linear or nearest neighbour interpolation\r\n     */\r\n    public magFilter(linear: boolean) {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, linear ? gl.LINEAR : gl.NEAREST);\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Enables mipmapping\r\n     */\r\n    public enableMipmap() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        this.mipmap = true;\r\n        gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Enables clamping on the texture wo WebGL will not repeat it\r\n     */\r\n    public enableWrapClamp() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_R, gl.CLAMP_TO_EDGE);\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Enable tiling on the texture\r\n     */\r\n    public enableWrapRepeat() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_R, gl.REPEAT);\r\n        this.unbind();\r\n    }\r\n\r\n    public enableWrapMirrorRepeat() {\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, gl.MIRRORED_REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, gl.MIRRORED_REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_R, gl.MIRRORED_REPEAT);\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Destroys this texture\r\n     */\r\n    public destroy() {\r\n        let gl = this.gl;\r\n        gl.deleteTexture(this._texture);\r\n    }\r\n\r\n    public get width(): number {\r\n        return this._width;\r\n    }\r\n\r\n    public get height(): number {\r\n        return this._height;\r\n    }\r\n\r\n    /**\r\n     * create CubeMap from source data\r\n     * @param gl\r\n     * @param source - the src\r\n     * @param flip - flip the texture default: false\r\n     * @param premultiplyAlpha - premultiplyAlpha\r\n     * @param textureID - textureID\r\n     * @param internalformat\r\n     * @param format\r\n     * @param type\r\n     */\r\n    public static cubemapFromSource(gl: WebGL2RenderingContext,\r\n                                    source: Array<HTMLImageElement | ImageData> | HTMLImageElement | ImageData,\r\n                                    flip: boolean = false, premultiplyAlpha: boolean = false, textureID: number = 0,\r\n                                    internalformat?: number, format?: number, type?: number): GLCubemap\r\n    {\r\n        const cubemap = new GLCubemap(gl, textureID, null, null, internalformat, format, type);\r\n        const sources = [].concat(source);\r\n        cubemap.premultiplyAlpha = premultiplyAlpha;\r\n        const mipLevels = Math.floor(sources.length/6);\r\n        for(let j=0; j < mipLevels; j++) {\r\n            for (let i = 0; i < 6; i++) {\r\n                cubemap.upload(sources[(j*6)+i], flip, i, j);\r\n            }\r\n        }\r\n        if (GLTexture.isPowerOf2(source[0].width) && GLTexture.isPowerOf2(source[0].height)) {\r\n            cubemap.enableMipmap();\r\n            cubemap.enableWrapRepeat();\r\n        } else {\r\n            cubemap.enableWrapClamp();\r\n        }\r\n        cubemap.enableLinearScaling();\r\n        return cubemap;\r\n    }\r\n\r\n    public static cubemapFromData(gl: WebGL2RenderingContext, data: Array<Float32Array> | Float32Array, width: number,\r\n                                  height: number, flip: boolean = false, textureID: number = 0, internalformat?: number,\r\n                                  format?: number, type?: number): GLCubemap\r\n    {\r\n        let texture = new GLCubemap(gl, textureID, null, null, format, type);\r\n        let datas = [].concat(data);\r\n        for (let i = 0; i < 6; i++) {\r\n            texture.uploadData(datas[i], i, width, height, flip);\r\n        }\r\n        return texture;\r\n    }\r\n}","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\nimport {GLTexture} from \"./GLTexture\";\r\nimport {GLCubemap} from \"./GLCubemap\";\r\n\r\n\r\nexport class GLFramebuffer{\r\n    private readonly drawBuffers:Array<number>;\r\n    private gl:WebGL2RenderingContext;\r\n    private width:number;\r\n    private height:number;\r\n    private framebuffer:WebGLFramebuffer;\r\n    private renderbuffer:WebGLRenderbuffer;\r\n    private _textures:Array<GLTexture|GLCubemap>;\r\n\r\n    constructor(gl:WebGL2RenderingContext,width=512,height=512){\r\n        this.drawBuffers = [];\r\n        this.gl = gl;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.framebuffer = gl.createFramebuffer();\r\n        this.renderbuffer = null;\r\n        this._textures = [];\r\n    }\r\n\r\n    checkStatus():boolean{\r\n        const gl = this.gl;\r\n        let status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\r\n        switch(status){\r\n            case gl.FRAMEBUFFER_COMPLETE:\r\n                return true;\r\n            case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\r\n                console.warn(\"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT\");\r\n                return false;\r\n            case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\r\n                console.warn(\"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\");\r\n                return false;\r\n            case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\r\n                console.warn(\"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS\");\r\n                return false;\r\n            case gl.FRAMEBUFFER_UNSUPPORTED:\r\n                console.warn(\"Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED\");\r\n                return false;\r\n            default:\r\n                console.warn(\"Incomplete framebuffer: \" + status);\r\n                return false\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a frame buffer with a texture containing the given data\r\n     *\r\n     * @static\r\n     * @param {WebGL2RenderingContext} gl - The current WebGL rendering context\r\n     * @param {number} width - the width of the drawing area of the frame buffer\r\n     * @param {number} height - the height of the drawing area of the frame buffer\r\n     * @param {number} textureID - texture target\r\n     * @param {number} attachment - COLOR_ATTACHMENT\r\n     * @param {number} internalformat\r\n     * @param {number} format\r\n     * @param {number} type\r\n     * @return {GLFramebuffer} The new framebuffer.\r\n     */\r\n    public static createRGBA(gl:WebGL2RenderingContext, width:number, height:number,textureID:number=0,attachment:number=gl.COLOR_ATTACHMENT0,internalformat?:number,format?:number,type?:number):GLFramebuffer\r\n    {\r\n        return GLFramebuffer.createFloat32(gl, width, height, null,textureID,attachment,format,type);\r\n    }\r\n\r\n    /**\r\n     * Creates a frame buffer with a texture containing the given data\r\n     *\r\n     * @static\r\n     * @param {WebGL2RenderingContext} gl - The current WebGL rendering context\r\n     * @param {number} width - the width of the drawing area of the frame buffer\r\n     * @param {number} height - the height of the drawing area of the frame buffer\r\n     * @param {ArrayBuffer|SharedArrayBuffer|ArrayBufferView} data - an array of data\r\n     * @param {number} textureID - texture target\r\n     * @param {number} attachment - COLOR_ATTACHMENT\r\n     * @param {number} internalformat\r\n     * @param {number} format\r\n     * @param {number} type\r\n     * @return {GLFramebuffer} The new framebuffer.\r\n     */\r\n    public static createFloat32(gl:WebGL2RenderingContext, width:number, height:number, data:any,textureID:number=0,attachment:number=gl.COLOR_ATTACHMENT0,internalformat?:number,format?:number,type?:number):GLFramebuffer\r\n    {\r\n        const texture = GLTexture.fromData(gl, data, width, height,textureID,internalformat,format,type);\r\n\r\n        texture.enableNearestScaling();\r\n        texture.enableWrapClamp();\r\n\r\n        // now create the framebuffer object and attach the texture to it.\r\n        const fbo = new GLFramebuffer(gl, width, height);\r\n\r\n        fbo.addTargetTexture(texture,attachment);\r\n        fbo.unbind();\r\n\r\n        return fbo;\r\n    }\r\n\r\n    /**\r\n     * Adds a texture to the framebuffer.\r\n     * @param {GLTexture} texture - the texture to add.\r\n     * @param {Number} attachment - COLOR_ATTACHMENT\r\n     * @param {Number} face if used for 3d Textures\r\n     * @param {Boolean} setDrawBuffer - adds the attachment to the drawBuffer\r\n     */\r\n    addTargetTexture(texture?:GLTexture|GLCubemap,attachment:number=this.gl.COLOR_ATTACHMENT0,face?:number,setDrawBuffer:boolean=true):GLFramebuffer\r\n    {\r\n        const gl = this.gl;\r\n\r\n        if(this._textures.indexOf(texture) > -1){\r\n            this.bind();\r\n            return this;\r\n        }\r\n\r\n        this._textures.push(texture || new GLTexture(gl,0));\r\n        let tex = this._textures[this._textures.length-1].bind();\r\n        this.bind();\r\n\r\n        if(face || face === 0){\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER,attachment,gl.TEXTURE_CUBE_MAP_POSITIVE_X+face,tex.texture,0);\r\n        }else {\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, tex.texture, 0);\r\n        }\r\n        if(setDrawBuffer) {\r\n            this.drawBuffers.push(attachment);\r\n            this.gl.drawBuffers(this.drawBuffers);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    setDrawBuffer(drawBuffers:Array<number>=this.drawBuffers):void{\r\n        this.gl.drawBuffers(drawBuffers);\r\n    }\r\n    /**\r\n     * Initialises the stencil buffer\r\n     */\r\n    createRenderbuffer():GLFramebuffer\r\n    {\r\n        if (this.renderbuffer) {\r\n            return null;\r\n        }\r\n\r\n        const gl = this.gl;\r\n\r\n        this.bind();\r\n\r\n        this.renderbuffer = gl.createRenderbuffer();\r\n\r\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.renderbuffer);\r\n\r\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, this.renderbuffer);\r\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, this.width, this.height);\r\n\r\n        this.unbind();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Erases the drawing area and fills it with a colour\r\n     *\r\n     * @param {number} r - the red value of the clearing colour\r\n     * @param {number} g - the green value of the clearing colour\r\n     * @param {number} b - the blue value of the clearing colour\r\n     * @param {number} a - the alpha value of the clearing colour\r\n     * @param {boolean} depthBuffer - clear DepthBuffer default: false\r\n     * @param {boolean} stencilBuffer - clear StencilBuffer default: false\r\n     */\r\n    clear(r = 0, g = 0, b = 0, a = 1,depthBuffer:boolean=false,stencilBuffer:boolean=false):GLFramebuffer\r\n    {\r\n        this.bind();\r\n\r\n        const gl = this.gl;\r\n\r\n        gl.clearColor(r, g, b, a);\r\n        if(depthBuffer && stencilBuffer){\r\n            gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT|gl.STENCIL_BUFFER_BIT);\r\n        }else if(depthBuffer){\r\n            gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);\r\n        }else if(stencilBuffer){\r\n            gl.clear(gl.COLOR_BUFFER_BIT|gl.STENCIL_BUFFER_BIT);\r\n        }else{\r\n            gl.clear(gl.COLOR_BUFFER_BIT);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Binds the frame buffer to the WebGL context\r\n     */\r\n    bind(target:number=this.gl.FRAMEBUFFER):GLFramebuffer\r\n    {\r\n        const gl = this.gl;\r\n\r\n        for (let texture of this._textures) {\r\n            texture.unbind();\r\n        }\r\n\r\n        gl.bindFramebuffer(target, this.framebuffer);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Unbinds the frame buffer to the WebGL context\r\n     */\r\n    unbind(target:number=this.gl.FRAMEBUFFER):GLFramebuffer\r\n    {\r\n        this.gl.bindFramebuffer(target, null);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Resizes the drawing area of the buffer to the given width and height\r\n     *\r\n     * @param {number} width - the new width\r\n     * @param {number} height - the new height\r\n     */\r\n    resize(width, height):GLFramebuffer\r\n    {\r\n        const gl = this.gl;\r\n\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        for(let texture of this._textures){\r\n            texture.uploadData(null, width, height);\r\n        }\r\n\r\n        if (this.renderbuffer)\r\n        {\r\n            // update the stencil buffer width and height\r\n            gl.bindRenderbuffer(gl.RENDERBUFFER, this.renderbuffer);\r\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, width, height);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Destroys this buffer\r\n     */\r\n    destroy()\r\n    {\r\n        for(let texture of this._textures){\r\n            texture.destroy();\r\n        }\r\n\r\n        this.gl.deleteFramebuffer(this.framebuffer);\r\n\r\n        this.gl = undefined;\r\n        this.framebuffer = undefined;\r\n        this.renderbuffer = undefined;\r\n        this.drawBuffers.length = 0;\r\n        this._textures.length = 0;\r\n    }\r\n\r\n    public getTexture(idx:number=0): GLTexture|GLCubemap {\r\n        return this._textures[idx];\r\n    }\r\n\r\n    public setTexture(value: GLTexture|GLCubemap,idx:number=0) {\r\n        this._textures[idx] = value;\r\n    }\r\n\r\n    public get texture():GLTexture|GLCubemap{\r\n        return this._textures[0];\r\n    }\r\n\r\n    public set texture(value:GLTexture|GLCubemap){\r\n        this._textures[0] = value;\r\n    }\r\n\r\n    public get textures():Array<GLTexture | GLCubemap> {\r\n        return this._textures;\r\n    }\r\n\r\n    public set textures(value:Array<GLTexture | GLCubemap>) {\r\n        this._textures = value;\r\n    }\r\n}","import {MAG_FILTER, MIN_FILTER, TEXTURE_WRAP} from \"./constants/GLConstants\";\r\n\r\nexport class GLTexture {\r\n    protected gl:WebGL2RenderingContext;\r\n    protected _textureID:number;\r\n    protected _texture:WebGLTexture;\r\n    protected mipmap:boolean;\r\n    protected miplevel:number;\r\n    protected _premultiplyAlpha:boolean;\r\n    protected _width:number;\r\n    protected _height:number;\r\n    protected format:number;\r\n    protected internalformat:number;\r\n    protected type:number;\r\n\r\n    constructor(gl:WebGL2RenderingContext, textureID:number=0, width:number = -1, height:number = -1, internalformat:number = gl.RGBA, format:number = gl.RGBA, type:number = gl.UNSIGNED_BYTE){\r\n        this.gl = gl;\r\n        this._textureID = textureID;\r\n        this._texture = gl.createTexture();\r\n        this.mipmap = false;\r\n        this._premultiplyAlpha = false;\r\n        this._width = width;\r\n        this._height = height;\r\n        this.internalformat = internalformat;\r\n        this.format = format;\r\n        this.type = type;\r\n        this.miplevel = 0;\r\n    }\r\n\r\n    /**\r\n     * Uploads this texture to the GPU\r\n     * @param source {HTMLImageElement|ImageData|HTMLVideoElement}\r\n     */\r\n    public upload(source:HTMLImageElement|ImageData|HTMLVideoElement){\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this._premultiplyAlpha as any as GLint);\r\n        let newWidth = source.width;\r\n        let newHeight = source.height;\r\n        if(newHeight !== this._height || newWidth !== this._width){\r\n            gl.texImage2D(gl.TEXTURE_2D,this.miplevel,this.internalformat,this.format,this.type,source);\r\n        }else{\r\n            gl.texSubImage2D(gl.TEXTURE_2D,this.miplevel,0,0,this.format,this.type,source);\r\n        }\r\n        this._width = newWidth;\r\n        this._height = newHeight;\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Use a data source and uploads this texture to the GPU\r\n     * @param data {TypedArray} data to upload to the texture\r\n     * @param width {number} new width of the texture\r\n     * @param height {number} new height of the texture\r\n     */\r\n    public uploadData(data:Float32Array,width:number,height:number){\r\n        this.bind();\r\n        let gl = this.gl;\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha as any as GLint);\r\n        if(width !== this._width || height !== this._height){\r\n            gl.texImage2D(gl.TEXTURE_2D,this.miplevel,this.internalformat,width,height,0,this.format,this.type,data||null);\r\n        }else{\r\n            gl.texSubImage2D(gl.TEXTURE_2D,this.miplevel,0,0,width,height,this.format,this.type,data||null);\r\n        }\r\n        this._width = width;\r\n        this._height = height;\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Binds the texture\r\n     * @param location\r\n     */\r\n    public bind(location:number=this._textureID):GLTexture{\r\n        let gl = this.gl;\r\n        if(location !== undefined){\r\n            gl.activeTexture(gl.TEXTURE0 + location);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_2D,this._texture);\r\n        return this;\r\n    }\r\n\r\n    public unbind(location:number=this._textureID):GLTexture{\r\n        let gl = this.gl;\r\n        if(location !== undefined){\r\n            gl.activeTexture(gl.TEXTURE0 + location);\r\n        }\r\n        gl.bindTexture(gl.TEXTURE_2D,null);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @param linear {boolean} if we want to use linear filtering or nearest neighbour interpolation\r\n     */\r\n    public minFilter(linear:boolean){\r\n        this.bind();\r\n        let gl = this.gl;\r\n        if(this.mipmap){\r\n            gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,linear?gl.LINEAR_MIPMAP_LINEAR:gl.NEAREST_MIPMAP_NEAREST);\r\n        }else{\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, linear?gl.LINEAR:gl.NEAREST);\r\n        }\r\n        this.unbind();\r\n    }\r\n\r\n    public setMinFilter(filter:MIN_FILTER):void{\r\n        if(!this.mipmap && (filter === MIN_FILTER.LINEAR_MIPMAP_LINEAR\r\n            || filter === MIN_FILTER.LINEAR_MIPMAP_NEAREST\r\n            || filter === MIN_FILTER.NEAREST_MIPMAP_LINEAR\r\n            ||filter === MIN_FILTER.NEAREST_MIPMAP_NEAREST)\r\n        ){\r\n            this.enableMipmap();\r\n        }\r\n        this.bind();\r\n        let gl = this.gl;\r\n        if(this.mipmap) {\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter);\r\n        }else{\r\n            //If there is no mipamp e.g. non power of 2 use LINEAR or NEAREST\r\n            const linear = filter === MIN_FILTER.LINEAR || MIN_FILTER.LINEAR_MIPMAP_LINEAR || MIN_FILTER.LINEAR_MIPMAP_NEAREST;\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, linear?gl.LINEAR:gl.NEAREST);\r\n        }\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * @param linear {boolean} if we want to use linear or nearest neighbour interpolation\r\n     */\r\n    public magFilter(linear:boolean){\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,linear?gl.LINEAR:gl.NEAREST);\r\n        this.unbind();\r\n    }\r\n\r\n    public setMagFilter(filter:MAG_FILTER):void{\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,filter);\r\n        this.unbind();\r\n    }\r\n    /**\r\n     * Enables mipmapping\r\n     */\r\n    public enableMipmap(){\r\n        if(GLTexture.isPowerOf2(this._width) && GLTexture.isPowerOf2(this._height) && (this.internalformat === this.gl.RGB || this.internalformat === this.gl.RGBA)) {\r\n            let gl = this.gl;\r\n            this.bind();\r\n            this.mipmap = true;\r\n            gl.generateMipmap(gl.TEXTURE_2D);\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Enables linear filtering\r\n     */\r\n    public enableLinearScaling(){\r\n        this.minFilter(true);\r\n        this.magFilter(true);\r\n    }\r\n\r\n    /**\r\n     * Enabled nearest neighbour interpolation\r\n     */\r\n    public enableNearestScaling(){\r\n        this.minFilter(false);\r\n        this.magFilter(false);\r\n    }\r\n\r\n    /**\r\n     * Enables clamping on the texture wo WebGL will not repeat it\r\n     */\r\n    public enableWrapClamp(){\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Enable tiling on the texture\r\n     */\r\n    public enableWrapRepeat(){\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.REPEAT);\r\n        this.unbind();\r\n    }\r\n\r\n    public enableWrapMirrorRepeat(){\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.MIRRORED_REPEAT);\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.MIRRORED_REPEAT);\r\n        this.unbind();\r\n    }\r\n\r\n    public setWrapS(mode:TEXTURE_WRAP):void{\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,mode);\r\n        this.unbind();\r\n    }\r\n\r\n    public setWrapT(mode:TEXTURE_WRAP):void{\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,mode);\r\n        this.unbind();\r\n    }\r\n\r\n    public flipY(flip:number){\r\n        let gl = this.gl;\r\n        this.bind();\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,flip);\r\n        this.unbind();\r\n    }\r\n\r\n    /**\r\n     * Destroys this texture\r\n     */\r\n    public destroy(){\r\n        let gl = this.gl;\r\n        gl.deleteTexture(this._texture);\r\n    }\r\n\r\n    public static isPowerOf2(value:number):boolean{\r\n        return (value & (value-1)) === 0;\r\n    }\r\n\r\n    public static nextHighestPowerOfTwo(x:number):number {\r\n        --x;\r\n        for (var i = 1; i < 32; i <<= 1) {\r\n            x = x | x >> i;\r\n        }\r\n        return x + 1;\r\n    }\r\n\r\n    public get textureID():number {\r\n        return this._textureID;\r\n    }\r\n\r\n    public set textureID(value:number) {\r\n        this._textureID = value;\r\n    }\r\n\r\n    public get texture():WebGLTexture {\r\n        return this._texture;\r\n    }\r\n\r\n    public set texture(value:WebGLTexture) {\r\n        this._texture = value;\r\n    }\r\n\r\n    public get premultiplyAlpha():boolean {\r\n        return this._premultiplyAlpha;\r\n    }\r\n\r\n    public set premultiplyAlpha(value:boolean) {\r\n        this._premultiplyAlpha = value;\r\n    }\r\n\r\n    public get width():number {\r\n        return this._width;\r\n    }\r\n\r\n    public get height():number {\r\n        return this._height;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param gl {WebGL2RenderingContext} the current webgl context\r\n     * @param source {HTMLImageElement|ImageData} the source image of the texture\r\n     * @param premultiplyAlpha {Boolean} If we want to use pre-multiplied alpha\r\n     * @param textureID {number} textureID to use multiple textures in a shader\r\n     * @param internalformat {number} optional interal format RGBA8,RGB16 etc.\r\n     * @param format {number} optional the Format to use for the texture RGBA etc.\r\n     * @param type {number} texture type GL_FLOAT etc\r\n     * @returns {GLTexture}\r\n     */\r\n    public static fromSource(gl:WebGL2RenderingContext, source:HTMLImageElement|ImageData, premultiplyAlpha:boolean=false, textureID:number=0,internalformat?:number, format?:number, type?:number):GLTexture{\r\n        let texture = new GLTexture(gl,textureID,null,null,internalformat,format,type);\r\n        texture._premultiplyAlpha = premultiplyAlpha;\r\n        texture.upload(source);\r\n        return texture;\r\n    }\r\n\r\n    /**\r\n     * @param {WebGL2RenderingContext} gl - webgl context\r\n     * @param {Float32Array} data - data for the texture\r\n     * @param {number} width - width of the texture\r\n     * @param {number} height - height of the texture\r\n     * @param {number} textureID - textureID\r\n     * @param {number} internalformat - optional format to use RGBA,RGB etc.\r\n     * @param {number} format - optional format to use RGBA,RGB etc.\r\n     * @param {number} type - data type default: UNSIGNED_BYTE\r\n     * @param {boolean} premultiplyAlpha - If we want to use pre-multiplied alpha\r\n     * @returns {GLTexture}\r\n     */\r\n    public static fromData(gl:WebGL2RenderingContext, data:Float32Array, width:number, height:number, textureID:number=0,internalformat?:number, format?:number, type?:number,premultiplyAlpha?:boolean):GLTexture{\r\n        let texture = new GLTexture(gl,textureID,null,null,internalformat,format,type);\r\n        texture._premultiplyAlpha = premultiplyAlpha;\r\n        texture.uploadData(data,width,height);\r\n        return texture;\r\n    }\r\n}","export type UBOType = \"float\"|\"int\"|\"bool\"|\"boolean\"|\"mat4\"|\"mat3\"|\"vec2\"|\"vec3\"|\"vec4\";\r\n\r\nexport interface UBOItem {\r\n    type:UBOType;\r\n    offset?:number;\r\n    alignment?: number;\r\n    blockSize?: number;\r\n    alignedByteLength?: number;\r\n    data:ArrayBufferView|ArrayBuffer;\r\n}\r\n\r\nexport class GLUniformBufferObject {\r\n\r\n    private static TYPE_TO_SIZE = {\r\n        float: [4,4],\r\n        int: [4,4],\r\n        bool: [4,4],\r\n        boolean: [4,4],\r\n        mat4: [64,64],\r\n        mat3: [48,48],\r\n        vec4: [16,16],\r\n        vec3: [16,12],\r\n        vec2: [8,8]\r\n    };\r\n\r\n    private gl:WebGL2RenderingContext;\r\n\r\n    private items:{[id:string]:UBOItem};\r\n\r\n    /**\r\n     * The draw type of the buffer\r\n     * @member {gl.STATIC_DRAW|gl.DYNAMIC_DRAW|gl.STREAM_DRAW}\r\n     */\r\n    private drawType:number;\r\n    private type:number;\r\n    private buffer:WebGLBuffer;\r\n    private _bindingPoint:number;\r\n    private _byteLength:number;\r\n\r\n    constructor(gl:WebGL2RenderingContext,bindPoint:number=0, drawType:number=gl.DYNAMIC_DRAW){\r\n        this.gl = gl;\r\n        this.type = gl.UNIFORM_BUFFER;\r\n        this.buffer = gl.createBuffer();\r\n        this.items = {};\r\n        this.drawType = drawType;\r\n        this._bindingPoint = bindPoint;\r\n        this._byteLength = 0;\r\n    }\r\n\r\n\r\n    /**\r\n     * Add an item/property to the UBO\r\n     * make sure that the order of the items is right\r\n     */\r\n    public addItem(name:string,type:UBOType,data?:ArrayBuffer|ArrayBufferView):void{\r\n        this.items[name] = {type:type, offset:0, blockSize: 0, alignedByteLength: 0, data:data};\r\n    }\r\n\r\n    /**\r\n     * Add an block of items/properties to the UBO\r\n     * make sure the order is the same as in the shader\r\n     */\r\n    public addBlock(items:Array<{name:string,type:UBOType,data?:ArrayBuffer|ArrayBufferView}>):void {\r\n        for(let i=0, item; item = items[i]; i++){\r\n            this.addItem(item.name,item.type,item.data);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update the item data\r\n     * @param name - name of the item\r\n     * @param data - new data\r\n     * @param updateGL -\r\n     */\r\n    public updateItem(name:string,data:ArrayBuffer|ArrayBufferView,updateGL:boolean=false):void {\r\n        this.items[name].data = data;\r\n        if(updateGL){\r\n            this.updateGL(name);\r\n        }\r\n    }\r\n\r\n    public hasItem(name:string):boolean {\r\n        return !!this.items[name];\r\n    }\r\n\r\n    public removeItem(name:string,updateGL:boolean=false):void {\r\n        delete this.items[name];\r\n        this.upload();\r\n    }\r\n\r\n    /**\r\n     * Update the Buffer for a single item\r\n     * @param name\r\n     */\r\n    public updateGL(name:string):void {\r\n        const item = this.items[name];\r\n        if(item.data) {\r\n            this.bind();\r\n            this.gl.bufferSubData(this.type, item.offset, item.data as ArrayBufferView);\r\n            this.unbind();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * upload one buffer instead of adding multiple small items\r\n     * @param data - the buffer containing all values\r\n     * @param byteLength - the aligned componentTypeCount of the UBO\r\n     */\r\n    public uploadBuffer(byteLength:number, data?:ArrayBufferView|ArrayBuffer, length?:number):number {\r\n        this._byteLength = byteLength;\r\n        const gl = this.gl;\r\n        this.bind();\r\n        gl.bufferData(this.type, this._byteLength, this.drawType);\r\n        if(data) {\r\n            gl.bufferSubData(this.type, 0, data as ArrayBufferView, length);\r\n        }\r\n        this.unbind();\r\n        return this._byteLength;\r\n    }\r\n\r\n    /**\r\n     * Uploads all data to the gpu\r\n     */\r\n    public upload():number{\r\n        this._byteLength = this.updateItemAlignment();\r\n        this.bind();\r\n        const gl = this.gl;\r\n        gl.bufferData(this.type,this._byteLength,this.drawType);\r\n        for(let i=0, item:UBOItem; item = this.items[i]; i++){\r\n            if(item.data) {\r\n                gl.bufferSubData(this.type, item.offset, item.data as ArrayBufferView);\r\n            }\r\n        }\r\n        this.unbind();\r\n        return this._byteLength;\r\n    }\r\n\r\n    public bindUBO(bindingPoint:number=this._bindingPoint, offset:number=0, size:number=this._byteLength):void {\r\n        if(offset === 0 && size === this._byteLength){\r\n            this.gl.bindBufferBase(this.type,bindingPoint,this.buffer);\r\n        }else {\r\n            this.gl.bindBufferRange(this.type, bindingPoint, this.buffer, offset, size);\r\n        }\r\n    }\r\n\r\n    private bind(){\r\n        this.gl.bindBuffer(this.type,this.buffer);\r\n    }\r\n\r\n    private unbind(){\r\n        this.gl.bindBuffer(this.type,null);\r\n    }\r\n\r\n    public destroy(){\r\n        if(this.gl.isBuffer(this.buffer)){\r\n            this.gl.deleteBuffer(this.buffer);\r\n        }\r\n        this.gl = null;\r\n        this.buffer = null;\r\n    }\r\n\r\n    private updateItemAlignment():number {\r\n        let prevItem:UBOItem = null;\r\n        let byteLength = 0;\r\n\r\n        const keys = Object.keys(this.items);\r\n        for(let i=0, item:UBOItem; item = this.items[keys[i]]; i++){\r\n            if(!item.data){\r\n                continue;\r\n            }\r\n\r\n            const sizes = GLUniformBufferObject.TYPE_TO_SIZE[item.type];\r\n            item.alignment = item.alignedByteLength = sizes[0];\r\n            item.blockSize = sizes[1];\r\n\r\n            //check if array\r\n            if(item.data.byteLength !== item.blockSize){\r\n                const length = item.data.byteLength / item.blockSize;\r\n                item.alignedByteLength = item.alignment * length;\r\n            }\r\n\r\n            if(prevItem) {\r\n                item.offset = prevItem.alignedByteLength + prevItem.offset;\r\n            }\r\n\r\n            prevItem = item;\r\n            byteLength += item.alignedByteLength;\r\n        }\r\n\r\n        return byteLength;\r\n    }\r\n\r\n\r\n    get bindingPoint(): number {\r\n        return this._bindingPoint;\r\n    }\r\n\r\n    set bindingPoint(value: number) {\r\n        this._bindingPoint = value;\r\n    }\r\n\r\n    get byteLength(): number {\r\n        return this._byteLength;\r\n    }\r\n\r\n    set byteLength(value: number) {\r\n        this._byteLength = value;\r\n    }\r\n}","import {GLBuffer} from \"./GLBuffer\";\r\nimport {Attributes} from \"./shader/GLAttribute\";\r\nimport Attribute = Attributes.GLAttribute;\r\n\r\nexport interface IAttribute {\r\n    buffer:GLBuffer,\r\n    attribute:Attribute,\r\n    size:number,\r\n    type:number,\r\n    normalized:boolean,\r\n    stride:number,\r\n    offset:number,\r\n    initialize:boolean\r\n}\r\n\r\nexport class GLVertexArrayObject {\r\n    private gl: WebGL2RenderingContext;\r\n    private vao: WebGLVertexArrayObject;\r\n    private attributes: Array<IAttribute>;\r\n    private indexBuffer:GLBuffer;\r\n    private dirty:boolean;\r\n\r\n    constructor(gl: WebGL2RenderingContext) {\r\n        this.gl = gl;\r\n        this.vao = this.gl.createVertexArray();\r\n        this.attributes = [];\r\n        this.dirty = false;\r\n    }\r\n\r\n    /**\r\n     * Binds the VAO, if its dirty it will initialize the attributes for the data\r\n     */\r\n    public bind(): GLVertexArrayObject {\r\n        if (this.vao) {\r\n            this.gl.bindVertexArray(this.vao);\r\n            if(this.dirty){\r\n                this.activate();\r\n                this.dirty = false;\r\n                this.bind();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Activates the vao,\r\n     * binds the data and applies the Attributes\r\n     */\r\n    protected activate(){\r\n        const gl = this.gl;\r\n        let lastBuffer:GLBuffer =  null;\r\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null);\r\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null);\r\n        for(let i=0,attribute:IAttribute; attribute = this.attributes[i]; i++){\r\n            if(lastBuffer !== attribute.buffer){\r\n                //unbind previous buffer we dont want to apply the attribute to both buffers\r\n                if(lastBuffer) {\r\n                    lastBuffer.unbind();\r\n                }\r\n                //bind attribute buffer\r\n                attribute.buffer.bind();\r\n                //update lastBuffer\r\n                lastBuffer = attribute.buffer;\r\n            }\r\n            GLVertexArrayObject.setVertexAttribArray(gl,attribute);\r\n        }\r\n        if(lastBuffer) {\r\n            lastBuffer.unbind();\r\n        }\r\n        this.indexBuffer.bind();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Deactivates the non native VertexArrayObject\r\n     */\r\n    protected deactivate(){\r\n        const gl = this.gl;\r\n        let lastBuffer =  null;\r\n        for(let i=0, attribute:IAttribute; attribute = this.attributes[i]; i++){\r\n            if(lastBuffer !== attribute.buffer){\r\n                attribute.buffer.unbind();\r\n                lastBuffer = attribute.buffer;\r\n            }\r\n            GLVertexArrayObject.setVertexAttribArray(gl,attribute,true);\r\n        }\r\n        this.indexBuffer.unbind();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Unbind the VAO\r\n     */\r\n    public unbind(force:boolean=false) {\r\n        if (this.vao) {\r\n            this.gl.bindVertexArray(null);\r\n        }else if(!this.vao || force){\r\n            this.deactivate();\r\n        }\r\n        return this;\r\n    }\r\n\r\n    public addAttribute(buffer: GLBuffer, attribute: Attribute, size: number, type: number, normalized: boolean, stride: number, offset: number,initialize:boolean=true):GLVertexArrayObject {\r\n        this.attributes.push({\r\n            buffer,\r\n            attribute,\r\n            size,\r\n            type,\r\n            normalized,\r\n            stride,\r\n            offset,\r\n            initialize\r\n        });\r\n        this.dirty = true;\r\n        return this;\r\n    }\r\n\r\n    public setIndexBuffer(buffer:GLBuffer):GLVertexArrayObject{\r\n        this.indexBuffer = buffer;\r\n        return this;\r\n    }\r\n\r\n    public draw(mode:number,size:number,type:number,offset:number):GLVertexArrayObject{\r\n        const gl = this.gl;\r\n        gl.drawElements(mode,size,type,offset);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes all attributes from this vao\r\n     * and deactivates the GLAttributes\r\n     */\r\n    public clear(){\r\n        //Bind vao\r\n        if(this.vao){\r\n            this.gl.bindVertexArray(this.vao);\r\n        }\r\n        //Remove attributes\r\n        this.deactivate();\r\n        //clear attributes\r\n        this.attributes.length = 0;\r\n        //Remove indexBuffer\r\n        this.indexBuffer = null;\r\n        //Unbind vao\r\n        if(this.vao){\r\n            this.gl.bindVertexArray(null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clears the buffer the removes all references\r\n     * making it free for gc\r\n     */\r\n    public destroy(){\r\n        this.clear();\r\n        if(this.vao){\r\n            this.gl.deleteVertexArray(this.vao);\r\n        }\r\n        this.gl = undefined;\r\n        this.indexBuffer = undefined;\r\n        this.attributes = undefined;\r\n        this.vao = undefined;\r\n    }\r\n\r\n    public static setVertexAttribArrays(gl:WebGL2RenderingContext, attributes:Array<IAttribute>, unbind:boolean=false):void{\r\n        for(let i=0, attribute:IAttribute; attribute = attributes[i]; i++){\r\n            GLVertexArrayObject.setVertexAttribArray(gl,attribute,unbind);\r\n        }\r\n    }\r\n\r\n    public static setVertexAttribArray(gl:WebGL2RenderingContext,attribute:IAttribute,unbind:boolean=false):void{\r\n        if(attribute.initialize && attribute.attribute){\r\n            gl.vertexAttribPointer(attribute.attribute.location,attribute.size,attribute.type,attribute.normalized,attribute.stride,attribute.offset);\r\n            attribute.initialize = false;\r\n        }\r\n        if(unbind && attribute.attribute){\r\n            gl.disableVertexAttribArray(attribute.attribute.location);\r\n        }else if(attribute.attribute){\r\n            gl.enableVertexAttribArray(attribute.attribute.location);\r\n        }\r\n    }\r\n}","export enum GL_TYPES {\r\n    BYTE = 0x1400, //5120\r\n    UNSIGNED_BYTE = 0x1401, //5121\r\n    SHORT = 0x1402, //5122\r\n    UNSIGNED_SHORT = 0x1403, //5123\r\n    INT = 0x1404, //5124\r\n    UNSIGNED_INT = 0x1405, //5125\r\n    FLOAT = 0x1406 //5126\r\n}\r\n\r\nexport const GL_TYPES_BYTESIZE = {\r\n    0x1400: 1,\r\n    0x1401: 1,\r\n    0x1402: 2,\r\n    0x1403: 2,\r\n    0x1404: 4,\r\n    0x1405: 4,\r\n    0x1406: 4\r\n};\r\n\r\nexport enum GL_PRIMITIVES {\r\n    POSITION = \"POSITION\",\r\n    NORMAL = \"NORMAL\",\r\n    TANGENT = \"TANGENT\",\r\n    TEXCOORD_0 = \"TEXCOORD_0\",\r\n    TEXCOORD_1 = \"TEXCOORD_1\",\r\n    COLOR_0 = \"COLOR_0\",\r\n    JOINTS_0 = \"JOINTS_0\",\r\n    WEIGHTS_0 = \"WEIGHTS_0\",\r\n    JOINTS_1 = \"JOINTS_1\",\r\n    WEIGHTS_1 = \"WEIGHTS_1\"\r\n}\r\n\r\nexport enum GL_BUFFERS {\r\n    STATIC_DRAW = 0x88E4,\r\n    STREAM_DRAW = 0x88E0,\r\n    DYNAMIC_DRAW = 0x88E8,\r\n    ARRAY_BUFFER = 0x8892,\r\n    ELEMENT_ARRAY_BUFFER = 0x8893\r\n}\r\n\r\nexport enum MAG_FILTER {\r\n    NEAREST = 9728,\r\n    LINEAR = 9729\r\n}\r\n\r\nexport enum MIN_FILTER {\r\n    NEAREST = 9728,\r\n    LINEAR = 9729,\r\n    NEAREST_MIPMAP_NEAREST = 9984,\r\n    LINEAR_MIPMAP_NEAREST = 9985,\r\n    NEAREST_MIPMAP_LINEAR = 9986,\r\n    LINEAR_MIPMAP_LINEAR = 9987\r\n}\r\n\r\nexport enum TEXTURE_WRAP {\r\n    CLAMP_TO_EDGE = 33071,\r\n    MIRRORED_REPEAT = 33648,\r\n    REPEAT = 10497\r\n}\r\n\r\nexport enum GL_INTERNALFORMAT {\r\n    RGB = 6407,\r\n    RGBA = 6408,\r\n    R8 = 33321,\r\n    R16F = 33325,\r\n    R32F = 33326,\r\n    R8UI = 33330,\r\n    RG8 = 33323,\r\n    RG16F = 33327,\r\n    RG = 33319,\r\n    RG32F = 33328,\r\n    RGB8 = 32849,\r\n    SRGB = 35904,\r\n    SRGB8 = 35905,\r\n    SRGB8_ALPHA8 = 35907,\r\n    RGB565 = 36194,\r\n    R11F_G11F_B10F = 35898,\r\n    RGB9_E5 = 35901,\r\n    RGB16F = 34843,\r\n    RGB32F = 34837,\r\n    RGB8UI = 36221,\r\n    RGBA8 = 32856,\r\n    RGB5_A1 = 32855,\r\n    RGBA16F = 34842,\r\n    RGBA32F = 34836,\r\n    RGBA8UI = 36220\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./GLConstants\";\n","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\nexport module  DefaultValue {\r\n    export function value(type:string,size:number):Float32Array|Int32Array|Array<boolean>|number|boolean{\r\n        switch (type)\r\n        {\r\n            case 'float':\r\n                return 0;\r\n            case 'vec2':\r\n                return new Float32Array(2 * size);\r\n            case 'vec3':\r\n                return new Float32Array(3 * size);\r\n            case 'vec4':\r\n                return new Float32Array(4 * size);\r\n            case 'int':\r\n            case 'samplerCube':\r\n            case 'sampler2D':\r\n                return 0;\r\n            case 'ivec2':\r\n                return new Int32Array(2 * size);\r\n            case 'ivec3':\r\n                return new Int32Array(3 * size);\r\n            case 'ivec4':\r\n                return new Int32Array(4 * size);\r\n            case 'bool':\r\n                return false;\r\n            case 'bvec2':\r\n                return booleanArray( 2 * size);\r\n            case 'bvec3':\r\n                return booleanArray(3 * size);\r\n            case 'bvec4':\r\n                return booleanArray(4 * size);\r\n            case 'mat2':\r\n                return new Float32Array([1, 0,\r\n                    0, 1]);\r\n            case 'mat3':\r\n                return new Float32Array([1, 0, 0,\r\n                    0, 1, 0,\r\n                    0, 0, 1]);\r\n            case 'mat4':\r\n                return new Float32Array([1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1]);\r\n            default:\r\n                console.warn(\"no default value for type \",type);\r\n        }\r\n\r\n        function booleanArray(size:number):Array<boolean>{\r\n            let array = new Array(size);\r\n            for(let i=0; i < array.length;i++){\r\n                array[i] = false;\r\n            }\r\n            return array;\r\n        }\r\n    }\r\n}","function glGetStates(gl:WebGL2RenderingContext):{[x:string]:number}{\r\n    return {\r\n        \"BLEND\":gl.BLEND,\r\n        \"DEPTH_TEST\":gl.DEPTH_TEST,\r\n        \"DITHER\":gl.DITHER,\r\n        \"SCISSOR_TEST\":gl.SCISSOR_TEST,\r\n        \"STENCIL_TEST\":gl.STENCIL_TEST,\r\n        \"TEXTURE_2D\":gl.TEXTURE_2D,\r\n        \"TEXTURE_3D\":gl.TEXTURE_3D,\r\n        \"TEXTURE_CUBE_MAP\":gl.TEXTURE_CUBE_MAP\r\n    };\r\n}\r\n\r\nexport function glGetCurrentState(gl:WebGL2RenderingContext):string{\r\n    let states = glGetStates(gl);\r\n    let str = \"\";\r\n    for(let key in states){\r\n        if(gl.isEnabled(states[key])){\r\n            str += key+\" is enabled!\\n\";\r\n        }else{\r\n            str += key+\" is disabled!\\n\";\r\n        }\r\n    }\r\n    return str;\r\n}\r\n\r\nexport function glResetState(gl:WebGL2RenderingContext):void{\r\n    let states = glGetStates(gl);\r\n    for(let key in states){\r\n        gl.disable(states[key]);\r\n    }\r\n    gl.enable(gl.DITHER);\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./defaultValue\";\nexport * from \"./glGet\";\nexport * from \"./mapSize\";\nexport * from \"./mapType\";\nexport * from \"./webglUtil\";\n","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\nexport module MapSize {\r\n    var GLSL_TO_SIZE = {\r\n        'float':    1,\r\n        'vec2':     2,\r\n        'vec3':     3,\r\n        'vec4':     4,\r\n\r\n        'int':      1,\r\n        'ivec2':    2,\r\n        'ivec3':    3,\r\n        'ivec4':    4,\r\n\r\n        'bool':     1,\r\n        'bvec2':    2,\r\n        'bvec3':    3,\r\n        'bvec4':    4,\r\n\r\n        'mat2':     4,\r\n        'mat3':     9,\r\n        'mat4':     16,\r\n\r\n        'sampler2D':  1\r\n    };\r\n\r\n    /**\r\n     * Returns the componentTypeCount in Bytes needed for the provided GLSL Type in WebGL\r\n     * @param type\r\n     * @returns {any}\r\n     */\r\n    export function map(type:string):number{\r\n        return GLSL_TO_SIZE[type];\r\n    }\r\n}","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\n\r\n/**\r\n * Maps the WebGL Types to the convenient GLSL Types\r\n */\r\nexport module MapType {\r\n    var GL_TABLE = null;\r\n    var GL_TO_GLSL_TYPES = {\r\n        'FLOAT':       'float',\r\n        'FLOAT_VEC2':  'vec2',\r\n        'FLOAT_VEC3':  'vec3',\r\n        'FLOAT_VEC4':  'vec4',\r\n\r\n        'INT':         'int',\r\n        'INT_VEC2':    'ivec2',\r\n        'INT_VEC3':    'ivec3',\r\n        'INT_VEC4':    'ivec4',\r\n\r\n        'BOOL':        'bool',\r\n        'BOOL_VEC2':   'bvec2',\r\n        'BOOL_VEC3':   'bvec3',\r\n        'BOOL_VEC4':   'bvec4',\r\n\r\n        'FLOAT_MAT2':  'mat2',\r\n        'FLOAT_MAT3':  'mat3',\r\n        'FLOAT_MAT4':  'mat4',\r\n\r\n        'SAMPLER_2D':  'sampler2D',\r\n        'SAMPLER_CUBE': 'samplerCube'\r\n    };\r\n    export function map(gl:WebGL2RenderingContext, type:number):string{\r\n        if(!GL_TABLE){\r\n            let typeNames = Object.keys(GL_TO_GLSL_TYPES);\r\n            GL_TABLE = {};\r\n            for(let i=0; i < typeNames.length;i++){\r\n                let tn = typeNames[i];\r\n                GL_TABLE[gl[tn]] = GL_TO_GLSL_TYPES[tn];\r\n            }\r\n        }\r\n        return GL_TABLE[type];\r\n    }\r\n}","/**\r\n * @fileoverview This file contains functions every webgl program will need\r\n * a version of one way or another.\r\n *\r\n * Instead of setting up a context manually it is recommended to\r\n * use. This will check for success or failure. On failure it\r\n * will attempt to present an approriate message to the user.\r\n *\r\n *       gl = WebGLUtils.setupWebGL(canvas);\r\n *\r\n * For animated WebGL apps use of setTimeout or setInterval are\r\n * discouraged. It is recommended you structure your rendering\r\n * loop like this.\r\n *\r\n *       function render() {\r\n *         window.requestAnimationFrame(render, canvas);\r\n *\r\n *         // do rendering\r\n *         ...\r\n *       }\r\n *       render();\r\n *\r\n * This will call your rendering function up to the refresh rate\r\n * of your display but will stop rendering if your app is not\r\n * visible.\r\n */\r\nexport module WebGLUtils {\r\n    /**\r\n     * Mesasge for getting a webgl browser\r\n     * @type {string}\r\n     */\r\n    var GET_A_WEBGL_BROWSER = '' +\r\n        'This page requires a browser that supports WebGL.<br/>' +\r\n        '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\r\n\r\n    /**\r\n     * Mesasge for need better hardware\r\n     * @type {string}\r\n     */\r\n    var OTHER_PROBLEM = '' +\r\n        \"It doesn't appear your computer can support WebGL.<br/>\" +\r\n        '<a href=\"http://get.webgl.org\">Click here for more information.</a>';\r\n\r\n    /**\r\n     * Creates the HTLM for a failure message\r\n     * @param {string} canvasContainerId id of container of th\r\n     *        canvas.\r\n     * @return {string} The html.\r\n     */\r\n    function makeFailHTML(msg: string): string {\r\n        return '' +\r\n            '<div style=\"margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;\">' + msg + '</div>';\r\n    }\r\n\r\n    /**\r\n     * Creates a webgl context. If creation fails it will\r\n     * change the contents of the container of the <canvas>\r\n     * tag to an error message with the correct links for WebGL.\r\n     * @param {Element} canvas. The canvas element to create a\r\n     *     context from.\r\n     * @param {WebGLContextCreationAttirbutes} opt_attribs Any\r\n     *     creation attributes you want to pass in.\r\n     * @param {function:(msg)} opt_onError An function to call\r\n     *     if there is an error during creation.\r\n     * @return {WebGL2RenderingContext} The created context.\r\n     */\r\n    export function setupWebGL(canvas: Element, opt_attribs?: WebGLContextAttributes, opt_onError?: (msg: string)=>any):WebGL2RenderingContext|CanvasRenderingContext2D {\r\n        function handleCreationError(msg) {\r\n            let container: Element = document.getElementsByTagName(\"body\")[0];\r\n            if (container) {\r\n                let str = window['WebGL2RenderingContext'] ? OTHER_PROBLEM : GET_A_WEBGL_BROWSER;\r\n                if (msg) {\r\n                    str += \"<br/><br/>Status: \" + msg;\r\n                }\r\n                container.innerHTML = makeFailHTML(str);\r\n            }\r\n        }\r\n\r\n        let onError = opt_onError || handleCreationError;\r\n        if (canvas.addEventListener) {\r\n            canvas.addEventListener(\"webglcontextcreationerr\", (event: any) => {\r\n                onError(event.statusMessage);\r\n            }, false);\r\n        }\r\n        let context = create3DContext(<HTMLCanvasElement>canvas, opt_attribs);\r\n        if (!context) {\r\n            if (!window['WebGL2RenderingContext']) {\r\n                onError(\"\");\r\n            } else {\r\n                onError(\"\");\r\n            }\r\n        }\r\n        return context;\r\n    }\r\n\r\n    /**\r\n     * Creates a webgl context.\r\n     * @param {!Canvas} canvas The canvas tag to get context\r\n     *     from. If one is not passed in one will be created.\r\n     * @return {!WebGLContext} The created context.\r\n     */\r\n    export function create3DContext(canvas: HTMLCanvasElement, opt_attribs:WebGLContextAttributes):WebGL2RenderingContext|CanvasRenderingContext2D {\r\n        let names = [\"webgl2\",\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\r\n        let context = null;\r\n        for (let name of names) {\r\n            try {\r\n                context = canvas.getContext(name, opt_attribs);\r\n            } catch (e) {\r\n            }\r\n            if (context) {\r\n                break;\r\n            }\r\n        }\r\n        return context;\r\n    }\r\n\r\n    /**\r\n     * Provides requestAnimationFrame in a cross browser\r\n     * way.\r\n     */\r\n    if (!window.requestAnimationFrame) {\r\n        window[\"requestAnimationFrame\"] = (function () {\r\n            return window[\"requestAnimationFrame\"] ||\r\n                window[\"webkitRequestAnimationFrame\"] ||\r\n                window[\"mozRequestAnimationFrame\"] ||\r\n                window[\"oRequestAnimationFrame\"] ||\r\n                window[\"msRequestAnimationFrame\"] ||\r\n                function (callback: (...args:any[])=>any, element: any) {\r\n                    window.setTimeout(callback, 1000 / 60);\r\n                };\r\n        })();\r\n    }\r\n\r\n    /** * ERRATA: 'cancelRequestAnimationFrame' renamed to 'cancelAnimationFrame' to reflect an update to the W3C Animation-Timing Spec.\r\n     *\r\n     * Cancels an animation frame request.\r\n     * Checks for cross-browser support, falls back to clearTimeout.\r\n     * @param {number}  Animation frame request. */\r\n    if (!window.cancelAnimationFrame) {\r\n        window.cancelAnimationFrame = (window[\"cancelRequestAnimationFrame\"] ||\r\n        window[\"webkitCancelAnimationFrame\"] || window[\"webkitCancelRequestAnimationFrame\"] ||\r\n        window[\"mozCancelAnimationFrame\"] || window[\"mozCancelRequestAnimationFrame\"] ||\r\n        window[\"msCancelAnimationFrame\"] || window[\"msCancelRequestAnimationFrame\"] ||\r\n        window[\"oCancelAnimationFrame\"] || window[\"oCancelRequestAnimationFrame\"] ||\r\n        window.clearTimeout);\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./GLBuffer\";\nexport * from \"./primitives/GLCube\";\nexport * from \"./GLCubemap\";\nexport * from \"./GLFramebuffer\";\nexport * from \"./primitives/GLQuad\";\nexport * from \"./primitives/GLSphere\";\nexport * from \"./GLTexture\";\nexport * from \"./GLUniformBufferObject\";\nexport * from \"./GLVertexArrayObject\";\nexport * from \"./constants/index\";\nexport * from \"./gl_util/index\";\nexport * from \"./shader/index\";\n","import {GLBuffer} from \"../GLBuffer\";\r\nimport {GLVertexArrayObject} from \"../GLVertexArrayObject\";\r\n\r\nexport class GLCube {\r\n    private static readonly INDEX_LENGTH:number = 36;\r\n    private gl:WebGL2RenderingContext;\r\n    private _vertexBuffer:GLBuffer;\r\n    private _indexBuffer:GLBuffer;\r\n    private _vertexArrayObject:GLVertexArrayObject;\r\n\r\n    constructor(gl:WebGL2RenderingContext){\r\n        this.gl = gl;\r\n        this.createVertexData();\r\n    }\r\n\r\n    private createVertexData(){\r\n        const vertices = new Float32Array([\r\n            // front\r\n            -1.0, -1.0,  1.0,\r\n            1.0, -1.0,  1.0,\r\n            1.0,  1.0,  1.0,\r\n            -1.0,  1.0,  1.0,\r\n            // back\r\n            -1.0, -1.0, -1.0,\r\n            1.0, -1.0, -1.0,\r\n            1.0,  1.0, -1.0,\r\n            -1.0,  1.0, -1.0\r\n        ]);\r\n        const indices = new Uint8Array([\r\n            // front\r\n            0, 1, 2,\r\n            2, 3, 0,\r\n            // right\r\n            1, 5, 6,\r\n            6, 2, 1,\r\n            // back\r\n            7, 6, 5,\r\n            5, 4, 7,\r\n            // left\r\n            4, 0, 3,\r\n            3, 7, 4,\r\n            // bottom\r\n            4, 5, 1,\r\n            1, 0, 4,\r\n            // top\r\n            3, 2, 6,\r\n            6, 7, 3\r\n        ]);\r\n\r\n        this._vertexBuffer = GLBuffer.createVertexBuffer(this.gl,vertices,this.gl.STATIC_DRAW);\r\n        if(!this._vertexBuffer){\r\n            throw 'Failed to create VertexBuffer Object';\r\n        }\r\n        this._indexBuffer = GLBuffer.createIndexBuffer(this.gl,indices,this.gl.STATIC_DRAW);\r\n        if(!this._indexBuffer){\r\n            throw 'Failed to create IndexBuffer Object!';\r\n        }\r\n        this._vertexArrayObject = new GLVertexArrayObject(this.gl);\r\n        this.vertexArrayObject.setIndexBuffer(this._indexBuffer);\r\n    }\r\n\r\n    get vertexBuffer(): GLBuffer {\r\n        return this._vertexBuffer;\r\n    }\r\n\r\n    set vertexBuffer(value: GLBuffer) {\r\n        this._vertexBuffer = value;\r\n    }\r\n\r\n    get indexBuffer(): GLBuffer {\r\n        return this._indexBuffer;\r\n    }\r\n\r\n    set indexBuffer(value: GLBuffer) {\r\n        this._indexBuffer = value;\r\n    }\r\n\r\n    get vertexArrayObject(): GLVertexArrayObject {\r\n        return this._vertexArrayObject;\r\n    }\r\n\r\n    set vertexArrayObject(value: GLVertexArrayObject) {\r\n        this._vertexArrayObject = value;\r\n    }\r\n\r\n    public draw(drawType:number = this.gl.TRIANGLES){\r\n        this.vertexArrayObject.bind();\r\n        this.gl.drawElements(drawType,GLCube.INDEX_LENGTH,this.gl.UNSIGNED_BYTE,0);\r\n        this.vertexArrayObject.unbind();\r\n    }\r\n}","import {GLBuffer} from \"../GLBuffer\";\r\nimport {GLVertexArrayObject} from \"../GLVertexArrayObject\";\r\n/**\r\n * Created by Soeren on 12.02.2017.\r\n */\r\nexport class GLQuad {\r\n    private static readonly INDEX_LENGTH:number = 6;\r\n    private readonly gl:WebGL2RenderingContext;\r\n    private _vertexBuffer:GLBuffer;\r\n    private _indexBuffer:GLBuffer;\r\n    private _vertexArrayObject:GLVertexArrayObject;\r\n\r\n    constructor(gl:WebGL2RenderingContext){\r\n        this.gl = gl;\r\n        this.createVertexData();\r\n    }\r\n\r\n    private createVertexData(){\r\n        let vertices = new Float32Array([\r\n            -1,1,0,1,\r\n            -1,-1,0,0,\r\n            1,1,1,1,\r\n            1,-1,1,0\r\n        ]);\r\n        let indices = new Uint8Array(6);\r\n        indices[0] = 0;\r\n        indices[1] = 1;\r\n        indices[2] = 2;\r\n        indices[3] = 1;\r\n        indices[4] = 2;\r\n        indices[5] = 3;\r\n        this._vertexBuffer = GLBuffer.createVertexBuffer(this.gl,vertices,this.gl.STATIC_DRAW);\r\n        if(!this._vertexBuffer){\r\n            throw 'Failed to create VertexBuffer Object';\r\n        }\r\n        this._indexBuffer = GLBuffer.createIndexBuffer(this.gl,indices,this.gl.STATIC_DRAW);\r\n        if(!this._indexBuffer){\r\n            throw 'Failed to create IndexBuffer Object!';\r\n        }\r\n        this._vertexArrayObject = new GLVertexArrayObject(this.gl);\r\n        this.vertexArrayObject.setIndexBuffer(this._indexBuffer);\r\n    }\r\n\r\n    get vertexBuffer(): GLBuffer {\r\n        return this._vertexBuffer;\r\n    }\r\n\r\n    set vertexBuffer(value: GLBuffer) {\r\n        this._vertexBuffer = value;\r\n    }\r\n\r\n    get indexBuffer(): GLBuffer {\r\n        return this._indexBuffer;\r\n    }\r\n\r\n    set indexBuffer(value: GLBuffer) {\r\n        this._indexBuffer = value;\r\n    }\r\n\r\n    get vertexArrayObject(): GLVertexArrayObject {\r\n        return this._vertexArrayObject;\r\n    }\r\n\r\n    set vertexArrayObject(value: GLVertexArrayObject) {\r\n        this._vertexArrayObject = value;\r\n    }\r\n\r\n    public draw(drawType:number = this.gl.TRIANGLES){\r\n        this.vertexArrayObject.bind();\r\n        this.gl.drawElements(drawType,GLQuad.INDEX_LENGTH,this.gl.UNSIGNED_BYTE,0);\r\n        this.vertexArrayObject.unbind();\r\n    }\r\n}","import {GLBuffer} from \"../GLBuffer\";\r\nimport {GLVertexArrayObject} from \"../GLVertexArrayObject\";\r\n\r\nexport class GLSphere {\r\n    private readonly gl:WebGL2RenderingContext;\r\n    private _vertexBuffer:GLBuffer;\r\n    private _indexBuffer:GLBuffer;\r\n    private _vertexArrayObject:GLVertexArrayObject;\r\n    private _indexcount:number;\r\n\r\n    constructor(gl:WebGL2RenderingContext,radius:number=1,rings:number=12,sectors:number=12){\r\n        this.gl = gl;\r\n        this.createVertexData(radius,rings,sectors)\r\n    }\r\n\r\n    private createVertexData(radius:number,rings:number,sectors:number):void{\r\n        let R = 1.0/(rings-1);\r\n        let S = 1.0/(sectors-1);\r\n        let vertexData = new Float32Array(rings * sectors * 8);\r\n        let indexData = new Uint32Array(rings*sectors*6);\r\n\r\n        let index = 0;\r\n        for(let r=0; r < rings; r++){\r\n            for(let s=0; s < sectors; s++){\r\n                let x = Math.cos(2*Math.PI * s * S) * Math.sin(Math.PI * r * R);\r\n                let y = Math.sin((-Math.PI/2) + (Math.PI * r * R));\r\n                let z = Math.sin(2*Math.PI * s * S) * Math.sin(Math.PI * r * R);\r\n\r\n                vertexData[index++] = x*radius;\r\n                vertexData[index++] = y*radius;\r\n                vertexData[index++] = z*radius;\r\n\r\n                vertexData[index++] = x;\r\n                vertexData[index++] = y;\r\n                vertexData[index++] = z;\r\n\r\n                vertexData[index++] = s*S;\r\n                vertexData[index++] = r*R;\r\n            }\r\n        }\r\n\r\n        this._indexcount = 0;\r\n        for(let r=0; r < rings-1; r++){\r\n            for(let s=0; s < sectors-1; s++){\r\n                indexData[this._indexcount++] = r * sectors + s;\r\n                indexData[this._indexcount++] = (r+1) * sectors + s;\r\n                indexData[this._indexcount++] = (r+1) * sectors + (s+1);\r\n\r\n                indexData[this._indexcount++] = r * sectors + s;\r\n                indexData[this._indexcount++] = (r+1) * sectors + (s+1);\r\n                indexData[this._indexcount++] = r * sectors + (s+1);\r\n            }\r\n        }\r\n\r\n        this._vertexBuffer = GLBuffer.createVertexBuffer(this.gl,vertexData,this.gl.STATIC_DRAW);\r\n        if(!this._vertexBuffer){\r\n            throw 'Failed to create VertexBuffer Object';\r\n        }\r\n        this._indexBuffer = GLBuffer.createIndexBuffer(this.gl,indexData,this.gl.STATIC_DRAW);\r\n        if(!this._indexBuffer){\r\n            throw 'Failed to create IndexBuffer Object!';\r\n        }\r\n        this._vertexArrayObject = new GLVertexArrayObject(this.gl);\r\n        this._vertexArrayObject.setIndexBuffer(this._indexBuffer);\r\n    }\r\n\r\n    public draw(drawType: number = this.gl.TRIANGLES){\r\n        this.vertexArrayObject.bind();\r\n        this.gl.drawElements(drawType,this._indexcount,this.gl.UNSIGNED_INT,0);\r\n        this.vertexArrayObject.unbind();\r\n    }\r\n\r\n    public get vertexBuffer():GLBuffer {\r\n        return this._vertexBuffer;\r\n    }\r\n\r\n    public set vertexBuffer(value:GLBuffer) {\r\n        this._vertexBuffer = value;\r\n    }\r\n\r\n    public get indexBuffer():GLBuffer {\r\n        return this._indexBuffer;\r\n    }\r\n\r\n    public set indexBuffer(value:GLBuffer) {\r\n        this._indexBuffer = value;\r\n    }\r\n\r\n    public get vertexArrayObject():GLVertexArrayObject {\r\n        return this._vertexArrayObject;\r\n    }\r\n\r\n    public set vertexArrayObject(value:GLVertexArrayObject) {\r\n        this._vertexArrayObject = value;\r\n    }\r\n\r\n    public get indexcount():number {\r\n        return this._indexcount;\r\n    }\r\n\r\n    public set indexcount(value:number) {\r\n        this._indexcount = value;\r\n    }\r\n}","import {GLBuffer} from \"../GLBuffer\";\r\nimport {GLVertexArrayObject} from \"../GLVertexArrayObject\";\r\n\r\nexport class GLWiredCube {\r\n    private static readonly INDEX_LENGTH:number = 24;\r\n    private gl:WebGL2RenderingContext;\r\n    private _vertexBuffer:GLBuffer;\r\n    private _indexBuffer:GLBuffer;\r\n    private _vertexArrayObject:GLVertexArrayObject;\r\n\r\n    constructor(gl:WebGL2RenderingContext){\r\n        this.gl = gl;\r\n        this.createVertexData();\r\n    }\r\n\r\n    private createVertexData(){\r\n        const vertices = new Float32Array([\r\n            0.0, 0.0, 0.0,\r\n            1.0, 0.0, 0.0,\r\n            0.0, 0.0, 0.0,\r\n            0.0, 1.0, 0.0,\r\n            0.0, 0.0, 0.0,\r\n            0.0, 0.0, 1.0,\r\n\r\n            0.0, 1.0, 1.0,\r\n            1.0, 1.0, 1.0,\r\n            0.0, 1.0, 1.0,\r\n            0.0, 1.0, 0.0,\r\n            0.0, 1.0, 1.0,\r\n            0.0, 0.0, 1.0,\r\n\r\n            1.0, 1.0, 0.0,\r\n            1.0, 1.0, 1.0,\r\n            1.0, 1.0, 0.0,\r\n            0.0, 1.0, 0.0,\r\n            1.0, 1.0, 0.0,\r\n            1.0, 0.0, 0.0,\r\n\r\n            1.0, 0.0, 1.0,\r\n            1.0, 0.0, 0.0,\r\n            1.0, 0.0, 1.0,\r\n            1.0, 1.0, 1.0,\r\n            1.0, 0.0, 1.0,\r\n            0.0, 0.0, 1.0\r\n        ]);\r\n\r\n        const indices = new Uint8Array(GLWiredCube.INDEX_LENGTH);\r\n        for(let i=0; i < GLWiredCube.INDEX_LENGTH; i++) {\r\n            indices[i] = i;\r\n        }\r\n\r\n        this._vertexBuffer = GLBuffer.createVertexBuffer(this.gl,vertices,this.gl.STATIC_DRAW);\r\n        if(!this._vertexBuffer){\r\n            throw 'Failed to create VertexBuffer Object';\r\n        }\r\n        this._indexBuffer = GLBuffer.createIndexBuffer(this.gl,indices,this.gl.STATIC_DRAW);\r\n        if(!this._indexBuffer){\r\n            throw 'Failed to create IndexBuffer Object!';\r\n        }\r\n        this._vertexArrayObject = new GLVertexArrayObject(this.gl);\r\n        this.vertexArrayObject.setIndexBuffer(this._indexBuffer);\r\n    }\r\n\r\n    get vertexBuffer(): GLBuffer {\r\n        return this._vertexBuffer;\r\n    }\r\n\r\n    set vertexBuffer(value: GLBuffer) {\r\n        this._vertexBuffer = value;\r\n    }\r\n\r\n    get indexBuffer(): GLBuffer {\r\n        return this._indexBuffer;\r\n    }\r\n\r\n    set indexBuffer(value: GLBuffer) {\r\n        this._indexBuffer = value;\r\n    }\r\n\r\n    get vertexArrayObject(): GLVertexArrayObject {\r\n        return this._vertexArrayObject;\r\n    }\r\n\r\n    set vertexArrayObject(value: GLVertexArrayObject) {\r\n        this._vertexArrayObject = value;\r\n    }\r\n\r\n    public draw(drawType:number = this.gl.LINES){\r\n        this.vertexArrayObject.bind();\r\n        this.gl.drawElements(drawType,GLWiredCube.INDEX_LENGTH,this.gl.UNSIGNED_BYTE,0);\r\n        this.vertexArrayObject.unbind();\r\n    }\r\n}","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\nimport {MapType} from \"../gl_util/mapType\";\r\nimport {MapSize} from \"../gl_util/mapSize\";\r\n\r\nexport module Attributes{\r\n\r\n    export class AttributeMap{\r\n        protected attributeMap:{};\r\n        constructor(){\r\n            this.attributeMap = {};\r\n        }\r\n\r\n        public add(key:string,attribute:GLAttribute){\r\n            this.attributeMap[key] = attribute;\r\n        }\r\n        public remove(key:string){\r\n            if(this.attributeMap[key]){\r\n                this.attributeMap[key] = undefined;\r\n            }\r\n        }\r\n        public hasAttribute(key:string):boolean {\r\n            return !!this.attributeMap[key];\r\n        }\r\n        public getAttribute(key:string):GLAttribute{\r\n            return this.attributeMap[key];\r\n        }\r\n    }\r\n\r\n    export class GLAttribute{\r\n        protected gl:WebGL2RenderingContext;\r\n        public type:string;\r\n        public size:number;\r\n        public location:number;\r\n\r\n        constructor(gl:WebGL2RenderingContext, type:string, size:number, location:number){\r\n            this.gl = gl;\r\n            this.type = type;\r\n            this.size = size;\r\n            this.location = location;\r\n        }\r\n\r\n        public pointer(type:number,normalized:boolean,stride:number,start:number){\r\n            this.gl.vertexAttribPointer(this.location,this.size,type||this.gl.FLOAT,normalized||false,stride||0,start||0);\r\n        }\r\n    }\r\n\r\n    export function extract(gl:WebGL2RenderingContext, program:WebGLProgram):AttributeMap{\r\n        const attributes = new AttributeMap();\r\n        const totalAttributes = gl.getProgramParameter(program,gl.ACTIVE_ATTRIBUTES);\r\n        for(let i=0; i < totalAttributes;i++){\r\n            const attribData = gl.getActiveAttrib(program,i);\r\n            const type = MapType.map(gl,attribData.type);\r\n            attributes.add(attribData.name,new GLAttribute(gl,type,MapSize.map(type),gl.getAttribLocation(program,attribData.name)));\r\n        }\r\n        return attributes;\r\n    }\r\n}","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *\r\n */\r\nimport {ProgramCompiler} from \"./programCompiler\";\r\nimport {Attributes} from \"./GLAttribute\";\r\nimport {Uniforms} from \"./uniform\";\r\nimport UniformAccessObject = Uniforms.UniformAccessObject;\r\n\r\nexport class GLShader {\r\n\r\n    /**\r\n     * @protected\r\n     * @member {WebGL2RenderingContext}\r\n     */\r\n    protected gl:WebGL2RenderingContext;\r\n    /**\r\n     * Shader Program\r\n     * @protected\r\n     * @member {WebGLProgram}\r\n     */\r\n    protected _program:WebGLProgram;\r\n    protected _attributes:Attributes.AttributeMap;\r\n    protected _uniforms:UniformAccessObject;\r\n    protected _defines:{[x:string]:string|number};\r\n\r\n    private _vertexSrc:string;\r\n    private _fragmentSrc:string;\r\n\r\n    constructor(gl: WebGL2RenderingContext, vertexSrc?:string, fragmentSrc?:string){\r\n        this.gl = gl;\r\n        this._defines = Object.create(null);\r\n        this._vertexSrc = vertexSrc;\r\n        this._fragmentSrc = fragmentSrc;\r\n    }\r\n\r\n    private getDefinesString() {\r\n        let defineString = \"\";\r\n        for(let key in this._defines) {\r\n               defineString += \"#define \" + key + \" \" + this._defines[key] + \"\\n\";\r\n        }\r\n        return defineString;\r\n    }\r\n\r\n    private getShaderSrcWithDefines(src:string):string {\r\n        const shaderDefines = this.getDefinesString();\r\n        const secondLineIdx = src.indexOf(\"\\n\");\r\n\r\n        const firstLine = src.substr(0, secondLineIdx);\r\n        const shaderSrc = src.substr(secondLineIdx);\r\n\r\n        if(firstLine.indexOf(\"#version\") != -1) {\r\n            return firstLine + shaderDefines + shaderSrc;\r\n        }\r\n\r\n        return shaderDefines + firstLine + shaderSrc;\r\n    }\r\n\r\n    public upload(): GLShader {\r\n        const gl = this.gl;\r\n\r\n        const vertexSrcWithDefines = this.getShaderSrcWithDefines(this._vertexSrc);\r\n        const fragmentSrcWithDefines = this.getShaderSrcWithDefines(this._fragmentSrc);\r\n\r\n        this._program = ProgramCompiler.compile(gl, vertexSrcWithDefines, fragmentSrcWithDefines);\r\n        this._attributes = Attributes.extract(gl,this._program);\r\n        const uniformData = Uniforms.extract(gl,this._program);\r\n        this._uniforms = Uniforms.generateUniformAccessObject(gl,uniformData,this._program);\r\n        return this;\r\n    }\r\n\r\n    public addDefine(def:string, value: string|number) {\r\n        this._defines[def] = value;\r\n    }\r\n\r\n    public removeDefine(def:string, value: string|number) {\r\n        delete this._defines[def];\r\n    }\r\n\r\n    public get program():WebGLProgram{\r\n        return this._program;\r\n    }\r\n\r\n    public set program(program:WebGLProgram){\r\n        this._program = program;\r\n    }\r\n\r\n    public set attributes(attributes:Attributes.AttributeMap){\r\n        this._attributes = attributes;\r\n    }\r\n\r\n    public get attributes():Attributes.AttributeMap{\r\n        return this._attributes;\r\n    }\r\n\r\n    public set uniforms(uniforms:UniformAccessObject|any){\r\n        this.uniforms = uniforms;\r\n    }\r\n\r\n    public get uniforms():UniformAccessObject|any{\r\n        return this._uniforms;\r\n    }\r\n\r\n    get defines(): { [p: string]: string | number } {\r\n        return this._defines;\r\n    }\r\n\r\n    set defines(value: { [p: string]: string | number }) {\r\n        this._defines = value;\r\n    }\r\n\r\n    /**\r\n     * Bind this shader and tells the WebGLContext to use it\r\n     */\r\n    public bind():GLShader{\r\n        this.gl.useProgram(this.program);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Unbinds this Shader and tells the WebGLContext to use no shader\r\n     */\r\n    public unbind():GLShader{\r\n        this.gl.useProgram(null);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Destroy the program unloads it from the gpu\r\n     */\r\n    public unload() {\r\n        this.gl.deleteProgram(this.program);\r\n        this._program = null;\r\n        this._attributes = null;\r\n        this._uniforms = null;\r\n        this._defines = Object.create(null);\r\n    }\r\n\r\n    /**\r\n     * Destroys the program in the WebGLContext nulls all objects in the Shader\r\n     */\r\n    public destroy(){\r\n        this.gl.deleteProgram(this.program);\r\n        this.gl = null;\r\n        this._program = null;\r\n        this._attributes = null;\r\n        this._uniforms = null;\r\n        this._defines = null;\r\n        this._vertexSrc = null;\r\n        this._fragmentSrc = null;\r\n    }\r\n\r\n    get vertexSrc(): string {\r\n        return this._vertexSrc;\r\n    }\r\n\r\n    set vertexSrc(value: string) {\r\n        this._vertexSrc = value;\r\n    }\r\n\r\n    get fragmentSrc(): string {\r\n        return this._fragmentSrc;\r\n    }\r\n\r\n    set fragmentSrc(value: string) {\r\n        this._fragmentSrc = value;\r\n    }\r\n}\r\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./GLAttribute\";\nexport * from \"./GLShader\";\nexport * from \"./programCompiler\";\nexport * from \"./uniform\";\n","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n\r\nexport module ProgramCompiler {\r\n    /**\r\n     * @class\r\n     * @param gl {WebGL2RenderingContext} The current WebGL context {WebGLProgram}\r\n     * @param vertexSrc {string|string[]} The vertex shader source as an array of strings.\r\n     * @param fragmentSrc {string|string[]} The fragment shader source as an array of strings.\r\n     * @return {WebGLProgram} the shader program\r\n     */\r\n    export function compile(gl:WebGL2RenderingContext, vertexSrc:string, fragmentSrc:string):WebGLProgram{\r\n        let glVertShader = compileShader(gl,gl.VERTEX_SHADER,vertexSrc);\r\n        let glFragShader = compileShader(gl,gl.FRAGMENT_SHADER,fragmentSrc);\r\n\r\n        if(!glVertShader || !glFragShader){\r\n            return;\r\n        }\r\n\r\n        let program = gl.createProgram(); //Create Program which combines two compiled Shaders\r\n        if(!program){\r\n            console.error('Failed to create Programm');\r\n            return null;\r\n        }\r\n        gl.attachShader(program,glVertShader); //Attach OBJ_Vertex Shader\r\n        gl.attachShader(program,glFragShader); //Attach Fragment Shader\r\n        gl.linkProgram(program); // Then Link the program to the webgl context\r\n\r\n        //Check if linking succeeded\r\n        if(!gl.getProgramParameter(program,gl.LINK_STATUS)){\r\n            console.error('Shader Program Linking failed. Could not initialize Shader.');\r\n            console.error(\"gl.VALIDATE_STATUS \"+gl.getProgramParameter(program,gl.VALIDATE_STATUS));\r\n            console.error('gl.getError(): '+gl.getError());\r\n            //check if their is a program info log\r\n            if(gl.getProgramInfoLog(program) !== ''){\r\n                console.warn('gl.getProgramInfoLog(): '+gl.getProgramInfoLog(program));\r\n            }\r\n            gl.deleteProgram(program);\r\n            program = null;\r\n        }\r\n        //Clean up the created shader\r\n        gl.deleteShader(glVertShader);\r\n        gl.deleteShader(glFragShader);\r\n        //Finally return the compiled program\r\n        return program;\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * @param gl {WebGL2RenderingContext} The current WebGL context {WebGLProgram}\r\n     * @param type {Number} the type, can be either VERTEX_SHADER or FRAGMENT_SHADER\r\n     * @param vertexSrc {string|string[]} The vertex shader source as an array of strings.\r\n     * @return {WebGLShader} the shader\r\n     */\r\n    function compileShader(gl:WebGL2RenderingContext, type:number, vertexSrc:string):WebGLShader{\r\n        let shader = gl.createShader(type);\r\n        if(shader == null){\r\n            console.error(\"Unable to create shader\");\r\n            return null;\r\n        }\r\n        gl.shaderSource(shader,vertexSrc);\r\n        gl.compileShader(shader);\r\n        if(!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){\r\n            console.error(\"Failed to compile shader: \"+gl.getShaderInfoLog(shader));\r\n            gl.deleteShader(shader);\r\n            return null;\r\n        }\r\n        return shader;\r\n    }\r\n}","/*\r\n * This file contains code that was taken from, or heavily based upon, code\r\n * from the pixi.js project. Those sections are used under the terms of The\r\n * Pixi License, detailed below:\r\n *\r\n * The Pixi License\r\n *\r\n * Copyright (c) 2013-2016 Mathew Groves\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n\r\nimport {MapType} from \"../gl_util/mapType\";\r\nimport {DefaultValue} from \"../gl_util/defaultValue\";\r\n\r\nexport module Uniforms {\r\n    var getterTemplate = [\r\n        'return this.data.%%.value;'\r\n    ].join('\\n');\r\n    var setterTemplate = [\r\n        'this.data.%%.value = value;',\r\n        'var location = this.data.%%.location;'\r\n    ].join('\\n');\r\n    var GLSL_TO_SINGLE_SETTERS = {\r\n\r\n        'float':    'uniform1f(location, value)',\r\n\r\n        'vec2':     'uniform2f(location, value[0], value[1])',\r\n        'vec3':     'uniform3f(location, value[0], value[1], value[2])',\r\n        'vec4':     'uniform4f(location, value[0], value[1], value[2], value[3])',\r\n\r\n        'int':      'uniform1i(location, value)',\r\n        'ivec2':    'uniform2i(location, value[0], value[1])',\r\n        'ivec3':    'uniform3i(location, value[0], value[1], value[2])',\r\n        'ivec4':    'uniform4i(location, value[0], value[1], value[2], value[3])',\r\n\r\n        'bool':     'uniform1i(location, value)',\r\n        'bvec2':    'uniform2i(location, value[0], value[1])',\r\n        'bvec3':    'uniform3i(location, value[0], value[1], value[2])',\r\n        'bvec4':    'uniform4i(location, value[0], value[1], value[2], value[3])',\r\n\r\n        'mat2':     'uniformMatrix2fv(location, false, value)',\r\n        'mat3':     'uniformMatrix3fv(location, false, value)',\r\n        'mat4':     'uniformMatrix4fv(location, false, value)',\r\n\r\n        'sampler2D':'uniform1i(location, value)',\r\n        'samplerCube':'uniform1i(location, value)',\r\n\r\n        'ubo':'uniformBlockBinding(this.program, location, value)'\r\n    };\r\n\r\n    var GLSL_TO_ARRAY_SETTERS = {\r\n\r\n        'float':    'uniform1fv(location, value)',\r\n\r\n        'vec2':     'uniform2fv(location, value)',\r\n        'vec3':     'uniform3fv(location, value)',\r\n        'vec4':     'uniform4fv(location, value)',\r\n\r\n        'int':      'uniform1iv(location, value)',\r\n        'ivec2':    'uniform2iv(location, value)',\r\n        'ivec3':    'uniform3iv(location, value)',\r\n        'ivec4':    'uniform4iv(location, value)',\r\n\r\n        'bool':     'uniform1iv(location, value)',\r\n        'bvec2':    'uniform2iv(location, value)',\r\n        'bvec3':    'uniform3iv(location, value)',\r\n        'bvec4':    'uniform4iv(location, value)',\r\n\r\n        'sampler2D':'uniform1iv(location, value)',\r\n        'samplerCube':'uniform1iv(location, value)'\r\n    };\r\n\r\n    export class Uniform{\r\n        public type:string;\r\n        public size:number;\r\n        public location:WebGLUniformLocation;\r\n        public value:Float32Array|Int32Array|Array<boolean>|number|boolean;\r\n\r\n        constructor(type:string,size:number,location:WebGLUniformLocation,value:Float32Array|Int32Array|Array<boolean>|number|boolean){\r\n            this.type = type;\r\n            this.size = size;\r\n            this.location = location;\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\n    export class UniformMap {\r\n        protected uniformMap:{};\r\n        constructor(){\r\n            this.uniformMap = {};\r\n        }\r\n\r\n        public add(key:string,attribute:Uniform){\r\n            this.uniformMap[key] = attribute;\r\n        }\r\n\r\n        public get(key:string):Uniform{\r\n            return this.uniformMap[key];\r\n        }\r\n\r\n        public remove(key:string){\r\n            if(this.uniformMap[key]){\r\n                this.uniformMap[key] = undefined;\r\n            }\r\n        }\r\n\r\n        public get keys(){\r\n            return Object.keys(this.uniformMap);\r\n        }\r\n    }\r\n\r\n    export class UniformAccessObject {\r\n        private _program:WebGLProgram;\r\n        protected _gl:WebGL2RenderingContext;\r\n        public data:any;\r\n\r\n        constructor(gl?:WebGL2RenderingContext,program?:WebGLProgram){\r\n            this.data = {};\r\n            this._gl = gl;\r\n            this._program = program;\r\n        }\r\n\r\n        public get gl():WebGL2RenderingContext{\r\n            return this._gl;\r\n        }\r\n\r\n        public set gl(gl:WebGL2RenderingContext){\r\n            this._gl = gl;\r\n        }\r\n\r\n        get program(): WebGLProgram {\r\n            return this._program;\r\n        }\r\n\r\n        set program(value: WebGLProgram) {\r\n            this._program = value;\r\n        }\r\n    }\r\n\r\n    export function extract(gl:WebGL2RenderingContext, program:WebGLProgram):UniformMap{\r\n        const uniforms = new UniformMap();\r\n\r\n        //Get Uniform Blocks\r\n        const ubos = gl.getProgramParameter(program,gl.ACTIVE_UNIFORM_BLOCKS);\r\n        for(let i=0; i < ubos; i++){\r\n            let name = gl.getActiveUniformBlockName(program,i);\r\n            name = name.replace(/\\[.*?\\]/,\"\");\r\n            uniforms.add(name, new Uniform(\"ubo\",1,i,null));\r\n        }\r\n\r\n        //Get uniforms\r\n        const totalUniforms = gl.getProgramParameter(program,gl.ACTIVE_UNIFORMS);\r\n        for(let i=0; i < totalUniforms; i++){\r\n            const uniformData = gl.getActiveUniform(program,i);\r\n            const name = uniformData.name.replace(/\\[.*?\\]/,\"\");\r\n            const type = MapType.map(gl,uniformData.type);\r\n            const location = gl.getUniformLocation(program,name); //null if its a uniform block value\r\n            if(location !== undefined && location !== null) {\r\n                uniforms.add(name, new Uniform(type, uniformData.size, gl.getUniformLocation(program, name), DefaultValue.value(type, uniformData.size)))\r\n            }\r\n        }\r\n        return uniforms;\r\n    }\r\n\r\n    export function generateUniformAccessObject(gl:WebGL2RenderingContext, uniformData:UniformMap, program:WebGLProgram):UniformAccessObject{\r\n        const uniforms = new UniformAccessObject(gl,program);\r\n        const uniformKeys = uniformData.keys;\r\n        for(let i=0; i < uniformKeys.length; i++){\r\n            const fullName = uniformKeys[i];\r\n            const nameTokens = fullName.split(\".\");\r\n            const name = nameTokens[nameTokens.length-1];\r\n            const uniformGroup = getUniformGroup(nameTokens,uniforms);\r\n            const uniform:Uniform = uniformData.get(fullName);\r\n            uniformGroup.data[name] = uniform;\r\n            uniformGroup.gl = gl;\r\n            Object.defineProperty(uniformGroup,name,generatePropertyDescriptor(name,uniform));\r\n        }\r\n        return uniforms;\r\n    }\r\n\r\n    function getUniformGroup(nameTokens:string[],uniform:UniformAccessObject):UniformAccessObject{\r\n        let cur = uniform;\r\n        for(let i=0; i < nameTokens.length-1; i++){\r\n            const o = cur[nameTokens[i]] || {data:{}};\r\n            cur[nameTokens[i]] = o;\r\n            cur = o;\r\n        }\r\n        return cur;\r\n    }\r\n\r\n    function generatePropertyDescriptor(name:string,uniform:Uniform):PropertyDescriptor{\r\n        return {\r\n            get: generateGetter(name) as ()=>any,\r\n            set: generateSetter(name,uniform) as (v:any)=>void\r\n        };\r\n    }\r\n\r\n    function generateGetter(name:string):Function{\r\n        let template = getterTemplate.replace('%%',name);\r\n        return new Function(template);\r\n    }\r\n\r\n    function generateSetter(name:string,uniform:Uniform):Function{\r\n        let template = setterTemplate.replace(/%%/g,name);\r\n        let setTemplate;\r\n\r\n        if(uniform.size === 1){\r\n            setTemplate = GLSL_TO_SINGLE_SETTERS[uniform.type];\r\n        }else{\r\n            setTemplate = GLSL_TO_ARRAY_SETTERS[uniform.type];\r\n        }\r\n\r\n        if(setTemplate){\r\n            template += \"\\nthis.gl.\"+setTemplate+\";\";\r\n        }\r\n\r\n        return new Function('value',template);\r\n    }\r\n}","export class Base64Binary {\r\n    private static readonly _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n    static decodeArrayBuffer(input:string):ArrayBuffer {\r\n        const bytes = (input.length/4) * 3;\r\n        const ab = new ArrayBuffer(bytes);\r\n        Base64Binary.decode(input, null, ab);\r\n\r\n        return ab;\r\n    }\r\n\r\n    private static removePaddingChars(input:string){\r\n        const lkey = Base64Binary._keyStr.indexOf(input.charAt(input.length - 1));\r\n        if(lkey === 64){\r\n            return input.substring(0,input.length - 1);\r\n        }\r\n        return input;\r\n    }\r\n\r\n    static decode(input:string,byteLength?:number, arrayBuffer?: ArrayBuffer):Uint8Array {\r\n        //get last chars to see if are valid\r\n        input = Base64Binary.removePaddingChars(input);\r\n        //@ts-ignore\r\n        const bytes = parseInt((input.length / 4) * 3, 10);\r\n        const offset = byteLength !== undefined ? bytes - byteLength : 0;\r\n\r\n        const uarray:Uint8Array = arrayBuffer ? new Uint8Array(arrayBuffer) : new Uint8Array(bytes);\r\n\r\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n        for (let i=0, j=0; i<bytes; i+=3) {\r\n            const enc1 = Base64Binary._keyStr.indexOf(input.charAt(j++));\r\n            const enc2 = Base64Binary._keyStr.indexOf(input.charAt(j++));\r\n            const enc3 = Base64Binary._keyStr.indexOf(input.charAt(j++));\r\n            const enc4 = Base64Binary._keyStr.indexOf(input.charAt(j++));\r\n\r\n            const chr1 = (enc1 << 2) | (enc2 >> 4);\r\n            const chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n            const chr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n            uarray[i] = chr1;\r\n            if (enc3 != 64) uarray[i+1] = chr2;\r\n            if (enc4 != 64) uarray[i+2] = chr3;\r\n        }\r\n\r\n        return uarray.slice(offset, bytes);\r\n    }\r\n}","import {Accessor} from \"../model/data\";\r\nimport {GL_TYPES} from \"../gl/constants\";\r\nimport {GLTFModel, TypedArray} from \"./GLTFModel\";\r\n\r\nexport class GLTFAccessorProcessor {\r\n\r\n    private model:GLTFModel;\r\n    private accessors:Array<Accessor>;\r\n\r\n    constructor(model:GLTFModel) {\r\n        this.accessors = [];\r\n        this.model = model;\r\n    }\r\n\r\n    getAccessor(idx:number, indexBuffer?:boolean): Accessor {\r\n        const gltf = this.model.gltf;\r\n\r\n        if(this.accessors[idx]) {\r\n            return this.accessors[idx];\r\n        }\r\n\r\n        const accessor = new Accessor();\r\n        const gltfAccessor = gltf.accessors[idx];\r\n\r\n        accessor.count = gltfAccessor.count;\r\n        accessor.type = gltfAccessor.type;\r\n        accessor.bufferView = this.model.getBufferView(gltfAccessor.bufferView, indexBuffer);\r\n        accessor.byteOffset = gltfAccessor.byteOffset||0;\r\n        accessor.componentType = gltfAccessor.componentType;\r\n        accessor.max = gltfAccessor.max;\r\n        accessor.min = gltfAccessor.min;\r\n        accessor.normalized = gltfAccessor.normalized;\r\n        accessor.stride = gltf.bufferViews[gltfAccessor.bufferView].byteStride||0;\r\n\r\n        this.accessors[idx] = accessor;\r\n        return this.accessors[idx];\r\n    }\r\n\r\n    getAccessorData(accessor: Accessor): TypedArray {\r\n        return this.accessor2TypedArray(\r\n            accessor.bufferView.data,\r\n            accessor.byteOffset,\r\n            accessor.componentTypeSize * accessor.count,\r\n            accessor.componentType\r\n        );\r\n    }\r\n\r\n    private accessor2TypedArray(buffer:ArrayBuffer, byteOffset:number, count:number, componentType:GL_TYPES): TypedArray {\r\n        switch (componentType) {\r\n            case GL_TYPES.BYTE:\r\n                return new Int8Array(buffer, byteOffset, count);\r\n            case GL_TYPES.UNSIGNED_BYTE:\r\n                return new Uint8Array(buffer, byteOffset, count);\r\n            case GL_TYPES.SHORT:\r\n                return new Int16Array(buffer, byteOffset, count);\r\n            case GL_TYPES.UNSIGNED_SHORT:\r\n                return new Int16Array(buffer, byteOffset, count);\r\n            case GL_TYPES.INT:\r\n                return new Int32Array(buffer, byteOffset, count);\r\n            case GL_TYPES.UNSIGNED_INT:\r\n                return new Int32Array(buffer, byteOffset, count);\r\n            case GL_TYPES.FLOAT:\r\n                return new Float32Array(buffer, byteOffset, count);\r\n        }\r\n    }\r\n}","import {IGLTF_AnimationSampler, IGLTF_Channel} from \"./model/GLTF_Animation\";\r\nimport {AnimationSampler, Interpolation} from \"../model/animation/animationSampler\";\r\nimport {AnimationChannel} from \"../model/animation/animationChannel\";\r\nimport {Animation} from \"../model/animation\";\r\nimport {GLTFModel} from \"./GLTFModel\";\r\nimport {IBaseCache} from \"../cache/caches\";\r\nimport {CACHE_TYPE} from \"../cache\";\r\n\r\nexport class GLTFAnimationProcessor {\r\n\r\n    private model:GLTFModel;\r\n    private cache:IBaseCache<Animation>;\r\n    private _animations:Array<Animation>;\r\n\r\n    constructor(model:GLTFModel) {\r\n        this.model = model;\r\n        this.cache = this.model.cache.getCache(CACHE_TYPE.ANIMATION);\r\n    }\r\n\r\n    processAnimations():Array<Animation> {\r\n        this._animations = [];\r\n        const gltf = this.model.gltf;\r\n\r\n        gltf.animations = gltf.animations||[];\r\n        for(let i=0; i < gltf.animations.length; i++) {\r\n            this._animations.push(this.processAnimation(i));\r\n        }\r\n\r\n        return this._animations;\r\n    }\r\n\r\n    private processAnimation(idx:number): Animation {\r\n        const animation = new Animation();\r\n        const gltfAnimation = this.model.gltf.animations[idx];\r\n        animation.name = gltfAnimation.name||\"animation\"+idx;\r\n\r\n        for(let i=0, sampler:IGLTF_AnimationSampler; sampler = gltfAnimation.samplers[i]; i++) {\r\n            const animationSampler = this.processSampler(sampler);\r\n            animation.addSampler(animationSampler);\r\n            animation.duration = animation.duration < animationSampler.duration ? animationSampler.duration : animation.duration;\r\n        }\r\n\r\n        for(let i=0, channel:IGLTF_Channel; channel = gltfAnimation.channels[i]; i++) {\r\n            animation.addChannel(this.processChannel(channel));\r\n        }\r\n\r\n        this.cache.add(animation.name, animation);\r\n        return animation;\r\n    }\r\n\r\n    private processSampler(sampler: IGLTF_AnimationSampler): AnimationSampler {\r\n        const animationSampler = new AnimationSampler();\r\n        animationSampler.interpolation = sampler.interpolation||Interpolation.LINEAR;\r\n\r\n        const inputAccessor = this.model.getAccessor(sampler.input);\r\n        const outputAccessor = this.model.getAccessor(sampler.output);\r\n\r\n        animationSampler.inputData = inputAccessor.getData();\r\n        animationSampler.outputData = outputAccessor.getData();\r\n\r\n        animationSampler.componentTypeCount = outputAccessor.componentTypeSize;\r\n        animationSampler.duration = animationSampler.inputData[animationSampler.inputData.length-1];\r\n\r\n        return animationSampler;\r\n    }\r\n\r\n    private processChannel(channel: IGLTF_Channel): AnimationChannel {\r\n        const animationChannel = new AnimationChannel();\r\n\r\n        animationChannel.sampler = channel.sampler;\r\n        animationChannel.transform = this.model.getNode(channel.target.node).transform;\r\n        animationChannel.path = channel.target.path;\r\n\r\n        return animationChannel;\r\n    }\r\n\r\n    get animations(): Array<Animation> {\r\n        return this._animations;\r\n    }\r\n\r\n    set animations(value: Array<Animation>) {\r\n        this._animations = value;\r\n    }\r\n}","import {IGLTF_BufferView} from \"./model\";\r\nimport {BufferView} from \"../model/data\";\r\nimport {GL_BUFFERS} from \"../gl/constants\";\r\nimport {GLTFModel} from \"./GLTFModel\";\r\n\r\nexport class GLTFBufferViewProcessor {\r\n\r\n    private model:GLTFModel;\r\n    private _buffers:Array<BufferView>;\r\n\r\n    constructor(model:GLTFModel) {\r\n        this._buffers = [];\r\n        this.model = model;\r\n    }\r\n\r\n    /**\r\n     * get/create the BufferViewObject for this accessor\r\n     * @param accessor\r\n     * @param idx\r\n     * @param isIndexBuffer\r\n     */\r\n    getBufferView(idx:number, isIndexBuffer:boolean=false): BufferView {\r\n        const gltf = this.model.gltf;\r\n\r\n        if(!this._buffers[idx]) {\r\n            this._buffers[idx] = this.createBufferView(gltf.bufferViews[idx]);\r\n            this._buffers[idx].target = isIndexBuffer ? GL_BUFFERS.ELEMENT_ARRAY_BUFFER :GL_BUFFERS.ARRAY_BUFFER;\r\n        }\r\n\r\n        return this._buffers[idx];\r\n    }\r\n\r\n    /**\r\n     * Create a Bufferfiew from the GLTF_Bufferview\r\n     * @param {Array<ArrayBuffer|ArrayBufferView>} buffers\r\n     * @param {IGLTF_BufferView} bufferView\r\n     * @returns {BufferView}\r\n     */\r\n    private createBufferView(bufferView:IGLTF_BufferView): BufferView {\r\n        const view = new BufferView();\r\n        view.data = this.sliceBuffer(bufferView);\r\n        view.target = bufferView.target;\r\n        return view;\r\n    }\r\n\r\n    /**\r\n     * Slice up the Mesh data ArrayBuffer into smaller ArrayBuffers\r\n     * @param {Array<ArrayBuffer|ArrayBufferView>} buffers\r\n     * @param {BufferView} view\r\n     * @returns {ArrayBuffer}\r\n     */\r\n    private sliceBuffer(view:IGLTF_BufferView): ArrayBuffer {\r\n        const data = this.model.data[view.buffer];\r\n        const offset = view.byteOffset||0;\r\n        if(data instanceof ArrayBuffer){\r\n            return data.slice(offset,offset+view.byteLength);\r\n        }else {\r\n            return data['buffer'].slice(offset,offset+view.byteLength);\r\n        }\r\n    }\r\n\r\n    get buffers(): Array<BufferView> {\r\n        return this._buffers;\r\n    }\r\n\r\n    set buffers(value: Array<BufferView>) {\r\n        this._buffers = value;\r\n    }\r\n}","import {GLTFModel} from \"./GLTFModel\";\r\nimport {ALPHA_MODE, Material, MATERIAL_MAPS, MATERIAL_TYPES, Materialmap} from \"../material\";\r\nimport {CACHE_TYPE, IBaseCache} from \"../cache\";\r\nimport {MetallicRoughness} from \"../material/metallicRoughness\";\r\nimport {IGLTF_Image, IGLTF_Material} from \"./model\";\r\nimport {TextureLoader, TextureLoaderConfig} from \"../loader/TextureLoader\";\r\nimport {TEXTURE_WRAP} from \"../gl/constants\";\r\n\r\nexport class GLTFMaterialProcessor {\r\n\r\n    private model: GLTFModel;\r\n    private materialCache: IBaseCache<Material>;\r\n    private _materials: Array<Material>;\r\n\r\n    constructor(model:GLTFModel) {\r\n        this.model = model;\r\n        this.materialCache = this.model.cache.getCache<Material>(CACHE_TYPE.MATERIAL);\r\n        this._materials = [];\r\n    }\r\n\r\n    public processMaterial(materialIdx:number):Material {\r\n        const gltf = this.model.gltf;\r\n        const gl = this.model.gl;\r\n\r\n        //set node name if not already provided\r\n        const materialNode = gltf.materials[materialIdx];\r\n\r\n        const cachedMat = this.materialCache.get(materialNode.name);\r\n        if(cachedMat) {\r\n            return cachedMat;\r\n        }\r\n\r\n        materialNode.name = materialNode.name||\"material\"+materialIdx;\r\n\r\n        let material:Material<MetallicRoughness>;\r\n\r\n        if(materialNode.extensions && materialNode.extensions.KHR_materials_pbrSpecularGlossiness) {\r\n            throw \"specular glossiness gltf is not supported\";\r\n        } else {\r\n            material = new Material<MetallicRoughness>(materialNode.name);\r\n            this.parsePBRMaterial(materialNode,material as Material<MetallicRoughness>);\r\n        }\r\n\r\n        if(materialNode.emissiveFactor){\r\n            material.model.emissiveFactor.set(materialNode.emissiveFactor);\r\n        }\r\n\r\n        material.alphaMode = materialNode.alphaMode as ALPHA_MODE || ALPHA_MODE.OPAQUE;\r\n        material.alphaCutoff = materialNode.alphaCutoff || 0.5;\r\n        material.doubleSided = !!materialNode.doubleSided;\r\n\r\n        if(materialNode.emissiveTexture){\r\n            this.parseTexture(material,materialNode.emissiveTexture.index,MATERIAL_MAPS.EMISSIVE,{\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.SRGB8_ALPHA8,\r\n                format:gl.RGBA,\r\n                type:gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n\r\n        if(materialNode.normalTexture){\r\n            material.model.normalScale = materialNode.normalTexture.scale||1;\r\n            this.parseTexture(material,materialNode.normalTexture.index,MATERIAL_MAPS.NORMAL,{\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.RGBA,\r\n                format:gl.RGBA,\r\n                type:gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n\r\n        if(materialNode.occlusionTexture){\r\n            material.model.occlusionStrength = materialNode.occlusionTexture.strength||1;\r\n            this.parseTexture(material,materialNode.occlusionTexture.index,MATERIAL_MAPS.OCCLUSION,{\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.RGBA,\r\n                format:gl.RGBA,\r\n                type:gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n\r\n        this.materialCache.add(material.name,material);\r\n        this._materials.push(material);\r\n        return material;\r\n    }\r\n\r\n    private parsePBRMaterial(materialNode:IGLTF_Material,material:Material<MetallicRoughness>):void{\r\n        const pbr = materialNode.pbrMetallicRoughness;\r\n        material.type = MATERIAL_TYPES.PBR;\r\n        const gl = this.model.gl;\r\n\r\n        if(!material.model){\r\n            material.model = new MetallicRoughness();\r\n        }\r\n\r\n        if(pbr.baseColorFactor){\r\n            material.model.baseColorFactor.set(pbr.baseColorFactor);\r\n        }\r\n\r\n        if(pbr.metallicFactor !== null\r\n            && pbr.metallicFactor !== undefined)\r\n        {\r\n            material.model.metallicFactor = pbr.metallicFactor;\r\n        }\r\n\r\n        if(pbr.roughnessFactor !== null\r\n            && pbr.roughnessFactor !== undefined)\r\n        {\r\n            material.model.roughnessFactor = pbr.roughnessFactor;\r\n        }\r\n\r\n        //AlbedoTexture\r\n        if(pbr.baseColorTexture !== undefined && pbr.baseColorTexture !== null) {\r\n            this.parseTexture(material,pbr.baseColorTexture.index,MATERIAL_MAPS.ALBEDO,{\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.SRGB8_ALPHA8,\r\n                format: gl.RGBA,\r\n                type: gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n\r\n        //Metallic Roughness Texture\r\n        if(pbr.metallicRoughnessTexture !== undefined && pbr.metallicRoughnessTexture !== null) {\r\n            this.parseTexture(material,pbr.metallicRoughnessTexture.index,MATERIAL_MAPS.METAL_ROUGHNESS,{\r\n                premultiplyAlpha: false,\r\n                internalFormat: gl.RGBA,\r\n                format: gl.RGBA,\r\n                type: gl.UNSIGNED_BYTE,\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load the Texture defined by the corresponding image and sampler\r\n     * @param {Material} material\r\n     * @param {number} index\r\n     * @param {number} map\r\n     * @param {TextureLoaderConfig} config\r\n     */\r\n    private parseTexture(material:Material,index:number,map:number,config:TextureLoaderConfig):void{\r\n        if(index === null || index === undefined) {\r\n            return;\r\n        }\r\n        const gltf = this.model.gltf;\r\n        const loader = this.model.loader;\r\n        const path = this.model.path;\r\n\r\n        let img:IGLTF_Image;\r\n        if(gltf.textures[index].source !== undefined && gltf.textures[index].source !== null) {\r\n            img = gltf.images[gltf.textures[index].source];\r\n        }\r\n        if(gltf.textures[index].sampler !== undefined && gltf.textures[index].sampler !== null) {\r\n            config.sampler = gltf.samplers[gltf.textures[index].sampler];\r\n        }else{\r\n            config.sampler = {\r\n                wrapS: TEXTURE_WRAP.REPEAT,\r\n                wrapT: TEXTURE_WRAP.REPEAT\r\n            }\r\n        }\r\n        //TODO: Parse img from data\r\n        loader.get(TextureLoader).add(img.name||img.uri,path+img.uri,config);\r\n        material.maps[map] = new Materialmap(img.name||img.uri);\r\n        material.maps[map].sampler = config.sampler;\r\n    }\r\n\r\n    get materials(): Array<Material> {\r\n        return this._materials;\r\n    }\r\n\r\n    set materials(value: Array<Material>) {\r\n        this._materials = value;\r\n    }\r\n}","import {Mesh} from \"../model\";\r\nimport {IGLTF_Primitive} from \"./model\";\r\nimport {GLTFModel} from \"./GLTFModel\";\r\nimport {IBaseCache} from \"../cache/caches\";\r\nimport {CACHE_TYPE} from \"../cache\";\r\n\r\n\r\nexport class GLTFMeshProcessor {\r\n\r\n    private model: GLTFModel;\r\n    private _meshes:Array<Mesh>;\r\n    private cache:IBaseCache<Mesh>;\r\n\r\n    constructor(model: GLTFModel) {\r\n        this.model = model;\r\n        this._meshes = [];\r\n        this.cache = this.model.cache.getCache(CACHE_TYPE.MESH);\r\n    }\r\n\r\n    processMesh(idx:number): Mesh {\r\n        if(this._meshes[idx]) {\r\n            return this._meshes[idx];\r\n        }\r\n\r\n        const sceneMesh = new Mesh();\r\n        const mesh = this.model.gltf.meshes[idx];\r\n        sceneMesh.name = mesh.name||\"mesh\"+idx;\r\n\r\n        for(let i=0, primitive:IGLTF_Primitive; primitive = mesh.primitives[i]; i++){\r\n            sceneMesh.primitives.push(this.model.getPrimitive(primitive));\r\n        }\r\n\r\n        this._meshes[idx] = sceneMesh;\r\n        this.cache.add(sceneMesh.name, sceneMesh);\r\n        return sceneMesh;\r\n    }\r\n\r\n    get meshes(): Array<Mesh> {\r\n        return this._meshes;\r\n    }\r\n\r\n    set meshes(value: Array<Mesh>) {\r\n        this._meshes = value;\r\n    }\r\n}\r\n","import {IGLTF_Model, IGLTF_Primitive} from \"./model\";\r\nimport {Accessor, BufferView, Mesh, Primitive, Model} from \"../model\";\r\nimport {Cache} from \"../cache\";\r\nimport {ResourceLoader} from \"curbl-loader\";\r\nimport {GLTFMaterialProcessor} from \"./GLTFMaterialProcessor\";\r\nimport {GLTFMeshProcessor} from \"./GLTFMeshProcessor\";\r\nimport {GLTFNode, GLTFNodeProcessor} from \"./GLTFNodeProcessor\";\r\nimport {Skin} from \"../model/skin/skin\";\r\nimport {GLTFAccessorProcessor} from \"./GLTFAccessorProcessor\";\r\nimport {Material} from \"../material\";\r\nimport {GLTFSkinProcessor} from \"./GLTFSkinProcessor\";\r\nimport {GLTFAnimationProcessor} from \"./GLTFAnimationProcessor\";\r\nimport {GLTFSceneProcessor} from \"./GLTFSceneProcessor\";\r\nimport {GLTFBufferViewProcessor} from \"./GLTFBufferViewProcessor\";\r\nimport {GLTFPrimitiveProcessor} from \"./GLTFPrimitiveProcessor\";\r\n\r\nexport type TypedArray = Int8Array|Uint8Array|Int16Array|Uint16Array|Int32Array|Uint32Array|Float32Array;\r\n\r\nexport class GLTFModel {\r\n\r\n    gltf:IGLTF_Model;\r\n    data:Array<ArrayBufferView|ArrayBuffer>;\r\n    gl: WebGL2RenderingContext;\r\n    cache: Cache;\r\n    loader: ResourceLoader;\r\n    path: string;\r\n\r\n    private accessorProcessor:GLTFAccessorProcessor;\r\n    private bufferViewProcessor:GLTFBufferViewProcessor;\r\n    private meshProcessor:GLTFMeshProcessor;\r\n    private primitiveProcessor:GLTFPrimitiveProcessor;\r\n    private nodeProcessor:GLTFNodeProcessor;\r\n    private materialProcessor:GLTFMaterialProcessor;\r\n    private skinProcessor:GLTFSkinProcessor;\r\n\r\n    constructor(gltf:IGLTF_Model, data:Array<ArrayBufferView|ArrayBuffer>,config: {path: string, gl: WebGL2RenderingContext, cache: Cache, loader: ResourceLoader}) {\r\n        this.gltf = gltf;\r\n        this.data = data;\r\n        this.cache = config.cache;\r\n        this.loader = config.loader;\r\n        this.gl = config.gl;\r\n        this.path = config.path;\r\n\r\n        this.accessorProcessor = new GLTFAccessorProcessor(this);\r\n        this.bufferViewProcessor = new GLTFBufferViewProcessor(this);\r\n        this.meshProcessor = new GLTFMeshProcessor(this);\r\n        this.primitiveProcessor = new GLTFPrimitiveProcessor(this);\r\n        this.nodeProcessor = new GLTFNodeProcessor(this);\r\n        this.materialProcessor = new GLTFMaterialProcessor(this);\r\n        this.skinProcessor = new GLTFSkinProcessor(this);\r\n    }\r\n\r\n    process(): Model {\r\n        const scene =  new GLTFSceneProcessor(this).processScenes();\r\n        scene.animations = new GLTFAnimationProcessor(this).processAnimations();\r\n        scene.meshes = this.meshProcessor.meshes;\r\n        scene.bufferViews = this.bufferViewProcessor.buffers;\r\n        scene.skins = this.skinProcessor.skins;\r\n        scene.primitives = this.primitiveProcessor.primitives;\r\n        scene.transforms = this.nodeProcessor.transforms;\r\n        scene.materials = this.materialProcessor.materials;\r\n        return scene;\r\n    }\r\n\r\n    getSkin(idx:number):Skin {\r\n        return this.skinProcessor.processSkin(idx);\r\n    }\r\n\r\n    getMaterial(idx:number):Material {\r\n        return this.materialProcessor.processMaterial(idx);\r\n    }\r\n\r\n    getNode(idx:number):GLTFNode {\r\n        return this.nodeProcessor.processNode(idx);\r\n    }\r\n\r\n    getMesh(idx:number):Mesh {\r\n        return this.meshProcessor.processMesh(idx);\r\n    }\r\n\r\n    getBufferView(idx:number, isIndexBuffer?: boolean): BufferView {\r\n        return this.bufferViewProcessor.getBufferView(idx, isIndexBuffer);\r\n    }\r\n\r\n    getAccessor(idx:number, isIndexBuffer?: boolean): Accessor {\r\n        return this.accessorProcessor.getAccessor(idx, isIndexBuffer);\r\n    }\r\n\r\n    getPrimitive(primitive: IGLTF_Primitive): Primitive {\r\n        return this.primitiveProcessor.processPrimitive(primitive);\r\n    }\r\n}","import {GLTFModel} from \"./GLTFModel\";\r\nimport {IGLTF_Node} from \"./model\";\r\nimport {Mesh, Skin, Transform} from \"../model\";\r\nimport {mat4, quat, vec3} from \"gl-matrix\";\r\n\r\nexport class GLTFNode {\r\n    children: Array<GLTFNode> = [];\r\n    transform: Transform = new Transform();\r\n    mesh?:Mesh;\r\n    skin?:Skin;\r\n    name:string;\r\n}\r\n\r\nexport class GLTFNodeProcessor {\r\n    private model: GLTFModel;\r\n    private nodes:Array<GLTFNode>;\r\n\r\n    constructor(model: GLTFModel) {\r\n        this.model = model;\r\n        this.nodes = [];\r\n    }\r\n\r\n    processNode(idx:number): GLTFNode {\r\n        if(this.nodes[idx]) {\r\n            return this.nodes[idx];\r\n        }\r\n\r\n        return this.parseNode(idx, this.nodes);\r\n    }\r\n    /**\r\n     * Parse a single node and all its children\r\n     * a node can have multiple properties e.g. mesh,transform,weights,camera,skin etc.\r\n     * @param {number} nodeIdx\r\n     * @param nodes\r\n     * @param parent\r\n     */\r\n    private parseNode(nodeIdx:number, nodes:Array<GLTFNode>, parent?: GLTFNode): GLTFNode {\r\n        const gltf = this.model.gltf;\r\n        const node = gltf.nodes[nodeIdx];\r\n\r\n        if(nodes[nodeIdx]) {\r\n            return nodes[nodeIdx];\r\n        }\r\n\r\n        const sceneNode = new GLTFNode();\r\n        sceneNode.name = node.name||\"node\"+nodeIdx;\r\n        nodes[nodeIdx] = sceneNode;\r\n\r\n        sceneNode.transform = this.parseTransform(node, parent);\r\n\r\n        if(node.mesh !== null && node.mesh !== undefined) {\r\n            sceneNode.mesh = this.model.getMesh(node.mesh);\r\n            sceneNode.mesh.transform = sceneNode.transform;\r\n        }\r\n\r\n        if(node.skin !== null && node.skin !== undefined) {\r\n            sceneNode.skin = this.model.getSkin(node.skin);\r\n            if(sceneNode.mesh) {\r\n                sceneNode.mesh.skin = sceneNode.skin;\r\n            }else {\r\n                console.warn(\"expected skin and mesh to be on the same node\");\r\n            }\r\n        }\r\n\r\n        node.children = node.children||[];\r\n        for(let i=0,child:number; child = node.children[i];i++){\r\n            const childNode = this.parseNode(child, nodes, sceneNode);\r\n            sceneNode.children.push(childNode);\r\n        }\r\n\r\n        return sceneNode;\r\n    }\r\n\r\n    /**\r\n     * Parse the Transformation of a node and add it as a child to the list of transform nodes\r\n     * @param {IGLTF_Node} node\r\n     * @param {Transform} parent - parent of the new node\r\n     * @returns {Transform} newly create Transform node\r\n     */\r\n    private parseTransform(node:IGLTF_Node, parent?:GLTFNode): Transform {\r\n        const transform:Transform = new Transform();\r\n        if(node.matrix !== undefined && node.matrix !== null) {\r\n            transform.localMatrix = mat4.clone(node.matrix as any);\r\n            mat4.getTranslation(transform.translation, transform.localMatrix);\r\n            mat4.getRotation(transform.rotation, transform.localMatrix);\r\n            mat4.getScaling(transform.scale, transform.localMatrix);\r\n        }\r\n        if(node.translation !== undefined && node.translation !== null){\r\n            transform.translation = vec3.clone(node.translation);\r\n        }\r\n        if(node.rotation !== undefined && node.rotation !== null){\r\n            transform.rotation = quat.clone(node.rotation as any);\r\n        }\r\n        if(node.scale !== undefined && node.scale !== null){\r\n            transform.scale = vec3.clone(node.scale);\r\n        }\r\n        if(parent){\r\n            parent.transform.addChild(transform);\r\n        }\r\n        return transform;\r\n    }\r\n\r\n    get transforms(): Array<Transform> {\r\n        const transforms = [];\r\n        for(let i=0, node: GLTFNode; node = this.nodes[i]; i++) {\r\n            transforms.push(node.transform);\r\n        }\r\n        return transforms;\r\n    }\r\n}","import {ResourceLoader} from \"curbl-loader\";\r\nimport {IGLTF_Model} from \"./model\";\r\nimport {Cache} from \"../cache\";\r\nimport {Model} from \"../model/model\";\r\nimport {GLTFModel} from \"./GLTFModel\";\r\nimport {Base64Binary} from \"./Base64Binary\";\r\n\r\n/**\r\n * Parse the GLTF_Json\r\n */\r\nexport class GLTF_Parser {\r\n\r\n    private gl:WebGL2RenderingContext;\r\n    private loader:ResourceLoader;\r\n    private _path:string;\r\n    private cache:Cache;\r\n\r\n    constructor(loader:ResourceLoader,gl:WebGL2RenderingContext, cache: Cache) {\r\n        this._path = '';\r\n        this.loader = loader;\r\n        this.gl = gl;\r\n        this.cache = cache;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {ArrayBuffer} buffer - gltf data(vertices,indices)\r\n     * @param {IGLTF_Model} gltf_model - json object in gltf format\r\n     * @returns {Mesh}\r\n     */\r\n    public parse(gltf_model:IGLTF_Model, buffer?:ArrayBuffer): Model {\r\n        const buffers = [];\r\n        if(!buffer) {\r\n            buffers.push(...this.parseBuffers(gltf_model));\r\n        } else {\r\n            buffers.push(buffer);\r\n        }\r\n\r\n        return new GLTFModel(gltf_model, buffers, {\r\n            path: this._path,\r\n            gl: this.gl,\r\n            cache: this.cache,\r\n            loader: this.loader\r\n        }).process();\r\n    }\r\n\r\n    private parseBuffers(gltfModel:IGLTF_Model):Array<ArrayBuffer> {\r\n        const buffers = [];\r\n        for(let i=0; i < gltfModel.buffers.length; i++) {\r\n            const gltfBuffer = gltfModel.buffers[i];\r\n            const buffer = Base64Binary.decode(gltfBuffer.uri, gltfBuffer.byteLength);\r\n            buffers.push(buffer);\r\n        }\r\n        return buffers;\r\n    }\r\n\r\n    public get path():string {\r\n        return this._path;\r\n    }\r\n\r\n    public set path(value:string) {\r\n        this._path = value;\r\n    }\r\n}","import {Primitive} from \"../model\";\r\nimport {IGLTF_Primitive} from \"./model\";\r\nimport {GLTFModel} from \"./GLTFModel\";\r\n\r\nexport class GLTFPrimitiveProcessor {\r\n\r\n    private model: GLTFModel;\r\n    private _primitives:Array<Primitive>;\r\n\r\n    constructor(model: GLTFModel) {\r\n        this.model = model;\r\n        this._primitives = [];\r\n    }\r\n    /**\r\n     * creates a new mesh/GLTF_Primitive for the gltf\r\n     * @param {IGLTF_Primitive} gltfPrimitive\r\n     */\r\n    processPrimitive(gltfPrimitive:IGLTF_Primitive):Primitive{\r\n        const primitive = new Primitive();\r\n\r\n        for(let id in gltfPrimitive.attributes){\r\n            primitive.attributes[id] = this.model.getAccessor(gltfPrimitive.attributes[id]);\r\n        }\r\n\r\n        if(gltfPrimitive.indices !== undefined && gltfPrimitive.indices !== null) {\r\n            primitive.indices = this.model.getAccessor(gltfPrimitive.indices, true);\r\n        }\r\n\r\n        primitive.draw_mode = gltfPrimitive.mode||4; //Default GL_TRIANGLE\r\n        primitive.material = this.getPrimitiveMaterial(gltfPrimitive.material);\r\n\r\n        //TODO: morph targets primitive.targets\r\n        this._primitives.push(primitive);\r\n        return primitive;\r\n    }\r\n\r\n    /**\r\n     * sets the name of the material used for the mesh if any\r\n     * else its set to the \"__default__\" material\r\n     * @param {number} materialIdx\r\n     */\r\n    private getPrimitiveMaterial(materialIdx?:number): string {\r\n        if(materialIdx === undefined || materialIdx === null){\r\n            return '__default__';\r\n        }\r\n        return this.model.getMaterial(materialIdx).name;\r\n    }\r\n\r\n    get primitives(): Array<Primitive> {\r\n        return this._primitives;\r\n    }\r\n\r\n    set primitives(value: Array<Primitive>) {\r\n        this._primitives = value;\r\n    }\r\n}","import {GLTFModel} from \"./GLTFModel\";\r\nimport {IGLTF_Scene} from \"./model\";\r\nimport {Model} from \"../model\";\r\nimport {IBaseCache} from \"../cache/caches\";\r\nimport {CACHE_TYPE} from \"../cache\";\r\n\r\nexport class GLTFSceneProcessor {\r\n    private model: GLTFModel;\r\n    private cache:IBaseCache<Model>;\r\n\r\n    constructor(model: GLTFModel) {\r\n        this.model = model;\r\n        this.cache = this.model.cache.getCache(CACHE_TYPE.MODEL);\r\n    }\r\n\r\n    /**\r\n     * Parse the scenes by parsing each node of the GLTF File\r\n     */\r\n    processScenes():Model {\r\n        const gltf = this.model.gltf;\r\n        const scenes = [];\r\n\r\n        for(let i=0, scene:IGLTF_Scene; scene = gltf.scenes[i]; i++) {\r\n           scenes.push(this.processScene(scene,i));\r\n        }\r\n\r\n        return scenes[0];\r\n    }\r\n\r\n    private processScene(gltfScene:IGLTF_Scene,idx:number):Model {\r\n        const scene = new Model();\r\n        scene.name = gltfScene.name||\"scene\"+idx;\r\n        for(let i=0; i < gltfScene.nodes.length; i++){\r\n            this.model.getNode(gltfScene.nodes[i]);\r\n        }\r\n\r\n        this.cache.add(scene.name, scene);\r\n        return scene;\r\n    }\r\n}","import {GLTFModel} from \"./GLTFModel\";\r\nimport {Skin} from \"../model/skin/skin\";\r\nimport {mat4} from \"gl-matrix\";\r\n\r\nexport class GLTFSkinProcessor {\r\n    private model: GLTFModel;\r\n    private _skins: Array<Skin>;\r\n\r\n    constructor(model: GLTFModel) {\r\n        this.model = model;\r\n        this._skins = [];\r\n    }\r\n\r\n    processSkin(idx:number): Skin {\r\n        if(this._skins[idx]) {\r\n            return this._skins[idx];\r\n        }\r\n\r\n        const skin = new Skin();\r\n        const gltf = this.model.gltf;\r\n        const gltfSkin = gltf.skins[idx];\r\n\r\n        if(gltfSkin.skeleton !== undefined && gltfSkin.skeleton !== null) {\r\n            skin.skeleton = this.model.getNode(gltfSkin.skeleton).transform;\r\n        }\r\n\r\n        for(let i=0; i < gltfSkin.joints.length; i++) {\r\n            skin.joints.push(this.model.getNode(gltfSkin.joints[i]).transform);\r\n        }\r\n\r\n        if(gltf.accessors[gltfSkin.inverseBindMatrices]) {\r\n            const inverseBindMatrices = this.model.getAccessor(gltfSkin.inverseBindMatrices).getData();\r\n\r\n            for(let i=0; i < inverseBindMatrices.length; i+=16) {\r\n                skin.inverseBindMatrices.push(mat4.fromValues(\r\n                    inverseBindMatrices[i],\r\n                    inverseBindMatrices[i + 1],\r\n                    inverseBindMatrices[i + 2],\r\n                    inverseBindMatrices[i + 3],\r\n                    inverseBindMatrices[i + 4],\r\n                    inverseBindMatrices[i + 5],\r\n                    inverseBindMatrices[i + 6],\r\n                    inverseBindMatrices[i + 7],\r\n                    inverseBindMatrices[i + 8],\r\n                    inverseBindMatrices[i + 9],\r\n                    inverseBindMatrices[i + 10],\r\n                    inverseBindMatrices[i + 11],\r\n                    inverseBindMatrices[i + 12],\r\n                    inverseBindMatrices[i + 13],\r\n                    inverseBindMatrices[i + 14],\r\n                    inverseBindMatrices[i + 15]\r\n                ));\r\n            }\r\n        }\r\n\r\n        this._skins[idx] = skin;\r\n        return skin;\r\n    }\r\n\r\n    get skins(): Array<Skin> {\r\n        return this._skins;\r\n    }\r\n\r\n    set skins(value: Array<Skin>) {\r\n        this._skins = value;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./Base64Binary\";\nexport * from \"./GLTFAccessorProcessor\";\nexport * from \"./GLTFAnimationProcessor\";\nexport * from \"./GLTFMaterialProcessor\";\nexport * from \"./GLTFMeshProcessor\";\nexport * from \"./GLTFModel\";\nexport * from \"./GLTFNodeProcessor\";\nexport * from \"./GLTFParser\";\nexport * from \"./GLTFSceneProcessor\";\nexport * from \"./GLTFSkinProcessor\";\nexport * from \"./model/index\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./GLTF_Accessor\";\nexport * from \"./GLTF_Animation\";\nexport * from \"./GLTF_Buffer\";\nexport * from \"./GLTF_BufferView\";\nexport * from \"./GLTF_Camera\";\nexport * from \"./GLTF_Image\";\nexport * from \"./GLTF_Material\";\nexport * from \"./GLTF_Mesh\";\nexport * from \"./GLTF_Model\";\nexport * from \"./GLTF_Node\";\nexport * from \"./GLTF_Primitive\";\nexport * from \"./GLTF_Sampler\";\nexport * from \"./GLTF_Scene\";\nexport * from \"./GLTF_Skin\";\nexport * from \"./GLTF_Texture\";\nexport {ALPHA_MODE} from \"../../material\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./cache/index\";\nexport * from \"./canvas/index\";\nexport * from \"./components/index\";\nexport * from \"./events/index\";\nexport * from \"./gl/index\";\nexport * from \"./gltf/index\";\nexport * from \"./loader/index\";\nexport * from \"./material/index\";\nexport * from \"./math/index\";\nexport * from \"./model/index\";\nexport * from \"./shader/index\";\nexport * from \"./systems/index\";\nexport * from \"./viewer/index\";\n","import {LOAD_TYPE, Middleware, Resource} from \"curbl-loader\";\r\nimport {GLCubemap} from \"../gl/GLCubemap\";\r\nimport {MAG_FILTER, MIN_FILTER, TEXTURE_WRAP} from \"../gl/constants\";\r\nimport {GLTexture} from \"../gl\";\r\nimport {TextureLoaderConfig} from \"./TextureLoader\";\r\nimport {CACHE_TYPE} from \"../cache\";\r\n\r\nexport class CubemapLoader extends Middleware<GLCubemap> {\r\n\r\n    private readonly gl: WebGL2RenderingContext;\r\n\r\n    constructor(gl: WebGL2RenderingContext) {\r\n        super(CACHE_TYPE.TEXTURE);\r\n        this.gl = gl;\r\n    }\r\n\r\n    add(key:string,levels:Array<{right:string,left:string,top:string,bottom:string,back:string,front:string}>,config:TextureLoaderConfig={id:0}): Middleware<GLCubemap> {\r\n        const resources = [];\r\n        for(let i=0, faces; faces = levels[i]; i++) {\r\n            const keys = Object.keys(faces);\r\n            for(let k=0, face; face = faces[keys[k]]; k++) {\r\n                resources.push({\r\n                    resource: new Resource<HTMLImageElement>({\r\n                            url: face,\r\n                            loadType: LOAD_TYPE.IMAGE\r\n                        },\r\n                        {\r\n                            ...config,\r\n                            face: k,\r\n                            level: i\r\n                        }),\r\n                });\r\n            }\r\n        }\r\n        return this.addResourceToQueue({\r\n            key: key,\r\n            resources: resources\r\n        });\r\n    }\r\n\r\n    transform(...resources: Resource<HTMLImageElement>[]): GLCubemap {\r\n        const images = resources.sort((a,b) => a.config.face - b.config.face + (a.config.level - b.config.level)*6).map((resource) => resource.request);\r\n\r\n        const textureConfig = resources[0].config;\r\n\r\n        const data = GLCubemap.cubemapFromSource(\r\n            this.gl,\r\n            images,\r\n            textureConfig.flipY,\r\n            textureConfig.premultiplyAlpha,\r\n            textureConfig.id,\r\n            textureConfig.internalFormat,\r\n            textureConfig.format,\r\n            textureConfig.type\r\n        );\r\n\r\n        if(textureConfig.flipY) {\r\n            data.flipY(1);\r\n        }\r\n\r\n        if(textureConfig.sampler){\r\n            if(textureConfig.sampler.minFilter === MIN_FILTER.LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.LINEAR_MIPMAP_LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.LINEAR_MIPMAP_NEAREST\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST_MIPMAP_LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST_MIPMAP_NEAREST\r\n            ){\r\n                data.setMinFilter(textureConfig.sampler.minFilter);\r\n            }else if(GLTexture.isPowerOf2(data.width) && GLTexture.isPowerOf2(data.height)){\r\n                data.setMinFilter(MIN_FILTER.LINEAR_MIPMAP_LINEAR);\r\n            }else{\r\n                data.setMinFilter(MIN_FILTER.LINEAR);\r\n            }\r\n            if(textureConfig.sampler.magFilter === MAG_FILTER.LINEAR || textureConfig.sampler.magFilter === MAG_FILTER.NEAREST) {\r\n                data.setMagFilter(textureConfig.sampler.magFilter);\r\n            }else{\r\n                data.setMagFilter(MAG_FILTER.LINEAR);\r\n            }\r\n            if(textureConfig.sampler.wrapS === TEXTURE_WRAP.CLAMP_TO_EDGE\r\n                || textureConfig.sampler.wrapS === TEXTURE_WRAP.MIRRORED_REPEAT\r\n                || textureConfig.sampler.wrapS === TEXTURE_WRAP.REPEAT\r\n            ){\r\n                data.setWrapS(textureConfig.sampler.wrapS);\r\n            }else{\r\n                data.setWrapS(TEXTURE_WRAP.REPEAT);\r\n            }\r\n            if(textureConfig.sampler.wrapT === TEXTURE_WRAP.CLAMP_TO_EDGE\r\n                || textureConfig.sampler.wrapT === TEXTURE_WRAP.MIRRORED_REPEAT\r\n                || textureConfig.sampler.wrapT === TEXTURE_WRAP.REPEAT\r\n            ){\r\n                data.setWrapT(textureConfig.sampler.wrapT);\r\n            }else{\r\n                data.setWrapT(TEXTURE_WRAP.REPEAT);\r\n            }\r\n        }\r\n\r\n        return data;\r\n    }\r\n}","import {LOAD_TYPE, Middleware, Resource} from \"curbl-loader\";\r\nimport {CACHE_TYPE} from \"../cache\";\r\nimport {Shader} from \"../shader/shader\";\r\nimport {GLShader} from \"../gl/shader\";\r\n\r\nexport class GLSLLoader extends Middleware<GLShader> {\r\n\r\n    private readonly gl: WebGL2RenderingContext;\r\n\r\n    constructor(gl: WebGL2RenderingContext) {\r\n        super(CACHE_TYPE.SHADER);\r\n        this.gl = gl;\r\n    }\r\n\r\n    add<T extends Shader>(key:string,vertexSrc:string,fragSrc:string, shader?:GLShader): Middleware<GLShader> {\r\n        return this.addResourceToQueue({\r\n            key: key,\r\n            resources: [\r\n                {\r\n                    resource: new Resource<XMLHttpRequest>({\r\n                        url: vertexSrc,\r\n                        loadType: LOAD_TYPE.XHR,\r\n                        responseType: \"text\"\r\n                    },{type:\"vertex\", shader: shader})\r\n                },\r\n                {\r\n                    resource: new Resource<XMLHttpRequest>({\r\n                        url: fragSrc,\r\n                        loadType: LOAD_TYPE.XHR,\r\n                        responseType: \"text\"\r\n                    },{type:\"fragment\", shader: shader})\r\n                }]\r\n        });\r\n    }\r\n\r\n    transform(...resources: Resource<XMLHttpRequest>[]): Shader {\r\n        const vertex = resources.find((r) => r.config.type === \"vertex\");\r\n        const fragment = resources.find((r) => r.config.type === \"fragment\");\r\n\r\n        if(vertex.config.shader) {\r\n            const shader: Shader = vertex.config.shader;\r\n            shader.vertexSrc = vertex.request.response;\r\n            shader.fragmentSrc = fragment.request.response;\r\n            return shader;\r\n        }\r\n\r\n        return new Shader(this.gl,vertex.request.response, fragment.request.response);\r\n    }\r\n}","import {LOAD_TYPE, Middleware, Resource} from \"curbl-loader\";\r\nimport {GLTF_Parser} from \"../gltf/GLTFParser\";\r\nimport {Cache, CACHE_TYPE} from \"../cache\";\r\nimport {Model} from \"../model/model\";\r\n\r\nexport class GLTFLoader extends Middleware<Model> {\r\n    private readonly gl: WebGL2RenderingContext;\r\n    private readonly cache: Cache;\r\n\r\n    constructor(gl: WebGL2RenderingContext, cache: Cache) {\r\n        super(CACHE_TYPE.MODEL);\r\n        this.gl = gl;\r\n        this.cache = cache;\r\n    }\r\n\r\n    add(key:string, gltfJson:string, gltfBin?:string): Middleware<Model> {\r\n        const bufferResource = gltfBin ? {\r\n            resource: new Resource<XMLHttpRequest>({\r\n                url: gltfBin,\r\n                loadType: LOAD_TYPE.XHR,\r\n                responseType: 'arraybuffer'\r\n            },{\r\n                type:'buffer'\r\n            })\r\n        } : null;\r\n\r\n        const jsonResource = {\r\n            resource: new Resource<XMLHttpRequest>({\r\n                url: gltfJson,\r\n                loadType: LOAD_TYPE.XHR,\r\n                responseType: 'json'\r\n            },{\r\n                type:'json'\r\n            })\r\n        };\r\n\r\n        const resources = bufferResource ? [jsonResource, bufferResource] : [jsonResource];\r\n\r\n        return this.addResourceToQueue({\r\n            key: key,\r\n            resources: resources\r\n        });\r\n    }\r\n\r\n    transform(...resources: Resource<XMLHttpRequest>[]): Model {\r\n        const jsonResource = resources.find((resource)=>resource.config.type === 'json');\r\n        const bufferResource = resources.find((resource)=>resource.config.type === 'buffer');\r\n\r\n        const url = jsonResource.options.url;\r\n        const match = url.match(/[\\w\\.]+/g);\r\n\r\n        const parser = new GLTF_Parser(this._loader,this.gl,this.cache);\r\n        parser.path = url.replace(match[match.length-1],'');\r\n\r\n        return parser.parse(jsonResource.request.response, bufferResource ? bufferResource.request.response : undefined);\r\n    }\r\n}","import {LOAD_TYPE, Middleware, Resource} from \"curbl-loader\";\r\nimport {GLTexture, MAG_FILTER, MIN_FILTER, TEXTURE_WRAP} from \"../gl\";\r\nimport {CACHE_TYPE} from \"../cache\";\r\n\r\nexport type TextureLoaderConfig = {\r\n    id?:number;\r\n    premultiplyAlpha?:boolean;\r\n    internalFormat?:number;\r\n    format?:number;\r\n    type?:number;\r\n    width?:number;\r\n    height?:number;\r\n    sampler?:{\r\n        magFilter?:number;\r\n        minFilter?:number;\r\n        wrapS?:number;\r\n        wrapT?:number;\r\n    },\r\n    flipY?:boolean;\r\n}\r\n\r\nexport class TextureLoader extends Middleware<GLTexture> {\r\n\r\n    private readonly gl: WebGL2RenderingContext;\r\n\r\n    constructor(gl: WebGL2RenderingContext) {\r\n        super(CACHE_TYPE.TEXTURE);\r\n        this.gl = gl;\r\n    }\r\n\r\n    add(key:string, url:string, config:TextureLoaderConfig = {\r\n        id:0,\r\n        sampler: {\r\n            wrapS: TEXTURE_WRAP.REPEAT,\r\n            wrapT: TEXTURE_WRAP.REPEAT\r\n        }\r\n    }): Middleware<GLTexture> {\r\n        return this.addResourceToQueue({\r\n            key: key,\r\n            resources: [{\r\n                resource: new Resource<HTMLImageElement>({\r\n                    url: url,\r\n                    loadType: LOAD_TYPE.IMAGE\r\n                },config)\r\n            }]\r\n        });\r\n    }\r\n\r\n    transform(resource: Resource<HTMLImageElement>): GLTexture {\r\n        const textureConfig = resource.config;\r\n        const image = resource.request;\r\n\r\n        const data = GLTexture.fromSource(\r\n            this.gl,\r\n            image,\r\n            textureConfig.premultiplyAlpha,\r\n            textureConfig.id,\r\n            textureConfig.internalFormat,\r\n            textureConfig.format,\r\n            textureConfig.type\r\n        );\r\n\r\n        if(textureConfig.flipY) {\r\n            data.flipY(1);\r\n        }\r\n        if(textureConfig.sampler){\r\n            if(textureConfig.sampler.minFilter === MIN_FILTER.LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.LINEAR_MIPMAP_LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.LINEAR_MIPMAP_NEAREST\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST_MIPMAP_LINEAR\r\n                || textureConfig.sampler.minFilter === MIN_FILTER.NEAREST_MIPMAP_NEAREST\r\n            ){\r\n                data.setMinFilter(textureConfig.sampler.minFilter);\r\n            }else if(GLTexture.isPowerOf2(data.width) && GLTexture.isPowerOf2(data.height)){\r\n                data.setMinFilter(MIN_FILTER.LINEAR_MIPMAP_LINEAR);\r\n            }else{\r\n                data.setMinFilter(MIN_FILTER.LINEAR);\r\n            }\r\n            if(textureConfig.sampler.magFilter === MAG_FILTER.LINEAR || textureConfig.sampler.magFilter === MAG_FILTER.NEAREST) {\r\n                data.setMagFilter(textureConfig.sampler.magFilter);\r\n            }else{\r\n                data.setMagFilter(MAG_FILTER.LINEAR);\r\n            }\r\n            if(textureConfig.sampler.wrapS === TEXTURE_WRAP.CLAMP_TO_EDGE\r\n                || textureConfig.sampler.wrapS === TEXTURE_WRAP.MIRRORED_REPEAT\r\n                || textureConfig.sampler.wrapS === TEXTURE_WRAP.REPEAT\r\n            ){\r\n                data.setWrapS(textureConfig.sampler.wrapS);\r\n            }else{\r\n                data.setWrapS(TEXTURE_WRAP.REPEAT);\r\n            }\r\n            if(textureConfig.sampler.wrapT === TEXTURE_WRAP.CLAMP_TO_EDGE\r\n                || textureConfig.sampler.wrapT === TEXTURE_WRAP.MIRRORED_REPEAT\r\n                || textureConfig.sampler.wrapT === TEXTURE_WRAP.REPEAT\r\n            ){\r\n                data.setWrapT(textureConfig.sampler.wrapT);\r\n            }else{\r\n                data.setWrapT(TEXTURE_WRAP.REPEAT);\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./CubemapLoader\";\nexport * from \"./GLSLLoader\";\nexport * from \"./GLTFLoader\";\nexport * from \"./TextureLoader\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./material\";\nexport * from \"./materialmap\";\nexport * from \"./metallicRoughness\";\n","import {Materialmap} from \"./materialmap\";\r\n\r\nexport enum MATERIAL_TYPES {\r\n    PBR\r\n}\r\n\r\nexport enum MATERIAL_MAPS {\r\n    ALBEDO,\r\n    NORMAL,\r\n    OCCLUSION,\r\n    EMISSIVE,\r\n    METAL_ROUGHNESS\r\n}\r\n\r\nexport enum ALPHA_MODE {\r\n    OPAQUE = \"OPAQUE\",\r\n    MASK = \"MASK\",\r\n    BLEND = \"BLEND\"\r\n}\r\n\r\nexport class Material<T = any> {\r\n    /**\r\n     * material type PBR or SPECULAR\r\n     * default PBR\r\n     * @property\r\n     */\r\n    private _type:MATERIAL_TYPES;\r\n    /**\r\n     * name of the material\r\n     * @property\r\n     */\r\n    protected _name:string;\r\n    /**\r\n     * List of maps for this material\r\n     * @property\r\n     */\r\n    protected _maps:Array<Materialmap>;\r\n    /**\r\n     * Modeldata for the type of this Material e.g. MetallicRoughness,SpecularGlossiness data\r\n     * @property\r\n     */\r\n    protected _model:T;\r\n\r\n    private _alphaMode:ALPHA_MODE;\r\n    private _alphaCutoff:number;\r\n    private _doubleSided:boolean;\r\n\r\n    constructor(name:string,model?:T){\r\n        this._type = MATERIAL_TYPES.PBR;\r\n        this.name = name;\r\n        this._maps = [];\r\n        this._model = model;\r\n        this._alphaMode = ALPHA_MODE.OPAQUE;\r\n        this._alphaCutoff = 0.5;\r\n        this._doubleSided = false;\r\n    }\r\n\r\n    hasMap(key:MATERIAL_MAPS):boolean {\r\n        return !!this._maps[key];\r\n    }\r\n\r\n    get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    set name(value: string) {\r\n        this._name = value;\r\n    }\r\n\r\n    public get maps():Array<Materialmap> {\r\n        return this._maps;\r\n    }\r\n\r\n    public set maps(value:Array<Materialmap>) {\r\n        this._maps = value;\r\n    }\r\n\r\n    public get model():T {\r\n        return this._model;\r\n    }\r\n\r\n    public set model(value:T) {\r\n        this._model = value;\r\n    }\r\n\r\n    get type(): MATERIAL_TYPES {\r\n        return this._type;\r\n    }\r\n\r\n    set type(value: MATERIAL_TYPES) {\r\n        this._type = value;\r\n    }\r\n\r\n    get alphaMode(): ALPHA_MODE {\r\n        return this._alphaMode;\r\n    }\r\n\r\n    set alphaMode(value: ALPHA_MODE) {\r\n        this._alphaMode = value;\r\n    }\r\n\r\n    get alphaCutoff(): number {\r\n        return this._alphaCutoff;\r\n    }\r\n\r\n    set alphaCutoff(value: number) {\r\n        this._alphaCutoff = value;\r\n    }\r\n\r\n    get doubleSided(): boolean {\r\n        return this._doubleSided;\r\n    }\r\n\r\n    set doubleSided(value: boolean) {\r\n        this._doubleSided = value;\r\n    }\r\n\r\n    get transparent(): boolean {\r\n        return this._alphaMode !== ALPHA_MODE.OPAQUE;\r\n    }\r\n\r\n    get mask(): boolean {\r\n        return this._alphaMode === ALPHA_MODE.MASK;\r\n    }\r\n\r\n    get blend(): boolean {\r\n        return this._alphaMode === ALPHA_MODE.BLEND;\r\n    }\r\n}","/**\r\n * Created by Soeren on 31.10.2017.\r\n */\r\nexport interface ISampler {\r\n    magFilter?:number;\r\n    minFilter?:number;\r\n    wrapS?:number;\r\n    wrapT?:number;\r\n}\r\n\r\nexport class Materialmap {\r\n    private _texture:string;\r\n    private _sampler?:ISampler;\r\n\r\n    constructor(texture:string,sampler?:ISampler){\r\n        this._texture = texture;\r\n        this._sampler = sampler;\r\n    }\r\n\r\n    public get texture():string {\r\n        return this._texture;\r\n    }\r\n\r\n    public set texture(value:string) {\r\n        this._texture = value;\r\n    }\r\n\r\n    public get sampler():ISampler {\r\n        return this._sampler;\r\n    }\r\n\r\n    public set sampler(value:ISampler) {\r\n        this._sampler = value;\r\n    }\r\n\r\n}","import {vec3, vec4} from \"gl-matrix\";\r\n\r\nexport class MetallicRoughness {\r\n    private _emissiveFactor:vec3;\r\n    private _baseColorFactor:vec4;\r\n    private _metallicFactor:number;\r\n    private _roughnessFactor:number;\r\n    private _normalScale:number;\r\n    private _occlusionStrength:number;\r\n\r\n    constructor(){\r\n        this._baseColorFactor = vec4.fromValues(1,1,1,1);\r\n        this._metallicFactor = 1;\r\n        this._roughnessFactor = 1;\r\n        this._normalScale = 1;\r\n        this._occlusionStrength = 1;\r\n        this._emissiveFactor = vec3.create();\r\n    }\r\n\r\n    get baseColorFactor(): vec4 {\r\n        return this._baseColorFactor;\r\n    }\r\n\r\n    set baseColorFactor(value: vec4) {\r\n        this._baseColorFactor = value;\r\n    }\r\n\r\n    get metallicFactor(): number {\r\n        return this._metallicFactor;\r\n    }\r\n\r\n    set metallicFactor(value: number) {\r\n        this._metallicFactor = value;\r\n    }\r\n\r\n    get roughnessFactor(): number {\r\n        return this._roughnessFactor;\r\n    }\r\n\r\n    set roughnessFactor(value: number) {\r\n        this._roughnessFactor = value;\r\n    }\r\n\r\n    get emissiveFactor(): vec3 {\r\n        return this._emissiveFactor;\r\n    }\r\n\r\n    set emissiveFactor(value: vec3) {\r\n        this._emissiveFactor = value;\r\n    }\r\n\r\n    get normalScale(): number {\r\n        return this._normalScale;\r\n    }\r\n\r\n    set normalScale(value: number) {\r\n        this._normalScale = value;\r\n    }\r\n\r\n    get occlusionStrength(): number {\r\n        return this._occlusionStrength;\r\n    }\r\n\r\n    set occlusionStrength(value: number) {\r\n        this._occlusionStrength = value;\r\n    }\r\n}","/**\r\n * Created by Soeren on 26.11.2016.\r\n */\r\nexport class Color {\r\n    private _elements:Float32Array;\r\n\r\n    constructor(r:number=0,g:number=0,b:number=0,a=1){\r\n        this._elements = new Float32Array([r, g, b, a]);\r\n    }\r\n    public get r():number{\r\n        return this._elements[0];\r\n    }\r\n    public set r(r:number){\r\n        this._elements[0] = r;\r\n    }\r\n    public get g():number{\r\n        return this._elements[1];\r\n    }\r\n    public set g(g:number){\r\n        this._elements[1] = g;\r\n    }\r\n    public get b():number{\r\n        return this._elements[2];\r\n    }\r\n    public set b(b:number){\r\n        this._elements[2] = b;\r\n    }\r\n    public get a():number{\r\n        return this._elements[3];\r\n    }\r\n    public set (a:number){\r\n        this._elements[3] = a;\r\n    }\r\n    public mult(f:number|Color):Color{\r\n        if(typeof f === 'number'){\r\n            f = <number>f;\r\n            return new Color(this.r*f,this.g*f,this.b*f,Math.abs(Math.min(this.a*f,1)));\r\n        }else{\r\n            return new Color(this.r*f.r,this.g*f.g,this.b*f.b,Math.abs(Math.min(this.a*f.a,1)));\r\n        }\r\n    }\r\n    public div(f:number|Color):Color{\r\n        if(typeof f === 'number'){\r\n            f = <number>f;\r\n            return this.mult(1/f);\r\n        }\r\n        let color = new Color(1/f.r,1/f.g,1/f.b,Math.min(1/f.a,1));\r\n        return this.mult(color);\r\n    }\r\n    public plus(other:Color):Color{\r\n        return new Color(this.r+other.r,this.g+other.g,this.b+other.b,Math.abs(Math.min(this.a+other.a,1)));\r\n    }\r\n    public minus(other:Color):Color{\r\n        return new Color(this.r-other.r,this.g-other.g,this.b-other.b,Math.abs(Math.min(this.a-other.a,1)));\r\n    }\r\n\r\n    public get elements():Float32Array {\r\n        return this._elements;\r\n    }\r\n\r\n    public set elements(value:Float32Array) {\r\n        this._elements = value;\r\n    }\r\n\r\n    public toString():string{\r\n        return \"{Color: [R: \"+this.r+\" G: \"+this.g+\" B: \"+this.b+\" A: \"+this.a+\"]}\";\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./color\";\nexport * from \"./math\";\n","import {mat4, vec3, vec4} from \"gl-matrix\";\r\n\r\nexport module Math3d {\r\n\r\n    export function getWorldCornersFromMatrix(mat: mat4): Array<vec3> {\r\n        const inverse = mat4.invert(mat4.create(), mat);\r\n        const corners = [];\r\n\r\n        for(let x=0; x < 2; x++) {\r\n            for(let y=0; y < 2; y++) {\r\n                for(let z=0; z < 2; z++) {\r\n                    const clipSpacePos = vec4.fromValues(\r\n                        x*2.0-1.0,\r\n                        y*2.0-1.0,\r\n                        z*2.0-1.0,\r\n                        1.0\r\n                    );\r\n                    vec4.transformMat4(clipSpacePos, clipSpacePos, inverse);\r\n                    corners.push(vec3.fromValues(\r\n                        clipSpacePos[0] / clipSpacePos[3],\r\n                        clipSpacePos[1] / clipSpacePos[3],\r\n                        clipSpacePos[2] / clipSpacePos[3]\r\n                    ));\r\n                }\r\n            }\r\n        }\r\n\r\n        return corners;\r\n    }\r\n\r\n    /**\r\n     * Return a vector point on a position of a sphere\r\n     * @param {number} x\r\n     * @param {number} y\r\n     * @param {number} width\r\n     * @param {number} height\r\n     * @returns {Vector}\r\n     */\r\n    export function getVSpherePos(x:number,y:number,width:number,height:number):vec3 {\r\n        const out:vec3 = vec3.fromValues(1.0*x/width*2.0-1.0, -(1.0*y/height*2.0-1.0) , 0);\r\n        vec3.squaredLength(out);\r\n        let sqrLen = vec3.squaredLength(out);\r\n        if(sqrLen <= 1.0){\r\n            vec3.add(out, out, [0,0,  Math.sqrt(1-sqrLen)]);\r\n        }else{\r\n            vec3.normalize(out, out);\r\n        }\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Rotate vector v around axis n with angle a\r\n     * @param {Vector} v - vector to rotate\r\n     * @param {Vector} n - axis to rotate around\r\n     * @param {number} a - rotation angle\r\n     * @returns {Vector}\r\n     */\r\n    export function rotateAxisAngle(v:vec3,n:vec3,a:number):vec3{\r\n        let co = Math.cos(a);\r\n        let si = Math.sin(a);\r\n\r\n        let o:vec3 = vec3.create();\r\n        let mx = vec3.fromValues(n[0]*n[0]*(1.0-co)+co, n[0]*n[1]*(1.0-co)-n[2]*si, n[0]*n[2]*(1.0-co)+n[1]*si);\r\n        let my = vec3.fromValues(n[0]*n[1]*(1.0-co)+n[2]*si, n[1]*n[1]*(1.0-co)+co, n[1]*n[2]*(1.0-co)-n[0]*si);\r\n        let mz = vec3.fromValues(n[0]*n[2]*(1.0-co)-n[1]*si, n[2]*n[1]*(1.0-co)+n[0]*si, n[2]*n[2]*(1.0-co)+co);\r\n        o[0] = vec3.dot(mx, v);\r\n        o[1] = vec3.dot(my, v);\r\n        o[2] = vec3.dot(mz, v);\r\n        return o;\r\n    }\r\n\r\n    /**\r\n     * transform degree to radians\r\n     * @param {number} deg\r\n     * @returns {number}\r\n     */\r\n    export function radians(deg:number):number{\r\n        return deg * Math.PI / 180;\r\n    }\r\n\r\n    /**\r\n     * ModelTransform radians to degrees\r\n     * @param {number} rad\r\n     * @returns {number}\r\n     */\r\n    export function degrees(rad:number):number{\r\n        return rad * 180 / Math.PI;\r\n    }\r\n}\r\n\r\nexport module Math2d {\r\n    export function lerp(a:number,b:number,f:number):number{\r\n        return a+f*(b-a);\r\n    }\r\n}","import {AnimationSampler} from \"./animationSampler\";\r\nimport {AnimationChannel} from \"./animationChannel\";\r\nimport {quat, vec3} from \"gl-matrix\";\r\nimport {Transform} from \"../transform\";\r\n\r\nexport class Animation {\r\n    name: string;\r\n    private samplers: Array<AnimationSampler>;\r\n    private channels: Array<AnimationChannel>;\r\n    private _duration: number;\r\n\r\n    constructor() {\r\n        this.samplers = [];\r\n        this.channels = [];\r\n        this._duration = 0;\r\n    }\r\n\r\n    addSampler(sampler: AnimationSampler) {\r\n        this.samplers.push(sampler);\r\n    }\r\n\r\n    addChannel(channel: AnimationChannel) {\r\n        this.channels.push(channel);\r\n    }\r\n\r\n    animate(t:number) {\r\n        const time = t * 0.001;\r\n\r\n        for(let i=0, sampler:AnimationSampler; sampler = this.samplers[i]; i++) {\r\n            sampler.update(time);\r\n        }\r\n        for(let i=0, channel: AnimationChannel; channel = this.channels[i]; i++) {\r\n            const sampler = this.samplers[channel.sampler];\r\n            const transform:Transform = channel.transform;\r\n\r\n            switch(channel.path) {\r\n                case \"rotation\":\r\n                    quat.copy(transform.rotation, sampler.value as any);\r\n                    break;\r\n                case \"translation\":\r\n                    vec3.copy(transform.translation, sampler.value);\r\n                    break;\r\n                case \"scale\":\r\n                    vec3.copy(transform.scale, sampler.value);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    get duration(): number {\r\n        return this._duration;\r\n    }\r\n\r\n    set duration(duration:number) {\r\n        this._duration = duration;\r\n    }\r\n\r\n    get durationMS(): number {\r\n        return this._duration * 1000;\r\n    }\r\n\r\n    set durationMS(durationMS:number) {\r\n        this._duration = durationMS * 0.001;\r\n    }\r\n}","import {Transform} from \"../transform\";\r\n\r\nexport class AnimationChannel {\r\n    sampler: number;\r\n    transform: Transform;\r\n    path:\"translation\"|\"rotation\"|\"scale\"|\"weights\";\r\n}","import {quat, vec4} from \"gl-matrix\";\r\nimport {TypedArray} from \"../../gltf/GLTFModel\";\r\n\r\nexport enum Interpolation {\r\n    LINEAR = \"LINEAR\",\r\n    STEP = \"STEP\",\r\n    CUBICSPLINE = \"CUBICSPLINE\"\r\n}\r\n\r\ntype LerpFunc = (out:quat|vec4, a:vec4, b:vec4, t:number) => quat|vec4;\r\n\r\nexport class AnimationSampler {\r\n    private _interpolation:\"LINEAR\"|\"STEP\"|\"CUBICSPLINE\";\r\n    private _inputData:TypedArray;\r\n    private _outputData:TypedArray;\r\n    private _componentTypeCount: number;\r\n\r\n    private prevValue:vec4;\r\n    private nextValue:vec4;\r\n    private _value:vec4|quat;\r\n    private _duration:number;\r\n\r\n    constructor() {\r\n        this._interpolation = Interpolation.LINEAR;\r\n        this.prevValue = vec4.create();\r\n        this.nextValue = vec4.create();\r\n        this._value = vec4.create();\r\n        this._duration = 0;\r\n    }\r\n\r\n    private updateValue(idx:number, t:number) {\r\n        const typeCount = this._componentTypeCount;\r\n        const prevIdx = idx * typeCount;\r\n        const nextIdx = (prevIdx + typeCount + 2) <= this._outputData.length ? prevIdx + typeCount : prevIdx;\r\n        const lerp:LerpFunc = (typeCount === 4 ? quat.slerp : vec4.lerp) as LerpFunc;\r\n\r\n        vec4.set(\r\n            this.prevValue,\r\n            this._outputData[prevIdx],\r\n            this._outputData[prevIdx+1],\r\n            this._outputData[prevIdx+2],\r\n            typeCount === 3 ? 0 : this._outputData[prevIdx+3]\r\n        );\r\n\r\n        vec4.set(\r\n            this.nextValue,\r\n            this._outputData[nextIdx],\r\n            this._outputData[nextIdx+1],\r\n            this._outputData[nextIdx+2],\r\n            typeCount === 3 ? 0 : this._outputData[nextIdx+3]\r\n        );\r\n\r\n        lerp(this._value, this.prevValue, this.nextValue, t);\r\n    }\r\n\r\n    update(t:number) {\r\n        let idx = 0;\r\n\r\n        while(idx < this._inputData.length - 2 && t >= this._inputData[idx + 1]) {\r\n            idx++;\r\n        }\r\n\r\n        const previousTime = this._inputData[idx];\r\n        const nextTime = this._inputData[idx+1];\r\n        const interpolationTime = Math.min(Math.max( 0, (t - previousTime) / (nextTime - previousTime)),1);\r\n        this.updateValue(idx, interpolationTime);\r\n    }\r\n\r\n    get value(): number[] {\r\n        return this._value as any as number[];\r\n    }\r\n\r\n    get duration(): number {\r\n        return this._duration;\r\n    }\r\n\r\n    set duration(duration:number) {\r\n        this._duration = duration;\r\n    }\r\n\r\n    get interpolation(): \"LINEAR\" | \"STEP\" | \"CUBICSPLINE\" {\r\n        return this._interpolation;\r\n    }\r\n\r\n    set interpolation(value: \"LINEAR\" | \"STEP\" | \"CUBICSPLINE\") {\r\n        this._interpolation = value;\r\n    }\r\n\r\n    get inputData(): TypedArray {\r\n        return this._inputData;\r\n    }\r\n\r\n    set inputData(value: TypedArray) {\r\n        this._inputData = value;\r\n    }\r\n\r\n    get outputData(): TypedArray {\r\n        return this._outputData;\r\n    }\r\n\r\n    set outputData(value: TypedArray) {\r\n        this._outputData = value;\r\n    }\r\n\r\n    get componentTypeCount(): number {\r\n        return this._componentTypeCount;\r\n    }\r\n\r\n    set componentTypeCount(value: number) {\r\n        this._componentTypeCount = value;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./animation\";\nexport * from \"./animationChannel\";\nexport * from \"./animationSampler\";\n","import {mat4, vec3} from \"gl-matrix\";\r\nimport {BoundingVolume} from \"./boundingVolume\";\r\n\r\nexport class BoundingBox implements BoundingVolume<{ min: vec3, max: vec3 }> {\r\n    private _min: vec3;\r\n    private _max: vec3;\r\n    private readonly _transform: mat4;\r\n    private readonly _center: vec3;\r\n\r\n    constructor(min: vec3, max: vec3) {\r\n        this._min = min;\r\n        this._max = max;\r\n        this._transform = mat4.create();\r\n        this._center = vec3.create();\r\n        this.update(this);\r\n    }\r\n\r\n    update(bbox: { min: vec3, max: vec3 }): void {\r\n        vec3.min(this._min, this._min, bbox.min);\r\n        vec3.min(this._max, this._max, bbox.max);\r\n        this.calculateTransform();\r\n        this.calculateCenter();\r\n    }\r\n\r\n    private calculateTransform(): mat4 {\r\n        // scale\r\n        this._transform[0] = this._max[0] - this._min[0];\r\n        this._transform[5] = this._max[1] - this._min[1];\r\n        this._transform[10] = this._max[2] - this._min[2];\r\n        // translate\r\n        this._transform[12] = this._min[0];\r\n        this._transform[13] = this._min[1];\r\n        this._transform[14] = this._min[2];\r\n\r\n        return this._transform;\r\n    }\r\n\r\n    private calculateCenter(): vec3 {\r\n        this._center[0] = (this._min[0] + this._max[0]) / 2.0;\r\n        this._center[1] = (this._min[1] + this._max[1]) / 2.0;\r\n        this._center[2] = (this._min[2] + this._max[2]) / 2.0;\r\n\r\n        return this._center;\r\n    }\r\n\r\n    get min(): vec3 {\r\n        return this._min;\r\n    }\r\n\r\n    set min(value: vec3) {\r\n        this._min = value;\r\n    }\r\n\r\n    get max(): vec3 {\r\n        return this._max;\r\n    }\r\n\r\n    set max(value: vec3) {\r\n        this._max = value;\r\n    }\r\n\r\n    get transform(): mat4 {\r\n        return this.calculateTransform();\r\n    }\r\n\r\n    get center(): vec3 {\r\n        return this.calculateCenter();\r\n    }\r\n\r\n    getAABB(matrix: mat4): BoundingBox {\r\n        return BoundingBox.getAABBFromOBB(this, matrix);\r\n    }\r\n\r\n    static getAABBFromOBB(obb:BoundingBox, matrix: mat4): BoundingBox {\r\n        const transformRight = vec3.create();\r\n        const transformUp = vec3.create();\r\n        const transformBackward = vec3.create();\r\n\r\n        const tmpVec3a = vec3.create();\r\n        const tmpVec3b = vec3.create();\r\n\r\n        vec3.set(transformRight, matrix[0], matrix[1], matrix[2]);\r\n        vec3.set(transformUp, matrix[4], matrix[5], matrix[6]);\r\n        vec3.set(transformBackward, matrix[8], matrix[9], matrix[10]);\r\n\r\n        const min = vec3.fromValues(matrix[12], matrix[13], matrix[14]);  // init with matrix translation\r\n        const max = vec3.clone(min);\r\n\r\n        vec3.scale(tmpVec3a, transformRight, obb.min[0]);\r\n        vec3.scale(tmpVec3b, transformRight, obb.max[0]);\r\n        vec3.min(transformRight, tmpVec3a, tmpVec3b);\r\n        vec3.add(min, min, transformRight);\r\n        vec3.max(transformRight, tmpVec3a, tmpVec3b);\r\n        vec3.add(max, max, transformRight);\r\n\r\n        vec3.scale(tmpVec3a, transformUp, obb.min[1]);\r\n        vec3.scale(tmpVec3b, transformUp, obb.max[1]);\r\n        vec3.min(transformUp, tmpVec3a, tmpVec3b);\r\n        vec3.add(min, min, transformUp);\r\n        vec3.max(transformUp, tmpVec3a, tmpVec3b);\r\n        vec3.add(max, max, transformUp);\r\n\r\n        vec3.scale(tmpVec3a, transformBackward, obb.min[2]);\r\n        vec3.scale(tmpVec3b, transformBackward, obb.max[2]);\r\n        vec3.min(transformBackward, tmpVec3a, tmpVec3b);\r\n        vec3.add(min, min, transformBackward);\r\n        vec3.max(transformBackward, tmpVec3a, tmpVec3b);\r\n        vec3.add(max, max, transformBackward);\r\n\r\n        const bbox = new BoundingBox(min, max);\r\n        bbox.calculateTransform();\r\n        return bbox;\r\n    }\r\n}","import {Primitive} from \"../mesh\";\r\nimport {BoundingBox} from \"./boundingBox\";\r\nimport {mat4, vec3} from \"gl-matrix\";\r\nimport {GLWiredCube} from \"../../gl/primitives/GLWiredCube\";\r\nimport {Shader} from \"../..\";\r\nimport {Frustum, FRUSTUM_INTERSECT} from \"./frustum\";\r\n\r\nexport class BVHNode {\r\n    public static readonly MAX_VOLUMES_PER_NODE = 4;\r\n    private _primitives: Array<Primitive>;\r\n    private _volume: BoundingBox;\r\n    private _left?: BVHNode;\r\n    private _right?: BVHNode;\r\n    private _debugColor: vec3;\r\n\r\n    constructor() {\r\n        this._primitives = [];\r\n        this._debugColor = vec3.fromValues(Math.random(), Math.random(), Math.random());\r\n    }\r\n\r\n    frustumTestPrimitives(frustum: Frustum, modelMat: mat4): Array<Primitive> {\r\n        switch(frustum.intersectAABB(this._volume.getAABB(modelMat))) {\r\n            case FRUSTUM_INTERSECT.OUTSIDE:\r\n                return [];\r\n            case FRUSTUM_INTERSECT.INSIDE:\r\n                return this._primitives;\r\n            case FRUSTUM_INTERSECT.INTERSECTING:\r\n                if(this._left && this._right) {\r\n                    return [].concat(\r\n                        this._left.frustumTestPrimitives(frustum, modelMat),\r\n                        this._right.frustumTestPrimitives(frustum, modelMat)\r\n                    );\r\n                } else {\r\n                    return this._primitives;\r\n                }\r\n        }\r\n    }\r\n\r\n    debugRender(drawMode: number, cube: GLWiredCube, shader: Shader, modelMatrix: mat4): void {\r\n        const model = mat4.mul(mat4.create(), modelMatrix, this._volume.transform);\r\n        shader.apply(model, this._debugColor);\r\n        cube.draw(drawMode);\r\n        if(this._left) {\r\n            this._left.debugRender(drawMode, cube, shader, modelMatrix);\r\n        }\r\n        if(this._right) {\r\n            this._right.debugRender(drawMode, cube, shader, modelMatrix);\r\n        }\r\n    }\r\n\r\n    get volume(): BoundingBox {\r\n        return this._volume;\r\n    }\r\n\r\n    set volume(value: BoundingBox) {\r\n        this._volume = value;\r\n    }\r\n\r\n    get left(): BVHNode {\r\n        return this._left;\r\n    }\r\n\r\n    set left(value: BVHNode) {\r\n        this._left = value;\r\n    }\r\n\r\n    get right(): BVHNode {\r\n        return this._right;\r\n    }\r\n\r\n    set right(value: BVHNode) {\r\n        this._right = value;\r\n    }\r\n\r\n    get primitives(): Array<Primitive> {\r\n        return this._primitives;\r\n    }\r\n\r\n    set primitives(value: Array<Primitive>) {\r\n        this._primitives = value;\r\n    }\r\n\r\n    static constructTree(primitives: Array<Primitive>, weightLeft?: boolean): BVHNode {\r\n        const root = new BVHNode();\r\n        const aabb = BVHNode.getMaxAABB(primitives);\r\n        root.volume = aabb;\r\n        root.primitives = primitives;\r\n\r\n        if(primitives.length < BVHNode.MAX_VOLUMES_PER_NODE) {\r\n            return root;\r\n        }\r\n\r\n        const sortDimension = BVHNode.calculateSortingDimension(aabb);\r\n        primitives = primitives.sort((a,b) => a.boundingBox.max[sortDimension] - b.boundingBox.max[sortDimension]);\r\n\r\n        const midIndex = weightLeft ? Math.ceil(primitives.length / 2) : Math.floor(primitives.length / 2);\r\n        root.left = BVHNode.constructTree(primitives.slice(0, midIndex), !weightLeft);\r\n        root.right = BVHNode.constructTree(primitives.slice(midIndex, primitives.length), !weightLeft);\r\n\r\n        return root;\r\n    }\r\n\r\n    private static calculateSortingDimension(box: BoundingBox): number {\r\n        const max = Math.max(...box.max);\r\n        if(max === box.max[0]) {\r\n            return 0;\r\n        } else if(max === box.max[1]) {\r\n            return 1;\r\n        } else {\r\n            return 2;\r\n        }\r\n    }\r\n\r\n    private static getMaxAABB(primitives: Array<Primitive>): BoundingBox {\r\n        const box = new BoundingBox(\r\n            vec3.fromValues(Infinity, Infinity, Infinity),\r\n            vec3.fromValues(-Infinity, -Infinity, -Infinity)\r\n        );\r\n\r\n        for(let i=0, primitive: Primitive; primitive = primitives[i]; i++) {\r\n            const pBox = primitive.boundingBox;\r\n            box.min[0] = box.min[0] < pBox.min[0] ? box.min[0] : pBox.min[0];\r\n            box.min[1] = box.min[1] < pBox.min[1] ? box.min[1] : pBox.min[1];\r\n            box.min[2] = box.min[2] < pBox.min[2] ? box.min[2] : pBox.min[2];\r\n\r\n            box.max[0] = box.max[0] > pBox.max[0] ? box.max[0] : pBox.max[0];\r\n            box.max[1] = box.max[1] > pBox.max[1] ? box.max[1] : pBox.max[1];\r\n            box.max[2] = box.max[2] > pBox.max[2] ? box.max[2] : pBox.max[2];\r\n        }\r\n\r\n        return box;\r\n    }\r\n}","import {mat4, vec3} from \"gl-matrix\";\r\n\r\nexport enum FRUSTUM_INTERSECT {\r\n    INSIDE,\r\n    INTERSECTING,\r\n    OUTSIDE\r\n}\r\n\r\nexport enum HALFSPACE {\r\n    NEGATIVE = -1,\r\n    ON_PLANE = 0,\r\n    POSITIVE = 1\r\n}\r\n\r\n/**\r\n * Plane representation as ax+by+cz+d = 0, with (a,b,c) = normal\r\n */\r\nexport class Plane {\r\n    normal: vec3;\r\n    distance: number;\r\n\r\n    constructor(normal?:  vec3, distance?: number) {\r\n        this.normal = normal || vec3.create();\r\n        this.distance = distance || 0;\r\n    }\r\n\r\n    distanceToPoint(p: vec3): number {\r\n        return vec3.dot(this.normal, p) + this.distance;\r\n    }\r\n\r\n    halfspace(p: vec3): HALFSPACE {\r\n        const distance = this.distanceToPoint(p);\r\n\r\n        if(distance < 0) return HALFSPACE.NEGATIVE;\r\n        if(distance > 0) return HALFSPACE.POSITIVE;\r\n        return HALFSPACE.ON_PLANE;\r\n    }\r\n\r\n    /**\r\n     * flips the normal vectors of the plane\r\n     * by default they point to the inside\r\n     */\r\n    flip(): Plane {\r\n        vec3.scale(this.normal, this.normal, -1);\r\n        this.distance *= -1;\r\n        return this;\r\n    }\r\n\r\n    static create(): Plane {\r\n        return new Plane();\r\n    }\r\n\r\n    //Plane from normal and support vector p0\r\n    static fromNormalAndPoint(n: vec3, p0: vec3) {\r\n        const normal = vec3.normalize(vec3.create(), n);\r\n        const d = vec3.dot(vec3.scale(vec3.create(), normal, -1), p0);\r\n        return new Plane(normal, d);\r\n    }\r\n\r\n    static fromPoints(p0: vec3, p1: vec3, p2:vec3, flip?: boolean): Plane {\r\n        const v = vec3.subtract(vec3.create(), p1, p0);\r\n        const u = vec3.subtract(vec3.create(), p2, p0);\r\n        const n = vec3.cross(vec3.create(), u, v);\r\n        vec3.normalize(n, n);\r\n        const d = vec3.dot(n, p0) * -1.0;\r\n\r\n        return flip ? new Plane(n, d).flip() : new Plane(n, d);\r\n    }\r\n}\r\n\r\nexport class Frustum {\r\n\r\n    planes: [Plane, Plane, Plane, Plane, Plane, Plane];\r\n\r\n    constructor() {\r\n        this.planes = [Plane.create(), Plane.create(), Plane.create(), Plane.create(), Plane.create(), Plane.create()];\r\n    }\r\n\r\n    normalize(): Frustum {\r\n        for(let i=0; i < 6; i++) {\r\n            const magnitude = vec3.length(this.planes[i].normal);\r\n            vec3.scale(this.planes[i].normal, this.planes[i].normal, 1/magnitude);\r\n            this.planes[i].distance /= magnitude;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * flip the normals of the frustum planes\r\n     */\r\n    flip(): Frustum {\r\n        for(let i=0, plane: Plane; plane = this.planes[i]; i++) {\r\n            plane.flip();\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * https://fgiesen.wordpress.com/2010/10/17/view-frustum-culling/\r\n     * intersection with boundingBox assuming the plane normals are facing inside\r\n     * @param box\r\n     */\r\n    intersectAABB(box: {min: vec3, max:vec3}): FRUSTUM_INTERSECT {\r\n        let result = FRUSTUM_INTERSECT.INSIDE;\r\n        for(let i=0, plane: Plane; plane = this.planes[i]; i++) {\r\n            const p = vec3.clone(box.min);\r\n            p[0] = plane.normal[0] >= 0 ? box.max[0] : p[0];\r\n            p[1] = plane.normal[1] >= 0 ? box.max[1] : p[1];\r\n            p[2] = plane.normal[2] >= 0 ? box.max[2] : p[2];\r\n\r\n            const n = vec3.clone(box.max);\r\n            n[0] = plane.normal[0] >= 0 ? box.min[0] : n[0];\r\n            n[1] = plane.normal[1] >= 0 ? box.min[1] : n[1];\r\n            n[2] = plane.normal[2] >= 0 ? box.min[2] : n[2];\r\n\r\n            //point nearest to the plane is outside\r\n            if(plane.distanceToPoint(p) < 0) {\r\n                return FRUSTUM_INTERSECT.OUTSIDE;\r\n            }\r\n\r\n            //p inside but n outside\r\n            if( plane.distanceToPoint(n) < 0) {\r\n                result = FRUSTUM_INTERSECT.INTERSECTING;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * http://cgvr.cs.uni-bremen.de/teaching/cg_literatur/lighthouse3d_view_frustum_culling/index.html\r\n     * @param cam\r\n     * @param lookAt\r\n     */\r\n    static createFromCameraDefinition(\r\n        cam:{ fovy: number, aspect: number, near: number, far: number},\r\n        lookAt: {position: vec3, target:vec3 , up:vec3}): Frustum\r\n    {\r\n        const nh = cam.near * cam.fovy;\r\n        const nw = nh * cam.aspect;\r\n        const fh = cam.far * cam.fovy;\r\n        const fw = fh * cam.fovy;\r\n\r\n        //z axis of the camera opposite direction of the looking direction (points towards the near and far plane)\r\n        const z = vec3.subtract(vec3.create(), lookAt.position, lookAt.target);\r\n        vec3.normalize(z,z);\r\n        // x axis\r\n        const x = vec3.cross(vec3.create(), lookAt.up, z);\r\n        vec3.normalize(x,x);\r\n        //y axis (real up vector)\r\n        const y = vec3.cross(vec3.create(), z, x);\r\n        vec3.normalize(y,y);\r\n\r\n        //center of the near and far planes\r\n        const nc = vec3.subtract(vec3.create(), lookAt.position, vec3.scale(vec3.create(), z, cam.near));\r\n        const fc = vec3.subtract(vec3.create(), lookAt.position, vec3.scale(vec3.create(), z, cam.far));\r\n\r\n        //4 corners of the frustum of the near plane (ntl = near top left etc.)\r\n        const ynh = vec3.scale(vec3.create(), y, nh);\r\n        const xnw = vec3.scale(vec3.create(), x, nw);\r\n        const ntl = vec3.sub(vec3.create(), vec3.add(vec3.create(), nc, ynh), xnw);\r\n        const ntr = vec3.add(vec3.create(), vec3.add(vec3.create(), nc, ynh), xnw);\r\n        const nbl = vec3.sub(vec3.create(), vec3.sub(vec3.create(), nc, ynh), xnw);\r\n        const nbr = vec3.add(vec3.create(), vec3.sub(vec3.create(), nc, ynh), xnw);\r\n\r\n        //4 corners of the frustum far plane\r\n        const yfh = vec3.scale(vec3.create(), y, fh);\r\n        const xfw = vec3.scale(vec3.create(), x, fw);\r\n        const ftl = vec3.sub(vec3.create(), vec3.add(vec3.create(), fc, yfh), xfw);\r\n        const ftr = vec3.add(vec3.create(), vec3.add(vec3.create(), fc, yfh), xfw);\r\n        const fbl = vec3.sub(vec3.create(), vec3.sub(vec3.create(), fc, yfh), xfw);\r\n        const fbr = vec3.add(vec3.create(), vec3.sub(vec3.create(), fc, yfh), xfw);\r\n\r\n        //six planes from the corner points\r\n        const frustum = new Frustum();\r\n        //top\r\n        frustum.planes[0] = Plane.fromPoints(ntl, ntr, ftl);\r\n        //bottom\r\n        frustum.planes[1] = Plane.fromPoints(nbr, nbl, fbr);\r\n        //left\r\n        frustum.planes[2] = Plane.fromPoints(nbl, ntl, fbl);\r\n        //right\r\n        frustum.planes[3] = Plane.fromPoints(nbr, ntr, fbr);\r\n        //near\r\n        frustum.planes[4] = Plane.fromPoints(ntr, ntl, nbr);\r\n        //far\r\n        frustum.planes[5] = Plane.fromPoints(ftl, ftr, fbl);\r\n\r\n        return frustum;\r\n    }\r\n\r\n    /**\r\n     * TODO: is this right?\r\n     * create frustum from orthogonal matrix\r\n     * where the normals point inside\r\n     * @param mat\r\n     * @param flip - flip the planes of the frustum, so the normals point outside\r\n     */\r\n    static createFromMat4(mat: mat4, flip?: boolean): Frustum {\r\n        const frustum = new Frustum();\r\n        //left clipping plane\r\n        for(let i=0; i < 3; i++) frustum.planes[0].normal[i] = mat[12 +  i] + mat[i];\r\n        frustum.planes[0].distance = mat[15] + mat[3];\r\n        //right clipping plane\r\n        for(let i=0; i < 3; i++) frustum.planes[1].normal[i] = mat[12 +  i] - mat[i];\r\n        frustum.planes[1].distance = mat[15] - mat[3];\r\n        //top clipping plane\r\n        for(let i=0; i < 3; i++) frustum.planes[2].normal[i] = mat[12 +  i] - mat[4+i];\r\n        frustum.planes[2].distance = mat[15] - mat[7];\r\n        //bottom clipping lane\r\n        for(let i=0; i < 3; i++) frustum.planes[3].normal[i] = mat[12 +  i] + mat[4+i];\r\n        frustum.planes[3].distance = mat[15] + mat[7];\r\n        //near clipping plane\r\n        for(let i=0; i < 3; i++) frustum.planes[4].normal[i] = mat[12 +  i] + mat[8+i];\r\n        frustum.planes[4].distance = mat[15] + mat[11];\r\n        //far clipping plane\r\n        for(let i=0; i < 3; i++) frustum.planes[5].normal[i] = mat[12 +  i] - mat[8+i];\r\n        frustum.planes[5].distance = mat[15] - mat[11];\r\n\r\n        if(flip) {\r\n            return frustum.flip().normalize();\r\n        }\r\n        return frustum.normalize();\r\n    }\r\n}","import {GL_TYPES} from \"../../gl/constants\";\r\nimport {BufferView} from \"./bufferView\";\r\nimport {TypedArray} from \"../../gltf\";\r\n\r\nexport enum ACCESSOR_TYPE  {\r\n    SCALAR = \"SCALAR\",\r\n    VEC2 = \"VEC2\",\r\n    VEC3 = \"VEC3\",\r\n    VEC4 = \"VEC4\",\r\n    MAT2 = \"MAT2\",\r\n    MAT3 = \"MAT3\",\r\n    MAT4 = \"MAT4\"\r\n}\r\n\r\nexport const GLTF_ACCESORTYPE_SIZE:{[id:string]:number} = {\r\n    [ACCESSOR_TYPE.SCALAR] : 1,\r\n    [ACCESSOR_TYPE.VEC2]: 2,\r\n    [ACCESSOR_TYPE.VEC3]: 3,\r\n    [ACCESSOR_TYPE.VEC4]: 4,\r\n    [ACCESSOR_TYPE.MAT2]: 4,\r\n    [ACCESSOR_TYPE.MAT3]: 9,\r\n    [ACCESSOR_TYPE.MAT4]: 16,\r\n};\r\n\r\nexport class Accessor {\r\n    private _bufferView:BufferView;\r\n    private _byteOffset:number;\r\n    private _componentType:GL_TYPES; //GL_FLOAT etc.\r\n    private _type:ACCESSOR_TYPE;\r\n    private _stride?:number;\r\n    private _normalized:boolean;\r\n    private _count?:number;\r\n    private _max?:Array<number>;\r\n    private _min?:Array<number>;\r\n\r\n    constructor(){\r\n        this._byteOffset = 0;\r\n        this._componentType = GL_TYPES.FLOAT;\r\n        this._stride = 0;\r\n        this._normalized = false;\r\n    }\r\n\r\n    private toTypedArray(buffer:ArrayBuffer, byteOffset:number, count:number, componentType:GL_TYPES): TypedArray {\r\n        switch (componentType) {\r\n            case GL_TYPES.BYTE:\r\n                return new Int8Array(buffer, byteOffset, count);\r\n            case GL_TYPES.UNSIGNED_BYTE:\r\n                return new Uint8Array(buffer, byteOffset, count);\r\n            case GL_TYPES.SHORT:\r\n                return new Int16Array(buffer, byteOffset, count);\r\n            case GL_TYPES.UNSIGNED_SHORT:\r\n                return new Int16Array(buffer, byteOffset, count);\r\n            case GL_TYPES.INT:\r\n                return new Int32Array(buffer, byteOffset, count);\r\n            case GL_TYPES.UNSIGNED_INT:\r\n                return new Int32Array(buffer, byteOffset, count);\r\n            case GL_TYPES.FLOAT:\r\n                return new Float32Array(buffer, byteOffset, count);\r\n        }\r\n    }\r\n\r\n    getData(): TypedArray {\r\n        return this.toTypedArray(\r\n            this.bufferView.data,\r\n            this.byteOffset,\r\n            this.componentTypeSize * this.count,\r\n            this.componentType\r\n        );\r\n    }\r\n\r\n    public get bufferView():BufferView {\r\n        return this._bufferView;\r\n    }\r\n\r\n    public set bufferView(value:BufferView) {\r\n        this._bufferView = value;\r\n    }\r\n\r\n    public get byteOffset():number {\r\n        return this._byteOffset;\r\n    }\r\n\r\n    public set byteOffset(value:number) {\r\n        this._byteOffset = value;\r\n    }\r\n\r\n    public get componentType():GL_TYPES {\r\n        return this._componentType;\r\n    }\r\n\r\n    public set componentType(value:GL_TYPES) {\r\n        this._componentType = value;\r\n    }\r\n\r\n    public get stride():number {\r\n        return this._stride;\r\n    }\r\n\r\n    public set stride(value:number) {\r\n        this._stride = value;\r\n    }\r\n\r\n    public get normalized():boolean {\r\n        return this._normalized;\r\n    }\r\n\r\n    public set normalized(value:boolean) {\r\n        this._normalized = value;\r\n    }\r\n\r\n    public get componentTypeSize():number {\r\n        return GLTF_ACCESORTYPE_SIZE[this._type];\r\n    }\r\n\r\n    get count(): number {\r\n        return this._count;\r\n    }\r\n\r\n    set count(value: number) {\r\n        this._count = value;\r\n    }\r\n\r\n    get max(): Array<number> {\r\n        return this._max;\r\n    }\r\n\r\n    set max(value: Array<number>) {\r\n        this._max = value;\r\n    }\r\n\r\n    get min(): Array<number> {\r\n        return this._min;\r\n    }\r\n\r\n    set min(value: Array<number>) {\r\n        this._min = value;\r\n    }\r\n\r\n    get type(): ACCESSOR_TYPE {\r\n        return this._type;\r\n    }\r\n\r\n    set type(value: ACCESSOR_TYPE) {\r\n        this._type = value;\r\n    }\r\n}","import {GL_BUFFERS} from \"../../gl/constants\";\r\nimport {GLBuffer} from \"../../gl\";\r\n\r\n/**\r\n * Describes which buffer to create for the GPU\r\n */\r\nexport class BufferView {\r\n    buffer?:GLBuffer;\r\n    bufferOffset:number;\r\n\r\n    data:ArrayBuffer;\r\n    target?:GL_BUFFERS;\r\n    drawType:GL_BUFFERS;\r\n\r\n    constructor(){\r\n        this.bufferOffset = 0;\r\n        this.drawType = GL_BUFFERS.STATIC_DRAW;\r\n    }\r\n\r\n    init(gl: WebGL2RenderingContext, vertexBuffer?:GLBuffer, indexBuffer?:GLBuffer) {\r\n        if(!this.buffer){\r\n            if(this.target === GL_BUFFERS.ARRAY_BUFFER){\r\n                this.buffer = vertexBuffer||GLBuffer.create(gl,this.target,null,this.drawType);\r\n            }else{\r\n                this.buffer = indexBuffer||GLBuffer.create(gl,this.target,null,this.drawType);\r\n            }\r\n            this.bufferOffset = this.buffer.byteLength;\r\n            this.buffer.addData(this.data);\r\n        }\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./accessor\";\nexport * from \"./bufferView\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./mesh/mesh\";\nexport * from \"./model\";\nexport * from \"../shader/shader\";\nexport * from \"./transform\";\nexport * from \"./animation/index\";\nexport * from \"./data/index\";\nexport * from \"./mesh/index\";\nexport * from \"./skin/index\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./primitive\";\n","import {Attributes, GL_PRIMITIVES} from \"../../gl\";\r\nimport {Material, MATERIAL_MAPS} from \"../../material\";\r\nimport {Cache, CACHE_TYPE} from \"../../cache\";\r\nimport {Shader} from \"../../shader/shader\";\r\nimport {Transform} from \"../transform\";\r\nimport {Skin} from \"../skin\";\r\nimport {Primitive} from \"./primitive\";\r\nimport GLAttribute = Attributes.GLAttribute;\r\n\r\ntype RenderList = {\r\n    material: Material;\r\n    primitives: Array<Primitive>;\r\n}\r\n\r\nexport class Mesh {\r\n    private _primitives: Array<Primitive>;\r\n    private _name:string;\r\n    private _transform: Transform;\r\n    private _skin?: Skin;\r\n\r\n    private _renderList: Array<RenderList>;\r\n\r\n    constructor(){\r\n        this._primitives = [];\r\n        this._renderList = [];\r\n    }\r\n\r\n    init(cache: Cache) {\r\n        const materials = new Set(this._primitives.map(p => p.material));\r\n\r\n        for(let materialName of materials) {\r\n            this._renderList.push({\r\n                material: cache.get(CACHE_TYPE.MATERIAL, materialName),\r\n                primitives: this._primitives.filter(p => p.material === materialName)\r\n            });\r\n        }\r\n\r\n        this._renderList.sort((a,b) => {\r\n            return a.material.transparent ? 1 : -1;\r\n        });\r\n    }\r\n\r\n    draw(shader: Shader):void {\r\n        shader.applyMesh(this);\r\n        for(let i=0, render: RenderList; render = this._renderList[i]; i++) {\r\n            shader.applyMaterial(render.material);\r\n            for(let k=0, primitive: Primitive; primitive = render.primitives[k]; k++) {\r\n                primitive.draw();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add an attribute to the VAO\r\n     * @param {GL_PRIMITIVES} key\r\n     * @param {Shader} shader\r\n     * @param {Attributes.GLAttribute} glAttribute\r\n     */\r\n    addAttribute(key:GL_PRIMITIVES, glAttribute:GLAttribute):void {\r\n        for(let i=0, primitive: Primitive; primitive = this._primitives[i]; i++) {\r\n            primitive.addAttribute(key, glAttribute);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * check if any primitive in this mesh has the attribute\r\n     * @param key - key of the attribute e.g. TANGENT,NORMAL, etc.\r\n     */\r\n    hasAttribute(key:GL_PRIMITIVES|string):boolean {\r\n        for(let i=0, primitive: Primitive; primitive = this._primitives[i]; i++) {\r\n            if(primitive.hasAttribute(key)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * check if any material used by a primitve has the map with the specified key\r\n     * @param cache - cache to get the material from\r\n     * @param key - key of the map e.g ALBEDO, METALIC_ROUGHNESS etc.\r\n     */\r\n    hasMap(cache:Cache,key:MATERIAL_MAPS): boolean {\r\n        for(let i=0, primitive: Primitive; primitive = this._primitives[i]; i++) {\r\n            const material = cache.get<Material>(CACHE_TYPE.MATERIAL, primitive.material);\r\n            if(material && material.hasMap(key)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    get primitives(): Array<Primitive> {\r\n        return this._primitives;\r\n    }\r\n\r\n    set primitives(value: Array<Primitive>) {\r\n        this._primitives = value;\r\n    }\r\n\r\n    get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    set name(value: string) {\r\n        this._name = value;\r\n    }\r\n\r\n    get transform(): Transform {\r\n        return this._transform;\r\n    }\r\n\r\n    set transform(value: Transform) {\r\n        this._transform = value;\r\n    }\r\n\r\n    get skin(): Skin {\r\n        return this._skin;\r\n    }\r\n\r\n    set skin(value: Skin) {\r\n        this._skin = value;\r\n    }\r\n}","import {Attributes, GL_PRIMITIVES, GLVertexArrayObject} from \"../../gl\";\r\nimport {Accessor, ACCESSOR_TYPE} from \"../data/accessor\";\r\nimport {BoundingBox} from \"../bvh/boundingBox\";\r\nimport {vec3} from \"gl-matrix\";\r\nimport GLAttribute = Attributes.GLAttribute;\r\n\r\n/**\r\n * GLTF Primitive wrapper\r\n * Primitive is a Geometric piece of the Mesh that uses a specific material\r\n * or. a stream of vertices that can be rendered together\r\n */\r\nexport class Primitive {\r\n    private _name:string;\r\n    private _draw_mode:number;\r\n    private _attributes:{[id:string]:Accessor};\r\n    private _indices:Accessor;\r\n    private _material:string;\r\n    private _vertexArrayObject:GLVertexArrayObject;\r\n    private _boundingBox: BoundingBox;\r\n    public drawing: boolean = true;\r\n\r\n    constructor(){\r\n        this._attributes = Object.create(null);\r\n        this._draw_mode = 4; //GL_TRIANGLE\r\n        this._material = \"__default__\";\r\n    }\r\n\r\n    init(gl: WebGL2RenderingContext) {\r\n        this.initBoundingBox();\r\n        this.initVertexArrayObject(gl);\r\n    }\r\n\r\n    private initBoundingBox(): BoundingBox {\r\n        const position = this._attributes[GL_PRIMITIVES.POSITION];\r\n        if(position && position.type === ACCESSOR_TYPE.VEC3) {\r\n            if(position.max && position.min) {\r\n                this._boundingBox = new BoundingBox(\r\n                    vec3.fromValues(position.min[0], position.min[1], position.min[2]),\r\n                    vec3.fromValues(position.max[0], position.max[1], position.max[2])\r\n                );\r\n            }else {\r\n                const min = vec3.fromValues(Infinity, Infinity, Infinity);\r\n                const max = vec3.fromValues(-Infinity, -Infinity, -Infinity);\r\n                const buffer = position.getData();\r\n                for(let i=0; i < buffer.length; i+=3) {\r\n                    min[0] = min[0] > buffer[i] ? buffer[i] : min[0];\r\n                    min[1] = min[1] > buffer[i+1] ? buffer[i+1] : min[1];\r\n                    min[2] = min[2] > buffer[i+2] ? buffer[i+2] : min[2];\r\n\r\n                    max[0] = max[0] < buffer[i] ? buffer[i] : max[0];\r\n                    max[1] = max[1] < buffer[i+1] ? buffer[i+1] : max[1];\r\n                    max[2] = max[2] < buffer[i+2] ? buffer[i+2] : max[2];\r\n                }\r\n                this._boundingBox = new BoundingBox(min, max);\r\n            }\r\n        }\r\n        return this._boundingBox;\r\n    }\r\n\r\n    hasAttribute(key:GL_PRIMITIVES|string):boolean {\r\n        return !!this._attributes[key];\r\n    }\r\n\r\n    addAttribute(key:GL_PRIMITIVES, glAttribute:GLAttribute) {\r\n        const attribute = this._attributes[key];\r\n        if(attribute) {\r\n            this._vertexArrayObject.addAttribute(\r\n                attribute.bufferView.buffer,\r\n                glAttribute,\r\n                attribute.componentTypeSize,\r\n                attribute.componentType,\r\n                attribute.normalized,\r\n                attribute.stride,\r\n                attribute.bufferView.bufferOffset + attribute.byteOffset\r\n            );\r\n        }\r\n    }\r\n\r\n    initVertexArrayObject(gl:WebGL2RenderingContext):void{\r\n        this._vertexArrayObject = new GLVertexArrayObject(gl);\r\n        this._vertexArrayObject.setIndexBuffer(this._indices.bufferView.buffer);\r\n    }\r\n\r\n    /**\r\n     * Should only be called by the Models draw method, to calculate the actual offset\r\n     * which is the bufferOffset + bufferDataOffset + indexAccessorOffset\r\n     * @param {number} mode\r\n     * @param {number} size\r\n     * @param {number} type\r\n     * @param {number} offset\r\n     */\r\n    draw(mode:number=this._draw_mode, size:number=this._indices.count, type:number=this._indices.componentType, offset:number=this._indices.byteOffset+this._indices.bufferView.bufferOffset):void{\r\n        if(this._vertexArrayObject && this.drawing) {\r\n            this._vertexArrayObject.bind();\r\n            this._vertexArrayObject.draw(mode, size, type, offset);\r\n            this._vertexArrayObject.unbind();\r\n        }\r\n    }\r\n\r\n    get name():string {\r\n        return this._name;\r\n    }\r\n\r\n    set name(value:string) {\r\n        this._name = value;\r\n    }\r\n\r\n    get draw_mode():number {\r\n        return this._draw_mode;\r\n    }\r\n\r\n    set draw_mode(value:number) {\r\n        this._draw_mode = value;\r\n    }\r\n\r\n    get attributes():{ [p:string]:Accessor } {\r\n        return this._attributes;\r\n    }\r\n\r\n    set attributes(value:{ [p:string]:Accessor }) {\r\n        this._attributes = value;\r\n    }\r\n\r\n    get indices():Accessor {\r\n        return this._indices;\r\n    }\r\n\r\n    set indices(value:Accessor) {\r\n        this._indices = value;\r\n    }\r\n\r\n    get material():string {\r\n        return this._material;\r\n    }\r\n\r\n    set material(value:string) {\r\n        this._material = value;\r\n    }\r\n\r\n    get boundingBox(): BoundingBox {\r\n        return this._boundingBox || this.initBoundingBox();\r\n    }\r\n\r\n    get vertexArrayObject(): GLVertexArrayObject {\r\n        return this._vertexArrayObject;\r\n    }\r\n\r\n    set vertexArrayObject(value: GLVertexArrayObject) {\r\n        this._vertexArrayObject = value;\r\n    }\r\n}","import {Attributes, GL_PRIMITIVES, GLBuffer} from \"../gl\";\r\nimport {Shader} from \"../shader/shader\";\r\nimport {Mesh} from \"./mesh/mesh\";\r\nimport {Animation} from \"./animation\";\r\nimport {Cache} from \"../cache\";\r\nimport {BufferView} from \"./data\";\r\nimport {Primitive} from \"./mesh\";\r\nimport {Skin} from \"./skin\";\r\nimport {Transform} from \"./transform\";\r\nimport {Material} from \"../material\";\r\nimport {BVHNode} from \"./bvh/bvhNode\";\r\nimport GLAttribute = Attributes.GLAttribute;\r\n\r\n// type RenderList = {\r\n//     material: Material; //apply mat\r\n//     meshes: Array<{\r\n//         mesh: Mesh, //apply mesh\r\n//         primitives: Primitive // draw primitives\r\n//     }>\r\n// }\r\n\r\nexport class Model {\r\n    private _name:string;\r\n    private _meshes:Array<Mesh>;\r\n    private _animations:Array<Animation>;\r\n    private _bufferViews:Array<BufferView>;\r\n    private _primitives:Array<Primitive>;\r\n    private _skins:Array<Skin>;\r\n    private _transforms:Array<Transform>;\r\n    private _materials:Array<Material>;\r\n    private _bvh:BVHNode;\r\n\r\n    constructor() {\r\n        this._meshes = [];\r\n        this._animations = [];\r\n        this._bufferViews = [];\r\n        this._primitives = [];\r\n        this._skins = [];\r\n        this._transforms = [];\r\n        this._materials = [];\r\n        this._bvh = new BVHNode();\r\n    }\r\n\r\n    init(cache:Cache) {\r\n        for(let i=0, mesh: Mesh; mesh = this._meshes[i]; i++) {\r\n            mesh.init(cache);\r\n        }\r\n        this._bvh = BVHNode.constructTree(this._primitives);\r\n    }\r\n\r\n    /**\r\n     * init the scene creating the GPUBuffers(Vertex- and Indexbuffer) or using an existing MeshBuffermap\r\n     * or upload the data to an existing buffer\r\n     * @param {WebGL2RenderingContext} gl\r\n     * @param {GLBuffer} vertexBuffer - use existing VertexBuffer and add the gltf data into it\r\n     * @param {GLBuffer} indexBuffer - use existing IndexBuffer and add the gltf indices into it\r\n     * @returns {Mesh}\r\n     */\r\n    initBuffers(gl:WebGL2RenderingContext, vertexBuffer?:GLBuffer, indexBuffer?:GLBuffer):Model {\r\n        for(let i=0, bufferView: BufferView; bufferView = this._bufferViews[i]; i++) {\r\n            bufferView.init(gl, vertexBuffer, indexBuffer);\r\n        }\r\n        for(let i=0, skin: Skin; skin = this._skins[i]; i++) {\r\n            skin.init(gl);\r\n        }\r\n        for(let i=0, primitive: Primitive; primitive = this._primitives[i]; i++) {\r\n            primitive.init(gl);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Make sure to initialize(init) the Mesh before uploading the data\r\n     * Create the GPU_Buffers and upload this Mesh to the GPU\r\n     * @returns {Mesh}\r\n     */\r\n    upload():Model {\r\n        for(let i=0, bufferView: BufferView; bufferView = this._bufferViews[i]; i++) {\r\n            bufferView.buffer.upload();\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Draws all Meshes in the scene\r\n     * @param {Shader} shader - Shader that should be used for all primitives/Materials\r\n     */\r\n    draw(shader: Shader):void {\r\n        for(let i=0, mesh: Mesh; mesh = this._meshes[i]; i++) {\r\n            mesh.draw(shader);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add an attribute to the VAO\r\n     * @param {GL_PRIMITIVES} key\r\n     * @param {Shader} shader\r\n     * @param {Attributes.GLAttribute} glAttribute\r\n     */\r\n    addAttribute(key:GL_PRIMITIVES,glAttribute:GLAttribute):void{\r\n        for(let i=0, mesh: Mesh; mesh = this._meshes[i]; i++) {\r\n            mesh.addAttribute(key, glAttribute);\r\n        }\r\n    }\r\n\r\n    get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    set name(value: string) {\r\n        this._name = value;\r\n    }\r\n\r\n    get meshes(): Array<Mesh> {\r\n        return this._meshes;\r\n    }\r\n\r\n    set meshes(value: Array<Mesh>) {\r\n        this._meshes = value;\r\n    }\r\n\r\n    get animations(): Array<Animation> {\r\n        return this._animations;\r\n    }\r\n\r\n    set animations(value: Array<Animation>) {\r\n        this._animations = value;\r\n    }\r\n\r\n    get bufferViews(): Array<BufferView> {\r\n        return this._bufferViews;\r\n    }\r\n\r\n    set bufferViews(value: Array<BufferView>) {\r\n        this._bufferViews = value;\r\n    }\r\n\r\n    get primitives(): Array<Primitive> {\r\n        return this._primitives;\r\n    }\r\n\r\n    set primitives(value: Array<Primitive>) {\r\n        this._primitives = value;\r\n    }\r\n\r\n    get skins(): Array<Skin> {\r\n        return this._skins;\r\n    }\r\n\r\n    set skins(value: Array<Skin>) {\r\n        this._skins = value;\r\n    }\r\n\r\n    get transforms(): Array<Transform> {\r\n        return this._transforms;\r\n    }\r\n\r\n    set transforms(value: Array<Transform>) {\r\n        this._transforms = value;\r\n    }\r\n\r\n    get materials(): Array<Material> {\r\n        return this._materials;\r\n    }\r\n\r\n    set materials(value: Array<Material>) {\r\n        this._materials = value;\r\n    }\r\n\r\n    get bvh(): BVHNode {\r\n        return this._bvh;\r\n    }\r\n\r\n    set bvh(value: BVHNode) {\r\n        this._bvh = value;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./skin\";\n","import {mat4} from \"gl-matrix\";\r\nimport {GLUniformBufferObject} from \"../../gl/GLUniformBufferObject\";\r\nimport {UBO_BINDINGS} from \"../../viewer/constants\";\r\nimport {Transform} from \"../transform\";\r\n\r\nconst NUM_MAX_JOINTS = 65;\r\n\r\nexport class Skin {\r\n    private _data:Float32Array;\r\n    private _joints:Array<Transform>;\r\n    private _skeleton:Transform;\r\n    private _inverseBindMatrices:Array<mat4>;\r\n    private _jointMatrices:Array<mat4>;\r\n    private _ubo:GLUniformBufferObject;\r\n    private _dirty:boolean;\r\n\r\n    constructor() {\r\n        this._joints = [];\r\n        this._inverseBindMatrices = [];\r\n        this._jointMatrices = [];\r\n        this._data = new Float32Array(NUM_MAX_JOINTS * 16);\r\n        this._dirty = true;\r\n    }\r\n\r\n    init(gl: WebGL2RenderingContext) {\r\n        for(let i=0; i < this._joints.length; i++) {\r\n            this._jointMatrices.push(mat4.create());\r\n        }\r\n        this._ubo = new GLUniformBufferObject(gl, UBO_BINDINGS.SKIN);\r\n        this._ubo.addItem('matrix', 'mat4', this._data);\r\n        this._ubo.upload();\r\n        this._ubo.bindUBO();\r\n\r\n        //this.update();\r\n    }\r\n\r\n    update(transform: Transform):void {\r\n        if(!this._dirty) {\r\n            return;\r\n        }\r\n\r\n        const inverseTransformMatrix = mat4.create();\r\n        //TODO: skin.skeleton.transform.modelMatrix if skeleton provided\r\n        mat4.invert(inverseTransformMatrix, transform.modelMatrix);\r\n\r\n        for(let i=0, join:Transform; join = this._joints[i]; i++) {\r\n            const joinMatrix = this._jointMatrices[i];\r\n            mat4.mul(joinMatrix, join.modelMatrix, this._inverseBindMatrices[i]);\r\n            mat4.mul(joinMatrix, inverseTransformMatrix, joinMatrix);\r\n            this._data.set(joinMatrix, i*16);\r\n        }\r\n\r\n        this._ubo.updateItem(\"matrix\", this._data, true);\r\n        this._dirty = true;\r\n    }\r\n\r\n    get joints(): Array<Transform> {\r\n        return this._joints;\r\n    }\r\n\r\n    set joints(value: Array<Transform>) {\r\n        this._joints = value;\r\n    }\r\n\r\n    get skeleton(): Transform {\r\n        return this._skeleton;\r\n    }\r\n\r\n    set skeleton(value: Transform) {\r\n        this._skeleton = value;\r\n    }\r\n\r\n    get inverseBindMatrices() {\r\n        return this._inverseBindMatrices;\r\n    }\r\n\r\n    set inverseBindMatrices(value) {\r\n        this._inverseBindMatrices = value;\r\n    }\r\n\r\n    get jointMatrices(): Array<mat4> {\r\n        return this._jointMatrices;\r\n    }\r\n\r\n    set jointMatrices(value: Array<mat4>) {\r\n        this._jointMatrices = value;\r\n    }\r\n\r\n    get ubo(): GLUniformBufferObject {\r\n        return this._ubo;\r\n    }\r\n\r\n    set ubo(value: GLUniformBufferObject) {\r\n        this._ubo = value;\r\n    }\r\n}","import {mat4, quat, vec3} from \"gl-matrix\";\r\n\r\nexport type TransformConfig = {\r\n    position:{x:number,y:number,z:number},\r\n    rotation:{x:number,y:number,z:number,w:number},\r\n    scale:{x:number,y:number,z:number}\r\n};\r\n\r\nexport class Transform {\r\n    private _level:number;\r\n    private _parent:Transform;\r\n    private _children:Transform[];\r\n    private _localMatrix:mat4;\r\n    private _worldMatrix:mat4;\r\n    private _rotation:quat;\r\n    private _translation:vec3;\r\n    private _scale:vec3;\r\n    private _dirty:boolean;\r\n\r\n    constructor(config:TransformConfig={\r\n        position: {x:0,y:0,z:0},\r\n        rotation: {x:0,y:0,z:0,w:1},\r\n        scale: {x:1,y:1,z:1}\r\n    }){\r\n        this.init(config);\r\n    }\r\n\r\n    init(config:TransformConfig={\r\n        position: {x:0,y:0,z:0},\r\n        rotation: {x:0,y:0,z:0,w:1},\r\n        scale: {x:1,y:1,z:1}\r\n    }):void{\r\n        //M=T*R*S\r\n        this._localMatrix = mat4.create();\r\n        if(!config){\r\n            config = Object.create(null);\r\n        }\r\n        if(!config.position){\r\n            config.position = {x:0,y:0,z:0}\r\n        }\r\n        if(!config.rotation){\r\n            config.rotation = {x:0,y:0,z:0,w:1};\r\n        }\r\n        if(!config.scale){\r\n            config.scale = {x:1,y:1,z:1};\r\n        }\r\n\r\n        this._rotation = quat.fromValues(config.rotation.x,config.rotation.y,config.rotation.z,config.rotation.w);\r\n        this._translation = vec3.fromValues(config.position.x,config.position.y,config.position.z);\r\n        this._scale = vec3.fromValues(config.scale.x,config.scale.y,config.scale.z);\r\n        this._children = [];\r\n        this._level = 0;\r\n        this._dirty = true;\r\n        this._worldMatrix = mat4.create();\r\n        this.apply();\r\n    }\r\n\r\n    public addChild(child:Transform):void {\r\n        if(child._parent) {\r\n            child._parent.removeChild(child);\r\n        }\r\n        child._parent = this;\r\n        child._level = this._level+1;\r\n        this._children.push(child);\r\n    }\r\n\r\n    public removeChild(child:Transform):void {\r\n        const index = this._children.indexOf(child);\r\n        if (index > -1) {\r\n            child._level = 0;\r\n            child._parent = undefined;\r\n            this._children.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    private apply():mat4{\r\n        if(this._dirty) {\r\n            mat4.fromRotationTranslationScale(\r\n                this._localMatrix,\r\n                this._rotation,\r\n                this._translation,\r\n                this._scale\r\n            );\r\n            this._dirty = false;\r\n        }\r\n        return this._localMatrix;\r\n    }\r\n\r\n    //TODO: check if we need to recalculate worldMatrix\r\n    get worldMatrix(): mat4 {\r\n        if(!this._parent){\r\n            return this.apply();\r\n        }else{\r\n            return mat4.multiply(\r\n                this._worldMatrix,\r\n                this._parent.worldMatrix,\r\n                this.localMatrix\r\n            );\r\n        }\r\n    }\r\n\r\n    get modelMatrix(): mat4 {\r\n        return this.worldMatrix;\r\n    }\r\n\r\n    /**\r\n     * Returns the LocalTransformation Matrix\r\n     * @returns {Matrix}\r\n     */\r\n    public get localMatrix():mat4 {\r\n        return this.apply();\r\n    }\r\n\r\n    public set localMatrix(value:mat4) {\r\n        mat4.getRotation(this._rotation, value);\r\n        mat4.getTranslation(this._translation, value);\r\n        mat4.getScaling(this._scale, value);\r\n        this._dirty = true;\r\n    }\r\n\r\n    public get translation():vec3 {\r\n        this._dirty = true;\r\n        return this._translation;\r\n    }\r\n\r\n    public set translation(value:vec3) {\r\n        this._dirty = true;\r\n        this._translation = value;\r\n    }\r\n\r\n    public get rotation():quat {\r\n        this._dirty = true;\r\n        return this._rotation;\r\n    }\r\n\r\n    public set rotation(value:quat) {\r\n        this._dirty = true;\r\n        this._rotation = value;\r\n    }\r\n\r\n    public get scale():vec3 {\r\n        this._dirty = true;\r\n        return this._scale;\r\n    }\r\n\r\n    public set scale(value:vec3) {\r\n        this._dirty = true;\r\n        this._scale = value;\r\n    }\r\n\r\n    get level(): number {\r\n        return this._level;\r\n    }\r\n\r\n    get parent(): Transform {\r\n        return this._parent;\r\n    }\r\n\r\n    set parent(value: Transform) {\r\n        this._parent = value;\r\n    }\r\n\r\n    get children(): Transform[] {\r\n        return this._children;\r\n    }\r\n\r\n    set children(value: Transform[]) {\r\n        this._children = value;\r\n    }\r\n\r\n    get dirty(): boolean {\r\n        return this._dirty;\r\n    }\r\n}","import {Shader} from \"../model\";\r\nimport {UBO_BINDINGS} from \"../viewer\";\r\nimport {mat4, vec3} from \"gl-matrix\";\r\n\r\nexport class BBoxShader extends Shader {\r\n\r\n    constructor(gl:WebGL2RenderingContext){\r\n        super(gl);\r\n    }\r\n\r\n    apply(modelMatrix: mat4,  color?: vec3):void {\r\n        this.uniforms.u_ModelMatrix = modelMatrix;\r\n        this.uniforms.u_Color = color || vec3.fromValues(0,0,1);\r\n        this.applyCamera();\r\n    }\r\n\r\n    applyCamera():void{\r\n        this.uniforms.Matrices = UBO_BINDINGS.CAMERA;\r\n    }\r\n}","import {Shader} from \"./shader\";\r\nimport {GLTexture} from \"../gl\";\r\nimport {Cache, CACHE_TYPE} from \"../cache\";\r\nimport {GLOBAL_TEXTURES, UBO_BINDINGS} from \"../viewer/constants\";\r\n\r\nexport class SkyboxShader extends Shader {\r\n\r\n    private cache: Cache;\r\n\r\n    constructor(gl:WebGL2RenderingContext, cache: Cache){\r\n        super(gl);\r\n        this.cache = cache;\r\n    }\r\n\r\n    apply():void {\r\n        this.applyCamera();\r\n        const texture = this.cache.get<GLTexture>(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.SKYBOX);\r\n        texture.bind(0);\r\n        this.uniforms.u_Skybox = 0;\r\n    }\r\n\r\n    applyCamera():void{\r\n        this.uniforms.Matrices = UBO_BINDINGS.CAMERA;\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./khronosPbrShader\";\nexport * from \"./SkyboxShader\";\n","import {Shader} from \"./shader\";\r\nimport {Mesh} from \"../model\";\r\nimport {ALPHA_MODE, Material, MATERIAL_MAPS} from \"../material\";\r\nimport {MetallicRoughness} from \"../material/metallicRoughness\";\r\nimport {GL_PRIMITIVES, GLTexture} from \"../gl\";\r\nimport {Cache, CACHE_TYPE} from \"../cache\";\r\nimport {GLOBAL_TEXTURES, UBO_BINDINGS} from \"../viewer/constants\";\r\nimport {GLCubemap} from \"../gl/GLCubemap\";\r\n\r\nconst TEXTURES = {\r\n    DIFFUSE_ENVIRONMENT: 0,\r\n    SPECULAR_ENVIRONMENT: 1,\r\n    BRDF_LUT: 2,\r\n    DIFFUSE: 3,\r\n    METALLIC_ROUGHNESS: 4,\r\n    NORMAL: 5,\r\n    EMISSIVE: 6,\r\n    OCCLUSION: 7\r\n};\r\n\r\nexport class KhronosPbrShader extends Shader {\r\n\r\n    private cache: Cache;\r\n\r\n    constructor(gl:WebGL2RenderingContext, cache :Cache){\r\n        super(gl);\r\n        this.cache = cache;\r\n    }\r\n\r\n    initializeDefines(model:Mesh) {\r\n        if (model.hasAttribute(GL_PRIMITIVES.NORMAL)) {\r\n            this.addDefine(\"HAS_NORMALS\", 1);\r\n        }\r\n        if (model.hasAttribute(GL_PRIMITIVES.TANGENT)) {\r\n            this.addDefine(\"HAS_TANGENTS\", 1);\r\n        }\r\n        if (model.hasAttribute(GL_PRIMITIVES.TEXCOORD_0)) {\r\n            this.addDefine(\"HAS_UV\", 1);\r\n        }\r\n        if(model.hasAttribute(GL_PRIMITIVES.JOINTS_0) && model.hasAttribute(GL_PRIMITIVES.WEIGHTS_0)) {\r\n            this.addDefine(\"HAS_SKIN\", 1);\r\n        }\r\n        if(model.hasAttribute(GL_PRIMITIVES.JOINTS_1) && model.hasAttribute(GL_PRIMITIVES.WEIGHTS_1)) {\r\n            this.addDefine(\"SKIN_VEC8\", 1);\r\n        }\r\n        if(model.hasMap(this.cache, MATERIAL_MAPS.ALBEDO)) {\r\n            this.addDefine(\"HAS_BASECOLORMAP\", 1);\r\n        }\r\n        if(model.hasMap(this.cache, MATERIAL_MAPS.METAL_ROUGHNESS)) {\r\n            this.addDefine(\"HAS_METALROUGHNESSMAP\", 1);\r\n        }\r\n        if(model.hasMap(this.cache, MATERIAL_MAPS.NORMAL)) {\r\n            this.addDefine(\"HAS_NORMALMAP\", 1);\r\n        }\r\n        if(model.hasMap(this.cache, MATERIAL_MAPS.EMISSIVE)) {\r\n            this.addDefine(\"HAS_EMISSIVEMAP\", 1);\r\n        }\r\n        if(model.hasMap(this.cache, MATERIAL_MAPS.OCCLUSION)) {\r\n            this.addDefine(\"HAS_OCCLUSIONMAP\", 1);\r\n        }\r\n\r\n        const brdfLUT = this.cache.get<GLCubemap>(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.BRDF_LUT);\r\n        const diffuseEnv = this.cache.get<GLCubemap>(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.DIFFUSE_ENVIRONMENT);\r\n        const specularEnv = this.cache.get<GLCubemap>(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.SPECULAR_ENVIRONMENT);\r\n\r\n        if(brdfLUT && diffuseEnv && specularEnv) {\r\n            this.addDefine(\"USE_IBL\", 1);\r\n        }\r\n    }\r\n\r\n    applyMesh(mesh:Mesh):void {\r\n        this.uniforms.u_ModelMatrix = mesh.transform.modelMatrix;\r\n\r\n        if(mesh.skin) {\r\n            mesh.skin.update(mesh.transform);\r\n        }\r\n    }\r\n\r\n    applyMaterial(material?:Material<MetallicRoughness>) {\r\n        this.applyCamera();\r\n        this.applyTextures(material);\r\n        this.applyIBL();\r\n\r\n        this.uniforms.u_BaseColorFactor = material.model.baseColorFactor;\r\n        this.uniforms.u_RoughnessFactor = material.model.roughnessFactor;\r\n        this.uniforms.u_MetallicFactor = material.model.metallicFactor;\r\n\r\n        //TODO: sort after materials\r\n        if(!material.doubleSided) {\r\n            this.gl.enable(this.gl.CULL_FACE);\r\n        } else {\r\n            this.gl.disable(this.gl.CULL_FACE);\r\n        }\r\n\r\n        //TODO: BLEND Mode\r\n        this.uniforms.u_AlphaCutoff = material.alphaCutoff;\r\n        this.uniforms.u_IgnoreAlpha = material.alphaMode === ALPHA_MODE.OPAQUE ? 1 : 0;\r\n    }\r\n\r\n    private applyIBL() {\r\n        /*******************************IBL*************************************/\r\n\r\n        const brdfLUT = this.cache.get<GLCubemap>(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.BRDF_LUT);\r\n        if (brdfLUT) {\r\n            brdfLUT.bind(TEXTURES.BRDF_LUT);\r\n            this.uniforms.u_brdfLUT = TEXTURES.BRDF_LUT;\r\n        }\r\n\r\n        const diffuseEnv = this.cache.get<GLCubemap>(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.DIFFUSE_ENVIRONMENT);\r\n        if(diffuseEnv){\r\n            diffuseEnv.bind(TEXTURES.DIFFUSE_ENVIRONMENT);\r\n            this.uniforms.u_DiffuseEnvSampler = TEXTURES.DIFFUSE_ENVIRONMENT;\r\n        }\r\n\r\n        const specularEnv = this.cache.get<GLCubemap>(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.SPECULAR_ENVIRONMENT);\r\n        if(specularEnv){\r\n            specularEnv.bind(TEXTURES.SPECULAR_ENVIRONMENT);\r\n            this.uniforms.u_SpecularEnvSampler = TEXTURES.SPECULAR_ENVIRONMENT;\r\n        }\r\n    }\r\n\r\n    private applyTextures(material?:Material<MetallicRoughness>):void {\r\n        //applyMaterial BaseColor Texture\r\n        if (material.maps[MATERIAL_MAPS.ALBEDO] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.ALBEDO].texture)) {\r\n            const texture = this.cache.get<GLTexture>(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.ALBEDO].texture);\r\n            texture.bind(TEXTURES.DIFFUSE);\r\n            this.uniforms.u_BaseColorSampler = TEXTURES.DIFFUSE;\r\n        }\r\n        //applyMaterial MetallicRoughnessSampler\r\n        if(material.maps[MATERIAL_MAPS.METAL_ROUGHNESS] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.METAL_ROUGHNESS].texture)){\r\n            let texture = this.cache.get<GLTexture>(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.METAL_ROUGHNESS].texture);\r\n            texture.bind(TEXTURES.METALLIC_ROUGHNESS);\r\n            this.uniforms.u_MetallicRoughnessSampler = TEXTURES.METALLIC_ROUGHNESS;\r\n        }\r\n        //applyMaterial NormalMaps\r\n        if (material.maps[MATERIAL_MAPS.NORMAL] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.NORMAL].texture)) {\r\n            let texture = this.cache.get<GLTexture>(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.NORMAL].texture);\r\n            texture.bind(TEXTURES.NORMAL);\r\n            this.uniforms.u_NormalSampler = TEXTURES.NORMAL;\r\n            this.uniforms.u_NormalScale = material.model.normalScale;\r\n        }\r\n        //applyMaterial emissive map\r\n        if(material.maps[MATERIAL_MAPS.EMISSIVE] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.EMISSIVE].texture)){\r\n            let texture = this.cache.get<GLTexture>(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.EMISSIVE].texture);\r\n            texture.bind(TEXTURES.EMISSIVE);\r\n            this.uniforms.u_EmissiveSampler = TEXTURES.EMISSIVE;\r\n            this.uniforms.u_EmissiveFactor = material.model.emissiveFactor;\r\n        }\r\n        //applyMesh Occlusion map\r\n        if(material.maps[MATERIAL_MAPS.OCCLUSION] && this.cache.get(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.OCCLUSION].texture)) {\r\n            let texture = this.cache.get<GLTexture>(CACHE_TYPE.TEXTURE, material.maps[MATERIAL_MAPS.OCCLUSION].texture);\r\n            texture.bind(TEXTURES.OCCLUSION);\r\n            this.uniforms.u_OcclusionSampler = TEXTURES.OCCLUSION;\r\n            this.uniforms.u_OcclusionStrength = material.model.occlusionStrength;\r\n        }\r\n    }\r\n\r\n    private applyCamera():void{\r\n        this.uniforms.Matrices = UBO_BINDINGS.CAMERA;\r\n        this.uniforms.JointMatrix = UBO_BINDINGS.SKIN;\r\n    }\r\n}","import {GLShader} from \"../gl/shader\";\r\nimport {Mesh} from \"../model/mesh/mesh\";\r\nimport {Material} from \"../material\";\r\n\r\nexport interface IShader extends Shader {\r\n    apply(...args):void;\r\n    applyMaterial(material: Material):void;\r\n    applyMesh(mesh: Mesh):void;\r\n}\r\n\r\nexport class Shader extends GLShader implements IShader {\r\n\r\n    constructor(gl: WebGL2RenderingContext, vertexSrc?:string, fragmentSrc?:string){\r\n        super(gl, vertexSrc, fragmentSrc);\r\n    }\r\n\r\n    apply(...args):void {}\r\n    applyMaterial(material: Material):void {}\r\n    applyMesh(mesh: Mesh):void {}\r\n}","import {ECS, IEntity, System} from \"curbl-ecs\";\r\nimport {AnimationComponent} from \"../../components/scene/animationComponent\";\r\nimport {Animation} from \"../../model/animation\";\r\nimport {Cache,CACHE_TYPE} from \"../../cache\";\r\n\r\n\r\n@ECS.System(AnimationComponent)\r\nexport class AnimationSystem extends System {\r\n\r\n    private cache:Cache;\r\n\r\n    constructor(cache: Cache) {\r\n        super();\r\n        this.cache = cache;\r\n    }\r\n\r\n    setUp(): void {\r\n    }\r\n\r\n    tearDown(): void {\r\n    }\r\n\r\n    update(t:number) {\r\n        for(let i=0, entity:IEntity; entity = this.entities[i]; i++) {\r\n            const animationComponent = entity.get(AnimationComponent);\r\n\r\n            if(animationComponent.autoStart && animationComponent.loop && !animationComponent.running) {\r\n                animationComponent.start();\r\n            }\r\n\r\n            const animation = this.cache.get<Animation>(CACHE_TYPE.ANIMATION, animationComponent.key);\r\n\r\n            const pauseDuration = (animationComponent.pauseEnd - animationComponent.pauseStart);\r\n            const time = t - animationComponent.startTime - pauseDuration;\r\n\r\n            if(!animationComponent.paused && animationComponent.running) {\r\n                animation.animate(time);\r\n            }\r\n\r\n            if(time >= animation.durationMS) {\r\n                animationComponent.stop();\r\n            }\r\n        }\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./AnimationSystem\";\n","import {ECS, IEntity, System} from \"curbl-ecs\";\r\nimport {CameraComponent, TransformComponent} from \"../../components\";\r\nimport {GLUniformBufferObject} from \"../../gl/GLUniformBufferObject\";\r\nimport {UBO_BINDINGS} from \"../../viewer/constants\";\r\nimport {SYSTEM_EVENTS} from \"curbl-ecs/lib/Events\";\r\nimport {mat4, vec3} from \"gl-matrix\";\r\n\r\n/**\r\n * Handle Camera component\r\n */\r\n@ECS.System(TransformComponent,CameraComponent)\r\nexport class CameraSystem extends System {\r\n\r\n    /**\r\n     * Active Camera Entity\r\n     */\r\n    private _camera:IEntity;\r\n    private cameraUBO: GLUniformBufferObject;\r\n    private gl:WebGL2RenderingContext;\r\n\r\n    private translation:vec3;\r\n\r\n    constructor(config:{gl: WebGL2RenderingContext}){\r\n        super();\r\n        this.gl = config.gl;\r\n        this.translation = vec3.create();\r\n    }\r\n\r\n    setUp():void{\r\n        const initMatrix = mat4.create();\r\n        this.cameraUBO = new GLUniformBufferObject(this.gl,UBO_BINDINGS.CAMERA);\r\n        this.cameraUBO.addItem(\"projectionMatrix\",\"mat4\");\r\n        this.cameraUBO.addItem(\"viewMatrix\",\"mat4\");\r\n        this.cameraUBO.addItem(\"viewPos\",\"vec3\");\r\n        this.cameraUBO.updateItem(\"projectionMatrix\", initMatrix);\r\n        this.cameraUBO.updateItem(\"viewMatrix\", initMatrix);\r\n        this.cameraUBO.updateItem(\"viewPos\", this.translation);\r\n        this.cameraUBO.upload();\r\n        this.cameraUBO.bindUBO();\r\n        this.events.on(SYSTEM_EVENTS.ENTITY_ADDED,this.initEntity,this);\r\n        this.events.on(SYSTEM_EVENTS.ENTITY_REMOVED,this.removeEntity,this);\r\n    }\r\n\r\n    initEntity(entity:IEntity):void {\r\n        if(!this._camera){\r\n            this._camera = entity;\r\n            const camera = this._camera.get(CameraComponent);\r\n            const transform = this._camera.get(TransformComponent);\r\n            this.cameraUBO.updateItem(\"projectionMatrix\",camera.projMatrix);\r\n            this.cameraUBO.updateItem(\"viewMatrix\",camera.viewMatrix);\r\n            this.cameraUBO.updateItem(\"viewPos\",mat4.getTranslation(this.translation, transform.modelMatrix));\r\n            this.cameraUBO.upload();\r\n            this.cameraUBO.bindUBO();\r\n        }\r\n    }\r\n\r\n    removeEntity(entity:IEntity):void{\r\n        if(entity === this._camera){\r\n            this._camera = undefined;\r\n        }\r\n    }\r\n\r\n    render():void {\r\n        if(this._camera) {\r\n            const camera = this._camera.get(CameraComponent);\r\n            const transform = this._camera.get(TransformComponent);\r\n            this.cameraUBO.updateItem(\"projectionMatrix\",camera.projMatrix, true);\r\n            this.cameraUBO.updateItem(\"viewMatrix\",camera.viewMatrix, true);\r\n            this.cameraUBO.updateItem(\"viewPos\",mat4.getTranslation(this.translation, transform.modelMatrix), true);\r\n        }\r\n    }\r\n\r\n    public get camera():IEntity {\r\n        return this._camera;\r\n    }\r\n\r\n    public set camera(value:IEntity) {\r\n        this._camera = value;\r\n    }\r\n}","import {CameraComponent, LookAtCameraComponent, TransformComponent} from \"../../components\";\r\nimport {ECS, IEntity, ISystem, System} from \"curbl-ecs\";\r\nimport {Math3d} from \"../../math\";\r\nimport {DomEvents} from \"../../events/DomEvents\";\r\nimport {mat4, quat, vec3} from \"gl-matrix\";\r\nimport {Canvas} from \"../../canvas\";\r\n\r\n@ECS.System(TransformComponent,CameraComponent,LookAtCameraComponent)\r\nexport class LookAtCameraControlSystem extends System implements ISystem {\r\n    private lastMouseX:number;\r\n    private lastMouseY:number;\r\n    private drag:boolean;\r\n    private canvas:Canvas;\r\n\r\n    constructor(canvas:Canvas){\r\n        super();\r\n        this.canvas = canvas;\r\n        this.lastMouseX = -1;\r\n        this.lastMouseY = -1;\r\n        this.drag = false;\r\n    }\r\n\r\n    setUp():void{\r\n        this.canvas.element.addEventListener('mousedown', (ev)=>this.onMouseDown(ev));\r\n        this.canvas.element.addEventListener('mouseup', (ev)=>this.onMouseUp(ev));\r\n        this.canvas.element.addEventListener('mousemove', (ev)=>this.onMouseMove(ev));\r\n\r\n        DomEvents.onWheel.add(this.onMouseWheel,this);\r\n        DomEvents.onKeyDown.add(this.onKeyDown,this);\r\n    }\r\n\r\n    public onMouseDown(ev:MouseEvent){\r\n        this.drag = true;\r\n        if(this.lastMouseX===-1){\r\n            this.lastMouseX = ev.x;\r\n        }\r\n        if(this.lastMouseY===-1){\r\n            this.lastMouseY = ev.y;\r\n        }\r\n    }\r\n\r\n    private calcTranslation(panning:vec3, zooming:vec3, rotation:quat):vec3 {\r\n        const translation = vec3.create();\r\n        vec3.add(translation, translation, panning);\r\n        vec3.add(translation, translation, zooming);\r\n        const vec3Rotation = vec3.fromValues(\r\n            rotation[0]/rotation[3],\r\n            rotation[1]/rotation[3],\r\n            rotation[2]/rotation[3]\r\n        );\r\n        return vec3.add(translation, translation, vec3Rotation);\r\n    }\r\n\r\n    public onMouseUp(ev:MouseEvent){\r\n        for(let i=0,entity:IEntity; entity = this.entities[i]; i++){\r\n            let transform = entity.get(TransformComponent);\r\n            let perspective = entity.get(LookAtCameraComponent);\r\n\r\n            const translation = this.calcTranslation(\r\n                perspective.panning,\r\n                perspective.zooming,\r\n                transform.rotation\r\n            );\r\n            vec3.add(transform.translation, transform.translation, translation);\r\n\r\n            vec3.add(perspective.target, perspective.target, perspective.panning);\r\n            quat.set(transform.rotation, 0, 0, 0, transform.rotation[3]);\r\n            vec3.set(perspective.panning, 0, 0, 0);\r\n            vec3.set(perspective.zooming, 0, 0, 0);\r\n        }\r\n        this.drag = false;\r\n        this.lastMouseX = -1;\r\n        this.lastMouseY = -1;\r\n    }\r\n\r\n    public onMouseWheel(ev:WheelEvent){\r\n        for(let i=0,entity:IEntity; entity = this.entities[i]; i++) {\r\n            let transform = entity.get(TransformComponent);\r\n            let perspective = entity.get(LookAtCameraComponent);\r\n\r\n            this.zoom(entity, ev.deltaY, 0.001);\r\n            const translation = this.calcTranslation(\r\n                perspective.panning,\r\n                perspective.zooming,\r\n                transform.rotation\r\n            );\r\n            vec3.add(transform.translation, transform.translation, translation);\r\n            vec3.set(perspective.zooming, 0, 0, 0);\r\n        }\r\n    }\r\n\r\n    public onMouseMove(ev:MouseEvent){\r\n        if(this.drag){\r\n            for(let i=0,entity:IEntity; entity = this.entities[i]; i++) {\r\n                this.rotate(entity,ev.x, ev.y);\r\n                this.lastMouseX = ev.x;\r\n                this.lastMouseY = ev.y;\r\n            }\r\n        }\r\n    }\r\n\r\n    public onKeyDown(ev:KeyboardEvent):void{\r\n        let y = 0;\r\n        let x = 0;\r\n        //W\r\n        if(ev.key === \"w\") {\r\n            y += 0.1;\r\n        }\r\n        //S\r\n        if(ev.key === \"s\"){\r\n            y -= 0.1;\r\n        }\r\n        //A\r\n        if(ev.key === \"a\"){\r\n            x += 0.1;\r\n        }\r\n        //D\r\n        if(ev.key === \"d\"){\r\n            x -= 0.1;\r\n        }\r\n\r\n        for(let i=0,entity:IEntity; entity = this.entities[i]; i++) {\r\n            const perspective = entity.get(LookAtCameraComponent);\r\n            const transform = entity.get(TransformComponent);\r\n            this.pan(entity,x, y);\r\n            const translation = this.calcTranslation(\r\n                perspective.panning,\r\n                perspective.zooming,\r\n                transform.rotation\r\n            );\r\n            vec3.add(transform.translation, transform.translation, translation);\r\n            vec3.add(perspective.target, perspective.target, perspective.panning);\r\n            vec3.set(perspective.panning, 0, 0, 0);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Calculate the panning-plane\r\n     */\r\n    protected pan(entity:IEntity,dx:number,dy:number){\r\n        const perspective = entity.get(LookAtCameraComponent);\r\n        const transform = entity.get(TransformComponent);\r\n\r\n        const aDir = vec3.create();\r\n        vec3.subtract(aDir, perspective.target, transform.translation); //Vektor von Target nach Position\r\n        vec3.normalize(aDir, aDir);\r\n        const aRight = vec3.create();\r\n        vec3.cross(aRight, aDir, perspective.up);\r\n        vec3.normalize(aRight, aRight);\r\n        const aUp = vec3.create();\r\n        vec3.cross(aUp, aDir, aRight);\r\n        //calc out vector(overwriting aRight, aUp)\r\n        vec3.scale(aRight, aRight, dx);\r\n        vec3.scale(aUp, aUp, dy);\r\n        vec3.add(perspective.panning, aRight, aUp);\r\n    }\r\n\r\n    /**\r\n     * Calculate camera zoom\r\n     */\r\n    protected zoom(entity:IEntity,wheelDelta:number,delta:number){\r\n        const perspective = entity.get(LookAtCameraComponent);\r\n        const transform = entity.get(TransformComponent);\r\n        const dz = (perspective.zoomPos - wheelDelta) * delta;\r\n        const aDir = vec3.create();\r\n        vec3.subtract(aDir, perspective.target, transform.translation);\r\n        const dist = vec3.length(aDir);\r\n        vec3.normalize(aDir, aDir);\r\n        if(dist-dz <= 1.0){\r\n            vec3.scale(perspective.zooming, aDir, dist-1.0);\r\n        }else {\r\n            vec3.scale(perspective.zooming, aDir, dz);\r\n        }\r\n    }\r\n\r\n    protected rotate(entity:IEntity,x:number,y:number){\r\n        const perspective = entity.get(LookAtCameraComponent);\r\n        const transform = entity.get(TransformComponent);\r\n        const po = Math3d.getVSpherePos(this.lastMouseX,this.lastMouseY,this.canvas.width,this.canvas.height);\r\n        const pn = Math3d.getVSpherePos(x,y,this.canvas.width,this.canvas.height);\r\n\r\n        const poPn = vec3.create();\r\n        vec3.subtract(poPn, po, pn);\r\n        if(vec3.squaredLength(poPn) < 0.0001 ){\r\n            return;\r\n        }\r\n\r\n        let cosangle = vec3.dot(po, pn);\r\n        if(cosangle > 1.0){\r\n            cosangle = 1;\r\n        }\r\n        else if(cosangle < -1.0){\r\n            cosangle = -1;\r\n        }\r\n\r\n        let angle = Math.acos(cosangle);\r\n        const rotAxis = vec3.create();\r\n        vec3.cross(rotAxis, pn, po);\r\n        vec3.normalize(rotAxis, rotAxis);\r\n        const subTranslationPerspective = vec3.create();\r\n        vec3.subtract(subTranslationPerspective, transform.translation, perspective.target);\r\n        let diff = vec3.fromValues(0, 0, vec3.length(subTranslationPerspective));\r\n        let rotDiff = Math3d.rotateAxisAngle(diff,rotAxis,angle);\r\n\r\n        const cDir = vec3.create();\r\n        vec3.subtract(cDir, perspective.target, transform.translation);\r\n        vec3.normalize(cDir, cDir);\r\n        const cRight = vec3.create();\r\n        vec3.cross(cRight, cDir, perspective.up);\r\n        vec3.normalize(cRight, cRight);\r\n\r\n        const cUp = vec3.create();\r\n        vec3.cross(cUp, cRight, cDir);\r\n\r\n        const rotDiffW:vec3 = vec3.fromValues(\r\n            cRight[0] * rotDiff[0] + cUp[0] * rotDiff[1] +  -cDir[0] * rotDiff[2],\r\n            cRight[1] * rotDiff[0] + cUp[1] * rotDiff[1] +  -cDir[1] * rotDiff[2],\r\n            cRight[2] * rotDiff[0] + cUp[2] * rotDiff[1] +  -cDir[2] * rotDiff[2],\r\n        );\r\n        const out = vec3.create();\r\n        vec3.subtract(out, rotDiffW, vec3.subtract(out, transform.translation, perspective.target));\r\n        const w = transform.rotation[3];\r\n        quat.set(transform.rotation, out[0]/w, out[1]/w, out[2]/w, w);\r\n    }\r\n\r\n    update():void{\r\n        for(let i=0, entity:IEntity; entity = this.entities[i]; i++){\r\n            const camera = entity.get(CameraComponent);\r\n            const transform = entity.get(TransformComponent);\r\n            const perspective = entity.get(LookAtCameraComponent);\r\n\r\n            //Update\r\n            const translation = this.calcTranslation(\r\n                perspective.panning,\r\n                perspective.zooming,\r\n                transform.rotation\r\n            );\r\n            vec3.add(transform.translation, transform.translation, translation);\r\n            vec3.add(perspective.target, perspective.target, perspective.panning);\r\n\r\n            quat.set(transform.rotation, 0, 0, 0, transform.rotation[3]);\r\n            vec3.set(perspective.panning, 0, 0, 0);\r\n            vec3.set(perspective.zooming, 0, 0, 0);\r\n\r\n            //Apply to camera localMatrix\r\n            const target = vec3.create();\r\n            vec3.add(target, perspective.target, perspective.panning);\r\n            const position = vec3.create();\r\n            vec3.add(position, perspective.panning, perspective.zooming);\r\n            vec3.add(position, position, transform.translation);\r\n            mat4.lookAt(\r\n                camera.viewMatrix,\r\n                position,\r\n                target,\r\n                perspective.up\r\n            );\r\n        }\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./CameraSystem\";\nexport * from \"./LookAtCameraControlSystem\";\n","import {ECS, IEntity, System} from \"curbl-ecs\";\r\nimport * as dat from \"dat.gui\";\r\nimport {SYSTEM_EVENTS} from \"curbl-ecs/lib/Events\";\r\nimport {GUIComponent} from \"../../components/gui/GUIComponent\";\r\nimport {GUIController} from \"dat.gui\";\r\n\r\n@ECS.System(GUIComponent)\r\nexport class GUISystem extends System {\r\n\r\n    private gui:dat.GUI;\r\n\r\n    constructor() {\r\n        super();\r\n        this.gui = new dat.GUI()\r\n    }\r\n\r\n    setUp() {\r\n        this.events.on(SYSTEM_EVENTS.ENTITY_ADDED, this.onEntityAdded, this);\r\n    }\r\n\r\n    onEntityAdded(entity:IEntity) {\r\n        const config = entity.get(GUIComponent).config;\r\n        let folder = this.gui;\r\n        let controller: GUIController;\r\n\r\n        if(config.folder) {\r\n            folder = this.gui.addFolder(config.folder);\r\n        }\r\n\r\n        for(let property of config.properties) {\r\n            if (property.isColor) {\r\n                controller = folder.addColor(property.prop, property.propName);\r\n            } else if(property.items){\r\n                controller = folder.add(property.prop, property.propName, property.items);\r\n            }else {\r\n                controller = folder.add(property.prop, property.propName, property.min, property.max);\r\n            }\r\n\r\n            controller.onChange(property.onChange).onFinishChange(property.onFinishChange);\r\n        }\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./GUISystem\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./animation/index\";\nexport * from \"./camera/index\";\nexport * from \"./gui/index\";\nexport * from \"./rendering/index\";\nexport * from \"./world/index\";\n","import {ECS, IEntity, System} from \"curbl-ecs\";\r\nimport {Cache, CACHE_TYPE} from \"../../cache\";\r\nimport {Model, SceneComponent, Shader} from \"../..\";\r\nimport {GLWiredCube} from \"../../gl/primitives/GLWiredCube\";\r\n\r\n@ECS.System(SceneComponent)\r\nexport class DebugBVHThreePass extends System {\r\n    private gl:WebGL2RenderingContext;\r\n    private cache:Cache;\r\n    private shader: Shader;\r\n    private cube: GLWiredCube;\r\n\r\n    constructor(config:{gl: WebGL2RenderingContext, cache: Cache, shader: Shader}){\r\n        super();\r\n        this.gl = config.gl;\r\n        this.cache = config.cache;\r\n        this.shader = config.shader;\r\n        this.cube = new GLWiredCube(this.gl);\r\n    }\r\n\r\n    setUp():void{\r\n        this.cube.vertexArrayObject.bind();\r\n        this.cube.vertexArrayObject.addAttribute(this.cube.vertexBuffer,this.shader.attributes.getAttribute('a_Position'),3,this.gl.FLOAT,false,0,0);\r\n        this.cube.vertexArrayObject.unbind();\r\n    }\r\n\r\n    render():void{\r\n        for(let i=0, entity:IEntity; entity = this.entities[i]; i++) {\r\n            this.drawScene(entity);\r\n        }\r\n    }\r\n\r\n    private drawScene(entity:IEntity):void {\r\n        const key = entity.get(SceneComponent).key;\r\n        const scene = this.cache.get<Model>(CACHE_TYPE.MODEL,key);\r\n        this.gl.enable(this.gl.DEPTH_TEST);\r\n        this.shader.bind();\r\n        scene.bvh.debugRender(this.gl.LINES, this.cube, this.shader, scene.meshes[0].transform.modelMatrix);\r\n        this.shader.unbind();\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n    }\r\n}","import {ECS, IEntity, System} from \"curbl-ecs\";\r\nimport {LightComponent} from \"../../components\";\r\nimport {Cache} from \"../../cache\";\r\nimport {ForwardScenePass} from \"./ForwardScenePass\";\r\nimport {Shader} from \"../../shader/shader\";\r\n\r\n@ECS.System(LightComponent)\r\nexport class ForwardLightPass extends System {\r\n\r\n    private gl:WebGL2RenderingContext;\r\n    private cache:Cache;\r\n    private scenePass:ForwardScenePass;\r\n    private shader: Shader;\r\n\r\n    constructor(config:{gl: WebGL2RenderingContext, cache: Cache, shader: Shader}){\r\n        super();\r\n        this.gl = config.gl;\r\n        this.cache = config.cache;\r\n        this.shader = config.shader;\r\n    }\r\n\r\n    setUp():void{\r\n        this.scenePass = ECS.addSystem(new ForwardScenePass({gl:this.gl,cache:this.cache,shader:this.shader}));\r\n    }\r\n\r\n    tearDown():void {\r\n        ECS.removeSystem(this.scenePass);\r\n    }\r\n    \r\n    render():void {\r\n        //this.gl.enable(this.gl.CULL_FACE);\r\n        this.gl.enable(this.gl.DEPTH_TEST);\r\n        this.gl.enable(this.gl.BLEND);\r\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n        this.shader.bind();\r\n        for(let i=0, light:IEntity; light = this.entities[i]; i++) {\r\n            this.shader.uniforms.u_LightColor = light.get(LightComponent).color.elements;\r\n            this.shader.uniforms.u_LightDirection = light.get(LightComponent).direction;\r\n            this.scenePass.draw();\r\n        }\r\n        this.shader.unbind();\r\n\r\n        //this.gl.disable(this.gl.CULL_FACE);\r\n        this.gl.disable(this.gl.BLEND);\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n    }\r\n\r\n}","import {ECS, IEntity, System} from \"curbl-ecs\";\r\nimport {SceneComponent} from \"../../components\";\r\nimport {Cache, CACHE_TYPE} from \"../../cache\";\r\nimport {SYSTEM_EVENTS} from \"curbl-ecs/lib/Events\";\r\nimport {GL_PRIMITIVES} from \"../../gl/constants\";\r\nimport {Model, Shader} from \"../../model\";\r\nimport {GLBuffer} from \"../../gl\";\r\n\r\n\r\n@ECS.System(SceneComponent)\r\nexport class ForwardScenePass extends System {\r\n\r\n    private gl:WebGL2RenderingContext;\r\n    private cache:Cache;\r\n    private shader: Shader;\r\n    //use the same buffers for all scenes/meshes etc.\r\n    private vertexBuffer:GLBuffer;\r\n    private indexBuffer:GLBuffer;\r\n\r\n    constructor(config:{gl: WebGL2RenderingContext, cache: Cache, shader: Shader}){\r\n        super();\r\n        this.gl = config.gl;\r\n        this.cache = config.cache;\r\n        this.shader = config.shader;\r\n        this.vertexBuffer = GLBuffer.createVertexBuffer(this.gl);\r\n        this.indexBuffer = GLBuffer.createIndexBuffer(this.gl);\r\n    }\r\n\r\n    setUp():void{\r\n        this.events.on(SYSTEM_EVENTS.ENTITY_ADDED,this.initEntity,this);\r\n    }\r\n\r\n    /**\r\n     * Init Shader for the Meshes\r\n     * @param entity\r\n     */\r\n    private initEntity(entity:IEntity):void{\r\n        const sceneComponent = entity.get(SceneComponent);\r\n        const scene = this.cache.get<Model>(CACHE_TYPE.MODEL,sceneComponent.key);\r\n        if(scene){\r\n            scene.init(this.cache);\r\n            scene.initBuffers(this.gl, this.vertexBuffer, this.indexBuffer);\r\n            scene.upload();\r\n            this.initShaderAttributes(scene);\r\n        }else{\r\n            console.warn('Their is no scene for key '+sceneComponent.key+' in the cache.');\r\n        }\r\n    }\r\n\r\n    private initShaderAttributes(scene:Model):void{\r\n        scene.addAttribute(GL_PRIMITIVES.POSITION,this.shader.attributes.getAttribute('a_Position'));\r\n        scene.addAttribute(GL_PRIMITIVES.NORMAL,this.shader.attributes.getAttribute('a_Normal'));\r\n        scene.addAttribute(GL_PRIMITIVES.TANGENT,this.shader.attributes.getAttribute('a_Tangent'));\r\n        scene.addAttribute(GL_PRIMITIVES.TEXCOORD_0,this.shader.attributes.getAttribute('a_UV'));\r\n        scene.addAttribute(GL_PRIMITIVES.JOINTS_0,this.shader.attributes.getAttribute('a_Joint0'));\r\n        scene.addAttribute(GL_PRIMITIVES.WEIGHTS_0,this.shader.attributes.getAttribute('a_Weight0'));\r\n    }\r\n\r\n    draw():void{\r\n        for(let i=0, entity:IEntity; entity = this.entities[i]; i++) {\r\n            this.drawScene(entity);\r\n        }\r\n    }\r\n\r\n    private drawScene(entity:IEntity):void {\r\n        const key = entity.get(SceneComponent).key;\r\n        const scene = this.cache.get<Model>(CACHE_TYPE.MODEL,key);\r\n        this.shader.apply();\r\n        scene.draw(this.shader);\r\n    }\r\n}","import {ECS, System} from \"curbl-ecs\";\r\nimport {Cache} from \"../../cache\";\r\nimport {ForwardLightPass} from \"./ForwardLightPass\";\r\nimport {Shader} from \"../../shader/shader\";\r\n\r\n@ECS.System()\r\nexport class ForwardShadingSystem extends System {\r\n\r\n    private gl: WebGL2RenderingContext;\r\n    private cache: Cache;\r\n    private forwardLightningPass: ForwardLightPass;\r\n    private shader: Shader;\r\n\r\n    constructor(config: {gl: WebGL2RenderingContext, cache: Cache, shader: Shader}) {\r\n        super();\r\n        this.gl = config.gl;\r\n        this.cache = config.cache;\r\n        this.shader = config.shader;\r\n    }\r\n\r\n    setUp(): void {\r\n        this.forwardLightningPass = ECS.addSystem(new ForwardLightPass({gl: this.gl, cache: this.cache, shader: this.shader}));\r\n    }\r\n\r\n    tearDown(): void {\r\n        ECS.removeSystem(this.forwardLightningPass);\r\n        ECS.removeSystem(this);\r\n    }\r\n}","import {ECS, System} from \"curbl-ecs\";\r\n\r\n@ECS.System()\r\nexport class PrePass extends System {\r\n\r\n    private gl:WebGL2RenderingContext;\r\n\r\n    constructor(gl:WebGL2RenderingContext) {\r\n        super();\r\n        this.gl = gl;\r\n    }\r\n\r\n    /**\r\n     * Clear rendering Context\r\n     * @param colorBuffer\r\n     * @param depthBuffer\r\n     * @param color\r\n     */\r\n    private clearContext(colorBuffer:boolean=true,depthBuffer:boolean=false,color:{r:number,g:number,b:number,a:number}={r:0,g:0,b:0,a:1}){\r\n        this.gl.clearColor(color.r,color.g,color.b,color.a);\r\n        if(colorBuffer && depthBuffer){\r\n            this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT | this.gl.STENCIL_BUFFER_BIT);\r\n        }else if(colorBuffer){\r\n            this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n        }else if(depthBuffer){\r\n            this.gl.clear(this.gl.DEPTH_BUFFER_BIT);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        this.clearContext(true,true, {r: 0, g:0, b: 0, a:1});\r\n    }\r\n}","import {ECS, System} from \"curbl-ecs\";\r\nimport {Shader} from \"../../shader/shader\";\r\nimport {GLCube} from \"../../gl\";\r\nimport {Cache, CACHE_TYPE} from \"../../cache\";\r\nimport {GLOBAL_TEXTURES} from \"../../viewer/constants\";\r\n\r\n@ECS.System()\r\nexport class SkyboxPass extends System {\r\n\r\n    private gl:WebGL2RenderingContext;\r\n    private cache:Cache;\r\n    private shader:Shader;\r\n    private cube:GLCube;\r\n\r\n    constructor(config:  {gl: WebGL2RenderingContext, cache: Cache, shader: Shader}){\r\n        super();\r\n        this.gl = config.gl;\r\n        this.cache = config.cache;\r\n        this.shader = config.shader;\r\n        this.cube = new GLCube(this.gl);\r\n    }\r\n\r\n    setUp(){\r\n        this.shader.bind();\r\n        this.cube.vertexArrayObject.bind();\r\n        this.cube.vertexArrayObject.addAttribute(this.cube.vertexBuffer,this.shader.attributes.getAttribute('a_Position'),3,this.gl.FLOAT,false,0,0);\r\n        this.cube.vertexArrayObject.unbind();\r\n        this.shader.unbind();\r\n    }\r\n\r\n    tearDown(): void {\r\n    }\r\n\r\n    render():void{\r\n        if(this.cache.has(CACHE_TYPE.TEXTURE, GLOBAL_TEXTURES.SKYBOX)) {\r\n            this.gl.enable(this.gl.DEPTH_TEST);\r\n            this.gl.depthFunc(this.gl.LEQUAL);\r\n            this.gl.disable(this.gl.CULL_FACE);\r\n\r\n            this.shader.bind();\r\n            this.shader.apply();\r\n            this.cube.draw();\r\n            this.shader.unbind();\r\n\r\n            this.gl.depthFunc(this.gl.LESS);\r\n            this.gl.disable(this.gl.DEPTH_TEST);\r\n        }\r\n    }\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./ForwardLightPass\";\nexport * from \"./ForwardScenePass\";\nexport * from \"./ForwardShadingSystem\";\nexport * from \"./PrePass\";\nexport * from \"./SkyboxPass\";\n","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./worldScene\";\nexport * from \"./worldSystem\";\n","import {ECS, IEntity} from \"curbl-ecs\";\r\nimport {ResourceLoader} from \"curbl-loader\";\r\nimport {Cache} from \"../../cache\";\r\n\r\nexport interface SceneConfig {\r\n    name: string;\r\n    destroyOnTearDown?: boolean;\r\n}\r\n\r\nexport abstract class WorldScene {\r\n    /**\r\n     * Each Scene needs a unique name\r\n     */\r\n    private readonly _name:string;\r\n    /**\r\n     * destroy all entities on tearDown {default: false}\r\n     */\r\n    private _destroyOnTearDown:boolean;\r\n\r\n    /**\r\n     * if systems is active and should be updated\r\n     */\r\n    private _active:boolean;\r\n\r\n    private _loader:ResourceLoader;\r\n    private _cache:Cache;\r\n\r\n    private entities:{[id:string]:IEntity};\r\n\r\n    constructor(config:SceneConfig){\r\n        this.entities = {};\r\n        this._destroyOnTearDown = config.destroyOnTearDown||false;\r\n        this._name = config.name;\r\n    }\r\n\r\n    /**\r\n     * setUp the scene loading necessary elements\r\n     * calls preload and triggers the loader\r\n     * once the loader finished loading the create method is called\r\n     */\r\n    setUp(loader:ResourceLoader, cache: Cache):void {\r\n        this._loader = loader;\r\n        this._cache = cache;\r\n        this._active = true;\r\n\r\n        this.preload();\r\n        this._loader.onComplete.once(this.create,this);\r\n        this._loader.load();\r\n    }\r\n\r\n    /**\r\n     * tearDown the scene removing all Entities from the scene\r\n     * it will destroy all entities if destroyOnTearDown is true{default: false}\r\n     */\r\n    tearDown():void {\r\n        this.shutdown();\r\n        this._active = false;\r\n        if(this._destroyOnTearDown) {\r\n            const keys = Object.keys(this.entities);\r\n            for(let i=0, entity:IEntity; entity = this.entities[keys[i]]; i++){\r\n                ECS.destroyEntity(entity);\r\n            }\r\n        }else{\r\n            const keys = Object.keys(this.entities);\r\n            for(let i=0, entity:IEntity; entity = this.entities[keys[i]]; i++){\r\n                ECS.removeEntity(entity);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Restore the Scene, adding all Entities previously removed, with their latest values\r\n     */\r\n    restore():void{\r\n        for(let i=0, entity:IEntity; entity = this.entities[i]; i++){\r\n            ECS.addEntity(entity);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add Entity to the Scene\r\n     * @param entity\r\n     */\r\n    add<T extends IEntity = IEntity>(entity:T):T {\r\n        this.entities[entity.id] = ECS.addEntity(entity);\r\n        return entity;\r\n    }\r\n\r\n    /**\r\n     * Remove entity from the scene and ecs\r\n     * @param entity\r\n     */\r\n    remove<T extends IEntity = IEntity>(entity:T):T {\r\n        delete this.entities[entity.id];\r\n        return ECS.removeEntity(entity) as T;\r\n    }\r\n\r\n    /**\r\n     * Destroy entity, removes it from the scene and ecs and removes all components\r\n     */\r\n    destroy(entity:IEntity):boolean {\r\n        delete this.entities[entity.id];\r\n        return ECS.destroyEntity(entity);\r\n    }\r\n\r\n    /**\r\n     * called once the scene starts\r\n     */\r\n    abstract preload():void;\r\n\r\n    /**\r\n     * called once the scene finished loading\r\n     * use this.add to add Entities to the Scene otherwise it will be globally added to the ECS\r\n     * and not removed on scene shutdown\r\n     */\r\n    abstract create():void;\r\n\r\n    /**\r\n     * called before the scene gets removed\r\n     */\r\n    abstract shutdown():void;\r\n\r\n    /**\r\n     * called by the worldSystem for each ECS update tick\r\n     * usually its not needed since we just use systems and entities for the game logic\r\n     */\r\n    abstract update():void;\r\n\r\n    get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    get destroyOnTearDown(): boolean {\r\n        return this._destroyOnTearDown;\r\n    }\r\n\r\n    set destroyOnTearDown(value: boolean) {\r\n        this._destroyOnTearDown = value;\r\n    }\r\n\r\n    get active(): boolean {\r\n        return this._active;\r\n    }\r\n\r\n    set active(value: boolean) {\r\n        this._active = value;\r\n    }\r\n\r\n    get loader(): ResourceLoader {\r\n        return this._loader;\r\n    }\r\n\r\n    set loader(value: ResourceLoader) {\r\n        this._loader = value;\r\n    }\r\n\r\n    get cache(): Cache {\r\n        return this._cache;\r\n    }\r\n\r\n    set cache(value: Cache) {\r\n        this._cache = value;\r\n    }\r\n}","import {ECS, System} from \"curbl-ecs\";\r\nimport {WorldScene} from \"./worldScene\";\r\nimport {Cache} from \"../../cache\";\r\nimport {ResourceLoader} from \"curbl-loader\";\r\n\r\n@ECS.System()\r\nexport class WorldSystem extends System {\r\n    /**\r\n     * The World consists of scenes\r\n     */\r\n    private _scenes:{[key:string]:WorldScene};\r\n    private _loader: ResourceLoader;\r\n    private _cache: Cache;\r\n\r\n    constructor(config:{loader:ResourceLoader, cache:Cache}){\r\n        super();\r\n        this._loader = config.loader;\r\n        this._cache = config.cache;\r\n    }\r\n\r\n    setUp(): void {\r\n        this._scenes = Object.create(null);\r\n    }\r\n\r\n    tearDown(): void {\r\n        const keys = Object.keys(this._scenes);\r\n        for(let i=0, scene:WorldScene; scene = this._scenes[keys[i]]; i++){\r\n            this.removeScene(scene);\r\n        }\r\n    }\r\n\r\n    update():void {\r\n        const keys = Object.keys(this._scenes);\r\n        for(let i=0, scene:WorldScene; scene = this._scenes[keys[i]]; i++){\r\n            if(scene.active){\r\n                scene.update();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Return the key of the given scene\r\n     * @param scene\r\n     */\r\n    private getKey(scene:WorldScene|string):string {\r\n        let key:string = scene as string;\r\n        if(scene instanceof WorldScene)\r\n        {\r\n            key = scene.name;\r\n        }\r\n        return key;\r\n    }\r\n\r\n    addScene(scene:WorldScene):WorldScene{\r\n        this._scenes[scene.name] = scene;\r\n        return scene;\r\n    }\r\n\r\n    removeScene(scene:WorldScene|string):WorldScene{\r\n        const key = this.getKey(scene);\r\n        const sceneObj = this._scenes[key];\r\n        sceneObj.tearDown();\r\n        delete this._scenes[key];\r\n        return sceneObj;\r\n    }\r\n\r\n    start(scene:WorldScene|string):WorldScene {\r\n        const key = this.getKey(scene);\r\n        this._scenes[key].setUp(this._loader, this._cache);\r\n        return this._scenes[key];\r\n    }\r\n\r\n    stop(scene:WorldScene|string):WorldScene {\r\n        const key = this.getKey(scene);\r\n        this._scenes[key].tearDown();\r\n        return this._scenes[key];\r\n    }\r\n\r\n    restore(scene:WorldScene|string):WorldScene {\r\n        const key = this.getKey(scene);\r\n        this._scenes[key].restore();\r\n        return this._scenes[key];\r\n    }\r\n}","import {Canvas} from \"../canvas/Canvas\";\r\nimport {MiddlewareData, ResourceLoader} from \"curbl-loader\";\r\nimport {CubemapLoader} from \"../loader/CubemapLoader\";\r\nimport {TextureLoader} from \"../loader/TextureLoader\";\r\nimport {GLTFLoader} from \"../loader/GLTFLoader\";\r\nimport {BaseCache, Cache, CACHE_TYPE} from \"../cache\";\r\nimport {GLTexture} from \"../gl\";\r\nimport {Animation, Mesh, Shader} from \"../model\";\r\nimport {Material, MATERIAL_MAPS, Materialmap} from \"../material\";\r\nimport {ECS} from \"curbl-ecs\";\r\nimport {GLSLLoader} from \"../loader/GLSLLoader\";\r\nimport {KhronosPbrShader} from \"../shader/khronosPbrShader\";\r\nimport {SkyboxShader} from \"../shader/SkyboxShader\";\r\nimport {Model} from \"../model/model\";\r\nimport {PrePass} from \"../systems/rendering/PrePass\";\r\nimport {GUISystem} from \"../systems/gui/GUISystem\";\r\nimport {LookAtCameraControlSystem} from \"../systems/camera/LookAtCameraControlSystem\";\r\nimport {MetallicRoughness} from \"../material/metallicRoughness\";\r\nimport {vec4} from \"gl-matrix\";\r\nimport {AnimationSystem} from \"../systems/animation/AnimationSystem\";\r\nimport {WorldSystem} from \"../systems/world/worldSystem\";\r\nimport {BBoxShader} from \"../shader/BBoxShader\";\r\nimport {CameraSystem} from \"../systems/camera\";\r\nimport {ForwardShadingSystem, SkyboxPass} from \"../systems/rendering\";\r\nimport {DebugBVHThreePass} from \"../systems/rendering/DebugBVHThreePass\";\r\n\r\nexport class Viewer {\r\n    private _cache:Cache;\r\n    private _canvas:Canvas;\r\n    private _loader: ResourceLoader;\r\n    private _gl: WebGL2RenderingContext;\r\n    private _shader: KhronosPbrShader;\r\n    private _skyboxShader: SkyboxShader;\r\n    private _bboxShader: BBoxShader;\r\n    private _world: WorldSystem;\r\n\r\n    constructor(config:{width: number, height:number}={width:1280, height: 720}) {\r\n        this._canvas = new Canvas({width:config.width, height: config.height});\r\n        this._loader = new ResourceLoader();\r\n        this._cache = new Cache();\r\n    }\r\n\r\n    init(onLoaded:()=>void) {\r\n        this._canvas.appendCanvas(\"root\");\r\n        const gl = this._canvas.context;\r\n        this._gl = gl;\r\n\r\n        //Create cache\r\n        this._cache.addCache(CACHE_TYPE.MATERIAL, new BaseCache<Material>());\r\n        this._cache.addCache(CACHE_TYPE.MESH, new BaseCache<Mesh>());\r\n        this._cache.addCache(CACHE_TYPE.TEXTURE, new BaseCache<GLTexture>());\r\n        this._cache.addCache(CACHE_TYPE.MODEL, new BaseCache<Model>());\r\n        this._cache.addCache(CACHE_TYPE.ANIMATION, new BaseCache<Animation>());\r\n        this._cache.addCache(CACHE_TYPE.SHADER, new BaseCache<Shader>());\r\n\r\n        //Set loader Middlewares\r\n        this._loader.addMiddleware(new CubemapLoader(gl), CubemapLoader);\r\n        this._loader.addMiddleware(new TextureLoader(gl), TextureLoader);\r\n        this._loader.addMiddleware(new GLTFLoader(gl, this._cache), GLTFLoader);\r\n        this._loader.addMiddleware(new GLSLLoader(gl), GLSLLoader);\r\n\r\n        //Cache them all\r\n        this._loader.onLoadComplete.on((data:MiddlewareData<any>) => {\r\n            this._cache.add(data.type as number,data.key,data.data);\r\n        });\r\n\r\n        this.defaultMaterial();\r\n        //Create shader\r\n        this._shader = new KhronosPbrShader(this._gl, this._cache);\r\n        this._skyboxShader = new SkyboxShader(this._gl, this._cache);\r\n        this._bboxShader = new BBoxShader(this._gl);\r\n        //Load shader\r\n        this._loader.get(GLSLLoader).add(\r\n            \"shader\",\r\n            \"https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/shader/pbr-vert.glsl\",\r\n            \"https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/shader/pbr-frag.glsl\",\r\n            this._shader\r\n        );\r\n        this._loader.get(GLSLLoader).add(\r\n            \"skyboxShader\",\r\n            \"https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/shader/skybox-vert.glsl\",\r\n            \"https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/shader/skybox-frag.glsl\",\r\n            this._skyboxShader\r\n        );\r\n        this._loader.get(GLSLLoader).add(\r\n            \"bboxShader\",\r\n            \"/assets/shader/bbox-vert.glsl\",\r\n            \"/assets/shader/bbox-frag.glsl\",\r\n            this._bboxShader\r\n        );\r\n\r\n        this.load(onLoaded);\r\n    }\r\n\r\n    private defaultMaterial() {\r\n        const gl = this._gl;\r\n        const texture = GLTexture.fromData(gl,new Uint8Array([128, 128, 128, 255]) as any,1,1,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE);\r\n        texture.enableNearestScaling();\r\n        texture.enableWrapClamp();\r\n\r\n        this._cache.getCache(CACHE_TYPE.TEXTURE).add('__default__', texture);\r\n\r\n        const mat = new MetallicRoughness();\r\n        mat.baseColorFactor = vec4.fromValues(0.5, 0.5, 0.5, 1);\r\n        const material = new Material<MetallicRoughness>(name, mat);\r\n        material.maps[MATERIAL_MAPS.ALBEDO] = new Materialmap('__default__');\r\n\r\n        this._cache.getCache(CACHE_TYPE.MATERIAL).add('__default__', material);\r\n    }\r\n\r\n    private createSystems() {\r\n        //Create Systems\r\n        ECS.systemUpdateMethods = ['update', 'render'];\r\n        this._world = ECS.addSystem(new WorldSystem({loader: this._loader, cache: this._cache}));\r\n        ECS.addSystem(new CameraSystem({gl: this._gl}));\r\n        ECS.addSystem(new LookAtCameraControlSystem(this._canvas));\r\n        ECS.addSystem(new GUISystem());\r\n        ECS.addSystem(new AnimationSystem(this._cache));\r\n        ECS.addSystem(new PrePass(this._gl));\r\n        ECS.addSystem(new ForwardShadingSystem({gl: this._gl, cache: this._cache, shader: this._shader}));\r\n        ECS.addSystem(new DebugBVHThreePass({gl: this._gl, cache: this._cache, shader: this._bboxShader}));\r\n        ECS.addSystem(new SkyboxPass({gl: this._gl, cache: this._cache, shader: this._skyboxShader}));\r\n    }\r\n\r\n    private load(onLoaded:()=>void) {\r\n        this._loader.load(()=>{\r\n            this._shader.upload();\r\n            this._skyboxShader.upload();\r\n            this._bboxShader.upload();\r\n            this.createSystems();\r\n            onLoaded();\r\n            this.update(0);\r\n        });\r\n    }\r\n\r\n    private update(t:number){\r\n        ECS.update(t);\r\n        requestAnimationFrame((t)=>{this.update(t)});\r\n    }\r\n\r\n    get cache(): Cache {\r\n        return this._cache;\r\n    }\r\n\r\n    set cache(value: Cache) {\r\n        this._cache = value;\r\n    }\r\n\r\n    get canvas(): Canvas {\r\n        return this._canvas;\r\n    }\r\n\r\n    set canvas(value: Canvas) {\r\n        this._canvas = value;\r\n    }\r\n\r\n    get loader(): ResourceLoader {\r\n        return this._loader;\r\n    }\r\n\r\n    set loader(value: ResourceLoader) {\r\n        this._loader = value;\r\n    }\r\n\r\n    get gl(): WebGL2RenderingContext {\r\n        return this._gl;\r\n    }\r\n\r\n    set gl(value: WebGL2RenderingContext) {\r\n        this._gl = value;\r\n    }\r\n\r\n    get shader(): KhronosPbrShader {\r\n        return this._shader;\r\n    }\r\n\r\n    set shader(value: KhronosPbrShader) {\r\n        this._shader = value;\r\n    }\r\n\r\n    get skyboxShader(): SkyboxShader {\r\n        return this._skyboxShader;\r\n    }\r\n\r\n    set skyboxShader(value: SkyboxShader) {\r\n        this._skyboxShader = value;\r\n    }\r\n\r\n    get world(): WorldSystem {\r\n        return this._world;\r\n    }\r\n\r\n    set world(value: WorldSystem) {\r\n        this._world = value;\r\n    }\r\n}","export const GLOBAL_TEXTURES = {\r\n    BRDF_LUT:'brdfLUT',\r\n    DIFFUSE_ENVIRONMENT: 'diffuseEnvironment',\r\n    SPECULAR_ENVIRONMENT: 'specularEnvironment',\r\n    SKYBOX:'skybox'\r\n};\r\n\r\nexport enum UBO_BINDINGS {\r\n    CAMERA = 0,\r\n    SKIN = 1\r\n}","/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from \"./constants\";\nexport * from \"./Viewer\";\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by Soeren on 27.06.2017.\r\n */\r\nvar ECS_1 = require(\"./ECS\");\r\nvar ComponentBitmaskMap = /** @class */ (function () {\r\n    function ComponentBitmaskMap() {\r\n        this.bitmaskMap = Object.create(null);\r\n    }\r\n    ComponentBitmaskMap.prototype.has = function (component) {\r\n        if (typeof component === \"string\") {\r\n            return !!this.bitmaskMap[component];\r\n        }\r\n        else {\r\n            return !!this.bitmaskMap[component.prototype.constructor.name];\r\n        }\r\n    };\r\n    ComponentBitmaskMap.prototype.add = function (component) {\r\n        if (typeof component === \"string\") {\r\n            this.bitmaskMap[component] = 1 << this.size;\r\n        }\r\n        else {\r\n            this.bitmaskMap[component.prototype.constructor.name] = 1 << this.size;\r\n        }\r\n    };\r\n    ComponentBitmaskMap.prototype.get = function (component) {\r\n        if (!this.has(component)) {\r\n            this.add(component);\r\n        }\r\n        if (typeof component === \"string\") {\r\n            return this.bitmaskMap[component] || 0;\r\n        }\r\n        return this.bitmaskMap[component.prototype.constructor.name] || 0;\r\n    };\r\n    Object.defineProperty(ComponentBitmaskMap.prototype, \"size\", {\r\n        get: function () {\r\n            return Object.keys(this.bitmaskMap).length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ComponentBitmaskMap;\r\n}());\r\nexports.ComponentBitmaskMap = ComponentBitmaskMap;\r\nvar COMPONENT_PROPERTIES = {};\r\nvar COMPONENT_PROTOTYPE = {\r\n    init: function () { return ECS_1.ECS.noop; },\r\n    remove: function () { return ECS_1.ECS.noop; }\r\n};\r\nexports.COMPONENT_PROPERTY_DECORATOR = {};\r\nfunction injectComponent(component) {\r\n    for (var propKey in COMPONENT_PROPERTIES) {\r\n        if (component[propKey] === undefined || component[propKey] === null) {\r\n            component[propKey] = COMPONENT_PROPERTIES[propKey]();\r\n        }\r\n    }\r\n    for (var propKey in exports.COMPONENT_PROPERTY_DECORATOR) {\r\n        if (component[propKey] === undefined || component[propKey] === null) {\r\n            exports.COMPONENT_PROPERTY_DECORATOR[propKey](component);\r\n        }\r\n    }\r\n    for (var protoKey in COMPONENT_PROTOTYPE) {\r\n        if (component.constructor && component.constructor.prototype) {\r\n            if (component.constructor.prototype[protoKey] === undefined || component.constructor.prototype[protoKey] === null) {\r\n                component.constructor.prototype[protoKey] = COMPONENT_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n        else {\r\n            if (component[protoKey] === undefined || component[protoKey] === null) {\r\n                component[protoKey] = COMPONENT_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.injectComponent = injectComponent;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Entity_1 = require(\"./Entity\");\r\nvar EntityComponentManager_1 = require(\"./EntityComponentManager\");\r\nvar Component_1 = require(\"./Component\");\r\nvar System_1 = require(\"./System\");\r\nvar EntitySystemManager_1 = require(\"./EntitySystemManager\");\r\nvar InjectorService_1 = require(\"./InjectorService\");\r\nvar EventEmitter = require(\"eventemitter3\");\r\nvar Events_1 = require(\"./Events\");\r\nvar ECS = /** @class */ (function () {\r\n    function ECS() {\r\n        this.componentBitmaskMap = new Component_1.ComponentBitmaskMap();\r\n        this.events = new EventEmitter();\r\n        this.ecm = new EntityComponentManager_1.EntityComponentManager(this.componentBitmaskMap, this.events);\r\n        this.scm = new EntitySystemManager_1.EntitySystemManager(this.componentBitmaskMap, this.events);\r\n        this.registerEvents();\r\n    }\r\n    ECS.prototype.registerEvents = function () {\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.ENTITY_ADDED, this.onEntityAdded);\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.ENTITY_REMOVED, this.onEntityRemoved);\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.ENTITY_DESTROYED, this.onEntityDestroyed);\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.COMPONENT_ADDED, this.onComponentAdded);\r\n        this.ecm.events.on(Events_1.ECM_EVENTS.COMPONENT_REMOVED, this.onComponentRemoved);\r\n        this.scm.events.on(Events_1.ESM_EVENTS.SYSTEM_ADDED, this.onSystemAdded);\r\n    };\r\n    ECS.prototype.onEntityAdded = function (entity) {\r\n        ECS.instance.scm.updateEntity(entity);\r\n    };\r\n    ECS.prototype.onEntityRemoved = function (entity) {\r\n        ECS.instance.scm.removeEntity(entity);\r\n    };\r\n    ECS.prototype.onEntityDestroyed = function (entity) {\r\n        ECS.instance.scm.removeEntity(entity);\r\n    };\r\n    ECS.prototype.onComponentAdded = function (entity) {\r\n        ECS.instance.scm.updateEntity(entity);\r\n    };\r\n    ECS.prototype.onComponentRemoved = function (entity) {\r\n        ECS.instance.scm.updateEntity(entity);\r\n    };\r\n    ECS.prototype.onSystemAdded = function (system) {\r\n        for (var id in ECS.instance.ecm.entities) {\r\n            ECS.instance.scm.updateEntity(ECS.instance.ecm.entities[id], system);\r\n        }\r\n    };\r\n    Object.defineProperty(ECS, \"instance\", {\r\n        get: function () {\r\n            if (ECS._instance) {\r\n                return ECS._instance;\r\n            }\r\n            return ECS._instance = new ECS();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ECS.setPrototypeOf = function (obj, proto) {\r\n        //@ts-ignore\r\n        var fn = Object.setPrototypeOf || function (obj, proto) {\r\n            obj.__proto__ = proto;\r\n            return obj;\r\n        };\r\n        return fn(obj, proto);\r\n    };\r\n    Object.defineProperty(ECS, \"Injector\", {\r\n        get: function () {\r\n            return InjectorService_1.InjectorService.instance;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ECS.noop = function () { };\r\n    /**\r\n     * create an entity\r\n     * @param entity {optional} - use existing entity\r\n     * @param components {optional} - components to add to the entity if provided this will override the current components of the entity if any\r\n     */\r\n    ECS.createEntity = function (entity, components) {\r\n        return ECS.instance.ecm.createEntity(entity, components);\r\n    };\r\n    /**\r\n     * adds the Entity with the provided components(or existing ones) to the ECS\r\n     * @param entity - Entity to add to the ECS\r\n     * @param components - Components for the entity, if provided this will override the current components of the entity if any\r\n     */\r\n    ECS.addEntity = function (entity, components) {\r\n        return ECS.instance.ecm.addEntity(entity, components);\r\n    };\r\n    /**\r\n     * Return a list of entities with the specified components\r\n     * since we need to check all entities this can be quite slow\r\n     * @param components - list of components the entity needs to have\r\n     */\r\n    ECS.getEntities = function () {\r\n        var components = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            components[_i] = arguments[_i];\r\n        }\r\n        var _a;\r\n        return (_a = ECS.instance.ecm).getEntities.apply(_a, components);\r\n    };\r\n    /**\r\n     * removes the entity from the ECS, it will keep all of its components\r\n     * @param entity - Entity to remove\r\n     * @returns {IEntity}\r\n     */\r\n    ECS.removeEntity = function (entity) {\r\n        return ECS.instance.ecm.removeEntity(entity);\r\n    };\r\n    /**\r\n     * removes all entities from the ecs\r\n     */\r\n    ECS.removeAllEntities = function () {\r\n        return ECS.instance.ecm.removeAllEntities();\r\n    };\r\n    /**\r\n     * destroy an entity removes it from the ecs and removes all components\r\n     * usually you want to use removeEntity and let the garbage collector do its job\r\n     * @param entity - entity to destroy\r\n     * @param pool - wether or not to add the entity to the ObjectPool(default: true)\r\n     */\r\n    ECS.destroyEntity = function (entity, pool) {\r\n        return ECS.instance.ecm.destroyEntity(entity, pool);\r\n    };\r\n    /**\r\n     * remove all components and entities from the ecs\r\n     * usually you want to use removeAllEntities and let the garbage collector do its job\r\n     */\r\n    ECS.destroyAllEntities = function () {\r\n        return ECS.instance.ecm.destroyAllEntities();\r\n    };\r\n    ECS.hasEntity = function (entity) {\r\n        return ECS.instance.ecm.hasEntity(entity);\r\n    };\r\n    ECS.removeComponent = function (entity, component) {\r\n        return ECS.instance.ecm.removeComponent(entity, component);\r\n    };\r\n    ECS.addComponent = function (entity, component) {\r\n        return ECS.instance.ecm.addComponent(entity, component);\r\n    };\r\n    ECS.addSystem = function (system, componentMask) {\r\n        return ECS.instance.scm.add(system, componentMask);\r\n    };\r\n    ECS.hasSystem = function (system) {\r\n        return ECS.instance.scm.has(system);\r\n    };\r\n    ECS.hasSystemOf = function (constructor) {\r\n        return ECS.instance.scm.hasOf(constructor);\r\n    };\r\n    ECS.removeSystem = function (system) {\r\n        return ECS.instance.scm.remove(system);\r\n    };\r\n    ECS.removeSystemOf = function (constructor) {\r\n        return ECS.instance.scm.removeOf(constructor);\r\n    };\r\n    ECS.getSystemComponentMaskOf = function (constructor) {\r\n        return ECS.instance.scm.getComponentMaskOf(constructor);\r\n    };\r\n    ECS.removeEntityFromSystem = function (entity, system) {\r\n        ECS.instance.scm.removeEntity(entity, system);\r\n    };\r\n    ECS.getSystem = function (constructor) {\r\n        return ECS.instance.scm.get(constructor);\r\n    };\r\n    ECS.update = function (a1, a2, a3, a4, a5, a6, a7, a8, a9) {\r\n        ECS.instance.scm.update(a1, a2, a3, a4, a5, a6, a7, a8, a9);\r\n    };\r\n    /**\r\n     * Calls a specific method for all systems (e.g. update)\r\n     * @param functionName - name of the function to be called\r\n     */\r\n    ECS.callSystemMethod = function (functionName) {\r\n        ECS.instance.scm.callSystemMethod(functionName);\r\n    };\r\n    ECS.createComponentsFromDecorator = function (components) {\r\n        var comps = Object.create(null);\r\n        var component;\r\n        for (var _i = 0, components_1 = components; _i < components_1.length; _i++) {\r\n            var dec = components_1[_i];\r\n            component = new dec.component(dec.config);\r\n            comps[component.id] = component;\r\n        }\r\n        return comps;\r\n    };\r\n    ECS.Component = function (id) {\r\n        return function (constructor) {\r\n            var DecoratorComponent = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var component = new (constructor.bind.apply(constructor, [void 0].concat(args)))();\r\n                ECS.setPrototypeOf(component, Object.getPrototypeOf(this));\r\n                Component_1.injectComponent(component);\r\n                component.id = id || constructor.prototype.constructor.name;\r\n                return component;\r\n            };\r\n            DecoratorComponent.prototype = constructor.prototype;\r\n            return DecoratorComponent;\r\n        };\r\n    };\r\n    ECS.System = function () {\r\n        var components = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            components[_i] = arguments[_i];\r\n        }\r\n        return function (constructor) {\r\n            var DecoratorSystem = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var system = new (constructor.bind.apply(constructor, [void 0].concat(args)))();\r\n                ECS.setPrototypeOf(system, Object.getPrototypeOf(this));\r\n                System_1.injectSystem(system, ECS.instance.scm.systemUpdateMethods);\r\n                system.id = system.id || constructor.prototype.constructor.name;\r\n                ECS.instance.scm.updateBitmask(system, components);\r\n                return system;\r\n            };\r\n            DecoratorSystem.prototype = constructor.prototype;\r\n            return DecoratorSystem;\r\n        };\r\n    };\r\n    ECS.Entity = function () {\r\n        var components = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            components[_i] = arguments[_i];\r\n        }\r\n        return function (constructor) {\r\n            var DecoratorEntity = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var entity = new (constructor.bind.apply(constructor, [void 0].concat(args)))();\r\n                ECS.setPrototypeOf(entity, Object.getPrototypeOf(this));\r\n                Entity_1.injectEntity(entity);\r\n                ECS.instance.ecm.createEntity(entity, ECS.createComponentsFromDecorator(components));\r\n                return entity;\r\n            };\r\n            DecoratorEntity.prototype = constructor.prototype;\r\n            return DecoratorEntity;\r\n        };\r\n    };\r\n    Object.defineProperty(ECS, \"uuid\", {\r\n        get: function () {\r\n            return ECS.instance.ecm.uuid;\r\n        },\r\n        set: function (value) {\r\n            ECS.instance.ecm.uuid = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ECS, \"systemUpdateMethods\", {\r\n        get: function () {\r\n            return ECS.instance.scm.systemUpdateMethods;\r\n        },\r\n        set: function (methods) {\r\n            ECS.instance.scm.systemUpdateMethods = methods;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ECS, \"events\", {\r\n        get: function () {\r\n            return ECS.instance.events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ECS;\r\n}());\r\nexports.ECS = ECS;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ECS_1 = require(\"./ECS\");\r\nvar ENTITY_PROPERTIES = {\r\n    id: function () { return ECS_1.ECS.uuid(); },\r\n    components: function () { return Object.create(null); },\r\n    bitmask: function () { return 0; }\r\n};\r\nvar ENTITY_PROTOTYPE = {\r\n    get: function () { return Entity.prototype.get; },\r\n    getAll: function () { return Entity.prototype.getAll; },\r\n    has: function () { return Entity.prototype.has; },\r\n    add: function () { return Entity.prototype.add; },\r\n    remove: function () { return Entity.prototype.remove; },\r\n    dispose: function () { return Entity.prototype.dispose; },\r\n    destroy: function () { return Entity.prototype.destroy; }\r\n};\r\nexports.ENTITY_PROPERTY_DECORATOR = {};\r\nfunction injectEntity(entity) {\r\n    for (var propKey in ENTITY_PROPERTIES) {\r\n        if (entity[propKey] === undefined || entity[propKey] === null) {\r\n            entity[propKey] = ENTITY_PROPERTIES[propKey]();\r\n        }\r\n    }\r\n    for (var propKey in exports.ENTITY_PROPERTY_DECORATOR) {\r\n        if (entity[propKey] === undefined || entity[propKey] === null) {\r\n            exports.ENTITY_PROPERTY_DECORATOR[propKey](entity);\r\n        }\r\n    }\r\n    for (var protoKey in ENTITY_PROTOTYPE) {\r\n        if (entity.constructor && entity.constructor.prototype) {\r\n            if (entity.constructor.prototype[protoKey] === undefined || entity.constructor.prototype[protoKey] === null) {\r\n                entity.constructor.prototype[protoKey] = ENTITY_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n        else {\r\n            if (entity[protoKey] === undefined || entity[protoKey] === null) {\r\n                entity[protoKey] = ENTITY_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.injectEntity = injectEntity;\r\nvar Entity = /** @class */ (function () {\r\n    function Entity() {\r\n        this.id = ENTITY_PROPERTIES.id();\r\n        this.components = ENTITY_PROPERTIES.components();\r\n        this.bitmask = ENTITY_PROPERTIES.bitmask();\r\n    }\r\n    Entity.prototype.getAll = function () {\r\n        return this.components;\r\n    };\r\n    Entity.prototype.get = function (component) {\r\n        if (typeof component === 'string') {\r\n            return this.components[component];\r\n        }\r\n        return this.components[component.prototype.constructor.name];\r\n    };\r\n    Entity.prototype.has = function (component) {\r\n        if (typeof component === 'string') {\r\n            return !!this.components[component];\r\n        }\r\n        return !!this.components[component.prototype.constructor.name];\r\n    };\r\n    Entity.prototype.add = function (component) {\r\n        return ECS_1.ECS.addComponent(this, component);\r\n    };\r\n    Entity.prototype.remove = function (component) {\r\n        return ECS_1.ECS.removeComponent(this, component);\r\n    };\r\n    Entity.prototype.dispose = function () {\r\n        return ECS_1.ECS.removeEntity(this);\r\n    };\r\n    Entity.prototype.destroy = function (pool) {\r\n        return ECS_1.ECS.destroyEntity(this, pool);\r\n    };\r\n    return Entity;\r\n}());\r\nexports.Entity = Entity;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = require(\"./Component\");\r\nvar Entity_1 = require(\"./Entity\");\r\nvar UUIDGenerator_1 = require(\"./UUIDGenerator\");\r\nvar Events_1 = require(\"./Events\");\r\n/**\r\n * The EntityComponentManager stores and manages all Entities and their components\r\n * Entities itself are just empty objects with an id, the Manager maps those ids to the components\r\n * Its also responsible for adding and removing components from and entity or creating/removing entities\r\n * By default all Components are stored in an ObjectPool if no longer used instead of being destroyed/gc\r\n */\r\nvar EntityComponentManager = /** @class */ (function () {\r\n    function EntityComponentManager(componentBitmaskMap, events, uuid) {\r\n        if (uuid === void 0) { uuid = UUIDGenerator_1.UUIDGenerator.uuid; }\r\n        this._events = events;\r\n        this._uuid = uuid;\r\n        this.componentBitmask = componentBitmaskMap;\r\n        this._entities = Object.create(null);\r\n    }\r\n    /**\r\n     * Creates an Entity, adds it to the EntityComponentMap but not to the active entities or actual ECS,\r\n     * so if the entity is deleted/gc it will be removed from the WeakMap\r\n     * @param entity\r\n     * @param components\r\n     */\r\n    EntityComponentManager.prototype.createEntity = function (entity, components) {\r\n        if (!entity) {\r\n            entity = new Entity_1.Entity();\r\n        }\r\n        entity.components = components || Object.create(null);\r\n        entity.bitmask = 0;\r\n        this.updateComponentBitmask(entity);\r\n        return entity;\r\n    };\r\n    EntityComponentManager.prototype.updateComponentBitmask = function (entity) {\r\n        for (var key in entity.components) {\r\n            entity.bitmask = entity.bitmask | this.componentBitmask.get(entity.components[key].id);\r\n        }\r\n    };\r\n    /**\r\n     * Adds the Entity with the provided Components(or existing ones) to the ECS,\r\n     * @param entity - Entity to add to the ECS\r\n     * @param components - Components for the entity, if provided this will override the current components of the entity if any\r\n     * @param silent - dispatch the entityAdded signal(If added silent the entity wont be added to an system)\r\n     */\r\n    EntityComponentManager.prototype.addEntity = function (entity, components, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        Entity_1.injectEntity(entity);\r\n        this._entities[entity.id] = entity;\r\n        entity.components = components || entity.components || Object.create(null);\r\n        entity.bitmask = entity.bitmask || 0;\r\n        if (components) {\r\n            this.updateComponentBitmask(entity);\r\n        }\r\n        if (!silent) {\r\n            this._events.emit(Events_1.ECM_EVENTS.ENTITY_ADDED, entity);\r\n        }\r\n        return entity;\r\n    };\r\n    /**\r\n     * Return a list of entities with the specified components\r\n     * since we need to check all entities this can be quite slow\r\n     * @param components - list of components the entity needs to have\r\n     */\r\n    EntityComponentManager.prototype.getEntities = function () {\r\n        var components = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            components[_i] = arguments[_i];\r\n        }\r\n        var bitmask = 0;\r\n        for (var i = 0, component = void 0; component = components[i]; i++) {\r\n            bitmask = bitmask | this.componentBitmask.get(component);\r\n        }\r\n        var keys = Object.keys(this._entities);\r\n        var entities = [];\r\n        for (var i = 0, entity = void 0; entity = this._entities[keys[i]]; i++) {\r\n            if ((entity.bitmask & bitmask) === bitmask) {\r\n                entities.push(entity);\r\n            }\r\n        }\r\n        return entities;\r\n    };\r\n    /**\r\n     * destroys the entity removes it from the manager and deletes all of its components\r\n     * @param entity - entity to destroy\r\n     * @param silent - Dispatch onEntityDestroyed Signal(Removing the Entity from the Systems)\r\n     * @returns {boolean} - true if entity was destroyed from the ecs\r\n     */\r\n    EntityComponentManager.prototype.destroyEntity = function (entity, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (this._entities[entity.id]) {\r\n            for (var key in entity.components) {\r\n                this.removeComponent(entity, entity.components[key].id, true);\r\n            }\r\n            entity.bitmask = 0;\r\n            entity.components = Object.create(null);\r\n            if (!silent && this.hasEntity(entity)) {\r\n                this._events.emit(Events_1.ECM_EVENTS.ENTITY_DESTROYED, entity);\r\n            }\r\n            return delete this._entities[entity.id];\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * destroy all entities removing all of its components and remove them from the ecs\r\n     * @param pool - if all components and entities should be pooled\r\n     */\r\n    EntityComponentManager.prototype.destroyAllEntities = function (pool) {\r\n        var keys = Object.keys(this._entities);\r\n        for (var i = 0, entity = void 0; entity = this._entities[keys[i]]; i++) {\r\n            this.destroyEntity(entity, pool);\r\n        }\r\n    };\r\n    /**\r\n     * @param entity - Entity to remove\r\n     * @param silent - Dispatch onEntityRemoved Signal(Removing the Entity from the Systems)\r\n     * @returns {boolean} - true if entity got removed from the ecs\r\n     */\r\n    EntityComponentManager.prototype.removeEntity = function (entity, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (this._entities[entity.id]) {\r\n            if (!silent && this.hasEntity(entity)) {\r\n                this._events.emit(Events_1.ECM_EVENTS.ENTITY_REMOVED, entity);\r\n            }\r\n            delete this._entities[entity.id];\r\n            return entity;\r\n        }\r\n        return entity;\r\n    };\r\n    /**\r\n     * removes all Entities from the ecs\r\n     */\r\n    EntityComponentManager.prototype.removeAllEntities = function () {\r\n        var entities = [];\r\n        var keys = Object.keys(this._entities);\r\n        for (var i = 0, entity = void 0; entity = this._entities[keys[i]]; i++) {\r\n            entities.push(this.removeEntity(entity));\r\n        }\r\n        return entities;\r\n    };\r\n    /**\r\n     * Returns true if the entity is in the ECS\r\n     * @param entity\r\n     * @returns {boolean}\r\n     */\r\n    EntityComponentManager.prototype.hasEntity = function (entity) {\r\n        return !!this._entities[entity.id];\r\n    };\r\n    /**\r\n     * Adds a component to the Entity\r\n     * @param entity - Entity\r\n     * @param component - Component to add\r\n     * @param silent - If true this onComponentAdded signal is not dispatched and no system is updated\r\n     */\r\n    EntityComponentManager.prototype.addComponent = function (entity, component, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        Component_1.injectComponent(component);\r\n        entity.components[component.id] = component;\r\n        entity.bitmask = entity.bitmask | this.componentBitmask.get(component.id);\r\n        if (!silent && this.hasEntity(entity)) {\r\n            this._events.emit(Events_1.ECM_EVENTS.COMPONENT_ADDED, entity, component);\r\n        }\r\n    };\r\n    /**\r\n     * Removes a component from the Entity\r\n     * @param entity - Entity\r\n     * @param component - Component type to remove\r\n     * @param silent - If true the onComponentRemoved signal is not dispatched and no system will be updated\r\n     * @returns {boolean}\r\n     */\r\n    EntityComponentManager.prototype.removeComponent = function (entity, component, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        var comp;\r\n        if (typeof component === 'string') {\r\n            comp = entity.components[component];\r\n        }\r\n        else {\r\n            comp = entity.components[component.prototype.constructor.name];\r\n        }\r\n        if (comp) {\r\n            entity.bitmask = entity.bitmask ^ this.componentBitmask.get(comp.id);\r\n            if (!silent && this.hasEntity(entity)) {\r\n                this._events.emit(Events_1.ECM_EVENTS.COMPONENT_REMOVED, entity, comp);\r\n            }\r\n            comp.remove();\r\n            return delete entity.components[comp.id];\r\n        }\r\n        return false;\r\n    };\r\n    Object.defineProperty(EntityComponentManager.prototype, \"entities\", {\r\n        get: function () {\r\n            return this._entities;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(EntityComponentManager.prototype, \"uuid\", {\r\n        get: function () {\r\n            return this._uuid;\r\n        },\r\n        set: function (value) {\r\n            this._uuid = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(EntityComponentManager.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return EntityComponentManager;\r\n}());\r\nexports.EntityComponentManager = EntityComponentManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar System_1 = require(\"./System\");\r\nvar Events_1 = require(\"./Events\");\r\nvar EntitySystemManager = /** @class */ (function () {\r\n    function EntitySystemManager(componentBitmaskMap, events) {\r\n        this._events = events;\r\n        this._systemUpdateMethods = ['update'];\r\n        this.componentBitmask = componentBitmaskMap;\r\n        this.systems = Object.create(null);\r\n        this.ids = [];\r\n    }\r\n    /**\r\n     * update the system bitmask\r\n     * @param system\r\n     * @param componentMask\r\n     */\r\n    EntitySystemManager.prototype.updateBitmask = function (system, componentMask) {\r\n        if (componentMask === void 0) { componentMask = []; }\r\n        for (var i = 0, component = void 0; component = componentMask[i]; i++) {\r\n            system.bitmask = system.bitmask | this.componentBitmask.get(component);\r\n        }\r\n        return system;\r\n    };\r\n    /**\r\n     * Add the system to the ECS so its methods will be called by the update methods\r\n     * Before the existing entities get added into the system the init method is called\r\n     * @param system\r\n     * @param componentMask\r\n     * @param silent\r\n     */\r\n    EntitySystemManager.prototype.add = function (system, componentMask, silent) {\r\n        if (componentMask === void 0) { componentMask = []; }\r\n        if (silent === void 0) { silent = false; }\r\n        if (!this.has(system)) {\r\n            System_1.injectSystem(system, this.systemUpdateMethods);\r\n            this.systems[system.id] = system;\r\n            this.ids.push(system.id);\r\n            this.updateBitmask(system, componentMask);\r\n            system.setUp();\r\n            if (!silent) {\r\n                this._events.emit(Events_1.ESM_EVENTS.SYSTEM_ADDED, system);\r\n            }\r\n        }\r\n        else {\r\n            console.warn('System ' + system + ' already exists! And can only exists ones');\r\n        }\r\n        return system;\r\n    };\r\n    /**\r\n     * Checks if the system is in the ECS\r\n     * @param system\r\n     * @returns {boolean}\r\n     */\r\n    EntitySystemManager.prototype.has = function (system) {\r\n        return !!this.systems[system.id];\r\n    };\r\n    /**\r\n     * Checks if a system of the class exists in the ECS\r\n     * @param constructor\r\n     * @returns {boolean}\r\n     */\r\n    EntitySystemManager.prototype.hasOf = function (constructor) {\r\n        return !!this.systems[constructor.prototype.constructor.name];\r\n    };\r\n    /**\r\n     * Removes the system\r\n     * @param system\r\n     * @param silent\r\n     * @returns {boolean}\r\n     */\r\n    EntitySystemManager.prototype.remove = function (system, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (this.has(system)) {\r\n            if (!silent) {\r\n                this._events.emit(Events_1.ESM_EVENTS.SYSTEM_REMOVED, system);\r\n            }\r\n            system.tearDown();\r\n            this.ids.splice(this.ids.indexOf(system.id), 1);\r\n            return delete this.systems[system.id];\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Removes the System of the provided type from the ECS\r\n     * @param constructor\r\n     * @param silent\r\n     * @returns {boolean}\r\n     */\r\n    EntitySystemManager.prototype.removeOf = function (constructor, silent) {\r\n        return this.remove(this.get(constructor), silent);\r\n    };\r\n    /**\r\n     * Returns entities for the system of the type if it exists in the ECS\r\n     * @param constructor\r\n     * @returns {undefined|Map<string, IEntity>}\r\n     */\r\n    EntitySystemManager.prototype.getEntitiesOf = function (constructor) {\r\n        var system = this.get(constructor);\r\n        if (system) {\r\n            return system.entities;\r\n        }\r\n        return undefined;\r\n    };\r\n    EntitySystemManager.prototype.getComponentMaskOf = function (constructor) {\r\n        var system = this.get(constructor);\r\n        if (system) {\r\n            return system.bitmask;\r\n        }\r\n        return undefined;\r\n    };\r\n    EntitySystemManager.prototype.get = function (constructor) {\r\n        return this.systems[constructor.prototype.constructor.name];\r\n    };\r\n    /**\r\n     * Adds the entity to the system, or adds it to all Systems\r\n     * @param entity\r\n     * @param system - optional system to add the entity to\r\n     * @param silent\r\n     */\r\n    EntitySystemManager.prototype.addEntity = function (entity, system, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (system) {\r\n            if (system.bitmask !== 0 && (entity.bitmask & system.bitmask) === system.bitmask) {\r\n                system.entities.push(entity);\r\n                system.events.emit(Events_1.SYSTEM_EVENTS.ENTITY_ADDED, entity);\r\n            }\r\n        }\r\n        else {\r\n            var ids = this.ids;\r\n            var systems = this.systems;\r\n            for (var i = 0, system_1; system_1 = systems[ids[i]]; i++) {\r\n                if ((entity.bitmask & system_1.bitmask) === system_1.bitmask) {\r\n                    system_1.entities.push(entity);\r\n                    system_1.events.emit(Events_1.SYSTEM_EVENTS.ENTITY_ADDED, entity);\r\n                }\r\n            }\r\n        }\r\n        if (!silent && (!system || this.has(system))) {\r\n            this._events.emit(Events_1.ESM_EVENTS.ENTITY_ADDED_TO_SYSTEM, entity, system);\r\n        }\r\n    };\r\n    /**\r\n     * Removes an entity from the system or all systems\r\n     * @param entity\r\n     * @param system\r\n     * @param silent\r\n     */\r\n    EntitySystemManager.prototype.removeEntity = function (entity, system, silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        if (system) {\r\n            var idx = system.entities.indexOf(entity);\r\n            if (idx != -1) {\r\n                system.entities.splice(idx, 1);\r\n            }\r\n            system.events.emit(Events_1.SYSTEM_EVENTS.ENTITY_REMOVED, entity);\r\n        }\r\n        else {\r\n            var ids = this.ids;\r\n            var systems = this.systems;\r\n            var idx = -1;\r\n            for (var i = 0, system_2; system_2 = systems[ids[i]]; i++) {\r\n                idx = system_2.entities.indexOf(entity);\r\n                if (idx != -1) {\r\n                    system_2.entities.splice(idx, 1);\r\n                }\r\n                system_2.events.emit(Events_1.SYSTEM_EVENTS.ENTITY_REMOVED, entity);\r\n            }\r\n        }\r\n        if (!silent) {\r\n            this._events.emit(Events_1.ESM_EVENTS.ENTITY_REMOVED_FROM_SYSTEM, entity, system);\r\n        }\r\n    };\r\n    /**\r\n     * Updates the Entity adds it to the right systems and removes it from systems if it does not fit anymore\r\n     * @param entity\r\n     * @param system - optional only update for for the given system(ether add or remove the entity from the system)\r\n     */\r\n    EntitySystemManager.prototype.updateEntity = function (entity, system) {\r\n        if (system) {\r\n            this.addEntityToSystem(system, entity);\r\n        }\r\n        else {\r\n            var ids = this.ids;\r\n            var systems = this.systems;\r\n            for (var i = 0, system_3; system_3 = systems[ids[i]]; i++) {\r\n                this.addEntityToSystem(system_3, entity);\r\n            }\r\n        }\r\n    };\r\n    EntitySystemManager.prototype.addEntityToSystem = function (system, entity) {\r\n        if ((entity.bitmask & system.bitmask) === system.bitmask) {\r\n            if (!system.has(entity)) {\r\n                this.addEntity(entity, system);\r\n            }\r\n        }\r\n        else if (system.has(entity)) {\r\n            this.removeEntity(entity, system);\r\n        }\r\n    };\r\n    /**\r\n     * Calls the Method for all Systems and Subsystems\r\n     */\r\n    EntitySystemManager.prototype.callSystemMethod = function (id, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\r\n        var ids = this.ids;\r\n        var systems = this.systems;\r\n        for (var i = 0, system = void 0; system = systems[ids[i]]; i++) {\r\n            system[id](a1, a2, a3, a4, a5, a6, a7, a8, a9);\r\n        }\r\n    };\r\n    /**\r\n     * Calls all system update methods for all system and child systems\r\n     */\r\n    EntitySystemManager.prototype.update = function (a1, a2, a3, a4, a5, a6, a7, a8, a9) {\r\n        for (var i = 0, method = void 0; method = this._systemUpdateMethods[i]; i++) {\r\n            this.callSystemMethod(method, a1, a2, a3, a4, a5, a6, a7, a8, a9);\r\n        }\r\n    };\r\n    /**\r\n     * Injects the SystemMethods into all systems if the methods does not exist a noop method will be added\r\n     */\r\n    EntitySystemManager.prototype.updateSystemMethods = function () {\r\n        var ids = this.ids;\r\n        var systems = this.systems;\r\n        var methods = this.systemUpdateMethods;\r\n        for (var i = 0, system = void 0; system = systems[ids[i]]; i++) {\r\n            System_1.injectSystem(system, methods);\r\n        }\r\n    };\r\n    Object.defineProperty(EntitySystemManager.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(EntitySystemManager.prototype, \"systemUpdateMethods\", {\r\n        get: function () {\r\n            return this._systemUpdateMethods;\r\n        },\r\n        set: function (value) {\r\n            this._systemUpdateMethods = value;\r\n            this.updateSystemMethods();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return EntitySystemManager;\r\n}());\r\nexports.EntitySystemManager = EntitySystemManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ESM_EVENTS;\r\n(function (ESM_EVENTS) {\r\n    ESM_EVENTS[\"SYSTEM_ADDED\"] = \"entitySystemManager.systemAdded\";\r\n    ESM_EVENTS[\"SYSTEM_REMOVED\"] = \"entitySystemManager.systemRemoved\";\r\n    ESM_EVENTS[\"ENTITY_ADDED_TO_SYSTEM\"] = \"entitySystemManager.entityAddedToSystem\";\r\n    ESM_EVENTS[\"ENTITY_REMOVED_FROM_SYSTEM\"] = \"entitySystemManager.entityRemovedFromSystem\";\r\n})(ESM_EVENTS = exports.ESM_EVENTS || (exports.ESM_EVENTS = {}));\r\nvar SYSTEM_EVENTS;\r\n(function (SYSTEM_EVENTS) {\r\n    SYSTEM_EVENTS[\"ENTITY_ADDED\"] = \"system.entityAdded\";\r\n    SYSTEM_EVENTS[\"ENTITY_REMOVED\"] = \"system.entityRemoved\";\r\n})(SYSTEM_EVENTS = exports.SYSTEM_EVENTS || (exports.SYSTEM_EVENTS = {}));\r\nvar ECM_EVENTS;\r\n(function (ECM_EVENTS) {\r\n    ECM_EVENTS[\"ENTITY_ADDED\"] = \"entityComponentManager.entityAdded\";\r\n    ECM_EVENTS[\"ENTITY_REMOVED\"] = \"entityComponentManager.entityRemoved\";\r\n    ECM_EVENTS[\"ENTITY_DESTROYED\"] = \"entityComponentManager.entityDestroyed\";\r\n    ECM_EVENTS[\"COMPONENT_ADDED\"] = \"entityComponentManager.componentAdded\";\r\n    ECM_EVENTS[\"COMPONENT_REMOVED\"] = \"entityComponentManager.componentRemoved\";\r\n})(ECM_EVENTS = exports.ECM_EVENTS || (exports.ECM_EVENTS = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ECS_1 = require(\"./ECS\");\r\nvar InjectorService = /** @class */ (function () {\r\n    function InjectorService() {\r\n    }\r\n    Object.defineProperty(InjectorService, \"instance\", {\r\n        get: function () {\r\n            if (InjectorService._instance) {\r\n                return InjectorService._instance;\r\n            }\r\n            return InjectorService._instance = new InjectorService();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Injects an existing system into the class\r\n     * @param {{new(config?: {[p: string]: any}) => T}} system\r\n     * @returns {(target: Object, propKey: (number | string)) => void}\r\n     * @constructor\r\n     */\r\n    InjectorService.prototype.System = function (systems) {\r\n        return function (constructor) {\r\n            var wrapper = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                return new (constructor.bind.apply(constructor, [void 0].concat(args)))();\r\n            };\r\n            var DecoratorInjector = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var object = wrapper.apply(this, args);\r\n                ECS_1.ECS.setPrototypeOf(object, Object.getPrototypeOf(this));\r\n                var keys = Object.keys(systems);\r\n                for (var i = 0, system = void 0; system = systems[keys[i]]; i++) {\r\n                    object[keys[i]] = ECS_1.ECS.getSystem(system);\r\n                }\r\n                return object;\r\n            };\r\n            DecoratorInjector.prototype = constructor.prototype;\r\n            return DecoratorInjector;\r\n        };\r\n    };\r\n    return InjectorService;\r\n}());\r\nexports.InjectorService = InjectorService;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ECS_1 = require(\"./ECS\");\r\nvar EventEmitter = require(\"eventemitter3\");\r\nexports.SYSTEM_PROTOTYPE = {\r\n    setUp: function () { return ECS_1.ECS.noop; },\r\n    tearDown: function () { return ECS_1.ECS.noop; },\r\n    has: function () { return System.prototype.has; },\r\n    remove: function () { return System.prototype.remove; },\r\n    dispose: function () { return System.prototype.dispose; }\r\n};\r\nexports.SYSTEM_PROPERTIES = {\r\n    bitmask: function () { return 0; },\r\n    entities: function () { return []; },\r\n    events: function () { return new EventEmitter(); }\r\n};\r\nexports.SYSTEM_PROPERTY_DECORATOR = {};\r\nfunction injectSystem(system, updateMethods) {\r\n    for (var propKey in exports.SYSTEM_PROPERTIES) {\r\n        if (system[propKey] === undefined || system[propKey] === null) {\r\n            system[propKey] = exports.SYSTEM_PROPERTIES[propKey]();\r\n        }\r\n    }\r\n    for (var propKey in exports.SYSTEM_PROPERTY_DECORATOR) {\r\n        if (system[propKey] === undefined || system[propKey] === null) {\r\n            exports.SYSTEM_PROPERTY_DECORATOR[propKey](system);\r\n        }\r\n    }\r\n    for (var protoKey in exports.SYSTEM_PROTOTYPE) {\r\n        if (system.constructor && system.constructor.prototype) {\r\n            if (system.constructor.prototype[protoKey] === undefined || system.constructor.prototype[protoKey] === null) {\r\n                system.constructor.prototype[protoKey] = exports.SYSTEM_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n        else {\r\n            if (system[protoKey] === undefined || system[protoKey] === null) {\r\n                system[protoKey] = exports.SYSTEM_PROTOTYPE[protoKey]();\r\n            }\r\n        }\r\n    }\r\n    for (var i = 0, protoKey = void 0; protoKey = updateMethods[i]; i++) {\r\n        if (system.constructor && system.constructor.prototype) {\r\n            if (system.constructor.prototype[protoKey] === undefined || system.constructor.prototype[protoKey] === null) {\r\n                system.constructor.prototype[protoKey] = ECS_1.ECS.noop;\r\n            }\r\n        }\r\n        else {\r\n            if (system[protoKey] === undefined || system[protoKey] === null) {\r\n                system[protoKey] = ECS_1.ECS.noop;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.injectSystem = injectSystem;\r\nvar System = /** @class */ (function () {\r\n    function System() {\r\n        this.bitmask = exports.SYSTEM_PROPERTIES.bitmask();\r\n        this.entities = exports.SYSTEM_PROPERTIES.entities();\r\n        this.events = exports.SYSTEM_PROPERTIES.events();\r\n    }\r\n    System.prototype.has = function (entity) {\r\n        return this.entities.indexOf(entity) !== -1;\r\n    };\r\n    System.prototype.remove = function (entity, fromECS, destroy) {\r\n        if (fromECS === void 0) { fromECS = true; }\r\n        if (fromECS) {\r\n            if (destroy) {\r\n                ECS_1.ECS.destroyEntity(entity, true);\r\n            }\r\n            else {\r\n                ECS_1.ECS.removeEntity(entity);\r\n            }\r\n        }\r\n        ECS_1.ECS.removeEntityFromSystem(entity, this);\r\n    };\r\n    System.prototype.dispose = function () {\r\n        ECS_1.ECS.removeSystem(this);\r\n    };\r\n    return System;\r\n}());\r\nexports.System = System;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UUIDGenerator = {\r\n    uuid: function () { return (\"\" + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/1|0/g, function () { return (0 | Math.random() * 16).toString(16); }); }\r\n};\r\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./Component\"));\r\n__export(require(\"./ECS\"));\r\n__export(require(\"./Entity\"));\r\n__export(require(\"./EntityComponentManager\"));\r\n__export(require(\"./EntitySystemManager\"));\r\n__export(require(\"./InjectorService\"));\r\n__export(require(\"./System\"));\r\n__export(require(\"./UUIDGenerator\"));\r\n","function _noop() { }\r\nvar AsyncWorkerQueue = /** @class */ (function () {\r\n    function AsyncWorkerQueue(concurrency) {\r\n        this.concurrency = concurrency;\r\n        this.paused = false;\r\n        this.processes = 0;\r\n        this.workers = [];\r\n        this.tasks = [];\r\n    }\r\n    AsyncWorkerQueue.prototype.process = function (finishCb) {\r\n        var _this = this;\r\n        this.finishCb = finishCb || _noop;\r\n        var _loop_1 = function () {\r\n            var task = this_1.tasks.shift();\r\n            this_1.processes++;\r\n            task.listener.apply(task.listenerContext, [function () { return _this.next(task); }]);\r\n            task.process.apply(task.processContext, task.args);\r\n        };\r\n        var this_1 = this;\r\n        while (!this.paused && this.processes < this.concurrency && this.length) {\r\n            _loop_1();\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.enqueue = function (worker) {\r\n        if (!worker.tasks || worker.tasks.length === 0) {\r\n            throw \"Worker needs to have at least one task\";\r\n        }\r\n        worker.count = worker.count || 0;\r\n        worker.onWorkFinished = worker.onWorkFinished || _noop;\r\n        this.workers.push(worker);\r\n        for (var i = 0, task = void 0; task = worker.tasks[i]; i++) {\r\n            task.worker = worker;\r\n            task.completed = task.completed || false;\r\n            this.tasks.push(task);\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.dequeue = function () {\r\n        var workers = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            workers[_i] = arguments[_i];\r\n        }\r\n        for (var i = 0, worker = void 0; worker = workers[i]; i++) {\r\n            var index = this.workers.indexOf(worker);\r\n            if (index != -1) {\r\n                for (var k = 0, task = void 0; task = worker.tasks[k]; k++) {\r\n                    var taskIndex = this.tasks.indexOf(task);\r\n                    if (taskIndex != -1) {\r\n                        this.tasks.splice(taskIndex, 1);\r\n                    }\r\n                }\r\n                this.workers.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.idle = function () {\r\n        return this.length + this.processes + this.workers.length === 0;\r\n    };\r\n    AsyncWorkerQueue.prototype.next = function (task) {\r\n        //Completed the task\r\n        this.processes--;\r\n        task.completed = true;\r\n        //Check if all tasks of the Worker have been completed\r\n        this.workerFinished(task.worker);\r\n        this.onQueueFinished();\r\n        this.process(this.finishCb);\r\n    };\r\n    /**\r\n     * If all tasks of the worker have been completed we can call its onWorkFinished callback\r\n     * and remove the worker from the queue\r\n     * @param worker\r\n     */\r\n    AsyncWorkerQueue.prototype.workerFinished = function (worker) {\r\n        worker.count += 1;\r\n        var index = this.workers.indexOf(worker);\r\n        if (worker.count === worker.tasks.length && index != -1) {\r\n            var resources = worker.tasks.map(function (task) { return task.resource; });\r\n            worker.onWorkFinished.apply(worker.onWorkFinishedContext, resources);\r\n            this.workers.splice(index, 1);\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.onQueueFinished = function () {\r\n        if (this.idle()) {\r\n            this.finishCb();\r\n        }\r\n    };\r\n    AsyncWorkerQueue.prototype.abort = function () {\r\n        for (var i = 0, worker = void 0; worker = this.workers[i]; i++) {\r\n            for (var j = 0, task = void 0; task = worker.tasks[j]; j++) {\r\n                task.resource.abort();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Stop processing of further tasks and clear worker cb\r\n     */\r\n    AsyncWorkerQueue.prototype.stop = function () {\r\n        this.finishCb = _noop;\r\n        this.abort();\r\n        this.workers.length = 0;\r\n        this.tasks.length = 0;\r\n        this.processes = 0;\r\n    };\r\n    AsyncWorkerQueue.prototype.pause = function () {\r\n        this.paused = true;\r\n    };\r\n    AsyncWorkerQueue.prototype.resume = function () {\r\n        if (this.paused === false) {\r\n            return;\r\n        }\r\n        this.paused = false;\r\n        this.process();\r\n    };\r\n    Object.defineProperty(AsyncWorkerQueue.prototype, \"length\", {\r\n        get: function () {\r\n            return this.tasks.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AsyncWorkerQueue.prototype, \"running\", {\r\n        get: function () {\r\n            return !!this.processes;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AsyncWorkerQueue;\r\n}());\r\nexport { AsyncWorkerQueue };\r\n","var EmitSignal = /** @class */ (function () {\r\n    function EmitSignal(emitter, type) {\r\n        this._type = type;\r\n        this._emitter = emitter;\r\n    }\r\n    EmitSignal.prototype.emit = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _a;\r\n        return (_a = this._emitter).emit.apply(_a, [this._type].concat(args));\r\n    };\r\n    /**\r\n     * function alias for emit\r\n     * @param args\r\n     */\r\n    EmitSignal.prototype.dispatch = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return this.emit.apply(this, args);\r\n    };\r\n    EmitSignal.prototype.on = function (fn, context) {\r\n        this._emitter.on(this._type, fn, context);\r\n        return this;\r\n    };\r\n    /**\r\n     * alias for on\r\n     * @param fn - EventFunction\r\n     * @param context - context to call the function with\r\n     */\r\n    EmitSignal.prototype.add = function (fn, context) {\r\n        return this.on(fn, context);\r\n    };\r\n    EmitSignal.prototype.once = function (fn, context) {\r\n        this._emitter.once(this._type, fn, context);\r\n        return this;\r\n    };\r\n    /**\r\n     * alias for once\r\n     * @param fn\r\n     * @param context\r\n     */\r\n    EmitSignal.prototype.addOnce = function (fn, context) {\r\n        return this.once(fn, context);\r\n    };\r\n    EmitSignal.prototype.removeAllListeners = function () {\r\n        this._emitter.removeAllListeners(this._type);\r\n        return this;\r\n    };\r\n    EmitSignal.prototype.removeListener = function (fn, context, once) {\r\n        this._emitter.removeListener(this._type, fn, context, once);\r\n        return this;\r\n    };\r\n    Object.defineProperty(EmitSignal.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(EmitSignal.prototype, \"emitter\", {\r\n        get: function () {\r\n            return this._emitter;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return EmitSignal;\r\n}());\r\nexport { EmitSignal };\r\n","var _this = this;\r\nimport { Resource } from \"./Resource\";\r\nimport * as EventEmitter from \"eventemitter3\";\r\nimport { EmitSignal } from \"./EmitSignal\";\r\nexport var RESOURCE_LOADER_EVENTS;\r\n(function (RESOURCE_LOADER_EVENTS) {\r\n    RESOURCE_LOADER_EVENTS[\"LOAD_COMPLETE\"] = \"LOAD_COMPLETE\";\r\n})(RESOURCE_LOADER_EVENTS || (RESOURCE_LOADER_EVENTS = {}));\r\nvar RESOURCE_LOADER_PROPERTIES = {\r\n    _emitter: function () { return new EventEmitter(); },\r\n    onLoad: function () { return new EmitSignal(_this._emitter, RESOURCE_LOADER_EVENTS.LOAD_COMPLETE); },\r\n};\r\nvar RESOURCE_LOADER_PROTOTYPE = {\r\n    transform: function () { return Middleware.prototype.transform; },\r\n    add: function () { return Middleware.prototype.add; },\r\n    addResourceToQueue: function () { return Middleware.prototype.addResourceToQueue; },\r\n    _queueCallback: function () { return Middleware.prototype._queueCallback; }\r\n};\r\nvar Middleware = /** @class */ (function () {\r\n    function Middleware(type) {\r\n        this._emitter = new EventEmitter();\r\n        this.onLoad = new EmitSignal(this._emitter, RESOURCE_LOADER_EVENTS.LOAD_COMPLETE);\r\n        this.type = type;\r\n    }\r\n    Middleware.inject = function (middleware) {\r\n        for (var propKey in RESOURCE_LOADER_PROPERTIES) {\r\n            if (middleware[propKey] === undefined || middleware[propKey] === null) {\r\n                middleware[propKey] = RESOURCE_LOADER_PROPERTIES[propKey]();\r\n            }\r\n        }\r\n        for (var protoKey in RESOURCE_LOADER_PROTOTYPE) {\r\n            if (middleware.constructor && middleware.constructor.prototype) {\r\n                if (middleware.constructor.prototype[protoKey] === undefined || middleware.constructor.prototype[protoKey] === null) {\r\n                    middleware.constructor.prototype[protoKey] = RESOURCE_LOADER_PROTOTYPE[protoKey]();\r\n                }\r\n            }\r\n            else {\r\n                if (middleware[protoKey] === undefined || middleware[protoKey] === null) {\r\n                    middleware[protoKey] = RESOURCE_LOADER_PROTOTYPE[protoKey]();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Middleware.prototype.add = function (url) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        this.addResourceToQueue({\r\n            resources: [{\r\n                    resource: new Resource(url),\r\n                    args: args.slice()\r\n                }]\r\n        });\r\n        return this;\r\n    };\r\n    Middleware.prototype.addResourceToQueue = function (config) {\r\n        var _this = this;\r\n        this._loader._addResourceToQueue({\r\n            resources: config.resources,\r\n            onResourcesLoaded: function () {\r\n                var resources = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    resources[_i] = arguments[_i];\r\n                }\r\n                return _this._queueCallback.apply(_this, [config.key, _this.type].concat(resources));\r\n            },\r\n            onResourcesLoadedContext: this\r\n        });\r\n        return this;\r\n    };\r\n    Middleware.prototype._queueCallback = function (key, type) {\r\n        var resources = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            resources[_i - 2] = arguments[_i];\r\n        }\r\n        var data = this.transform.apply(this, resources);\r\n        this.onLoad.emit({ key: key, type: type, data: data });\r\n    };\r\n    /**\r\n     * transform is called after the Middleware has finished processing the Resources\r\n     * that have been added to the LoadQueue of the loader\r\n     * its used to further transform the loaded data, e.g. if u have 2 files json and binary etc.\r\n     * @param resources {Resource[]} - the resources that have finished loading\r\n     */\r\n    Middleware.prototype.transform = function () {\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        return resources.map(function (resource) { return resource.request; });\r\n    };\r\n    return Middleware;\r\n}());\r\nexport { Middleware };\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport * as EventEmitter from \"eventemitter3\";\r\nimport { EmitSignal } from \"./EmitSignal\";\r\nexport var RESOURCE_EVENT;\r\n(function (RESOURCE_EVENT) {\r\n    RESOURCE_EVENT[\"PROGRESS\"] = \"resource_event_progress\";\r\n    RESOURCE_EVENT[\"LOAD_START\"] = \"resource_event_loadStart\";\r\n    RESOURCE_EVENT[\"LOAD_COMPLETE\"] = \"resource_event_load\";\r\n    RESOURCE_EVENT[\"ERROR\"] = \"resource_event_error\";\r\n    RESOURCE_EVENT[\"ABORT\"] = \"resource_event_abort\";\r\n    RESOURCE_EVENT[\"TIMEOUT\"] = \"resource_event_timeout\";\r\n})(RESOURCE_EVENT || (RESOURCE_EVENT = {}));\r\nexport var LOAD_TYPE;\r\n(function (LOAD_TYPE) {\r\n    LOAD_TYPE[\"XHR\"] = \"xhr\";\r\n    LOAD_TYPE[\"IMAGE\"] = \"image\";\r\n})(LOAD_TYPE || (LOAD_TYPE = {}));\r\nvar Resource = /** @class */ (function () {\r\n    function Resource(options, config) {\r\n        this.config = config || Object.create(null);\r\n        if (typeof options === 'string') {\r\n            this.options = {\r\n                url: options,\r\n                loadType: LOAD_TYPE.XHR,\r\n                responseType: ''\r\n            };\r\n        }\r\n        else {\r\n            this.options = __assign({}, options, { url: options.url, loadType: options.loadType || LOAD_TYPE.XHR, responseType: options.responseType || '' });\r\n        }\r\n        this._emitter = new EventEmitter();\r\n        this.onProgress = new EmitSignal(this._emitter, RESOURCE_EVENT.PROGRESS);\r\n        this.onLoadStart = new EmitSignal(this._emitter, RESOURCE_EVENT.LOAD_START);\r\n        this.onLoadFinished = new EmitSignal(this._emitter, RESOURCE_EVENT.LOAD_COMPLETE);\r\n        this.onError = new EmitSignal(this._emitter, RESOURCE_EVENT.ERROR);\r\n        this.onAbort = new EmitSignal(this._emitter, RESOURCE_EVENT.ABORT);\r\n        this.onTimeout = new EmitSignal(this._emitter, RESOURCE_EVENT.TIMEOUT);\r\n    }\r\n    /**\r\n     * Create a XMLHttpRequest and start loading the Resource\r\n     * @param options - { url: string, timeout?: number, asnyc?: boolean, responseType?: string;}\r\n     * @param args - will be emitted with loadstart and load events\r\n     */\r\n    Resource.prototype.loadXhr = function (options) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var request = new XMLHttpRequest();\r\n        request.timeout = options.timeout;\r\n        request.responseType = options.responseType || 'text';\r\n        request.open('GET', options.url, options.async === undefined ? true : !!options.async);\r\n        request.addEventListener('progress', function (event) { return _this.onProgress.emit(event, request); }, { once: true });\r\n        request.addEventListener('loadstart', function (event) {\r\n            var _a;\r\n            return (_a = _this.onLoadStart).emit.apply(_a, [event, request].concat(args));\r\n        }, { once: true });\r\n        request.addEventListener('load', function (event) { return _this.onLoadFinished.emit(_this); }, { once: true });\r\n        request.addEventListener('error', function (event) { return _this.onError.emit(event, request); }, { once: true });\r\n        request.addEventListener('abort', function (event) { return _this.onAbort.emit(event, request); }, { once: true });\r\n        request.addEventListener('timeout', function (event) { return _this.onTimeout.emit(event, request); }, { once: true });\r\n        request.send();\r\n        return request;\r\n    };\r\n    /**\r\n     * Create a HTMLImageElement and start loading the Resource\r\n     * @param options - { url: string, width?: number, height?: number }\r\n     * @param args - will be emitted with loadstart and load events\r\n     */\r\n    Resource.prototype.loadImage = function (options) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var image = new Image(options.width, options.height);\r\n        if (!image) {\r\n            console.error('Failed to create Image Object');\r\n            this.onError.emit(event, image);\r\n            return image;\r\n        }\r\n        image.addEventListener('progress', function (event) { return _this.onProgress.emit(event, image); }, { once: true });\r\n        image.addEventListener('loadstart', function (event) {\r\n            var _a;\r\n            return (_a = _this.onLoadStart).emit.apply(_a, [event, image].concat(args));\r\n        }, { once: true });\r\n        image.addEventListener('load', function (event) { return _this.onLoadFinished.emit(_this); }, { once: true });\r\n        image.addEventListener('error', function (event) { return _this.onError.emit(event, image); }, { once: true });\r\n        image.addEventListener('abort', function (event) { return _this.onAbort.emit(event, image); }, { once: true });\r\n        image.crossOrigin = this._determineCrossOrigin(options.url);\r\n        image.src = options.url;\r\n        return image;\r\n    };\r\n    Resource.prototype._determineCrossOrigin = function (url) {\r\n        // data: and javascript: urls are considered same-origin\r\n        if (url.indexOf('data:') === 0) {\r\n            return '';\r\n        }\r\n        // A sandboxed iframe without the 'allow-same-origin' attribute will have a special\r\n        // origin designed not to match window.location.origin, and will always require\r\n        // crossOrigin requests regardless of whether the location matches.\r\n        if (window.origin !== window.location.origin) {\r\n            return 'anonymous';\r\n        }\r\n        // default is window.location\r\n        var loc = window.location;\r\n        if (!Resource.tempAnchor) {\r\n            Resource.tempAnchor = document.createElement('a');\r\n        }\r\n        // let the browser determine the full href for the url of this resource and then\r\n        // use the properties of the anchor element, cause fuck IE9\r\n        Resource.tempAnchor.href = url;\r\n        var samePort = (!Resource.tempAnchor.port && loc.port === '') || (Resource.tempAnchor.port === loc.port);\r\n        var protocol = Resource.tempAnchor.protocol ? Resource.tempAnchor.protocol + \":\" : '';\r\n        // if cross origin\r\n        if (Resource.tempAnchor.host !== loc.hostname || !samePort || protocol !== loc.protocol) {\r\n            return 'anonymous';\r\n        }\r\n        return '';\r\n    };\r\n    /**\r\n     * Called by the _loader to start loading the Resource\r\n     * @param options - load options for the resource or the url\r\n     * @param args\r\n     * @returns {LoadComponent}\r\n     */\r\n    Resource.prototype.load = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        switch (this.options.loadType) {\r\n            case LOAD_TYPE.IMAGE:\r\n                this.request = this.loadImage.apply(this, [this.options].concat(args));\r\n                return this;\r\n            case LOAD_TYPE.XHR:\r\n                this.request = this.loadXhr.apply(this, [this.options].concat(args));\r\n                return this;\r\n        }\r\n        return this;\r\n    };\r\n    Resource.prototype.abort = function () {\r\n        if (this.request instanceof XMLHttpRequest) {\r\n            this.request.abort();\r\n        }\r\n        else if (this.request instanceof HTMLImageElement) {\r\n            this.request.src = \"\";\r\n        }\r\n        return this;\r\n    };\r\n    return Resource;\r\n}());\r\nexport { Resource };\r\n","import { Middleware } from \"./Middleware\";\r\nimport { AsyncWorkerQueue } from \"./AsyncWorkerQueue\";\r\nimport { EmitSignal } from \"./EmitSignal\";\r\nimport * as EventEmitter from \"eventemitter3\";\r\nexport var LOADER_EVENTS;\r\n(function (LOADER_EVENTS) {\r\n    LOADER_EVENTS[\"PRE\"] = \"PRE\";\r\n    LOADER_EVENTS[\"AFTER\"] = \"AFTER\";\r\n    LOADER_EVENTS[\"PROGRESS\"] = \"PROGRESS\";\r\n    LOADER_EVENTS[\"LOAD_START\"] = \"LOAD_START\";\r\n    LOADER_EVENTS[\"LOAD_COMPLETE\"] = \"LOAD_COMPLETE\";\r\n    LOADER_EVENTS[\"LOADER_FINISHED\"] = \"LOADER_FINISHED\";\r\n    LOADER_EVENTS[\"ERROR\"] = \"ERROR\";\r\n})(LOADER_EVENTS || (LOADER_EVENTS = {}));\r\nvar ResourceLoader = /** @class */ (function () {\r\n    function ResourceLoader(concurrency) {\r\n        if (concurrency === void 0) { concurrency = 10; }\r\n        this._emitter = new EventEmitter();\r\n        this.middleware = Object.create(null);\r\n        this.resourceQueue = new AsyncWorkerQueue(concurrency);\r\n        this._preSignal = new EmitSignal(this._emitter, LOADER_EVENTS.PRE);\r\n        this._afterSignal = new EmitSignal(this._emitter, LOADER_EVENTS.AFTER);\r\n        this.onProgress = new EmitSignal(this._emitter, LOADER_EVENTS.PROGRESS);\r\n        this.onLoadStart = new EmitSignal(this._emitter, LOADER_EVENTS.LOAD_START);\r\n        this.onLoadComplete = new EmitSignal(this._emitter, LOADER_EVENTS.LOAD_COMPLETE);\r\n        this.onError = new EmitSignal(this._emitter, LOADER_EVENTS.ERROR);\r\n        this.onComplete = new EmitSignal(this._emitter, LOADER_EVENTS.LOADER_FINISHED);\r\n    }\r\n    ResourceLoader.prototype._callAfter = function (data) {\r\n        this.onLoadComplete.emit(data);\r\n        this._afterSignal.emit(data);\r\n    };\r\n    /**\r\n     * get a LoadComponent\r\n     * @param {string | {new(...args): T}} id\r\n     * @returns {T}\r\n     */\r\n    ResourceLoader.prototype.get = function (id) {\r\n        if (id && typeof id === \"string\") {\r\n            return this.middleware[id];\r\n        }\r\n        else if (id && typeof id !== \"string\") {\r\n            return this.middleware[id.prototype.constructor.name];\r\n        }\r\n        return undefined;\r\n    };\r\n    /**\r\n     * Add a new Middleware e.g. to load Models from OBJ,GLTF file or to load Textures, Audio etc\r\n     * @param {Middleware} middleware\r\n     * @param {string | {new(...args): T}} id\r\n     * @returns {T}\r\n     */\r\n    ResourceLoader.prototype.addMiddleware = function (middleware, id) {\r\n        Middleware.inject(middleware);\r\n        middleware._loader = this;\r\n        if (id && typeof id === \"string\") {\r\n            this.middleware[id] = middleware;\r\n        }\r\n        else if (id && typeof id !== \"string\") {\r\n            this.middleware[id.prototype.constructor.name] = middleware;\r\n        }\r\n        middleware.onLoad.on(this._callAfter, this);\r\n        return middleware;\r\n    };\r\n    /**\r\n     * Remove a Middleware from the ResourceLoader\r\n     * @param {string | {new(...args): T}} id\r\n     */\r\n    ResourceLoader.prototype.removeMiddleware = function (id) {\r\n        if (id && typeof id === \"string\") {\r\n            delete this.middleware[id];\r\n        }\r\n        else if (id && typeof id !== \"string\") {\r\n            delete this.middleware[id.prototype.constructor.name];\r\n        }\r\n    };\r\n    ResourceLoader.prototype._onResourceLoadStart = function (value) {\r\n        this._preSignal.emit(value.resource);\r\n        this.onLoadStart.emit(value.resource);\r\n    };\r\n    ResourceLoader.prototype._addResourceToQueue = function (config) {\r\n        var _this = this;\r\n        config.resources.forEach(function (value) {\r\n            value.resource.onProgress.on(function (event) { return _this.onProgress.emit(event); });\r\n            value.resource.onError.on(function (event) { return _this.onError.emit(event); });\r\n            value.resource.onLoadStart.on(function () { return _this._onResourceLoadStart(value); });\r\n        });\r\n        this.resourceQueue.enqueue({\r\n            tasks: config.resources.map(function (value) {\r\n                return {\r\n                    resource: value.resource,\r\n                    process: value.resource.load,\r\n                    processContext: value.resource,\r\n                    listener: value.resource.onLoadFinished.once,\r\n                    listenerContext: value.resource.onLoadFinished,\r\n                    args: value.args\r\n                };\r\n            }),\r\n            onWorkFinished: config.onResourcesLoaded,\r\n            onWorkFinishedContext: config.onResourcesLoadedContext\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * cb to call before a resource starts loading\r\n     * cb is removed after the ResourceLoader has finished loading the resources\r\n     * @param cb\r\n     */\r\n    ResourceLoader.prototype.pre = function (cb) {\r\n        this._preSignal.on(cb);\r\n        return this;\r\n    };\r\n    /**\r\n     * cb to call after a Middleware has finished loading and transformed a resource\r\n     * cb is removed after the ResourceLoader has finished loading the resources\r\n     * @param cb\r\n     */\r\n    ResourceLoader.prototype.after = function (cb) {\r\n        this._afterSignal.on(cb);\r\n        return this;\r\n    };\r\n    ResourceLoader.prototype._onLoadComplete = function () {\r\n        this._preSignal.removeAllListeners();\r\n        this._afterSignal.removeAllListeners();\r\n        this.onComplete.emit(this);\r\n    };\r\n    ResourceLoader.prototype.load = function (finishCb) {\r\n        var _this = this;\r\n        if (finishCb && typeof finishCb === 'function') {\r\n            this.onComplete.once(finishCb);\r\n        }\r\n        this.resourceQueue.process(function () { return _this._onLoadComplete(); });\r\n        return this;\r\n    };\r\n    ResourceLoader.prototype.stop = function () {\r\n        this.resourceQueue.stop();\r\n    };\r\n    ResourceLoader.prototype.pause = function () {\r\n        this.resourceQueue.pause();\r\n    };\r\n    ResourceLoader.prototype.resume = function () {\r\n        this.resourceQueue.resume();\r\n    };\r\n    return ResourceLoader;\r\n}());\r\nexport { ResourceLoader };\r\n","export * from \"./ResourceLoader\";\r\nexport * from \"./Resource\";\r\nexport * from \"./Middleware\";\r\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nexport default function(color, forceCSSHex) {\n  const colorFormat = color.__state.conversionName.toString();\n\n  const r = Math.round(color.r);\n  const g = Math.round(color.g);\n  const b = Math.round(color.b);\n  const a = color.a;\n  const h = Math.round(color.h);\n  const s = color.s.toFixed(1);\n  const v = color.v.toFixed(1);\n\n  if (forceCSSHex || (colorFormat === 'THREE_CHAR_HEX') || (colorFormat === 'SIX_CHAR_HEX')) {\n    let str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n\n  return 'unknown format';\n}\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nconst ARR_EACH = Array.prototype.forEach;\nconst ARR_SLICE = Array.prototype.slice;\n\n/**\n * Band-aid methods for things that should be a lot easier in JavaScript.\n * Implementation and structure inspired by underscore.js\n * http://documentcloud.github.com/underscore/\n */\n\nconst Common = {\n  BREAK: {},\n\n  extend: function(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n      const keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function(key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n\n    return target;\n  },\n\n  defaults: function(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n      const keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function(key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n\n    return target;\n  },\n\n  compose: function() {\n    const toCall = ARR_SLICE.call(arguments);\n    return function() {\n      let args = ARR_SLICE.call(arguments);\n      for (let i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n\n  each: function(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) { // Is number but not NaN\n      let key;\n      let l;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (const key in obj) {\n        if (itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n\n  defer: function(fnc) {\n    setTimeout(fnc, 0);\n  },\n\n  // if the function is called repeatedly, wait until threshold passes until we execute the function\n  debounce: function(func, threshold, callImmediately) {\n    let timeout;\n\n    return function() {\n      const obj = this;\n      const args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n\n      const callNow = callImmediately || !timeout;\n\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n\n  toArray: function(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n\n  isUndefined: function(obj) {\n    return obj === undefined;\n  },\n\n  isNull: function(obj) {\n    return obj === null;\n  },\n\n  isNaN: function(obj) {\n    return isNaN(obj);\n  },\n\n  isArray: Array.isArray || function(obj) {\n    return obj.constructor === Array;\n  },\n\n  isObject: function(obj) {\n    return obj === Object(obj);\n  },\n\n  isNumber: function(obj) {\n    return obj === obj + 0;\n  },\n\n  isString: function(obj) {\n    return obj === obj + '';\n  },\n\n  isBoolean: function(obj) {\n    return obj === false || obj === true;\n  },\n\n  isFunction: function(obj) {\n    return Object.prototype.toString.call(obj) === '[object Function]';\n  }\n\n};\n\nexport default Common;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport toString from './toString';\nimport common from '../utils/common';\n\nconst INTERPRETATIONS = [\n  // Strings\n  {\n    litmus: common.isString,\n    conversions: {\n      THREE_CHAR_HEX: {\n        read: function(original) {\n          const test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'HEX',\n            hex: parseInt(\n              '0x' +\n              test[1].toString() + test[1].toString() +\n              test[2].toString() + test[2].toString() +\n              test[3].toString() + test[3].toString(), 0)\n          };\n        },\n\n        write: toString\n      },\n\n      SIX_CHAR_HEX: {\n        read: function(original) {\n          const test = original.match(/^#([A-F0-9]{6})$/i);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'HEX',\n            hex: parseInt('0x' + test[1].toString(), 0)\n          };\n        },\n\n        write: toString\n      },\n\n      CSS_RGB: {\n        read: function(original) {\n          const test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: parseFloat(test[1]),\n            g: parseFloat(test[2]),\n            b: parseFloat(test[3])\n          };\n        },\n\n        write: toString\n      },\n\n      CSS_RGBA: {\n        read: function(original) {\n          const test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: parseFloat(test[1]),\n            g: parseFloat(test[2]),\n            b: parseFloat(test[3]),\n            a: parseFloat(test[4])\n          };\n        },\n\n        write: toString\n      }\n    }\n  },\n\n  // Numbers\n  {\n    litmus: common.isNumber,\n\n    conversions: {\n\n      HEX: {\n        read: function(original) {\n          return {\n            space: 'HEX',\n            hex: original,\n            conversionName: 'HEX'\n          };\n        },\n\n        write: function(color) {\n          return color.hex;\n        }\n      }\n\n    }\n\n  },\n\n  // Arrays\n  {\n    litmus: common.isArray,\n    conversions: {\n      RGB_ARRAY: {\n        read: function(original) {\n          if (original.length !== 3) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: original[0],\n            g: original[1],\n            b: original[2]\n          };\n        },\n\n        write: function(color) {\n          return [color.r, color.g, color.b];\n        }\n      },\n\n      RGBA_ARRAY: {\n        read: function(original) {\n          if (original.length !== 4) return false;\n          return {\n            space: 'RGB',\n            r: original[0],\n            g: original[1],\n            b: original[2],\n            a: original[3]\n          };\n        },\n\n        write: function(color) {\n          return [color.r, color.g, color.b, color.a];\n        }\n      }\n    }\n  },\n\n  // Objects\n  {\n    litmus: common.isObject,\n    conversions: {\n\n      RGBA_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.r) &&\n            common.isNumber(original.g) &&\n            common.isNumber(original.b) &&\n            common.isNumber(original.a)) {\n            return {\n              space: 'RGB',\n              r: original.r,\n              g: original.g,\n              b: original.b,\n              a: original.a\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            r: color.r,\n            g: color.g,\n            b: color.b,\n            a: color.a\n          };\n        }\n      },\n\n      RGB_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.r) &&\n            common.isNumber(original.g) &&\n            common.isNumber(original.b)) {\n            return {\n              space: 'RGB',\n              r: original.r,\n              g: original.g,\n              b: original.b\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            r: color.r,\n            g: color.g,\n            b: color.b\n          };\n        }\n      },\n\n      HSVA_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.h) &&\n            common.isNumber(original.s) &&\n            common.isNumber(original.v) &&\n            common.isNumber(original.a)) {\n            return {\n              space: 'HSV',\n              h: original.h,\n              s: original.s,\n              v: original.v,\n              a: original.a\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            h: color.h,\n            s: color.s,\n            v: color.v,\n            a: color.a\n          };\n        }\n      },\n\n      HSV_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.h) &&\n            common.isNumber(original.s) &&\n            common.isNumber(original.v)) {\n            return {\n              space: 'HSV',\n              h: original.h,\n              s: original.s,\n              v: original.v\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            h: color.h,\n            s: color.s,\n            v: color.v\n          };\n        }\n      }\n    }\n  }\n];\n\nlet result;\nlet toReturn;\n\nconst interpret = function() {\n  toReturn = false;\n\n  const original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n  common.each(INTERPRETATIONS, function(family) {\n    if (family.litmus(original)) {\n      common.each(family.conversions, function(conversion, conversionName) {\n        result = conversion.read(original);\n\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return common.BREAK;\n        }\n      });\n\n      return common.BREAK;\n    }\n  });\n\n  return toReturn;\n};\n\nexport default interpret;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nlet tmpComponent;\n\nconst ColorMath = {\n  hsv_to_rgb: function(h, s, v) {\n    const hi = Math.floor(h / 60) % 6;\n\n    const f = h / 60 - Math.floor(h / 60);\n    const p = v * (1.0 - s);\n    const q = v * (1.0 - (f * s));\n    const t = v * (1.0 - ((1.0 - f) * s));\n\n    const c = [\n      [v, t, p],\n      [q, v, p],\n      [p, v, t],\n      [p, q, v],\n      [t, p, v],\n      [v, p, q]\n    ][hi];\n\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n\n  rgb_to_hsv: function(r, g, b) {\n    const min = Math.min(r, g, b);\n    const max = Math.max(r, g, b);\n    const delta = max - min;\n    let h;\n    let s;\n\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n\n  rgb_to_hex: function(r, g, b) {\n    let hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n\n  component_from_hex: function(hex, componentIndex) {\n    return (hex >> (componentIndex * 8)) & 0xFF;\n  },\n\n  hex_with_component: function(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | (hex & ~(0xFF << tmpComponent));\n  }\n};\n\nexport default ColorMath;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport interpret from './interpret';\nimport math from './math';\nimport colorToString from './toString';\nimport common from '../utils/common';\n\nclass Color {\n  constructor() {\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n\n    this.__state.a = this.__state.a || 1;\n  }\n\n  toString() {\n    return colorToString(this);\n  }\n\n  toHexString() {\n    return colorToString(this, true);\n  }\n\n  toOriginal() {\n    return this.__state.conversion.write(this);\n  }\n}\n\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n\n      Color.recalculateRGB(this, component, componentHexIndex);\n\n      return this.__state[component];\n    },\n\n    set: function(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n\n      Color.recalculateHSV(this);\n\n      return this.__state[component];\n    },\n\n    set: function(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\n\nColor.recalculateRGB = function(color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\n\nColor.recalculateHSV = function(color) {\n  const result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n  common.extend(color.__state,\n    {\n      s: result.s,\n      v: result.v\n    }\n  );\n\n  if (!common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\n\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\n\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\n\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\n\nObject.defineProperty(Color.prototype, 'a', {\n  get: function() {\n    return this.__state.a;\n  },\n\n  set: function(v) {\n    this.__state.a = v;\n  }\n});\n\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function() {\n    if (!this.__state.space !== 'HEX') {\n      this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n    }\n\n    return this.__state.hex;\n  },\n\n  set: function(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nexport default Color;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/**\n * @class An \"abstract\" class that represents a given property of an object.\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass Controller {\n  constructor(object, property) {\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n  }\n\n  /**\n   * Specify that a function fire every time someone changes the value with\n   * this Controller.\n   *\n   * @param {Function} fnc This function will be called whenever the value\n   * is modified via this Controller.\n   * @returns {Controller} this\n   */\n  onChange(fnc) {\n    this.__onChange = fnc;\n    return this;\n  }\n\n  /**\n   * Specify that a function fire every time someone \"finishes\" changing\n   * the value wih this Controller. Useful for values that change\n   * incrementally like numbers or strings.\n   *\n   * @param {Function} fnc This function will be called whenever\n   * someone \"finishes\" changing the value via this Controller.\n   * @returns {Controller} this\n   */\n  onFinishChange(fnc) {\n    this.__onFinishChange = fnc;\n    return this;\n  }\n\n  /**\n   * Change the value of <code>object[property]</code>\n   *\n   * @param {Object} newValue The new value of <code>object[property]</code>\n   */\n  setValue(newValue) {\n    this.object[this.property] = newValue;\n    if (this.__onChange) {\n      this.__onChange.call(this, newValue);\n    }\n\n    this.updateDisplay();\n    return this;\n  }\n\n  /**\n   * Gets the value of <code>object[property]</code>\n   *\n   * @returns {Object} The current value of <code>object[property]</code>\n   */\n  getValue() {\n    return this.object[this.property];\n  }\n\n  /**\n   * Refreshes the visual display of a Controller in order to keep sync\n   * with the object's current value.\n   * @returns {Controller} this\n   */\n  updateDisplay() {\n    return this;\n  }\n\n  /**\n   * @returns {Boolean} true if the value has deviated from initialValue\n   */\n  isModified() {\n    return this.initialValue !== this.getValue();\n  }\n}\n\nexport default Controller;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport common from '../utils/common';\n\nconst EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\n\nconst EVENT_MAP_INV = {};\ncommon.each(EVENT_MAP, function(v, k) {\n  common.each(v, function(e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\n\nconst CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\nfunction cssValueToPixels(val) {\n  if (val === '0' || common.isUndefined(val)) {\n    return 0;\n  }\n\n  const match = val.match(CSS_VALUE_PIXELS);\n\n  if (!common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n\n  // TODO ...ems? %?\n\n  return 0;\n}\n\n/**\n * @namespace\n * @member dat.dom\n */\nconst dom = {\n\n  /**\n   *\n   * @param elem\n   * @param selectable\n   */\n  makeSelectable: function(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n\n    elem.onselectstart = selectable ? function() {\n      return false;\n    } : function() {\n    };\n\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n\n  /**\n   *\n   * @param elem\n   * @param horizontal\n   * @param vert\n   */\n  makeFullscreen: function(elem, hor, vert) {\n    let vertical = vert;\n    let horizontal = hor;\n\n    if (common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n\n    if (common.isUndefined(vertical)) {\n      vertical = true;\n    }\n\n    elem.style.position = 'absolute';\n\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n\n  /**\n   *\n   * @param elem\n   * @param eventType\n   * @param params\n   */\n  fakeEvent: function(elem, eventType, pars, aux) {\n    const params = pars || {};\n    const className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    const evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n        {\n          const clientX = params.x || params.clientX || 0;\n          const clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n            params.cancelable || true, window, params.clickCount || 1,\n            0, // screen X\n            0, // screen Y\n            clientX, // client X\n            clientY, // client Y\n            false, false, false, false, 0, null);\n          break;\n        }\n      case 'KeyboardEvents':\n        {\n          const init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n            params.cancelable, window,\n            params.ctrlKey, params.altKey,\n            params.shiftKey, params.metaKey,\n            params.keyCode, params.charCode);\n          break;\n        }\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n    common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n\n  /**\n   *\n   * @param elem\n   * @param event\n   * @param func\n   * @param bool\n   */\n  bind: function(elem, event, func, newBool) {\n    const bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param event\n   * @param func\n   * @param bool\n   */\n  unbind: function(elem, event, func, newBool) {\n    const bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param className\n   */\n  addClass: function(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      const classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param className\n   */\n  removeClass: function(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        const classes = elem.className.split(/ +/);\n        const index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n\n  hasClass: function(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n\n  /**\n   *\n   * @param elem\n   */\n  getWidth: function(elem) {\n    const style = getComputedStyle(elem);\n\n    return cssValueToPixels(style['border-left-width']) +\n      cssValueToPixels(style['border-right-width']) +\n      cssValueToPixels(style['padding-left']) +\n      cssValueToPixels(style['padding-right']) +\n      cssValueToPixels(style.width);\n  },\n\n  /**\n   *\n   * @param elem\n   */\n  getHeight: function(elem) {\n    const style = getComputedStyle(elem);\n\n    return cssValueToPixels(style['border-top-width']) +\n      cssValueToPixels(style['border-bottom-width']) +\n      cssValueToPixels(style['padding-top']) +\n      cssValueToPixels(style['padding-bottom']) +\n      cssValueToPixels(style.height);\n  },\n\n  /**\n   *\n   * @param el\n   */\n  getOffset: function(el) {\n    let elem = el;\n    const offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n\n  // http://stackoverflow.com/posts/2684561/revisions\n  /**\n   *\n   * @param elem\n   */\n  isActive: function(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n\n};\n\nexport default dom;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a checkbox input to alter the boolean property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass BooleanController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    const _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n  }\n\n  setValue(v) {\n    const toReturn = super.setValue(v);\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n    this.__prev = this.getValue();\n    return toReturn;\n  }\n\n  updateDisplay() {\n    if (this.getValue() === true) {\n      this.__checkbox.setAttribute('checked', 'checked');\n      this.__checkbox.checked = true;\n      this.__prev = true;\n    } else {\n      this.__checkbox.checked = false;\n      this.__prev = false;\n    }\n\n    return super.updateDisplay();\n  }\n}\n\nexport default BooleanController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\n/**\n * @class Provides a select input to alter the property of an object, using a\n * list of accepted values.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object|string[]} options A map of labels to acceptable values, or\n * a list of acceptable string values.\n */\nclass OptionController extends Controller {\n  constructor(object, property, opts) {\n    super(object, property);\n\n    let options = opts;\n\n    const _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      const map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n      const opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      const desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n  }\n\n  setValue(v) {\n    const toReturn = super.setValue(v);\n\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n    return toReturn;\n  }\n\n  updateDisplay() {\n    if (dom.isActive(this.__select)) return this; // prevent number from updating if user is trying to manually update\n    this.__select.value = this.getValue();\n    return super.updateDisplay();\n  }\n}\n\nexport default OptionController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a text input to alter the string property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass StringController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    const _this = this;\n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  }\n\n  updateDisplay() {\n    // Stops the caret from moving on account of:\n    // keyup -> setValue -> updateDisplay\n    if (!dom.isActive(this.__input)) {\n      this.__input.value = this.getValue();\n    }\n    return super.updateDisplay();\n  }\n}\n\nexport default StringController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport common from '../utils/common';\n\nfunction numDecimals(x) {\n  const _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n\n  return 0;\n}\n\n/**\n * @class Represents a given property of an object that is a number.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object} [params] Optional parameters\n * @param {Number} [params.min] Minimum allowed value\n * @param {Number} [params.max] Maximum allowed value\n * @param {Number} [params.step] Increment by which to change value\n */\nclass NumberController extends Controller {\n  constructor(object, property, params) {\n    super(object, property);\n\n    const _params = params || {};\n\n    this.__min = _params.min;\n    this.__max = _params.max;\n    this.__step = _params.step;\n\n    if (common.isUndefined(this.__step)) {\n      if (this.initialValue === 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      this.__impliedStep = this.__step;\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n  }\n\n  setValue(v) {\n    let _v = v;\n\n    if (this.__min !== undefined && _v < this.__min) {\n      _v = this.__min;\n    } else if (this.__max !== undefined && _v > this.__max) {\n      _v = this.__max;\n    }\n\n    if (this.__step !== undefined && _v % this.__step !== 0) {\n      _v = Math.round(_v / this.__step) * this.__step;\n    }\n\n    return super.setValue(_v);\n  }\n\n  /**\n   * Specify a minimum value for <code>object[property]</code>.\n   *\n   * @param {Number} minValue The minimum value for\n   * <code>object[property]</code>\n   * @returns {dat.controllers.NumberController} this\n   */\n  min(minValue) {\n    this.__min = minValue;\n    return this;\n  }\n\n  /**\n   * Specify a maximum value for <code>object[property]</code>.\n   *\n   * @param {Number} maxValue The maximum value for\n   * <code>object[property]</code>\n   * @returns {dat.controllers.NumberController} this\n   */\n  max(maxValue) {\n    this.__max = maxValue;\n    return this;\n  }\n\n  /**\n   * Specify a step value that dat.controllers.NumberController\n   * increments by.\n   *\n   * @param {Number} stepValue The step value for\n   * dat.controllers.NumberController\n   * @default if minimum and maximum specified increment is 1% of the\n   * difference otherwise stepValue is 1\n   * @returns {dat.controllers.NumberController} this\n   */\n  step(stepValue) {\n    this.__step = stepValue;\n    this.__impliedStep = stepValue;\n    this.__precision = numDecimals(stepValue);\n    return this;\n  }\n}\n\nexport default NumberController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport NumberController from './NumberController';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nfunction roundToDecimal(value, decimals) {\n  const tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\n\n/**\n * @class Represents a given property of an object that is a number and\n * provides an input element with which to manipulate it.\n *\n * @extends dat.controllers.Controller\n * @extends dat.controllers.NumberController\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object} [params] Optional parameters\n * @param {Number} [params.min] Minimum allowed value\n * @param {Number} [params.max] Maximum allowed value\n * @param {Number} [params.step] Increment by which to change value\n */\nclass NumberControllerBox extends NumberController {\n  constructor(object, property, params) {\n    super(object, property, params);\n\n    this.__truncationSuspended = false;\n\n    const _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    let prevY;\n\n    function onChange() {\n      const attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onBlur() {\n      onFinish();\n    }\n\n    function onMouseDrag(e) {\n      const diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prevY = e.clientY;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n      // When pressing enter, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  }\n\n  updateDisplay() {\n    this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n    return super.updateDisplay();\n  }\n}\n\nexport default NumberControllerBox;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport NumberController from './NumberController';\nimport dom from '../dom/dom';\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\n\n/**\n * @class Represents a given property of an object that is a number, contains\n * a minimum and maximum, and provides a slider element with which to\n * manipulate it. It should be noted that the slider element is made up of\n * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n * <code>&lt;slider&gt;</code> element.\n *\n * @extends dat.controllers.Controller\n * @extends dat.controllers.NumberController\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Number} minValue Minimum allowed value\n * @param {Number} maxValue Maximum allowed value\n * @param {Number} stepValue Increment by which to change value\n */\nclass NumberControllerSlider extends NumberController {\n  constructor(object, property, min, max, step) {\n    super(object, property, { min: min, max: max, step: step });\n\n    const _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    dom.bind(this.__background, 'touchstart', onTouchStart);\n\n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n      document.activeElement.blur();\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n      e.preventDefault();\n\n      const bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(\n        map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max)\n      );\n\n      return false;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) { return; }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n\n    function onTouchMove(e) {\n      const clientX = e.touches[0].clientX;\n      const bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(\n        map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max)\n      );\n    }\n\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n  }\n\n  updateDisplay() {\n    const pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n    this.__foreground.style.width = pct * 100 + '%';\n    return super.updateDisplay();\n  }\n}\n\nexport default NumberControllerSlider;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a GUI interface to fire a specified method, a property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass FunctionController extends Controller {\n  constructor(object, property, text) {\n    super(object, property);\n\n    const _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n  }\n\n  fire() {\n    if (this.__onChange) {\n      this.__onChange.call(this);\n    }\n    this.getValue().call(this.object);\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n  }\n}\n\nexport default FunctionController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\nimport Color from '../color/Color';\nimport interpret from '../color/interpret';\nimport common from '../utils/common';\n\n/**\n * @class Represents a given property of an object that is a color.\n * @param {Object} object\n * @param {string} property\n */\nclass ColorController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    const _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(/* e */) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(/* e */) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    dom.bind(this.__selector, 'touchstart', function(/* e */) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'touchend', function(/* e */) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    const valueField = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n\n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__saturation_field, 'touchstart', fieldDown);\n\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'touchstart', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(this.__hue_field, 'touchstart', fieldDownH);\n\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n\n    function onBlur() {\n      const i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n\n    this.__saturation_field.appendChild(valueField);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) { e.preventDefault(); }\n\n      const fieldRect = _this.__saturation_field.getBoundingClientRect();\n      const { clientX, clientY } = (e.touches && e.touches[0]) || e;\n      let s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      let v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n    }\n\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) { e.preventDefault(); }\n\n      const fieldRect = _this.__hue_field.getBoundingClientRect();\n      const { clientY } = (e.touches && e.touches[0]) || e;\n      let h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n    }\n  }\n\n  updateDisplay() {\n    const i = interpret(this.getValue());\n\n    if (i !== false) {\n      let mismatch = false;\n\n      // Check for mismatch on the interpreted value.\n\n      common.each(Color.COMPONENTS, function(component) {\n        if (!common.isUndefined(i[component]) && !common.isUndefined(this.__color.__state[component]) &&\n          i[component] !== this.__color.__state[component]) {\n          mismatch = true;\n          return {}; // break\n        }\n      }, this);\n\n      // If nothing diverges, we keep our previous values\n      // for statefulness, otherwise we recalculate fresh\n      if (mismatch) {\n        common.extend(this.__color.__state, i);\n      }\n    }\n\n    common.extend(this.__temp.__state, this.__color.__state);\n\n    this.__temp.a = 1;\n\n    const flip = (this.__color.v < 0.5 || this.__color.s > 0.5) ? 255 : 0;\n    const _flip = 255 - flip;\n\n    common.extend(this.__field_knob.style, {\n      marginLeft: 100 * this.__color.s - 7 + 'px',\n      marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n      backgroundColor: this.__temp.toHexString(),\n      border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n    });\n\n    this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n\n    this.__temp.s = 1;\n    this.__temp.v = 1;\n\n    linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n\n    this.__input.value = this.__color.toString();\n\n    common.extend(this.__input.style, {\n      backgroundColor: this.__color.toHexString(),\n      color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n      textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n    });\n  }\n}\n\nconst vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\n\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  common.each(vendors, function(vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\n\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nexport default ColorController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nconst css = {\n  load: function(url, indoc) {\n    const doc = indoc || document;\n    const link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n\n  inject: function(cssContent, indoc) {\n    const doc = indoc || document;\n    const injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    const head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) { // Unable to inject CSS, probably because of a Content Security Policy\n    }\n  }\n};\n\nexport default css;\n","const saveDialogContents = `<div id=\"dg-save\" class=\"dg dialogue\">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id=\"dg-new-constructor\"></textarea>\n\n  <div id=\"dg-save-locally\">\n\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>`;\n\nexport default saveDialogContents;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport OptionController from './OptionController';\nimport NumberControllerBox from './NumberControllerBox';\nimport NumberControllerSlider from './NumberControllerSlider';\nimport StringController from './StringController';\nimport FunctionController from './FunctionController';\nimport BooleanController from './BooleanController';\nimport common from '../utils/common';\n\nconst ControllerFactory = function(object, property) {\n  const initialValue = object[property];\n\n  // Providing options?\n  if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n\n  // Providing a map?\n  if (common.isNumber(initialValue)) {\n    // Has min and max? (slider)\n    if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n      // has step?\n      if (common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property,\n                        arguments[2], arguments[3], arguments[4]);\n      }\n\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n\n    // number box\n    if (common.isNumber(arguments[4])) { // has step\n      return new NumberControllerBox(object, property,\n                        { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n\n  if (common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n\n  if (common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n\n  if (common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n\n  return null;\n};\n\nexport default ControllerFactory;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\n\nexport default window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    requestAnimationFrame;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nclass CenteredDiv {\n  constructor() {\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    const _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n  }\n\n  show() {\n    const _this = this;\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n  }\n\n  /**\n   * Hide centered div\n   */\n  hide() {\n    const _this = this;\n\n    const hide = function() {\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n  }\n\n  layout() {\n    this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n  }\n}\n\nexport default CenteredDiv;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport css from '../utils/css';\nimport saveDialogueContents from './saveDialogue.html';\nimport ControllerFactory from '../controllers/ControllerFactory';\nimport Controller from '../controllers/Controller';\nimport BooleanController from '../controllers/BooleanController';\nimport FunctionController from '../controllers/FunctionController';\nimport NumberControllerBox from '../controllers/NumberControllerBox';\nimport NumberControllerSlider from '../controllers/NumberControllerSlider';\nimport ColorController from '../controllers/ColorController';\nimport requestAnimationFrame from '../utils/requestAnimationFrame';\nimport CenteredDiv from '../dom/CenteredDiv';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nimport styleSheet from './style.scss'; // CSS to embed in build\n\ncss.inject(styleSheet);\n\n/** @ignore Outer-most className for GUI's */\nconst CSS_NAMESPACE = 'dg';\n\nconst HIDE_KEY_CODE = 72;\n\n/** @ignore The only value shared between the JS and SCSS. Use caution. */\nconst CLOSE_BUTTON_HEIGHT = 20;\n\nconst DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\nconst SUPPORTS_LOCAL_STORAGE = (function() {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}());\n\nlet SAVE_DIALOGUE;\n\n/** @ignore Have we yet to create an autoPlace GUI? */\nlet autoPlaceVirgin = true;\n\n/** @ignore Fixed position div that auto place GUI's go inside */\nlet autoPlaceContainer;\n\n/** @ignore Are we hiding the GUI's ? */\nlet hide = false;\n\n/** @private GUI's which should be hidden */\nconst hideableGuis = [];\n\n/**\n * @class A lightweight controller library for JavaScript. It allows you to easily\n * manipulate variables and fire functions on the fly.\n *\n * @typicalname gui\n *\n * @example\n * // Creating a GUI with options.\n * var gui = new dat.GUI({name: 'My GUI'});\n *\n * @example\n * // Creating a GUI and a subfolder.\n * var gui = new dat.GUI();\n * var folder1 = gui.addFolder('Flow Field');\n *\n * @param {Object} [params]\n * @param {String} [params.name] The name of this GUI.\n * @param {Object} [params.load] JSON object representing the saved state of\n * this GUI.\n * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n * @param {Boolean} [params.autoPlace=true]\n * @param {Boolean} [params.hideable=true] If true, GUI is shown/hidden by <kbd>h</kbd> keypress.\n * @param {Boolean} [params.closed=false] If true, starts closed\n * @param {Boolean} [params.closeOnTop=false] If true, close/open button shows on top of the GUI\n */\nconst GUI = function(pars) {\n  const _this = this;\n\n  let params = pars || {};\n\n  /**\n   * Outermost DOM Element\n   * @type {DOMElement}\n   */\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n\n  /**\n   * Nested GUI's by name\n   * @ignore\n   */\n  this.__folders = {};\n\n  this.__controllers = [];\n\n  /**\n   * List of objects I'm remembering for save, only used in top level GUI\n   * @ignore\n   */\n  this.__rememberedObjects = [];\n\n  /**\n   * Maps the index of remembered objects to a map of controllers, only used\n   * in top level GUI.\n   *\n   * @private\n   * @ignore\n   *\n   * @example\n   * [\n   *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n   *  {\n     *    propertyName: Controller\n     *  }\n   * ]\n   */\n  this.__rememberedObjectIndecesToControllers = [];\n\n  this.__listening = [];\n\n  // Default parameters\n  params = common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n\n  params = common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n\n  if (!common.isUndefined(params.load)) {\n    // Explicit preset\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n\n  if (common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n\n  // Only root level GUI's are resizable.\n  params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n  if (params.autoPlace && common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n  // Not part of params because I don't want people passing this in via\n  // constructor. Should be a 'remembered' value.\n  let useLocalStorage =\n    SUPPORTS_LOCAL_STORAGE &&\n    localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n  let saveToLocalStorage;\n  let titleRow;\n\n  Object.defineProperties(this,\n    /** @lends GUI.prototype */\n    {\n      /**\n       * The parent <code>GUI</code>\n       * @type dat.gui.GUI\n       */\n      parent: {\n        get: function() {\n          return params.parent;\n        }\n      },\n\n      scrollable: {\n        get: function() {\n          return params.scrollable;\n        }\n      },\n\n      /**\n       * Handles <code>GUI</code>'s element placement for you\n       * @type Boolean\n       */\n      autoPlace: {\n        get: function() {\n          return params.autoPlace;\n        }\n      },\n\n      /**\n       * Handles <code>GUI</code>'s position of open/close button\n       * @type Boolean\n       */\n      closeOnTop: {\n        get: function() {\n          return params.closeOnTop;\n        }\n      },\n\n      /**\n       * The identifier for a set of saved values\n       * @type String\n       */\n      preset: {\n        get: function() {\n          if (_this.parent) {\n            return _this.getRoot().preset;\n          }\n\n          return params.load.preset;\n        },\n\n        set: function(v) {\n          if (_this.parent) {\n            _this.getRoot().preset = v;\n          } else {\n            params.load.preset = v;\n          }\n          setPresetSelectIndex(this);\n          _this.revert();\n        }\n      },\n\n      /**\n       * The width of <code>GUI</code> element\n       * @type Number\n       */\n      width: {\n        get: function() {\n          return params.width;\n        },\n        set: function(v) {\n          params.width = v;\n          setWidth(_this, v);\n        }\n      },\n\n      /**\n       * The name of <code>GUI</code>. Used for folders. i.e\n       * a folder's name\n       * @type String\n       */\n      name: {\n        get: function() {\n          return params.name;\n        },\n        set: function(v) {\n          // TODO Check for collisions among sibling folders\n          params.name = v;\n          if (titleRow) {\n            titleRow.innerHTML = params.name;\n          }\n        }\n      },\n\n      /**\n       * Whether the <code>GUI</code> is collapsed or not\n       * @type Boolean\n       */\n      closed: {\n        get: function() {\n          return params.closed;\n        },\n        set: function(v) {\n          params.closed = v;\n          if (params.closed) {\n            dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n          } else {\n            dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n          }\n          // For browsers that aren't going to respect the CSS transition,\n          // Lets just check our height against the window height right off\n          // the bat.\n          this.onResize();\n\n          if (_this.__closeButton) {\n            _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n          }\n        }\n      },\n\n      /**\n       * Contains all presets\n       * @type Object\n       */\n      load: {\n        get: function() {\n          return params.load;\n        }\n      },\n\n      /**\n       * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n       * <code>remember</code>ing\n       * @type Boolean\n       */\n      useLocalStorage: {\n\n        get: function() {\n          return useLocalStorage;\n        },\n        set: function(bool) {\n          if (SUPPORTS_LOCAL_STORAGE) {\n            useLocalStorage = bool;\n            if (bool) {\n              dom.bind(window, 'unload', saveToLocalStorage);\n            } else {\n              dom.unbind(window, 'unload', saveToLocalStorage);\n            }\n            localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n          }\n        }\n      }\n    });\n\n  // Are we a root level GUI?\n  if (common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n\n    // Are we supposed to be loading locally?\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n\n        const savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n\n    dom.bind(this.__closeButton, 'click', function() {\n      _this.closed = !_this.closed;\n    });\n    // Oh, you're a nested GUI!\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n\n    const titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n\n    titleRow = addRow(_this, titleRowName);\n\n    const onClickTitle = function(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n\n  if (params.autoPlace) {\n    if (common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n\n      // Put it in the dom for you.\n      autoPlaceContainer.appendChild(this.domElement);\n\n      // Apply the auto styles\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n\n\n    // Make it not elastic.\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n\n  this.__resizeHandler = function() {\n    _this.onResizeDebounced();\n  };\n\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n\n  saveToLocalStorage = function() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n\n  // expose this method publicly\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n\n  function resetWidth() {\n    const root = _this.getRoot();\n    root.width += 1;\n    common.defer(function() {\n      root.width -= 1;\n    });\n  }\n\n  if (!params.parent) {\n    resetWidth();\n  }\n};\n\nGUI.toggleHide = function() {\n  hide = !hide;\n  common.each(hideableGuis, function(gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\n\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\n\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\n\nGUI._keydownHandler = function(e) {\n  if (document.activeElement.type !== 'text' &&\n    (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\n\ncommon.extend(\n  GUI.prototype,\n\n  /** @lends GUI.prototype */\n  {\n\n    /**\n     * Adds a new {@link Controller} to the GUI. The type of controller created\n     * is inferred from the initial value of <code>object[property]</code>. For\n     * color properties, see {@link addColor}.\n     *\n     * @param {Object} object The object to be manipulated\n     * @param {String} property The name of the property to be manipulated\n     * @param {Number} [min] Minimum allowed value\n     * @param {Number} [max] Maximum allowed value\n     * @param {Number} [step] Increment by which to change value\n     * @returns {Controller} The controller that was added to the GUI.\n     * @instance\n     *\n     * @example\n     * // Add a string controller.\n     * var person = {name: 'Sam'};\n     * gui.add(person, 'name');\n     *\n     * @example\n     * // Add a number controller slider.\n     * var person = {age: 45};\n     * gui.add(person, 'age', 0, 100);\n     */\n    add: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          factoryArgs: Array.prototype.slice.call(arguments, 2)\n        }\n      );\n    },\n\n    /**\n     * Adds a new color controller to the GUI.\n     *\n     * @param object\n     * @param property\n     * @returns {Controller} The controller that was added to the GUI.\n     * @instance\n     *\n     * @example\n     * var palette = {\n     *   color1: '#FF0000', // CSS string\n     *   color2: [ 0, 128, 255 ], // RGB array\n     *   color3: [ 0, 128, 255, 0.3 ], // RGB with alpha\n     *   color4: { h: 350, s: 0.9, v: 0.3 } // Hue, saturation, value\n     * };\n     * gui.addColor(palette, 'color1');\n     * gui.addColor(palette, 'color2');\n     * gui.addColor(palette, 'color3');\n     * gui.addColor(palette, 'color4');\n     */\n    addColor: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          color: true\n        }\n      );\n    },\n\n    /**\n     * Removes the given controller from the GUI.\n     * @param {Controller} controller\n     * @instance\n     */\n    remove: function(controller) {\n      // TODO listening?\n      this.__ul.removeChild(controller.__li);\n      this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n      const _this = this;\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    /**\n     * Removes the root GUI from the document and unbinds all event listeners.\n     * For subfolders, use `gui.removeFolder(folder)` instead.\n     * @instance\n     */\n    destroy: function() {\n      if (this.parent) {\n        throw new Error(\n          'Only the root GUI should be removed with .destroy(). ' +\n          'For subfolders, use gui.removeFolder(folder) instead.'\n        );\n      }\n\n      if (this.autoPlace) {\n        autoPlaceContainer.removeChild(this.domElement);\n      }\n\n      const _this = this;\n      common.each(this.__folders, function(subfolder) {\n        _this.removeFolder(subfolder);\n      });\n\n      dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n\n      removeListeners(this);\n    },\n\n    /**\n     * Creates a new subfolder GUI instance.\n     * @param name\n     * @returns {dat.gui.GUI} The new folder.\n     * @throws {Error} if this GUI already has a folder by the specified\n     * name\n     * @instance\n     */\n    addFolder: function(name) {\n      // We have to prevent collisions on names in order to have a key\n      // by which to remember saved values\n      if (this.__folders[name] !== undefined) {\n        throw new Error('You already have a folder in this GUI by the' +\n          ' name \"' + name + '\"');\n      }\n\n      const newGuiParams = { name: name, parent: this };\n\n      // We need to pass down the autoPlace trait so that we can\n      // attach event listeners to open/close folder actions to\n      // ensure that a scrollbar appears if the window is too short.\n      newGuiParams.autoPlace = this.autoPlace;\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n        this.load.folders && // Was my parent a dead-end?\n        this.load.folders[name]) { // Did daddy remember me?\n        // Start me closed if I was closed\n        newGuiParams.closed = this.load.folders[name].closed;\n\n        // Pass down the loaded data\n        newGuiParams.load = this.load.folders[name];\n      }\n\n      const gui = new GUI(newGuiParams);\n      this.__folders[name] = gui;\n\n      const li = addRow(this, gui.domElement);\n      dom.addClass(li, 'folder');\n      return gui;\n    },\n\n    /**\n     * Removes a subfolder GUI instance.\n     * @param {dat.gui.GUI} folder The folder to remove.\n     * @instance\n     */\n    removeFolder: function(folder) {\n      this.__ul.removeChild(folder.domElement.parentElement);\n\n      delete this.__folders[folder.name];\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n        this.load.folders && // Was my parent a dead-end?\n        this.load.folders[folder.name]) {\n        delete this.load.folders[folder.name];\n      }\n\n      removeListeners(folder);\n\n      const _this = this;\n\n      common.each(folder.__folders, function(subfolder) {\n        folder.removeFolder(subfolder);\n      });\n\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    /**\n     * Opens the GUI.\n     */\n    open: function() {\n      this.closed = false;\n    },\n\n    /**\n     * Closes the GUI.\n     */\n    close: function() {\n      this.closed = true;\n    },\n\n\n    onResize: function() {\n      // we debounce this function to prevent performance issues when rotating on tablet/mobile\n      const root = this.getRoot();\n      if (root.scrollable) {\n        const top = dom.getOffset(root.__ul).top;\n        let h = 0;\n\n        common.each(root.__ul.childNodes, function(node) {\n          if (!(root.autoPlace && node === root.__save_row)) {\n            h += dom.getHeight(node);\n          }\n        });\n\n        if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n          dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n        } else {\n          dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = 'auto';\n        }\n      }\n\n      if (root.__resize_handle) {\n        common.defer(function() {\n          root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n        });\n      }\n\n      if (root.__closeButton) {\n        root.__closeButton.style.width = root.width + 'px';\n      }\n    },\n\n    onResizeDebounced: common.debounce(function() { this.onResize(); }, 50),\n\n    /**\n     * Mark objects for saving. The order of these objects cannot change as\n     * the GUI grows. When remembering new objects, append them to the end\n     * of the list.\n     *\n     * @param {...Object} objects\n     * @throws {Error} if not called on a top level GUI.\n     * @instance\n     * @ignore\n     */\n    remember: function() {\n      if (common.isUndefined(SAVE_DIALOGUE)) {\n        SAVE_DIALOGUE = new CenteredDiv();\n        SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n      }\n\n      if (this.parent) {\n        throw new Error('You can only call remember on a top level GUI.');\n      }\n\n      const _this = this;\n\n      common.each(Array.prototype.slice.call(arguments), function(object) {\n        if (_this.__rememberedObjects.length === 0) {\n          addSaveMenu(_this);\n        }\n        if (_this.__rememberedObjects.indexOf(object) === -1) {\n          _this.__rememberedObjects.push(object);\n        }\n      });\n\n      if (this.autoPlace) {\n        // Set save row width\n        setWidth(this, this.width);\n      }\n    },\n\n    /**\n     * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n     * @instance\n     */\n    getRoot: function() {\n      let gui = this;\n      while (gui.parent) {\n        gui = gui.parent;\n      }\n      return gui;\n    },\n\n    /**\n     * @returns {Object} a JSON object representing the current state of\n     * this GUI as well as its remembered properties.\n     * @instance\n     */\n    getSaveObject: function() {\n      const toReturn = this.load;\n      toReturn.closed = this.closed;\n\n      // Am I remembering any values?\n      if (this.__rememberedObjects.length > 0) {\n        toReturn.preset = this.preset;\n\n        if (!toReturn.remembered) {\n          toReturn.remembered = {};\n        }\n\n        toReturn.remembered[this.preset] = getCurrentPreset(this);\n      }\n\n      toReturn.folders = {};\n      common.each(this.__folders, function(element, key) {\n        toReturn.folders[key] = element.getSaveObject();\n      });\n\n      return toReturn;\n    },\n\n    save: function() {\n      if (!this.load.remembered) {\n        this.load.remembered = {};\n      }\n\n      this.load.remembered[this.preset] = getCurrentPreset(this);\n      markPresetModified(this, false);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    saveAs: function(presetName) {\n      if (!this.load.remembered) {\n        // Retain default values upon first save\n        this.load.remembered = {};\n        this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n      }\n\n      this.load.remembered[presetName] = getCurrentPreset(this);\n      this.preset = presetName;\n      addPresetOption(this, presetName, true);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    revert: function(gui) {\n      common.each(this.__controllers, function(controller) {\n        // Make revert work on Default.\n        if (!this.getRoot().load.remembered) {\n          controller.setValue(controller.initialValue);\n        } else {\n          recallSavedValue(gui || this.getRoot(), controller);\n        }\n\n        // fire onFinishChange callback\n        if (controller.__onFinishChange) {\n          controller.__onFinishChange.call(controller, controller.getValue());\n        }\n      }, this);\n\n      common.each(this.__folders, function(folder) {\n        folder.revert(folder);\n      });\n\n      if (!gui) {\n        markPresetModified(this.getRoot(), false);\n      }\n    },\n\n    listen: function(controller) {\n      const init = this.__listening.length === 0;\n      this.__listening.push(controller);\n      if (init) {\n        updateDisplays(this.__listening);\n      }\n    },\n\n    updateDisplay: function() {\n      common.each(this.__controllers, function(controller) {\n        controller.updateDisplay();\n      });\n      common.each(this.__folders, function(folder) {\n        folder.updateDisplay();\n      });\n    }\n  }\n);\n\n/**\n * Add a row to the end of the GUI or before another row.\n *\n * @param gui\n * @param [newDom] If specified, inserts the dom content in the new row\n * @param [liBefore] If specified, places the new row before another row\n *\n * @ignore\n */\nfunction addRow(gui, newDom, liBefore) {\n  const li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\n\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\n\nfunction markPresetModified(gui, modified) {\n  const opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\n\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n\n  common.extend(controller, /** @lends Controller.prototype */ {\n    /**\n     * @param  {Array|Object} options\n     * @return {Controller}\n     */\n    options: function(options) {\n      if (arguments.length > 1) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [common.toArray(arguments)]\n          }\n        );\n      }\n\n      if (common.isArray(options) || common.isObject(options)) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [options]\n          }\n        );\n      }\n    },\n\n    /**\n     * Sets the name of the controller.\n     * @param  {string} name\n     * @return {Controller}\n     */\n    name: function(name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = name;\n      return controller;\n    },\n\n    /**\n     * Sets controller to listen for changes on its underlying object.\n     * @return {Controller}\n     */\n    listen: function() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n\n    /**\n     * Removes the controller from its parent GUI.\n     * @return {Controller}\n     */\n    remove: function() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n\n  // All sliders should be accompanied by a box.\n  if (controller instanceof NumberControllerSlider) {\n    const box = new NumberControllerBox(controller.object, controller.property,\n      { min: controller.__min, max: controller.__max, step: controller.__step });\n\n    common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function(method) {\n      const pc = controller[method];\n      const pb = box[method];\n      controller[method] = box[method] = function() {\n        const args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    const r = function(returned) {\n      // Have we defined both boundaries?\n      if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n        // Well, then lets just replace this with a slider.\n\n        // lets remember if the old controller had a specific name or was listening\n        const oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        const wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n\n        controller.remove();\n        const newController = add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: controller.__li.nextElementSibling,\n            factoryArgs: [controller.__min, controller.__max, controller.__step]\n          });\n\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n\n        return newController;\n      }\n\n      return returned;\n    };\n\n    controller.min = common.compose(r, controller.min);\n    controller.max = common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n\n    dom.bind(controller.__checkbox, 'click', function(e) {\n      e.stopPropagation(); // Prevents double-toggle\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n\n    dom.bind(li, 'mouseover', function() {\n      dom.addClass(controller.__button, 'hover');\n    });\n\n    dom.bind(li, 'mouseout', function() {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = common.compose(function(val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n\n    controller.updateDisplay();\n  }\n\n  controller.setValue = common.compose(function(val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n\n    return val;\n  }, controller.setValue);\n}\n\nfunction recallSavedValue(gui, controller) {\n  // Find the topmost GUI, that's where remembered objects live.\n  const root = gui.getRoot();\n\n  // Does the object we're controlling match anything we've been told to\n  // remember?\n  const matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n\n  // Why yes, it does!\n  if (matchedIndex !== -1) {\n    // Let me fetch a map of controllers for thcommon.isObject.\n    let controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n\n    // Ohp, I believe this is the first controller we've created for this\n    // object. Lets make the map fresh.\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] =\n        controllerMap;\n    }\n\n    // Keep track of this controller\n    controllerMap[controller.property] = controller;\n\n    // Okay, now have we saved any values for this controller?\n    if (root.load && root.load.remembered) {\n      const presetMap = root.load.remembered;\n\n      // Which preset are we trying to load?\n      let preset;\n\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        // Uhh, you can have the default instead?\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        // Nada.\n        return;\n      }\n\n      // Did the loaded object remember thcommon.isObject? &&  Did we remember this particular property?\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        // We did remember something for this guy ...\n        const value = preset[matchedIndex][controller.property];\n\n        // And that's what it is.\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\n\nfunction add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error(`Object \"${object}\" has no property \"${property}\"`);\n  }\n\n  let controller;\n\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    const factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n\n  recallSavedValue(gui, controller);\n\n  dom.addClass(controller.domElement, 'c');\n\n  const name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n\n  const container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n\n  const li = addRow(gui, container, params.before);\n\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, typeof controller.getValue());\n  }\n\n  augmentController(gui, li, controller);\n\n  gui.__controllers.push(controller);\n\n  return controller;\n}\n\nfunction getLocalStorageHash(gui, key) {\n  // TODO how does this deal with multiple GUI's?\n  return document.location.href + '.' + key;\n}\n\nfunction addPresetOption(gui, name, setSelected) {\n  const opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\n\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\n\nfunction addSaveMenu(gui) {\n  const div = gui.__save_row = document.createElement('li');\n\n  dom.addClass(gui.domElement, 'has-save');\n\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n  dom.addClass(div, 'save-row');\n\n  const gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n\n  // TODO replace with FunctionController\n  const button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n\n  const button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n\n  const button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n\n  const select = gui.__preset_select = document.createElement('select');\n\n  if (gui.load && gui.load.remembered) {\n    common.each(gui.load.remembered, function(value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n\n  dom.bind(select, 'change', function() {\n    for (let index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n\n    gui.preset = this.value;\n  });\n\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n\n  if (SUPPORTS_LOCAL_STORAGE) {\n    const explain = document.getElementById('dg-local-explain');\n    const localStorageCheckBox = document.getElementById('dg-local-storage');\n    const saveLocally = document.getElementById('dg-save-locally');\n\n    saveLocally.style.display = 'block';\n\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n\n    showHideExplain(gui, explain);\n\n    // TODO: Use a boolean controller, fool!\n    dom.bind(localStorageCheckBox, 'change', function() {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n\n  const newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n  dom.bind(newConstructorTextArea, 'keydown', function(e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n\n  dom.bind(gears, 'click', function() {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n\n  dom.bind(button, 'click', function() {\n    gui.save();\n  });\n\n  dom.bind(button2, 'click', function() {\n    const presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n\n  dom.bind(button3, 'click', function() {\n    gui.revert();\n  });\n\n  // div.appendChild(button2);\n}\n\nfunction addResizeHandle(gui) {\n  let pmouseX;\n\n  gui.__resize_handle = document.createElement('div');\n\n  common.extend(gui.__resize_handle.style, {\n\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n    // border: '1px solid blue'\n\n  });\n\n  function drag(e) {\n    e.preventDefault();\n\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n\n    return false;\n  }\n\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n\n  function dragStart(e) {\n    e.preventDefault();\n\n    pmouseX = e.clientX;\n\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n\n    return false;\n  }\n\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\n\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  // Auto placed save-rows are position fixed, so we have to\n  // set the width manually if we want it to bleed to the edge\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\n\nfunction getCurrentPreset(gui, useInitialValues) {\n  const toReturn = {};\n\n  // For each object I'm remembering\n  common.each(gui.__rememberedObjects, function(val, index) {\n    const savedValues = {};\n\n    // The controllers I've made for thcommon.isObject by property\n    const controllerMap =\n      gui.__rememberedObjectIndecesToControllers[index];\n\n    // Remember each value for each property\n    common.each(controllerMap, function(controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n\n    // Save the values for thcommon.isObject\n    toReturn[index] = savedValues;\n  });\n\n  return toReturn;\n}\n\nfunction setPresetSelectIndex(gui) {\n  for (let index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\n\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame.call(window, function() {\n      updateDisplays(controllerArray);\n    });\n  }\n\n  common.each(controllerArray, function(c) {\n    c.updateDisplay();\n  });\n}\n\nexport default GUI;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Color from './color/Color';\nimport math from './color/math';\nimport interpret from './color/interpret';\n\nimport Controller from './controllers/Controller';\nimport BooleanController from './controllers/BooleanController';\nimport OptionController from './controllers/OptionController';\nimport StringController from './controllers/StringController';\nimport NumberController from './controllers/NumberController';\nimport NumberControllerBox from './controllers/NumberControllerBox';\nimport NumberControllerSlider from './controllers/NumberControllerSlider';\nimport FunctionController from './controllers/FunctionController';\nimport ColorController from './controllers/ColorController';\n\nimport domImport from './dom/dom';\nimport GUIImport from './gui/GUI';\n\nexport const color = {\n  Color: Color,\n  math: math,\n  interpret: interpret\n};\n\nexport const controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\n\nexport const dom = { dom: domImport };\n\nexport const gui = { GUI: GUIImport };\n\nexport const GUI = GUIImport;\n\nexport default {\n  color,\n  controllers,\n  dom,\n  gui,\n  GUI\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import * as glMatrix from \"./common.js\";\nimport * as mat2 from \"./mat2.js\";\nimport * as mat2d from \"./mat2d.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as mat4 from \"./mat4.js\";\nimport * as quat from \"./quat.js\";\nimport * as quat2 from \"./quat2.js\";\nimport * as vec2 from \"./vec2.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\nexport { glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 };","import * as glMatrix from \"./common.js\";\n/**\r\n * 2x2 Matrix\r\n * @module mat2\r\n */\n\n/**\r\n * Creates a new identity mat2\r\n *\r\n * @returns {mat2} a new 2x2 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat2 initialized with values from an existing matrix\r\n *\r\n * @param {mat2} a matrix to clone\r\n * @returns {mat2} a new 2x2 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Copy the values from one mat2 to another\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set a mat2 to the identity matrix\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @returns {mat2} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Create a new mat2 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out A new 2x2 matrix\r\n */\n\nexport function fromValues(m00, m01, m10, m11) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\r\n * Set the components of a mat2 to the given values\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out\r\n */\n\nexport function set(out, m00, m01, m10, m11) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\r\n * Transpose the values of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache\n  // some values\n  if (out === a) {\n    var a1 = a[1];\n    out[1] = a[2];\n    out[2] = a1;\n  } else {\n    out[0] = a[0];\n    out[1] = a[2];\n    out[2] = a[1];\n    out[3] = a[3];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3]; // Calculate the determinant\n\n  var det = a0 * a3 - a2 * a1;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = a3 * det;\n  out[1] = -a1 * det;\n  out[2] = -a2 * det;\n  out[3] = a0 * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function adjoint(out, a) {\n  // Caching this value is nessecary if out == a\n  var a0 = a[0];\n  out[0] = a[3];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a0;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat2\r\n *\r\n * @param {mat2} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[2] * a[1];\n}\n/**\r\n * Multiplies two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  return out;\n}\n/**\r\n * Rotates a mat2 by the given angle\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  return out;\n}\n/**\r\n * Scales the mat2 by the dimensions in the given vec2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat2} out\r\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.scale(dest, dest, vec);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat2} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  return out;\n}\n/**\r\n * Returns a string representation of a mat2\r\n *\r\n * @param {mat2} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat2(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat2\r\n *\r\n * @param {mat2} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2));\n}\n/**\r\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\r\n * @param {mat2} L the lower triangular matrix\r\n * @param {mat2} D the diagonal matrix\r\n * @param {mat2} U the upper triangular matrix\r\n * @param {mat2} a the input matrix to factorize\r\n */\n\nexport function LDU(L, D, U, a) {\n  L[2] = a[2] / a[0];\n  U[0] = a[0];\n  U[1] = a[1];\n  U[3] = a[3] - L[2] * U[1];\n  return [L, D, U];\n}\n/**\r\n * Adds two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat2} a The first matrix.\r\n * @param {mat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat2} a The first matrix.\r\n * @param {mat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2} out the receiving vector\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Alias for {@link mat2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2x3 Matrix\r\n * @module mat2d\r\n *\r\n * @description\r\n * A mat2d contains six elements defined as:\r\n * <pre>\r\n * [a, c, tx,\r\n *  b, d, ty]\r\n * </pre>\r\n * This is a short form for the 3x3 matrix:\r\n * <pre>\r\n * [a, c, tx,\r\n *  b, d, ty,\r\n *  0, 0, 1]\r\n * </pre>\r\n * The last row is ignored so the array is shorter and operations are faster.\r\n */\n\n/**\r\n * Creates a new identity mat2d\r\n *\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(6);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[4] = 0;\n    out[5] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat2d initialized with values from an existing matrix\r\n *\r\n * @param {mat2d} a matrix to clone\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\r\n * Copy the values from one mat2d to another\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\r\n * Set a mat2d to the identity matrix\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Create a new mat2d with the given values\r\n *\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} A new mat2d\r\n */\n\nexport function fromValues(a, b, c, d, tx, ty) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\r\n * Set the components of a mat2d to the given values\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} out\r\n */\n\nexport function set(out, a, b, c, d, tx, ty) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\r\n * Inverts a mat2d\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function invert(out, a) {\n  var aa = a[0],\n      ab = a[1],\n      ac = a[2],\n      ad = a[3];\n  var atx = a[4],\n      aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat2d\r\n *\r\n * @param {mat2d} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[1] * a[2];\n}\n/**\r\n * Multiplies two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  out[4] = a0 * b4 + a2 * b5 + a4;\n  out[5] = a1 * b4 + a3 * b5 + a5;\n  return out;\n}\n/**\r\n * Rotates a mat2d by the given angle\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\r\n * Scales the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to translate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat2d} out\r\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\r\n * Translates the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to translate\r\n * @param {vec2} v the vec2 to translate the matrix by\r\n * @returns {mat2d} out\r\n **/\n\nexport function translate(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0;\n  out[1] = a1;\n  out[2] = a2;\n  out[3] = a3;\n  out[4] = a0 * v0 + a2 * v1 + a4;\n  out[5] = a1 * v0 + a3 * v1 + a5;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.scale(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat2d} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.translate(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat2d} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = v[0];\n  out[5] = v[1];\n  return out;\n}\n/**\r\n * Returns a string representation of a mat2d\r\n *\r\n * @param {mat2d} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat2d(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat2d\r\n *\r\n * @param {mat2d} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + 1);\n}\n/**\r\n * Adds two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2d} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  return out;\n}\n/**\r\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2d} out the receiving vector\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2d} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat2d} a The first matrix.\r\n * @param {mat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat2d} a The first matrix.\r\n * @param {mat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5));\n}\n/**\r\n * Alias for {@link mat2d.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat2d.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n;\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as quat from \"./quat.js\";\nimport * as mat4 from \"./mat4.js\";\n/**\r\n * Dual Quaternion<br>\r\n * Format: [real, dual]<br>\r\n * Quaternion format: XYZW<br>\r\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\r\n * @module quat2\r\n */\n\n/**\r\n * Creates a new identity dual quat\r\n *\r\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\r\n */\n\nexport function create() {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    dq[0] = 0;\n    dq[1] = 0;\n    dq[2] = 0;\n    dq[4] = 0;\n    dq[5] = 0;\n    dq[6] = 0;\n    dq[7] = 0;\n  }\n\n  dq[3] = 1;\n  return dq;\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat2} a dual quaternion to clone\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function clone(a) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = a[0];\n  dq[1] = a[1];\n  dq[2] = a[2];\n  dq[3] = a[3];\n  dq[4] = a[4];\n  dq[5] = a[5];\n  dq[6] = a[6];\n  dq[7] = a[7];\n  return dq;\n}\n/**\r\n * Creates a new dual quat initialized with the given values\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  dq[4] = x2;\n  dq[5] = y2;\n  dq[6] = z2;\n  dq[7] = w2;\n  return dq;\n}\n/**\r\n * Creates a new dual quat from the given values (quat and translation)\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component (translation)\r\n * @param {Number} y2 Y component (translation)\r\n * @param {Number} z2 Z component (translation)\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  var ax = x2 * 0.5,\n      ay = y2 * 0.5,\n      az = z2 * 0.5;\n  dq[4] = ax * w1 + ay * z1 - az * y1;\n  dq[5] = ay * w1 + az * x1 - ax * z1;\n  dq[6] = az * w1 + ax * y1 - ay * x1;\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\n  return dq;\n}\n/**\r\n * Creates a dual quat from a quaternion and a translation\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {quat} q quaternion\r\n * @param {vec3} t tranlation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromRotationTranslation(out, q, t) {\n  var ax = t[0] * 0.5,\n      ay = t[1] * 0.5,\n      az = t[2] * 0.5,\n      bx = q[0],\n      by = q[1],\n      bz = q[2],\n      bw = q[3];\n  out[0] = bx;\n  out[1] = by;\n  out[2] = bz;\n  out[3] = bw;\n  out[4] = ax * bw + ay * bz - az * by;\n  out[5] = ay * bw + az * bx - ax * bz;\n  out[6] = az * bw + ax * by - ay * bx;\n  out[7] = -ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Creates a dual quat from a translation\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {vec3} t translation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromTranslation(out, t) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = t[0] * 0.5;\n  out[5] = t[1] * 0.5;\n  out[6] = t[2] * 0.5;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Creates a dual quat from a quaternion\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {quat} q the quaternion\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromRotation(out, q) {\n  out[0] = q[0];\n  out[1] = q[1];\n  out[2] = q[2];\n  out[3] = q[3];\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Creates a new dual quat from a matrix (4x4)\r\n *\r\n * @param {quat2} out the dual quaternion\r\n * @param {mat4} a the matrix\r\n * @returns {quat2} dual quat receiving operation result\r\n * @function\r\n */\n\nexport function fromMat4(out, a) {\n  //TODO Optimize this\n  var outer = quat.create();\n  mat4.getRotation(outer, a);\n  var t = new glMatrix.ARRAY_TYPE(3);\n  mat4.getTranslation(t, a);\n  fromRotationTranslation(out, outer, t);\n  return out;\n}\n/**\r\n * Copy the values from one dual quat to another\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the source dual quaternion\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\r\n * Set a dual quat to the identity dual quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @returns {quat2} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Set the components of a dual quat to the given values\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\n  out[0] = x1;\n  out[1] = y1;\n  out[2] = z1;\n  out[3] = w1;\n  out[4] = x2;\n  out[5] = y2;\n  out[6] = z2;\n  out[7] = w2;\n  return out;\n}\n/**\r\n * Gets the real part of a dual quat\r\n * @param  {quat} out real part\r\n * @param  {quat2} a Dual Quaternion\r\n * @return {quat} real part\r\n */\n\nexport var getReal = quat.copy;\n/**\r\n * Gets the dual part of a dual quat\r\n * @param  {quat} out dual part\r\n * @param  {quat2} a Dual Quaternion\r\n * @return {quat} dual part\r\n */\n\nexport function getDual(out, a) {\n  out[0] = a[4];\n  out[1] = a[5];\n  out[2] = a[6];\n  out[3] = a[7];\n  return out;\n}\n/**\r\n * Set the real component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat} q a quaternion representing the real part\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport var setReal = quat.copy;\n/**\r\n * Set the dual component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat} q a quaternion representing the dual part\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function setDual(out, q) {\n  out[4] = q[0];\n  out[5] = q[1];\n  out[6] = q[2];\n  out[7] = q[3];\n  return out;\n}\n/**\r\n * Gets the translation of a normalized dual quat\r\n * @param  {vec3} out translation\r\n * @param  {quat2} a Dual Quaternion to be decomposed\r\n * @return {vec3} translation\r\n */\n\nexport function getTranslation(out, a) {\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3];\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  return out;\n}\n/**\r\n * Translates a dual quat by the given vector\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {quat2} out\r\n */\n\nexport function translate(out, a, v) {\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3],\n      bx1 = v[0] * 0.5,\n      by1 = v[1] * 0.5,\n      bz1 = v[2] * 0.5,\n      ax2 = a[4],\n      ay2 = a[5],\n      az2 = a[6],\n      aw2 = a[7];\n  out[0] = ax1;\n  out[1] = ay1;\n  out[2] = az1;\n  out[3] = aw1;\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the X axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateX(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the Y axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateY(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the Z axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateZ(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat by a given quaternion (a * q)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {quat} q quaternion to rotate by\r\n * @returns {quat2} out\r\n */\n\nexport function rotateByQuatAppend(out, a, q) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\n  ax = a[4];\n  ay = a[5];\n  az = a[6];\n  aw = a[7];\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\n  return out;\n}\n/**\r\n * Rotates a dual quat by a given quaternion (q * a)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat} q quaternion to rotate by\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @returns {quat2} out\r\n */\n\nexport function rotateByQuatPrepend(out, q, a) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      bx = a[0],\n      by = a[1],\n      bz = a[2],\n      bw = a[3];\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\n  bx = a[4];\n  by = a[5];\n  bz = a[6];\n  bw = a[7];\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around a given axis. Does the normalisation automatically\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {vec3} axis the axis to rotate around\r\n * @param {Number} rad how far the rotation should be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateAroundAxis(out, a, axis, rad) {\n  //Special case for rad = 0\n  if (Math.abs(rad) < glMatrix.EPSILON) {\n    return copy(out, a);\n  }\n\n  var axisLength = Math.sqrt(axis[0] * axis[0] + axis[1] * axis[1] + axis[2] * axis[2]);\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  var bx = s * axis[0] / axisLength;\n  var by = s * axis[1] / axisLength;\n  var bz = s * axis[2] / axisLength;\n  var bw = Math.cos(rad);\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3];\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Adds two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  return out;\n}\n/**\r\n * Multiplies two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {quat2} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax0 = a[0],\n      ay0 = a[1],\n      az0 = a[2],\n      aw0 = a[3],\n      bx1 = b[4],\n      by1 = b[5],\n      bz1 = b[6],\n      bw1 = b[7],\n      ax1 = a[4],\n      ay1 = a[5],\n      az1 = a[6],\n      aw1 = a[7],\n      bx0 = b[0],\n      by0 = b[1],\n      bz0 = b[2],\n      bw0 = b[3];\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\n  return out;\n}\n/**\r\n * Alias for {@link quat2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a dual quat by a scalar number\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {quat2} a the dual quat to scale\r\n * @param {Number} b amount to scale the dual quat by\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  return out;\n}\n/**\r\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\r\n *\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = quat.dot;\n/**\r\n * Performs a linear interpolation between two dual quats's\r\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var mt = 1 - t;\n  if (dot(a, b) < 0) t = -t;\n  out[0] = a[0] * mt + b[0] * t;\n  out[1] = a[1] * mt + b[1] * t;\n  out[2] = a[2] * mt + b[2] * t;\n  out[3] = a[3] * mt + b[3] * t;\n  out[4] = a[4] * mt + b[4] * t;\n  out[5] = a[5] * mt + b[5] * t;\n  out[6] = a[6] * mt + b[6] * t;\n  out[7] = a[7] * mt + b[7] * t;\n  return out;\n}\n/**\r\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a dual quat to calculate inverse of\r\n * @returns {quat2} out\r\n */\n\nexport function invert(out, a) {\n  var sqlen = squaredLength(a);\n  out[0] = -a[0] / sqlen;\n  out[1] = -a[1] / sqlen;\n  out[2] = -a[2] / sqlen;\n  out[3] = a[3] / sqlen;\n  out[4] = -a[4] / sqlen;\n  out[5] = -a[5] / sqlen;\n  out[6] = -a[6] / sqlen;\n  out[7] = a[7] / sqlen;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a dual quat\r\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat2} a quat to calculate conjugate of\r\n * @returns {quat2} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  out[4] = -a[4];\n  out[5] = -a[5];\n  out[6] = -a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\r\n * Calculates the length of a dual quat\r\n *\r\n * @param {quat2} a dual quat to calculate length of\r\n * @returns {Number} length of a\r\n * @function\r\n */\n\nexport var length = quat.length;\n/**\r\n * Alias for {@link quat2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a dual quat\r\n *\r\n * @param {quat2} a dual quat to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = quat.squaredLength;\n/**\r\n * Alias for {@link quat2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a dual quat\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a dual quaternion to normalize\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function normalize(out, a) {\n  var magnitude = squaredLength(a);\n\n  if (magnitude > 0) {\n    magnitude = Math.sqrt(magnitude);\n    var a0 = a[0] / magnitude;\n    var a1 = a[1] / magnitude;\n    var a2 = a[2] / magnitude;\n    var a3 = a[3] / magnitude;\n    var b0 = a[4];\n    var b1 = a[5];\n    var b2 = a[6];\n    var b3 = a[7];\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\n  }\n\n  return out;\n}\n/**\r\n * Returns a string representation of a dual quatenion\r\n *\r\n * @param {quat2} a dual quaternion to represent as a string\r\n * @returns {String} string representation of the dual quat\r\n */\n\nexport function str(a) {\n  return 'quat2(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ')';\n}\n/**\r\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat2} a the first dual quaternion.\r\n * @param {quat2} b the second dual quaternion.\r\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\n}\n/**\r\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat2} a the first dual quat.\r\n * @param {quat2} b the second dual quat.\r\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\n}","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, c) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(c),\n      cosC = Math.cos(c); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1];\n  var len1 = x1 * x1 + y1 * y1;\n\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n\n  var len2 = x2 * x2 + y2 * y2;\n\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {vec4} result the receiving vector\r\n * @param {vec4} U the first vector\r\n * @param {vec4} V the second vector\r\n * @param {vec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n;\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import {Viewer} from \"../../lib/viewer\";\r\nimport {EnvironmentScene} from \"./scenes/EnvironmentScene\";\r\nimport {ModelScene} from \"./scenes/ModelScene\";\r\nimport {GUIComponent} from \"../../lib/components/gui\";\r\nimport {ECS, IEntity} from \"curbl-ecs\";\r\nimport {CameraComponent, LookAtCameraComponent} from \"../../lib/components/camera\";\r\nimport {TransformComponent} from \"../../lib/components/transform\";\r\nimport {mat4} from \"gl-matrix\";\r\n\r\nconst sampleModels = {\r\n    \"BoxAnimated\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BoxAnimated/glTF/BoxAnimated.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BoxAnimated/glTF/BoxAnimated0.bin\"\r\n    },\r\n    \"RiggedSimple\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/RiggedSimple/glTF/RiggedSimple.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/RiggedSimple/glTF/RiggedSimple0.bin\"\r\n    },\r\n    \"BrainStem\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BrainStem/glTF/BrainStem.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/BrainStem/glTF/BrainStem0.bin\"\r\n    },\r\n    \"WaterBottle\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/WaterBottle/glTF/WaterBottle.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/WaterBottle/glTF/WaterBottle.bin\"\r\n    },\r\n    \"Sponza\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Sponza/glTF/Sponza.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Sponza/glTF/Sponza.bin\"\r\n    },\r\n    \"DamagedHelmet\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/DamagedHelmet/glTF/DamagedHelmet.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/DamagedHelmet/glTF/DamagedHelmet.bin\"\r\n    },\r\n    \"MetalRoughSpheres\": {\r\n        gltfJson: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/MetalRoughSpheres/glTF/MetalRoughSpheres.gltf\",\r\n        gltfBin: \"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/MetalRoughSpheres/glTF/MetalRoughSpheres0.bin\"\r\n    }\r\n};\r\n\r\nexport class Example {\r\n    private camera:IEntity;\r\n    private viewer: Viewer;\r\n    private scene: string;\r\n\r\n    constructor() {\r\n        this.scene = \"DamagedHelmet\";\r\n        this.viewer = new Viewer({width:window.innerWidth, height:window.innerHeight});\r\n        this.viewer.init(()=>this.init());\r\n    }\r\n\r\n    private init() {\r\n        this.createSceneSelector();\r\n        this.createCamera();\r\n\r\n        this.viewer.world.addScene(new EnvironmentScene({name: \"Environment\"}));\r\n\r\n        this.viewer.world.addScene(new ModelScene({\r\n            name: \"ModelScene\",\r\n            gltfJson: sampleModels[this.scene].gltfJson,\r\n            gltfBin: sampleModels[this.scene].gltfBin,\r\n            shader: this.viewer.shader\r\n        }));\r\n\r\n        this.viewer.world.start(\"Environment\");\r\n        this.viewer.world.start(\"ModelScene\");\r\n    }\r\n\r\n    private reloadModelScene() {\r\n        this.viewer.loader.stop();\r\n        this.viewer.world.removeScene(\"ModelScene\");\r\n\r\n        this.viewer.world.addScene(new ModelScene({\r\n            name: \"ModelScene\",\r\n            gltfJson: sampleModels[this.scene].gltfJson,\r\n            gltfBin: sampleModels[this.scene].gltfBin,\r\n            shader: this.viewer.shader\r\n        }));\r\n\r\n        this.viewer.world.start(\"ModelScene\");\r\n    }\r\n\r\n    private createCamera() {\r\n        this.camera = ECS.createEntity();\r\n        this.camera.add(new CameraComponent({\r\n            aspect: (window.innerWidth/window.innerHeight),\r\n            fovy: 45.0 * Math.PI / 180.0,\r\n            near: 0.01,\r\n            far: 100.0\r\n        }));\r\n        this.camera.add(new TransformComponent({\r\n            position: {x:0,y:0,z:4.00},\r\n            rotation: {x:0,y:0,z:0,w:1},\r\n            scale: {x:1,y:1,z:1}\r\n        }));\r\n        this.camera.add(new LookAtCameraComponent());\r\n        ECS.addEntity(this.camera);\r\n\r\n        window.addEventListener('resize', () => this.onResize());\r\n    }\r\n\r\n    private onResize() {\r\n        if(this.camera) {\r\n            mat4.perspective(\r\n                this.camera.get(CameraComponent).projMatrix,\r\n                45.0 * Math.PI / 180.0,\r\n                (window.innerWidth / window.innerHeight),\r\n                0.01,\r\n                100\r\n            );\r\n        }\r\n    }\r\n\r\n    private createSceneSelector() {\r\n        const entity = ECS.createEntity();\r\n        entity.add(new GUIComponent({\r\n            properties: [\r\n                {\r\n                    prop: this,\r\n                    propName: \"scene\",\r\n                    items: Object.keys(sampleModels),\r\n                    onChange: ()=>this.reloadModelScene()\r\n                }\r\n            ]\r\n        }));\r\n        ECS.addEntity(entity);\r\n    }\r\n}","import {Example} from \"./example\";\r\n\r\nwindow.onload = () => {new Example();};","import {\r\n    WorldScene,\r\n    CubemapLoader,\r\n    GLOBAL_TEXTURES,\r\n    GL_INTERNALFORMAT,\r\n    GL_TYPES,\r\n    MAG_FILTER,\r\n    MIN_FILTER,\r\n    TEXTURE_WRAP,\r\n    LightComponent,\r\n    GUIComponent,\r\n    TextureLoader\r\n} from \"../../../lib\";\r\nimport {ECS} from \"curbl-ecs\";\r\n\r\nexport class EnvironmentScene extends WorldScene {\r\n    preload(): void {\r\n        this.loader.get(CubemapLoader).add(GLOBAL_TEXTURES.SKYBOX,\r\n            [{\r\n                right:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/environment/environment_right_0.jpg',\r\n                left:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/environment/environment_left_0.jpg',\r\n                top:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/environment/environment_top_0.jpg',\r\n                bottom:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/environment/environment_bottom_0.jpg',\r\n                front:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/environment/environment_front_0.jpg',\r\n                back:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/environment/environment_back_0.jpg'\r\n            }]\r\n        );\r\n\r\n        this.loader.get(CubemapLoader).add(GLOBAL_TEXTURES.DIFFUSE_ENVIRONMENT,\r\n            [{\r\n                right:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/diffuse/diffuse_right_0.jpg',\r\n                left:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/diffuse/diffuse_left_0.jpg',\r\n                top:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/diffuse/diffuse_top_0.jpg',\r\n                bottom:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/diffuse/diffuse_bottom_0.jpg',\r\n                front:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/diffuse/diffuse_front_0.jpg',\r\n                back:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/diffuse/diffuse_back_0.jpg'\r\n            }],\r\n            {\r\n                premultiplyAlpha: false,\r\n                internalFormat: GL_INTERNALFORMAT.SRGB8_ALPHA8,\r\n                format: GL_INTERNALFORMAT.RGBA,\r\n                type:GL_TYPES.UNSIGNED_BYTE\r\n            }\r\n        );\r\n\r\n        let specular_map = [];\r\n        for(let i=0; i < 10; i++){\r\n            specular_map.push({\r\n                right:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/specular/specular_right_'+i+'.jpg',\r\n                left:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/specular/specular_left_'+i+'.jpg',\r\n                top:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/specular/specular_top_'+i+'.jpg',\r\n                bottom:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/specular/specular_bottom_'+i+'.jpg',\r\n                front:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/specular/specular_front_'+i+'.jpg',\r\n                back:'https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/specular/specular_back_'+i+'.jpg'\r\n            });\r\n        }\r\n\r\n        this.loader.get(CubemapLoader).add(GLOBAL_TEXTURES.SPECULAR_ENVIRONMENT, specular_map, {\r\n            premultiplyAlpha: false,\r\n            internalFormat: GL_INTERNALFORMAT.SRGB8_ALPHA8,\r\n            format: GL_INTERNALFORMAT.RGBA,\r\n            type:GL_TYPES.UNSIGNED_BYTE\r\n        });\r\n\r\n        this.loader.get(TextureLoader).add(\r\n            GLOBAL_TEXTURES.BRDF_LUT,\r\n            \"https://raw.githubusercontent.com/Xan0C/curbl-gltf-viewer/master/assets/ibl/brdfLUT.png\",\r\n            {\r\n                premultiplyAlpha: false,\r\n                internalFormat: GL_INTERNALFORMAT.SRGB8_ALPHA8,\r\n                format: GL_INTERNALFORMAT.RGBA,\r\n                type:GL_TYPES.UNSIGNED_BYTE,\r\n                sampler: {\r\n                    magFilter:MAG_FILTER.LINEAR,\r\n                    minFilter:MIN_FILTER.LINEAR,\r\n                    wrapS:TEXTURE_WRAP.CLAMP_TO_EDGE,\r\n                    wrapT:TEXTURE_WRAP.CLAMP_TO_EDGE\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    create(): void {\r\n        const entity = ECS.createEntity();\r\n        const lightComponent = new LightComponent({\r\n            lightColor: [255, 255, 255],\r\n            lightScale: 1.0,\r\n            lightRotation: 75,\r\n            lightPitch: 40\r\n        });\r\n        entity.add(lightComponent);\r\n        entity.add(new GUIComponent({\r\n            folder: \"Directional Light\",\r\n            properties: [\r\n                {\r\n                    prop: lightComponent,\r\n                    propName: \"lightColor\",\r\n                    isColor: true,\r\n                    onChange: ()=>lightComponent.updateLight()\r\n                },\r\n                {\r\n                    prop: lightComponent,\r\n                    propName: \"lightScale\",\r\n                    min: 0,\r\n                    max: 10,\r\n                    onChange: ()=>lightComponent.updateLight()\r\n                },\r\n                {\r\n                    prop: lightComponent,\r\n                    propName: \"lightRotation\",\r\n                    min: 0,\r\n                    max: 360,\r\n                    onChange: ()=>lightComponent.updateLight()\r\n                },\r\n                {\r\n                    prop: lightComponent,\r\n                    propName: \"lightPitch\",\r\n                    min: -90,\r\n                    max: 90,\r\n                    onChange: ()=>lightComponent.updateLight()\r\n                }\r\n            ]\r\n        }));\r\n        this.add(entity);\r\n    }\r\n\r\n    shutdown(): void {\r\n    }\r\n\r\n    update(): void {\r\n    }\r\n}","import {\r\n    AnimationComponent,\r\n    CACHE_TYPE,\r\n    GLTFLoader,\r\n    KhronosPbrShader, Model,\r\n    SceneComponent,\r\n    SceneConfig,\r\n    TransformComponent,\r\n    WorldScene\r\n} from \"../../../lib\";\r\nimport {ECS} from \"curbl-ecs\";\r\n\r\nexport interface ModelSceneConfig extends SceneConfig {\r\n    gltfJson: string;\r\n    gltfBin: string;\r\n    shader: KhronosPbrShader\r\n}\r\n\r\nexport class ModelScene extends WorldScene {\r\n\r\n    private gltfJson:string;\r\n    private gltfBin:string;\r\n    private shader:KhronosPbrShader;\r\n\r\n    constructor(config: ModelSceneConfig) {\r\n        super(config);\r\n        this.gltfJson = config.gltfJson;\r\n        this.gltfBin = config.gltfBin;\r\n        this.shader = config.shader;\r\n    }\r\n\r\n    preload(): void {\r\n        this.loader.get(GLTFLoader).add(\r\n            \"ExampleScene\",\r\n            this.gltfJson,\r\n            this.gltfBin\r\n        );\r\n    }\r\n\r\n    create(): void {\r\n        const sceneObj = this.cache.get<Model>(CACHE_TYPE.MODEL, \"ExampleScene\");\r\n\r\n        this.shader.unload();\r\n        this.shader.initializeDefines(sceneObj.meshes[0]);\r\n        this.shader.upload();\r\n\r\n        const scene = ECS.createEntity();\r\n        scene.add(new SceneComponent({key: \"ExampleScene\"}));\r\n        scene.add(new TransformComponent({\r\n            position: {x:0, y:0, z:0},\r\n            rotation: {x:0, y:0, z:0, w:1},\r\n            scale: {x:1, y:1, z:1}\r\n        }));\r\n        if(sceneObj.animations[0]) {\r\n            const animationKey = sceneObj.animations[0].name;\r\n            scene.add(new AnimationComponent({key: animationKey}));\r\n        }\r\n        this.add(scene);\r\n    }\r\n\r\n    shutdown(): void {\r\n    }\r\n\r\n    update(): void {\r\n    }\r\n\r\n}"],"sourceRoot":""}